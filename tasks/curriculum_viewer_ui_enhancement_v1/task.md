---
workflow: code
graph_profile: curriculum_viewer_v1
---

# Curriculum Viewer — UI Enhancement (수학교육 서비스 UI 개선)

## Goal
사용자의 학습 경험을 개선하기 위해 **전체 학습 현황 대시보드**, **진행 상태 시각화**, **학습 리포트**, **문제별 피드백/해설**, **네비게이션 개선** 등의 UI 기능을 구현한다.

---

## Current Status
- 로그인/로그아웃 기능 존재 (localStorage 기반)
- `/learn/:nodeId` 학습 페이지 존재 (일괄 제출 방식)
- `/tree`, `/graph` 페이지 존재
- `/health` 페이지는 데이터 검증용으로 구현됨 (학습자용 아님)
- 학습 결과: `localStorage`에 `curriculum-viewer:learn:lastResult:{nodeId}` 형식으로 저장
- 문제 데이터: `curriculum-viewer/public/data/problems_v1.json`

---

## Requirements

### EPIC UI-1: 전체 학습 현황 대시보드 (P0 - 높음)

> **목적**: 사용자가 전체 학습 진행 상황을 한눈에 볼 수 있는 대시보드 제공

#### UI-1-1 대시보드 페이지/라우트 구현
- [ ] `DashboardPage.tsx` 컴포넌트 생성
- [ ] `/dashboard` 라우트 추가 (또는 `/` 루트 대체 검토)
- [ ] 헤더, 요약 카드, 차트 등 초기 레이아웃 구현
- **DoD**: 대시보드 페이지가 라우팅되고 기본 레이아웃이 표시됨

#### UI-1-2 데이터 집계 로직 개발
- [ ] 모든 성취기준 노드 개수 대비 완료된 노드 수 계산 함수 구현
- [ ] localStorage의 모든 `lastResult` 데이터 스캔하여 통계 생성
- [ ] 완료 기준 정의: 정답률 100% (또는 설정 가능한 임계값)
- **DoD**: `getProgressStats()` 함수가 전체 진행률을 정확히 반환

#### UI-1-3 영역별 통계 계산
- [ ] 커리큘럼 데이터 구조 활용하여 영역(domain)별 노드 그룹핑
- [ ] 각 영역별 완료된 문제 수/전체 문제 수, 평균 정답률 계산
- [ ] 대시보드에 영역별 통계 표/차트로 표시
- **DoD**: 영역별 진행률이 정확히 계산되고 표시됨

#### UI-1-4 추가 지표 표시
- [ ] 총 푼 문제 수, 평균 정답률, 최근 학습 일자 산출
- [ ] 대시보드 상단에 요약 카드로 표시
- **DoD**: "총 푼 문제: 120개, 평균 정답률: 85%" 등 표시

#### UI-1-5 시각화 컴포넌트 구현
- [ ] 전체 진행률 게이지/Progress Bar 구현
- [ ] 영역별 막대/원형 차트 구현 (Recharts 또는 SVG)
- **DoD**: 진행률과 통계가 직관적인 차트로 표시됨

#### UI-1-6 반응형 및 UX
- [ ] 다양한 화면 크기에서 깔끔하게 보이도록 반응형 디자인 적용
- [ ] 주요 정보는 한 눈에 들어오도록 배치
- **DoD**: 모바일/태블릿/데스크톱에서 레이아웃이 적절히 조정됨

---

### EPIC UI-2: 커리큘럼 트리/그래프 상 학습 진행 상태 시각화 (P0 - 높음)

> **목적**: 트리/그래프에서 각 노드의 완료/진행중/미완료 상태를 시각적으로 표시

#### UI-2-1 상태 기준 정의
- [ ] 완료/진행중/미완료 판정 규칙 수립
  - 완료: 해당 노드의 모든 문제 정답
  - 진행중: 일부 문제만 풀었거나 부분 정답
  - 미완료: 시도 안 함
- **DoD**: 상태 판정 로직이 명확히 정의되고 문서화됨

#### UI-2-2 시각 디자인 결정
- [ ] 상태별 색상 팔레트 결정
  - 완료: 초록색 (#10b981)
  - 진행중: 노란색 (#f59e0b)
  - 미완료: 회색 (#9ca3af)
- [ ] 아이콘 선정: ✔ (완료), ● (진행중), ○ (미완료)
- **DoD**: 디자인 스펙이 확정됨

#### UI-2-3 데이터 수집 로직
- [ ] 사용자 진행 상태 데이터를 불러오는 함수 구현
- [ ] `Map<nodeId, status>` 형태로 상태 구성
- [ ] 앱 로드 시 또는 페이지 진입 시 계산
- **DoD**: `getNodeStatusMap()` 함수가 모든 노드 상태 반환

#### UI-2-4 트리 뷰 구현
- [ ] 트리 노드 렌더링 시 상태 아이콘 추가
- [ ] 상태별 CSS 클래스 적용 (`.complete`, `.in-progress`, `.not-started`)
- [ ] 노드 텍스트 색상 또는 배경 변경
- **DoD**: 트리 뷰에서 각 노드의 상태가 시각적으로 구분됨

#### UI-2-5 그래프 뷰 구현
- [ ] React Flow 노드에 상태 포함
- [ ] 노드 배경색/테두리 색상 조건부 스타일 적용
- [ ] 노드 라벨에 상태 아이콘 삽입
- **DoD**: 그래프 뷰에서 각 노드의 상태가 시각적으로 구분됨

#### UI-2-6 범례 추가
- [ ] 그래프 화면 하단에 상태 범례 추가
- [ ] 트리 뷰에도 범례 또는 툴팁 제공
- **DoD**: 사용자가 색상/아이콘의 의미를 이해할 수 있음

#### UI-2-7 동적 업데이트
- [ ] 학습 완료 후 트리/그래프 뷰 상태 자동 갱신
- [ ] 상태 데이터를 Context로 관리하거나 learn 완료 시 갱신 로직 추가
- **DoD**: `/learn`에서 학습 완료 후 `/tree`로 돌아오면 상태가 업데이트됨

---

### EPIC UI-3: 학습 리포트 페이지 리디자인 (P1 - 중간)

> **목적**: 기존 `/health` 페이지를 학습자용 리포트 페이지로 전환

#### UI-3-1 기존 화면 정리
- [ ] `/health` 페이지의 데이터 검증 테이블 제거 또는 주석 처리
- [ ] 개발자용 기능은 별도 경로로 분리 검토
- **DoD**: 사용자에게 노출되는 페이지에서 검증 기능이 제거됨

#### UI-3-2 UI 재설계
- [ ] 학습 리포트 페이지 와이어프레임 작성
- [ ] 상단: 전체 요약, 하단: 영역별 분석 섹션 구획
- [ ] 약점 영역은 색상/아이콘으로 강조
- **DoD**: 리포트 페이지 레이아웃이 확정됨

#### UI-3-3 데이터 수집/분석 로직
- [ ] 모든 성취기준 노드별 결과를 불러와 통계 객체 생성
- [ ] 영역별 정답률 계산
- [ ] 임계값 이하(예: 정답률 < 60%) 영역을 약점으로 분류
- **DoD**: 분석 데이터가 정확히 생성됨

#### UI-3-4 약점 진단 구현
- [ ] 낮은 성취도 상위 N개 영역 선별
- [ ] 경고 리스트로 표시 (오답률, 미완료 수치 포함)
- **DoD**: 약점 영역이 명확히 표시됨

#### UI-3-5 추천 콘텐츠 생성
- [ ] 약점 항목에 대응하는 학습 제안 생성
- [ ] 해당 영역의 기초 성취기준 링크 버튼 제공
- **DoD**: 사용자가 약점 영역에 대한 학습 방향을 안내받음

#### UI-3-6 성과 요약 섹션 구현
- [ ] 상단에 전체 학습 성과 요약 표시
- [ ] 강점 영역도 아이콘(✅)으로 표시
- **DoD**: 사용자에게 성취감 제공

---

### EPIC UI-4: 학습 페이지 문제별 피드백 및 해설 제공 (P1 - 중간)

> **목적**: 오답에 대한 해설과 다음 학습 방향 제시로 학습 효율 향상

#### UI-4-1 문제 데이터 확장
- [ ] `problems_v1.json`에 `explanation` 필드 추가
- [ ] 각 문제별 상세 해설 내용 작성/확보
- **DoD**: 문제 데이터에 해설 필드가 포함됨

#### UI-4-2 해설 콘텐츠 준비
- [ ] 기존 문제은행 모든 문항에 해설 준비
- [ ] 수학 전문 해설 검토 후 데이터 반영
- **DoD**: 최소 MVP 문항에 대해 해설이 준비됨

#### UI-4-3 LearnPage UI 수정
- [ ] 채점 완료 후 문제 카드에 해설 섹션 추가
- [ ] 아코디언 형태 또는 펼쳐진 텍스트 블록으로 설계
- [ ] 오답 시 자동 펼치기, 정답 시 "해설 보기" 버튼
- **DoD**: 해설이 문제 카드 아래에 표시됨

#### UI-4-4 정답/오답 표시 강화
- [ ] 정답 문제: 녹색 틀/배경
- [ ] 오답 문제: 빨간색 테두리/배경
- [ ] CSS 클래스: `.correct`, `.incorrect`
- **DoD**: 시각적 구분이 명확함

#### UI-4-5 다음 학습 추천 로직
- [ ] 현재 노드의 후속 노드 파악 로직 구현
- [ ] 채점 완료 화면에 "다음 학습: <제목> →" 버튼 노출
- [ ] 오답 많을 시 선행 복습 추천 분기 로직
- **DoD**: 다음 학습으로 자연스럽게 이동 가능

#### UI-4-6 Retry 프로세스 확인
- [ ] "다시 풀기" 기능과 해설 기능 연동 검증
- [ ] 다시 풀기 시 해설 숨김, 입력값 초기화 확인
- **DoD**: 재시도 흐름이 정상 동작

---

### EPIC UI-5: 학습 이력, 북마크, 목표/리워드 등 UX 확장 기능 (P2 - 낮음)

> **목적**: 학습 경험 풍부화 및 사용자 동기부여 (장기 개선)

#### UI-5-1 학습 이력 저장 구현
- [ ] 학습 완료/채점 시점에 기록 누적 기능 추가
- [ ] localStorage에 `curriculum-viewer:learn:history` 키로 누적 저장
- [ ] 간단한 이력 페이지 또는 대시보드 섹션 구현
- **DoD**: 학습 기록이 누적 저장되고 조회 가능

#### UI-5-2 북마크 기능 개발
- [ ] 성취기준/문제에 북마크 버튼(★) 추가
- [ ] 북마크 클릭 시 리스트에 추가/제거 로직 구현
- [ ] 북마크 목록 UI 구현 (대시보드 섹션 또는 별도 페이지)
- **DoD**: 북마크 추가/제거/조회 가능

#### UI-5-3 학습 목표 설정 기능
- [ ] 대시보드에 목표 생성/편집 UI 구현
- [ ] 목표 저장/불러오기 로직 구현
- [ ] 목표 진행 상황 표시 섹션 추가
- **DoD**: 목표 설정 및 진행률 표시 가능

#### UI-5-4 리워드/배지 시스템 구축
- [ ] 업적 정의 (조건, 보상 리스트)
- [ ] 달성 조건 검사 로직 구현
- [ ] 획득한 배지 저장 및 UI 표시
- [ ] 축하 연출 (모달/토스트)
- **DoD**: 배지 획득 시 축하 메시지 표시

---

### EPIC UI-6: 네비게이션 메뉴 개선 (P1 - 중간)

> **목적**: 대시보드/리포트 페이지로의 접근성 향상

#### UI-6-1 메뉴 항목 추가
- [ ] 네비게이션 컴포넌트에 "대시보드" 메뉴 링크 추가
- [ ] 적절한 아이콘 선정 (예: 📊)
- **DoD**: 대시보드 메뉴가 표시됨

#### UI-6-2 리포트 메뉴 갱신
- [ ] 기존 "Health" 메뉴를 "학습 리포트"로 이름 변경
- [ ] 링크 대상을 새 리포트 페이지 경로로 변경
- [ ] 개발용 메뉴 제거
- **DoD**: 사용자 친화적인 메뉴명으로 표시됨

#### UI-6-3 권한/표시 조건
- [ ] 비로그인 시 대시보드/리포트 메뉴 숨김 또는 로그인 리디렉션
- [ ] 기존 Tree 잠금 로직과 통일성 있게 처리
- **DoD**: 로그인 상태에 따라 메뉴 표시가 달라짐

#### UI-6-4 메뉴 레이아웃 조정
- [ ] 데스크톱 뷰 레이아웃 정렬 확인
- [ ] 모바일 뷰 메뉴 CSS 조정
- [ ] 현재 페이지 메뉴 탭 하이라이트 적용
- **DoD**: 다양한 화면 크기에서 메뉴 UI가 깨지지 않음

---

## Out of Scope
- 서버 기반 사용자 관리/권한 (진짜 보안)
- 대규모 문제 은행 구축/품질 관리
- AI 기반 진단/추천 시스템
- Author Mode (그래프 편집 기능)
- 백엔드 API 신규 개발 (프론트엔드 중심, localStorage 활용)

---

## Implementation Notes

### 수정 중심 파일
- `curriculum-viewer/src/pages/DashboardPage.tsx` (신규)
- `curriculum-viewer/src/pages/LearnPage.tsx`
- `curriculum-viewer/src/pages/TreePage.tsx`
- `curriculum-viewer/src/pages/GraphPage.tsx`
- `curriculum-viewer/src/pages/HealthPage.tsx` → `ReportPage.tsx`
- `curriculum-viewer/src/components/Header.tsx` 또는 네비게이션 컴포넌트
- `curriculum-viewer/public/data/problems_v1.json` (explanation 필드 추가)

### 데이터 구조
- localStorage 키: `curriculum-viewer:learn:lastResult:{nodeId}`
- 통계 계산은 프론트엔드에서 수행 (장기적으로 백엔드 API 이전 검토)

### 라이브러리 검토
- 차트: Recharts (권장) 또는 간단한 SVG/CSS
- 상태 관리: React Context 또는 기존 구조 활용

---

## Verification (완료 조건)

### 대시보드 (UI-1)
- [ ] `/dashboard` 접속 시 전체 진행률 게이지 표시
- [ ] 영역별 학습 현황 차트 표시
- [ ] 총 푼 문제 수, 평균 정답률 표시
- [ ] 반응형 레이아웃 동작

### 진행 상태 시각화 (UI-2)
- [ ] `/tree`에서 완료/진행중/미완료 노드가 색상으로 구분됨
- [ ] `/graph`에서 노드 상태가 시각적으로 표시됨
- [ ] 범례가 표시됨
- [ ] 학습 완료 후 상태가 즉시 업데이트됨

### 학습 리포트 (UI-3)
- [ ] `/health` 또는 `/report`에서 학습 통계 표시
- [ ] 약점 영역이 경고로 표시됨
- [ ] 추천 학습 링크 제공

### 문제별 피드백 (UI-4)
- [ ] 오답 문제에 해설이 표시됨
- [ ] 정답/오답이 색상으로 구분됨
- [ ] 다음 학습 추천 버튼 표시

### 네비게이션 (UI-6)
- [ ] 상단 메뉴에 "대시보드" 항목 표시
- [ ] 로그인 상태에 따라 메뉴 표시 조건 동작
- [ ] 메뉴 클릭 시 올바른 페이지로 이동

### 품질
- [ ] `npm test` 통과
- [ ] `npm run build` 통과

---

## Priority Summary

| 우선순위 | EPIC | 설명 |
|---------|------|------|
| P0 (높음) | UI-1 | 전체 학습 현황 대시보드 |
| P0 (높음) | UI-2 | 트리/그래프 진행 상태 시각화 |
| P1 (중간) | UI-3 | 학습 리포트 페이지 리디자인 |
| P1 (중간) | UI-4 | 문제별 피드백 및 해설 |
| P1 (중간) | UI-6 | 네비게이션 메뉴 개선 |
| P2 (낮음) | UI-5 | 학습 이력, 북마크, 목표/리워드 (장기) |
