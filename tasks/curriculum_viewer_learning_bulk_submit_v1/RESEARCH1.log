
============================================================
[2026-01-08 09:37:53] RESEARCH1 (req_id: 216a78baad)
============================================================
로 고정하지 못
  하면 조건 누락/중복으로 연결 | 중 |
  |11| COMB_ORDER_IGNORED_REASON(왜 r!로 나누는가) | ‘중복 제거’ 이유가 없
  으면 nPr/r! 유도와 조합 공식이 암기 점프로 변함 | 높음 |
  |12| COMB_FROM_PERM_DIVIDE(nPr/r! 유도) | 조합 공식 이전에 유도 절차가
  없으면 전이가 과격해짐 | 중 |
  |13| CHOOSE_THEN_ARRANGE(선택 후 배열: nPr=nCr·r!) | 복합 카운팅(선택×배
  열)에서 구조 분해가 없으면 경로 선택이 불안정 | 중 |
  |14| SYSTEMATIC_LISTING_BASIC(체계적 나열) | 표본공간 구성의 기본 절차가
  없으면 분모(전체) 고정이 흔들림 | 높음 |
  |15| STEP_SAMPLE_SPACE_BUILD(표본공간 구성 단계) | “전체(분모) 고정” 중
  간 단계가 없으면 고전확률 설정에서 분모 오류 반복 | 높음 |
  |16| SET_NOTATION_BASICS(집합 기초 기호) | 사건/연산을 집합 언어로 고정
  하는 전제가 없으면 조건을 수식화하기 어려움 | 높음 |
  |17| EVENT_OPERATION_EXPRESSION(문장→집합식) | 문장을 A∪B/A∩B/A^c로 고정
  하지 못하면 포함배제/여사건에서 항 매핑·부호 실수 증가 | 높음 |
  |18| DISJOINT_EVENTS(서로소 사건 판별) | “서로소면 그냥 더함” 조건이 약
  하면 중복 합산/누락이 빈발 | 중 |
  |19| CHECK_DOUBLE_COUNTING(중복계수 점검) | 겹침(중복) 감지가 약하면 포
  함배제에서 부호·항 실수 빈발 | 중 |
  |20| INCL_EXCL_2SET_MEANING(2집합 포함배제 의미) | “왜 교집합을 빼는가
  (중복 보정)” 의미 없이 공식만 주면 오용/암기 위험 | 높음 |

  ### 2. 과잉 난이도/불필요 선행 (최소 5개)

  | # | 개념명 | 과잉 이유 | 조치 제안 |
  |---|--------|----------|----------|
  | 1 | 중복순열/같은 것이 있는 순열 | 분류/중복 처리까지 요구해 기초(자리
  채우기)에서 과잉 | 범위외/선택 심화 |
  | 2 | 원순열(원배치) | 회전동치 등 추가 규칙이 필요해 초기 학습에 과잉 |
  별도 심화로 이동 |
  | 3 | 중복조합(중복허용 조합) | 기초 조합(부분집합 선택) 정착 전에는 해
  석/공식 선택 부담이 큼 | 별도 심화로 분리 |
  | 4 | 3집합 이상 포함배제 일반식 | 2집합 의미 정착 전에는 기호/계산 부담
  과도 | 기본은 2집합으로 제한 |
  | 5 | 조건부확률 | 분모 재정의/사건 분할이 필요해 TS_COMB_PROB 기초에서
  인지부하가 큼 | 별도 심화 단원으로 분리 |
  | 6 | 베이즈 정리 | 조건부확률+역확률까지 요구하는 고난도 전이 | 범위외/
  선택 심화 |
  | 7 | 확률변수/기댓값/분산/분포 | 사건 확률에서 분포/통계로 축이 바뀌는
  별도 영역 | 별도 보스/단원 분리 |

  ### 3. 학습 순서상 위험한 점프 (최소 5개)

  | # | From → To | 점프 이유 | 브릿지 제안 |
  |---|-----------|----------|------------|
  | 1 | COUNT_MUL_RULE_MEANING → STEP_PERM_DERIVE | 단계 곱에서 바로 유도
  단계로 가면 ‘자리 의미/표현 전환’이 비어 유도가 절차 암기로 됨 |
  SLOT_DIAGRAM + PERM_AS_FILLING_SLOTS + PERM_PRODUCT_FORM |
  | 2 | PERM_PRODUCT_FORM → STEP_PERM_DERIVE | 곱 형태에서 팩토리얼로의 전
  개/경계(0!)가 없으면 유도·검산이 불안정 | FACTORIAL_EXPANSION +
  FACTORIAL_ZERO_MEANING |
  | 3 | COMB_AS_SUBSET → STEP_COMB_DERIVE | “왜 r!로 나누는가”가 없으면 조
  합 유도가 암기 점프로 변함 | COMB_ORDER_IGNORED_REASON +
  COMB_FROM_PERM_DIVIDE |
  | 4 | ORDER_SENSITIVE_CHECK → STEP_COMB_DERIVE | 순서 게이트만으로는 “선
  택=부분집합”과 “r개 입력”이 비어 경로 선택이 흔들림 | COMB_AS_SUBSET +
  COMB_AS_CHOOSE_R |
  | 5 | SYSTEMATIC_LISTING_BASIC → STEP_PROB_SETUP | 나열에서 곧바로 확률
  설정으로 가면 분모(전체) 고정이 약해 분모 오류 반복 |
  STEP_SAMPLE_SPACE_BUILD |
  | 6 | SET_NOTATION_BASICS → STEP_INCL_EXCL_2SET | 집합 기호를 알아도 문
  장→집합식→겹침 판정이 없으면 포함배제가 공식 점프로 됨 |
  EVENT_OPERATION_EXPRESSION + DISJOINT_OR_OVERLAP_DECISION +
  STEP_EVENT_OPS_INCL_EXCL |
  | 7 | INCL_EXCL_2SET_MEANING → STEP_INCL_EXCL_2SET | 의미에서 바로 단계
  완성으로 가면 항 매핑→대입→계산 실행이 비어 실수가 증가 |
  APPLY_INCL_EXCL_2SET |

  ## Graph Patch JSON

  {
    "researcher": "R1",
    "scope": "TS_COMB_PROB",
    "add_nodes": [
      { "id": "COUNT_MUL_RULE_MEANING", "type": "micro", "name_ko": "곱셈
  원리 의미(단계 곱)", "domain": "DA", "rep": "C", "confidence": 0.83 },
      { "id": "COUNT_ADD_RULE_MEANING", "type": "micro", "name_ko": "덧셈
  원리 의미(서로소 합)", "domain": "DA", "rep": "C", "confidence": 0.8 },
      { "id": "SLOT_DIAGRAM", "type": "micro", "name_ko": "자리/슬롯 도식
  화", "domain": "DA", "rep": "P", "confidence": 0.76 },
      { "id": "PERM_AS_FILLING_SLOTS", "type": "micro", "name_ko": "순열
  의미(자리 채우기)", "domain": "DA", "rep": "C", "confidence": 0.78 },
      { "id": "PERM_PRODUCT_FORM", "type": "micro", "name_ko": "nPr을 곱의
  형태로 표현", "domain": "DA", "rep": "P", "confidence": 0.74 },
      { "id": "FACTORIAL_EXPANSION", "type": "micro", "name_ko": "팩토리얼
  전개 n!=n*(n-1)*...", "domain": "DA", "rep": "P", "confidence": 0.82 },
      { "id": "FACTORIAL_ZERO_MEANING", "type": "micro", "name_ko": "0! 의
  미 해석(경계 사례)", "domain": "DA", "rep": "A", "confidence": 0.74 },
      { "id": "FACTORIAL_CANCELLATION", "type": "micro", "name_ko": "팩토
  리얼 약분", "domain": "DA", "rep": "P", "confidence": 0.78 },
      { "id": "STEP_PERM_DERIVE", "type": "step", "name_ko": "순열 공식 유
  도 단계", "domain": "DA", "rep": "C", "confidence": 0.74 },
      { "id": "ORDER_SENSITIVE_CHECK", "type": "micro", "name_ko": "순서
  민감 판단(순열/조합 분기)", "domain": "DA", "rep": "C", "confidence":
  0.76 },
      { "id": "COMB_AS_SUBSET", "type": "micro", "name_ko": "조합 의미(부
  분집합 선택)", "domain": "DA", "rep": "C", "confidence": 0.8 },
      { "id": "COMB_AS_CHOOSE_R", "type": "micro", "name_ko": "r개 선택 상
  황 해석", "domain": "DA", "rep": "C", "confidence": 0.75 },
      { "id": "COMB_ORDER_IGNORED_REASON", "type": "micro", "name_ko": "조
  합에서 순서 중복을 r!로 나누는 이유", "domain": "DA", "rep": "C",
  "confidence": 0.8 },
      { "id": "COMB_FROM_PERM_DIVIDE", "type": "micro", "name_ko": "nPr/r!
  로 nCr을 유도", "domain": "DA", "rep": "P", "confidence": 0.74 },
      { "id": "CHOOSE_THEN_ARRANGE", "type": "micro", "name_ko": "선택 후
  배열( nPr = nCr·r! ) 구조", "domain": "DA", "rep": "C", "confidence":
  0.72 },
      { "id": "STEP_COMB_DERIVE", "type": "step", "name_ko": "조합 공식 유
  도 단계", "domain": "DA", "rep": "C", "confidence": 0.74 },
      { "id": "SYSTEMATIC_LISTING_BASIC", "type": "micro", "name_ko": "체
  계적 나열 기초", "domain": "DA", "rep": "P", "confidence": 0.78 },
      { "id": "TREE_DIAGRAM_BASIC", "type": "micro", "name_ko": "트리 다이
  어그램으로 경우를 표현", "domain": "DA", "rep": "P", "confidence":
  0.66 },
      { "id": "SET_NOTATION_BASICS", "type": "micro", "name_ko": "집합 기
  초(원소/부분집합/기호)", "domain": "DA", "rep": "C", "confidence":
  0.78 },
      { "id": "SAMPLE_SPACE_AS_SET", "type": "micro", "name_ko": "표본공간
  =집합", "domain": "DA", "rep": "C", "confidence": 0.8 },
      { "id": "EVENT_AS_SUBSET", "type": "micro", "name_ko": "사건=부분집
  합", "domain": "DA", "rep": "C", "confidence": 0.8 },
      { "id": "STEP_SAMPLE_SPACE_BUILD", "type": "step", "name_ko": "표본
  공간 구성 단계(빠짐/중복 점검)", "domain": "DA", "rep": "C",
  "confidence": 0.75 },
      { "id": "PROB_AS_RATIO", "type": "micro", "name_ko": "확률=비율(A/
  S)", "domain": "DA", "rep": "A", "confidence": 0.76 },
      { "id": "CLASSICAL_PROB_EQUIPROBABLE_CHECK", "type": "micro",
  "name_ko": "고전확률 등확률 전제 확인", "domain": "DA", "rep": "C",
  "confidence": 0.77 },
      { "id": "EQUIPROBABLE_DECISION", "type": "micro", "name_ko": "등확률
  여부 게이트(Yes/No 분기)", "domain": "DA", "rep": "C", "confidence":
  0.74 },
      { "id": "COUNT_FAVORABLE_TOTAL", "type": "micro", "name_ko": "유리/
  전체 경우의 수 분리 카운팅(A/S)", "domain": "DA", "rep": "P",
  "confidence": 0.77 },
      { "id": "STEP_PROB_SETUP", "type": "step", "name_ko": "고전확률 설정
  단계(전체→사건→전제→A/S)", "domain": "DA", "rep": "C", "confidence":
  0.76 },
      { "id": "EVENT_OPERATION_EXPRESSION", "type": "micro", "name_ko":
  "사건 연산을 집합식으로 표현(문장→A∪B/A∩B/A^c)", "domain": "DA", "rep":
  "P", "confidence": 0.76 },
      { "id": "INTERSECTION_UNION_MEANING", "type": "micro", "name_ko":
  "교집합/합집합 의미(∩/∪)", "domain": "DA", "rep": "C", "confidence":
  0.76 },
      { "id": "CHECK_DOUBLE_COUNTING", "type": "micro", "name_ko": "중복계
  수(겹침) 점검", "domain": "DA", "rep": "C", "confidence": 0.74 },
      { "id": "DISJOINT_EVENTS", "type": "micro", "name_ko": "서로소 사건
  (겹치지 않음) 판별", "domain": "DA", "rep": "C", "confidence": 0.74 },
      { "id": "VENN_DIAGRAM_2SET", "type": "micro", "name_ko": "벤 다이어
  그램(2집합)", "domain": "DA", "rep": "P", "confidence": 0.74 },
      { "id": "DISJOINT_OR_OVERLAP_DECISION", "type": "micro", "name_ko":
  "서로소/겹침 판정 게이트", "domain": "DA", "rep": "C", "confidence":
  0.74 },
      { "id": "STEP_EVENT_OPS_INCL_EXCL", "type": "step", "name_ko": "사건
  연산→포함배제 적용 단계", "domain": "DA", "rep": "C", "confidence":
  0.74 },
      { "id": "INCL_EXCL_2SET_MEANING", "type": "micro", "name_ko": "2집합
  포함배제 의미(중복 보정)", "domain": "DA", "rep": "C", "confidence":
  0.78 },
      { "id": "APPLY_INCL_EXCL_2SET", "type": "micro", "name_ko": "2집합
  포함배제 식 적용 실행(항 매핑→대입→계산)", "domain": "DA", "rep": "P",
  "confidence": 0.75 },
      { "id": "STEP_INCL_EXCL_2SET", "type": "step", "name_ko": "2집합 포
  함배제 단계", "domain": "DA", "rep": "C", "confidence": 0.73 },
      { "id": "COMPLEMENT_EVENT", "type": "micro", "name_ko": "여사건(보
  완) 개념", "domain": "DA", "rep": "C", "confidence": 0.74 },
      { "id": "COMPLEMENT_RULE", "type": "micro", "name_ko": "여사건 규칙
  (1-p)", "domain": "DA", "rep": "A", "confidence": 0.74 }
    ],
    "merge_aliases": [
      { "alias": "COUNT_MUL_RULE", "keep": "COUNT_MUL_RULE_MEANING" },
      { "alias": "COUNT_ADD_RULE", "keep": "COUNT_ADD_RULE_MEANING" },
      { "alias": "SLOT_DIAGRAM_BASIC", "keep": "SLOT_DIAGRAM" },
      { "alias": "PERM_MEANING_SLOT", "keep": "PERM_AS_FILLING_SLOTS" },
      { "alias": "FACTORIAL_ZERO", "keep": "FACTORIAL_ZERO_MEANING" },
      { "alias": "COMB_MEANING_SUBSET", "keep": "COMB_AS_SUBSET" },
      { "alias": "COMB_DERIVE_FROM_PERM_DIVIDE", "keep":
  "COMB_FROM_PERM_DIVIDE" },
      { "alias": "SAMPLE_SPACE_DEFINE", "keep": "SAMPLE_SPACE_AS_SET" },
      { "alias": "EVENT_DEFINE", "keep": "EVENT_AS_SUBSET" },
      { "alias": "SET_INTERSECTION_UNION", "keep":
  "INTERSECTION_UNION_MEANING" },
      { "alias": "INCLUSION_EXCLUSION_2SET_MEANING", "keep":
  "INCL_EXCL_2SET_MEANING" }
    ],
    "add_edges": [
      { "from": "COUNT_MUL_RULE_MEANING", "to": "SLOT_DIAGRAM", "type":
  "requires", "confidence": 0.77 },
      { "from": "SLOT_DIAGRAM", "to": "PERM_AS_FILLING_SLOTS", "type":
  "requires", "confidence": 0.78 },
      { "from": "PERM_AS_FILLING_SLOTS", "to": "PERM_PRODUCT_FORM",
  "type": "requires", "confidence": 0.74 },
      { "from": "PERM_PRODUCT_FORM", "to": "FACTORIAL_EXPANSION", "type":
  "requires", "confidence": 0.72 },
      { "from": "FACTORIAL_EXPANSION", "to": "STEP_PERM_DERIVE", "type":
  "requires", "confidence": 0.74 },
      { "from": "FACTORIAL_ZERO_MEANING", "to": "STEP_PERM_DERIVE",
  "type": "requires", "confidence": 0.66 },
      { "from": "STEP_PERM_DERIVE", "to": "PERM_BASIC", "type":
  "requires", "confidence": 0.74 },

      { "from": "ORDER_SENSITIVE_CHECK", "to": "STEP_COMB_DERIVE", "type":
  "requires", "confidence": 0.74 },
      { "from": "COMB_AS_SUBSET", "to": "COMB_AS_CHOOSE_R", "type":
  "requires", "confidence": 0.75 },
      { "from": "COMB_AS_SUBSET", "to": "COMB_ORDER_IGNORED_REASON",
  "type": "requires", "confidence": 0.74 },
      { "from": "COMB_ORDER_IGNORED_REASON", "to":
  "COMB_FROM_PERM_DIVIDE", "type": "requires", "confidence": 0.82 },
      { "from": "PERM_PRODUCT_FORM", "to": "COMB_FROM_PERM_DIVIDE",
  "type": "requires", "confidence": 0.8 },
      { "from": "FACTORIAL_EXPANSION", "to": "FACTORIAL_CANCELLATION",
  "type": "requires", "confidence": 0.78 },
      { "from": "FACTORIAL_CANCELLATION", "to": "STEP_COMB_DERIVE",
  "type": "requires", "confidence": 0.74 },
      { "from": "COMB_FROM_PERM_DIVIDE", "to": "STEP_COMB_DERIVE", "type":
  "requires", "confidence": 0.74 },
      { "from": "COMB_AS_CHOOSE_R", "to": "STEP_COMB_DERIVE", "type":
  "requires", "confidence": 0.74 },
      { "from": "CHOOSE_THEN_ARRANGE", "to": "STEP_COMB_DERIVE", "type":
  "requires", "confidence": 0.72 },
      { "from": "STEP_COMB_DERIVE", "to": "COMB_BASIC", "type":
  "requires", "confidence": 0.74 },

      { "from": "SET_NOTATION_BASICS", "to": "SAMPLE_SPACE_AS_SET",
  "type": "requires", "confidence": 0.74 },
      { "from": "SET_NOTATION_BASICS", "to": "EVENT_AS_SUBSET", "type":
  "requires", "confidence": 0.74 },
      { "from": "SYSTEMATIC_LISTING_BASIC", "to":
  "STEP_SAMPLE_SPACE_BUILD", "type": "requires", "confidence": 0.76 },
      { "from": "SAMPLE_SPACE_AS_SET", "to": "STEP_SAMPLE_SPACE_BUILD",
  "type": "requires", "confidence": 0.75 },
      { "from": "STEP_SAMPLE_SPACE_BUILD", "to": "STEP_PROB_SETUP",
  "type": "requires", "confidence": 0.76 },
      { "from": "EVENT_AS_SUBSET", "to": "STEP_PROB_SETUP", "type":
  "requires", "confidence": 0.78 },
      { "from": "PROB_AS_RATIO", "to": "STEP_PROB_SETUP", "type":
  "requires", "confidence": 0.76 },
      { "from": "CLASSICAL_PROB_EQUIPROBABLE_CHECK", "to":
  "EQUIPROBABLE_DECISION", "type": "requires", "confidence": 0.77 },
      { "from": "EQUIPROBABLE_DECISION", "to": "STEP_PROB_SETUP", "type":
  "requires", "confidence": 0.74 },
      { "from": "COUNT_FAVORABLE_TOTAL", "to": "STEP_PROB_SETUP", "type":
  "requires", "confidence": 0.77 },
      { "from": "STEP_PROB_SETUP", "to": "PROB_BASIC", "type": "requires",
  "confidence": 0.72 },

      { "from": "INTERSECTION_UNION_MEANING", "to":
  "INCL_EXCL_2SET_MEANING", "type": "requires", "confidence": 0.76 },
      { "from": "CHECK_DOUBLE_COUNTING", "to": "INCL_EXCL_2SET_MEANING",
  "type": "requires", "confidence": 0.75 },
      { "from": "DISJOINT_EVENTS", "to": "DISJOINT_OR_OVERLAP_DECISION",
  "type": "requires", "confidence": 0.74 },
      { "from": "VENN_DIAGRAM_2SET", "to": "DISJOINT_OR_OVERLAP_DECISION",
  "type": "requires", "confidence": 0.73 },
      { "from": "DISJOINT_OR_OVERLAP_DECISION", "to":
  "STEP_EVENT_OPS_INCL_EXCL", "type": "requires", "confidence": 0.72 },
      { "from": "EVENT_OPERATION_EXPRESSION", "to":
  "STEP_EVENT_OPS_INCL_EXCL", "type": "requires", "confidence": 0.7 },
      { "from": "STEP_EVENT_OPS_INCL_EXCL", "to": "STEP_INCL_EXCL_2SET",
  "type": "requires", "confidence": 0.73 },
      { "from": "INCL_EXCL_2SET_MEANING", "to": "APPLY_INCL_EXCL_2SET",
  "type": "requires", "confidence": 0.78 },
      { "from": "APPLY_INCL_EXCL_2SET", "to": "STEP_INCL_EXCL_2SET",
  "type": "requires", "confidence": 0.75 },
      { "from": "STEP_INCL_EXCL_2SET", "to": "PROB_BASIC", "type":
  "requires", "confidence": 0.69 },

      { "from": "COMPLEMENT_EVENT", "to": "COMPLEMENT_RULE", "type":
  "requires", "confidence": 0.72 },
      { "from": "COMPLEMENT_RULE", "to": "PROB_BASIC", "type": "requires",
  "confidence": 0.74 }
    ],
    "remove_edges": [],
    "notes": [
      { "claim": "R3 전이 산출물에서 참조되는 FACTORIAL_ZERO_MEANING,
  COMB_AS_CHOOSE_R, COMB_FROM_PERM_DIVIDE 등은 add_nodes/merge_aliases로
  정의를 보강해 단일 파일 검증이 가능해야 한다.", "reason": "dev_handoff만
  으로도 전이 대상 노드의 존재/의미가 확인되어야 병합·DAG 검증·충돌 해결을
  진행할 수 있다.", "confidence": 0.74 },
      { "claim": "SLOT_DIAGRAM↔TREE_DIAGRAM_BASIC,
  SYSTEMATIC_LISTING_BASIC↔EVENT_OPERATION_EXPRESSION 같은 메타(표현 전환)
  유사성은 requires(잠금)로 강제하지 않는 편이 안전하다.", "reason": "표현
  전환은 대체 경로가 많아 잠금으로 강제하면 과잉 의존/불필요한 선행이 될
  수 있다.", "confidence": 0.69 },
      { "claim": "COMPLEMENT_EVENT↔FACTORIAL_ZERO_MEANING 유사성은 '경계
  사례 안정화'라는 메타 수준으로만 해석해야 하며 alias 병합은 피한다.",
  "reason": "여사건(확률/집합)과 0!(조합 연산)은 내용 영역이 달라 동일시하
  면 오개념을 유발할 수 있다.", "confidence": 0.78 },
      { "claim": "STEP_SAMPLE_SPACE_BUILD→STEP_PROB_SETUP 경로를 두면 확률
  의 분모/분자 설정 오류가 감소한다.", "reason": "전체(표본공간) 고정→사건
  정의→전제(등확률) 확인→A/S 카운팅 순서가 흔들릴 때 분모가 바뀌거나 사건
  을 전체로 착각한다.", "confidence": 0.76 },
      { "claim": "EVENT_OPERATION_EXPRESSION과
  DISJOINT_OR_OVERLAP_DECISION을 경유하면 포함배제의 부호·항 누락이 줄어든
  다.", "reason": "문장 조건을 집합식으로 고정하고 겹침 여부를 먼저 분기하
  면 -교집합이 공식 암기가 아니라 중복 보정으로 연결된다.", "confidence":
  0.75 }
    ]
  }

  ## Standards Tags (내부 태그)

  - 추가된 태그: COUNT_MUL_RULE_MEANING, COUNT_ADD_RULE_MEANING,
    SLOT_DIAGRAM, PERM_AS_FILLING_SLOTS, PERM_PRODUCT_FORM,
    FACTORIAL_EXPANSION, FACTORIAL_ZERO_MEANING, FACTORIAL_CANCELLATION,
    STEP_PERM_DERIVE, ORDER_SENSITIVE_CHECK, COMB_AS_SUBSET,
    COMB_AS_CHOOSE_R, COMB_ORDER_IGNORED_REASON, COMB_FROM_PERM_DIVIDE,
    CHOOSE_THEN_ARRANGE, STEP_COMB_DERIVE, SYSTEMATIC_LISTING_BASIC,
    TREE_DIAGRAM_BASIC, SET_NOTATION_BASICS, SAMPLE_SPACE_AS_SET,
    EVENT_AS_SUBSET, STEP_SAMPLE_SPACE_BUILD, PROB_AS_RATIO,
    CLASSICAL_PROB_EQUIPROBABLE_CHECK, EQUIPROBABLE_DECISION,
    COUNT_FAVORABLE_TOTAL, STEP_PROB_SETUP, EVENT_OPERATION_EXPRESSION,
    INTERSECTION_UNION_MEANING, CHECK_DOUBLE_COUNTING, DISJOINT_EVENTS,
    VENN_DIAGRAM_2SET, DISJOINT_OR_OVERLAP_DECISION,
    STEP_EVENT_OPS_INCL_EXCL, INCL_EXCL_2SET_MEANING,
    APPLY_INCL_EXCL_2SET, STEP_INCL_EXCL_2SET, COMPLEMENT_EVENT,
    COMPLEMENT_RULE
  - 수정된 태그: COUNT_MUL_RULE(→COUNT_MUL_RULE_MEANING),
    COUNT_ADD_RULE(→COUNT_ADD_RULE_MEANING),
    SLOT_DIAGRAM_BASIC(→SLOT_DIAGRAM),
    PERM_MEANING_SLOT(→PERM_AS_FILLING_SLOTS),
    FACTORIAL_ZERO(→FACTORIAL_ZERO_MEANING),
    COMB_MEANING_SUBSET(→COMB_AS_SUBSET),
    COMB_DERIVE_FROM_PERM_DIVIDE(→COMB_FROM_PERM_DIVIDE),
    SAMPLE_SPACE_DEFINE(→SAMPLE_SPACE_AS_SET),
    EVENT_DEFINE(→EVENT_AS_SUBSET),
    SET_INTERSECTION_UNION(→INTERSECTION_UNION_MEANING),
    INCLUSION_EXCLUSION_2SET_MEANING(→INCL_EXCL_2SET_MEANING)

  [/R1 Coverage Report]

  ###DONE:873d8d27e4###


› Request 9372cf2003: 아래 파일(티켓 지시)을 읽고 결과를 이 터미널에
  Output Format대로 그대로 출력해줘. 가능하면 repo 파일을 생성/수정하지
  말고, 마지막에 마커를 그대로 출력해. -> /mnt/c/Users/irron/Desktop/my/
  web_service_new/calculate_math/.agents/inbox/research_9372cf2003.md


• Explored
  └ Read research_9372cf2003.md

─ Worked for 9s ──────────────────────────────────────────────────────────

• ###BEGIN:9372cf2003###

  ## Coverage Gap Report

  ### 1. 누락된 기초 개념 (최소 10개)

  | # | 개념명 | 누락 이유 | 심각도 |
  |---|--------|----------|--------|
  | 1 | COUNT_MUL_RULE_MEANING(곱셈 원리 의미) | 순열/경우의 수의 핵심 기
  반인데 단계 곱 의미가 비면 공식·절차가 암기형으로 굳음 | 높음 |
  | 2 | SLOT_DIAGRAM(자리/슬롯 도식화) | 조건/제약을 “자리”로 외재화하지
  못하면 문장→곱 구조 전환이 약함 | 중 |
  | 3 | PERM_AS_FILLING_SLOTS(순열 의미: 자리 채우기) | nPr을 배열/배치 의
  미로 못 잡으면 조건을 공식 항에 매핑하기 어려움 | 높음 |
  | 4 | PERM_PRODUCT_FORM(nPr의 곱 형태) | 곱 형태가 없으면 팩토리얼 표기/
  전개로의 표현 전환이 끊김 | 중 |
  | 5 | FACTORIAL_EXPANSION(팩토리얼 전개) | n!=n*(n-1)*… 구조 부재 시 유
  도/검산이 블랙박스가 됨 | 높음 |
  | 6 | FACTORIAL_ZERO_MEANING(0! 의미) | r=0, r=n, nC0 등 경계 사례에서
  값이 흔들리면 전체 체계가 붕괴 | 중 |
  | 7 | FACTORIAL_CANCELLATION(팩토리얼 약분) | 조합 계산에서 약분 절차가
  없으면 nCr 계산이 기계적이거나 오류 다발 | 중 |
  | 8 | ORDER_SENSITIVE_CHECK(순서 민감 판단) | 순서 중요/무시 분기 기준이
  없으면 순열/조합 선택 혼동이 지속 | 높음 |
  | 9 | COMB_AS_SUBSET(조합 의미: 부분집합 선택) | 선택=부분집합 관점이 없
  으면 조합 공식이 맥락 없는 계산으로 남음 | 높음 |
  |10| COMB_AS_CHOOSE_R(r개 선택 해석) | “r개 선택”을 입력으로 고정하지 못
  하면 조건 누락/중복으로 연결 | 중 |
  |11| COMB_ORDER_IGNORED_REASON(왜 r!로 나누는가) | ‘중복 제거’ 이유가 없
  으면 nPr/r! 유도와 조합 공식이 암기 점프로 변함 | 높음 |
  |12| COMB_FROM_PERM_DIVIDE(nPr/r! 유도) | 유도 절차가 없으면 조합 공식으
  로의 전이가 과격해짐 | 중 |
  |13| CHOOSE_THEN_ARRANGE(선택 후 배열: nPr=nCr·r!) | 복합 카운팅(선택×배
  열)에서 구조 분해가 없으면 경로 선택이 불안정 | 중 |
  |14| SYSTEMATIC_LISTING_BASIC(체계적 나열) | 표본공간 구성의 기본 절차가
  없으면 분모(전체) 고정이 흔들림 | 높음 |
  |15| STEP_SAMPLE_SPACE_BUILD(표본공간 구성 단계) | “전체(분모) 고정” 중
  간 단계가 없으면 고전확률 설정에서 분모 오류 반복 | 높음 |
  |16| SET_NOTATION_BASICS(집합 기초 기호) | 사건/연산을 집합 언어로 고정
  하는 전제가 없으면 조건을 수식화하기 어려움 | 높음 |
  |17| EVENT_OPERATION_EXPRESSION(문장→집합식) | 문장을 A∪B/A∩B/A^c로 고정
  하지 못하면 포함배제/여사건에서 항 매핑·부호 실수 증가 | 높음 |
  |18| DISJOINT_EVENTS(서로소 사건 판별) | “서로소면 그냥 더함” 조건이 약
  하면 중복 합산/누락이 빈발 | 중 |
  |19| CHECK_DOUBLE_COUNTING(중복계수 점검) | 겹침(중복) 감지가 약하면 포
  함배제에서 부호·항 실수 빈발 | 중 |
  |20| INCL_EXCL_2SET_MEANING(2집합 포함배제 의미) | “왜 교집합을 빼는가
  (중복 보정)” 의미 없이 공식만 주면 오용/암기 위험 | 높음 |

  ### 2. 과잉 난이도/불필요 선행 (최소 5개)

  | # | 개념명 | 과잉 이유 | 조치 제안 |
  |---|--------|----------|----------|
  | 1 | 중복순열/같은 것이 있는 순열 | 분류/중복 처리까지 요구해 기초(자리
  채우기)에서 과잉 | 범위외/선택 심화 |
  | 2 | 원순열(원배치) | 회전동치 등 추가 규칙이 필요해 초기 학습에 과잉 |
  별도 심화로 이동 |
  | 3 | 중복조합(중복허용 조합) | 기초 조합(부분집합 선택) 정착 전에는 해
  석/공식 선택 부담이 큼 | 별도 심화로 분리 |
  | 4 | 3집합 이상 포함배제 일반식 | 2집합 의미 정착 전에는 기호/계산 부담
  과도 | 기본은 2집합으로 제한 |
  | 5 | 조건부확률 | 분모 재정의/사건 분할이 필요해 TS_COMB_PROB 기초에서
  인지부하가 큼 | 별도 심화 단원으로 분리 |
  | 6 | 베이즈 정리 | 조건부확률+역확률까지 요구하는 고난도 전이 | 범위외/
  선택 심화 |
  | 7 | 확률변수/기댓값/분산/분포 | 사건 확률에서 분포/통계로 축이 바뀌는
  별도 영역 | 별도 보스/단원 분리 |

  ### 3. 학습 순서상 위험한 점프 (최소 5개)

  | # | From → To | 점프 이유 | 브릿지 제안 |
  |---|-----------|----------|------------|
  | 1 | COUNT_MUL_RULE_MEANING → STEP_PERM_DERIVE | 단계 곱에서 바로 유도
  단계로 가면 ‘자리 의미/표현 전환’이 비어 유도가 절차 암기로 됨 |
  SLOT_DIAGRAM + PERM_AS_FILLING_SLOTS + PERM_PRODUCT_FORM |
  | 2 | PERM_PRODUCT_FORM → STEP_PERM_DERIVE | 곱 형태에서 팩토리얼로의 전
  개/경계(0!)가 없으면 유도·검산이 불안정 | FACTORIAL_EXPANSION +
  FACTORIAL_ZERO_MEANING |
  | 3 | COMB_AS_SUBSET → STEP_COMB_DERIVE | “왜 r!로 나누는가”가 없으면 조
  합 유도가 암기 점프로 변함 | COMB_ORDER_IGNORED_REASON +
  COMB_FROM_PERM_DIVIDE |
  | 4 | COMB_FROM_PERM_DIVIDE → STEP_COMB_DERIVE | 유도 실행(나누기)만 강
  조되면 의미(중복 제거) 없이 절차만 남아 오류 교정이 어려움 |
  COMB_ORDER_IGNORED_REASON + CHOOSE_THEN_ARRANGE |
  | 5 | SYSTEMATIC_LISTING_BASIC → STEP_PROB_SETUP | 나열에서 곧바로 확률
  설정으로 가면 분모(전체) 고정이 약해 분모 오류 반복 |
  STEP_SAMPLE_SPACE_BUILD |
  | 6 | SET_NOTATION_BASICS → STEP_INCL_EXCL_2SET | 집합 기호를 알아도 문
  장→집합식→겹침 판정이 없으면 포함배제가 공식 점프로 됨 |
  EVENT_OPERATION_EXPRESSION + DISJOINT_OR_OVERLAP_DECISION +
  STEP_EVENT_OPS_INCL_EXCL |
  | 7 | INCL_EXCL_2SET_MEANING → STEP_INCL_EXCL_2SET | 의미에서 바로 단계
  완성으로 가면 항 매핑→대입→계산 실행이 비어 실수가 증가 |
  APPLY_INCL_EXCL_2SET |

  ## Graph Patch JSON

  {
    "researcher": "R1",
    "scope": "TS_COMB_PROB",
    "add_nodes": [
      { "id": "COUNT_MUL_RULE_MEANING", "type": "micro", "name_ko": "곱셈
  원리 의미(단계 곱)", "domain": "DA", "rep": "C", "confidence": 0.83 },
      { "id": "COUNT_ADD_RULE_MEANING", "type": "micro", "name_ko": "덧셈
  원리 의미(서로소 합)", "domain": "DA", "rep": "C", "confidence": 0.8 },
      { "id": "SLOT_DIAGRAM", "type": "micro", "name_ko": "자리/슬롯 도식
  화", "domain": "DA", "rep": "P", "confidence": 0.76 },
      { "id": "PERM_AS_FILLING_SLOTS", "type": "micro", "name_ko": "순열
  의미(자리 채우기)", "domain": "DA", "rep": "C", "confidence": 0.78 },
      { "id": "PERM_PRODUCT_FORM", "type": "micro", "name_ko": "nPr을 곱의
  형태로 표현", "domain": "DA", "rep": "P", "confidence": 0.74 },
      { "id": "FACTORIAL_EXPANSION", "type": "micro", "name_ko": "팩토리얼
  전개 n!=n*(n-1)*...", "domain": "DA", "rep": "P", "confidence": 0.82 },
      { "id": "FACTORIAL_ZERO_MEANING", "type": "micro", "name_ko": "0! 의
  미 해석(경계 사례)", "domain": "DA", "rep": "A", "confidence": 0.74 },
      { "id": "FACTORIAL_CANCELLATION", "type": "micro", "name_ko": "팩토
  리얼 약분", "domain": "DA", "rep": "P", "confidence": 0.78 },
      { "id": "STEP_PERM_DERIVE", "type": "step", "name_ko": "순열 공식 유
  도 단계", "domain": "DA", "rep": "C", "confidence": 0.74 },

      { "id": "ORDER_SENSITIVE_CHECK", "type": "micro", "name_ko": "순서
  민감 판단(순열/조합 분기)", "domain": "DA", "rep": "C", "confidence":
  0.76 },
      { "id": "COMB_AS_SUBSET", "type": "micro", "name_ko": "조합 의미(부
  분집합 선택)", "domain": "DA", "rep": "C", "confidence": 0.8 },
      { "id": "COMB_AS_CHOOSE_R", "type": "micro", "name_ko": "r개 선택 상
  황 해석", "domain": "DA", "rep": "C", "confidence": 0.75 },
      { "id": "COMB_ORDER_IGNORED_REASON", "type": "micro", "name_ko": "조
  합에서 순서 중복을 r!로 나누는 이유", "domain": "DA", "rep": "C",
  "confidence": 0.8 },
      { "id": "COMB_FROM_PERM_DIVIDE", "type": "micro", "name_ko": "nPr/r!
  로 nCr을 유도", "domain": "DA", "rep": "P", "confidence": 0.74 },
      { "id": "CHOOSE_THEN_ARRANGE", "type": "micro", "name_ko": "선택 후
  배열( nPr = nCr·r! ) 구조", "domain": "DA", "rep": "C", "confidence":
  0.72 },
      { "id": "STEP_COMB_DERIVE", "type": "step", "name_ko": "조합 공식 유
  도 단계", "domain": "DA", "rep": "C", "confidence": 0.74 },

      { "id": "SYSTEMATIC_LISTING_BASIC", "type": "micro", "name_ko": "체
  계적 나열 기초", "domain": "DA", "rep": "P", "confidence": 0.78 },
      { "id": "SET_NOTATION_BASICS", "type": "micro", "name_ko": "집합 기
  초(원소/부분집합/기호)", "domain": "DA", "rep": "C", "confidence":
  0.78 },
      { "id": "SAMPLE_SPACE_AS_SET", "type": "micro", "name_ko": "표본공간
  =집합", "domain": "DA", "rep": "C", "confidence": 0.8 },
      { "id": "EVENT_AS_SUBSET", "type": "micro", "name_ko": "사건=부분집
  합", "domain": "DA", "rep": "C", "confidence": 0.8 },
      { "id": "STEP_SAMPLE_SPACE_BUILD", "type": "step", "name_ko": "표본
  공간 구성 단계(빠짐/중복 점검)", "domain": "DA", "rep": "C",
  "confidence": 0.75 },
      { "id": "PROB_AS_RATIO", "type": "micro", "name_ko": "확률=비율(A/
  S)", "domain": "DA", "rep": "A", "confidence": 0.76 },
      { "id": "CLASSICAL_PROB_EQUIPROBABLE_CHECK", "type": "micro",
  "name_ko": "고전확률 등확률 전제 확인", "domain": "DA", "rep": "C",
  "confidence": 0.77 },
      { "id": "EQUIPROBABLE_DECISION", "type": "micro", "name_ko": "등확률
  여부 게이트(Yes/No 분기)", "domain": "DA", "rep": "C", "confidence":
  0.74 },
      { "id": "COUNT_FAVORABLE_TOTAL", "type": "micro", "name_ko": "유리/
  전체 경우의 수 분리 카운팅(A/S)", "domain": "DA", "rep": "P",
  "confidence": 0.77 },
      { "id": "STEP_PROB_SETUP", "type": "step", "name_ko": "고전확률 설정
  단계(전체→사건→전제→A/S)", "domain": "DA", "rep": "C", "confidence":
  0.76 },

      { "id": "EVENT_OPERATION_EXPRESSION", "type": "micro", "name_ko":
  "사건 연산을 집합식으로 표현(문장→A∪B/A∩B/A^c)", "domain": "DA", "rep":
  "P", "confidence": 0.76 },
      { "id": "INTERSECTION_UNION_MEANING", "type": "micro", "name_ko":
  "교집합/합집합 의미(∩/∪)", "domain": "DA", "rep": "C", "confidence":
  0.76 },
      { "id": "CHECK_DOUBLE_COUNTING", "type": "micro", "name_ko": "중복계
  수(겹침) 점검", "domain": "DA", "rep": "C", "confidence": 0.74 },
      { "id": "DISJOINT_EVENTS", "type": "micro", "name_ko": "서로소 사건
  (겹치지 않음) 판별", "domain": "DA", "rep": "C", "confidence": 0.74 },
      { "id": "VENN_DIAGRAM_2SET", "type": "micro", "name_ko": "벤 다이어
  그램(2집합)", "domain": "DA", "rep": "P", "confidence": 0.74 },
      { "id": "DISJOINT_OR_OVERLAP_DECISION", "type": "micro", "name_ko":
  "서로소/겹침 판정 게이트", "domain": "DA", "rep": "C", "confidence":
  0.74 },
      { "id": "STEP_EVENT_OPS_INCL_EXCL", "type": "step", "name_ko": "사건
  연산→포함배제 적용 단계", "domain": "DA", "rep": "C", "confidence":
  0.74 },
      { "id": "INCL_EXCL_2SET_MEANING", "type": "micro", "name_ko": "2집합
  포함배제 의미(중복 보정)", "domain": "DA", "rep": "C", "confidence":
  0.78 },
      { "id": "APPLY_INCL_EXCL_2SET", "type": "micro", "name_ko": "2집합
  포함배제 식 적용 실행(항 매핑→대입→계산)", "domain": "DA", "rep": "P",
  "confidence": 0.75 },
      { "id": "STEP_INCL_EXCL_2SET", "type": "step", "name_ko": "2집합 포
  함배제 단계", "domain": "DA", "rep": "C", "confidence": 0.73 },

      { "id": "COMPLEMENT_EVENT", "type": "micro", "name_ko": "여사건(보
  완) 개념", "domain": "DA", "rep": "C", "confidence": 0.74 },
      { "id": "COMPLEMENT_RULE", "type": "micro", "name_ko": "여사건 규칙
  (1-p)", "domain": "DA", "rep": "A", "confidence": 0.74 }
    ],
    "merge_aliases": [
      { "alias": "COUNT_MUL_RULE", "keep": "COUNT_MUL_RULE_MEANING" },
      { "alias": "COUNT_ADD_RULE", "keep": "COUNT_ADD_RULE_MEANING" },
      { "alias": "SLOT_DIAGRAM_BASIC", "keep": "SLOT_DIAGRAM" },
      { "alias": "PERM_MEANING_SLOT", "keep": "PERM_AS_FILLING_SLOTS" },
      { "alias": "FACTORIAL_ZERO", "keep": "FACTORIAL_ZERO_MEANING" },
      { "alias": "COMB_MEANING_SUBSET", "keep": "COMB_AS_SUBSET" },
      { "alias": "COMB_DERIVE_FROM_PERM_DIVIDE", "keep":
  "COMB_FROM_PERM_DIVIDE" },
      { "alias": "SAMPLE_SPACE_DEFINE", "keep": "SAMPLE_SPACE_AS_SET" },
      { "alias": "EVENT_DEFINE", "keep": "EVENT_AS_SUBSET" },
      { "alias": "SET_INTERSECTION_UNION", "keep":
  "INTERSECTION_UNION_MEANING" },
      { "alias": "INCLUSION_EXCLUSION_2SET_MEANING", "keep":
  "INCL_EXCL_2SET_MEANING" }
    ],
    "add_edges": [
      { "from": "COUNT_MUL_RULE_MEANING", "to": "SLOT_DIAGRAM", "type":
  "requires", "confidence": 0.77 },
      { "from": "SLOT_DIAGRAM", "to": "PERM_AS_FILLING_SLOTS", "type":
  "requires", "confidence": 0.78 },
      { "from": "PERM_AS_FILLING_SLOTS", "to": "PERM_PRODUCT_FORM",
  "type": "requires", "confidence": 0.74 },
      { "from": "PERM_PRODUCT_FORM", "to": "FACTORIAL_EXPANSION", "type":
  "requires", "confidence": 0.72 },
      { "from": "FACTORIAL_EXPANSION", "to": "STEP_PERM_DERIVE", "type":
  "requires", "confidence": 0.74 },
      { "from": "FACTORIAL_ZERO_MEANING", "to": "STEP_PERM_DERIVE",
  "type": "requires", "confidence": 0.66 },
      { "from": "STEP_PERM_DERIVE", "to": "PERM_BASIC", "type":
  "requires", "confidence": 0.74 },

      { "from": "ORDER_SENSITIVE_CHECK", "to": "STEP_COMB_DERIVE", "type":
  "requires", "confidence": 0.74 },
      { "from": "COMB_AS_SUBSET", "to": "COMB_AS_CHOOSE_R", "type":
  "requires", "confidence": 0.75 },
      { "from": "COMB_AS_SUBSET", "to": "COMB_ORDER_IGNORED_REASON",
  "type": "requires", "confidence": 0.74 },
      { "from": "COMB_ORDER_IGNORED_REASON", "to":
  "COMB_FROM_PERM_DIVIDE", "type": "requires", "confidence": 0.82 },
      { "from": "PERM_PRODUCT_FORM", "to": "COMB_FROM_PERM_DIVIDE",
  "type": "requires", "confidence": 0.8 },
      { "from": "FACTORIAL_EXPANSION", "to": "FACTORIAL_CANCELLATION",
  "type": "requires", "confidence": 0.78 },
      { "from": "COMB_FROM_PERM_DIVIDE", "to": "STEP_COMB_DERIVE", "type":
  "requires", "confidence": 0.74 },
      { "from": "COMB_AS_CHOOSE_R", "to": "STEP_COMB_DERIVE", "type":
  "requires", "confidence": 0.74 },
      { "from": "FACTORIAL_CANCELLATION", "to": "STEP_COMB_DERIVE",
  "type": "requires", "confidence": 0.74 },
      { "from": "CHOOSE_THEN_ARRANGE", "to": "STEP_COMB_DERIVE", "type":
  "requires", "confidence": 0.72 },
      { "from": "STEP_COMB_DERIVE", "to": "COMB_BASIC", "type":
  "requires", "confidence": 0.74 },

      { "from": "SET_NOTATION_BASICS", "to": "SAMPLE_SPACE_AS_SET",
  "type": "requires", "confidence": 0.74 },
      { "from": "SET_NOTATION_BASICS", "to": "EVENT_AS_SUBSET", "type":
  "requires", "confidence": 0.74 },
      { "from": "SYSTEMATIC_LISTING_BASIC", "to":
  "STEP_SAMPLE_SPACE_BUILD", "type": "requires", "confidence": 0.76 },
      { "from": "SAMPLE_SPACE_AS_SET", "to": "STEP_SAMPLE_SPACE_BUILD",
  "type": "requires", "confidence": 0.75 },
      { "from": "STEP_SAMPLE_SPACE_BUILD", "to": "STEP_PROB_SETUP",
  "type": "requires", "confidence": 0.76 },
      { "from": "EVENT_AS_SUBSET", "to": "STEP_PROB_SETUP", "type":
  "requires", "confidence": 0.78 },
      { "from": "PROB_AS_RATIO", "to": "STEP_PROB_SETUP", "type":
  "requires", "confidence": 0.76 },
      { "from": "CLASSICAL_PROB_EQUIPROBABLE_CHECK", "to":
  "EQUIPROBABLE_DECISION", "type": "requires", "confidence": 0.77 },
      { "from": "EQUIPROBABLE_DECISION", "to": "STEP_PROB_SETUP", "type":
  "requires", "confidence": 0.74 },
      { "from": "COUNT_FAVORABLE_TOTAL", "to": "STEP_PROB_SETUP", "type":
  "requires", "confidence": 0.77 },
      { "from": "STEP_PROB_SETUP", "to": "PROB_BASIC", "type": "requires",
  "confidence": 0.72 },

      { "from": "INTERSECTION_UNION_MEANING", "to":
  "INCL_EXCL_2SET_MEANING", "type": "requires", "confidence": 0.76 },
      { "from": "CHECK_DOUBLE_COUNTING", "to": "INCL_EXCL_2SET_MEANING",
  "type": "requires", "confidence": 0.75 },
      { "from": "DISJOINT_EVENTS", "to": "DISJOINT_OR_OVERLAP_DECISION",
  "type": "requires", "confidence": 0.74 },
      { "from": "VENN_DIAGRAM_2SET", "to": "DISJOINT_OR_OVERLAP_DECISION",
  "type": "requires", "confidence": 0.73 },
      { "from": "DISJOINT_OR_OVERLAP_DECISION", "to":
  "STEP_EVENT_OPS_INCL_EXCL", "type": "requires", "confidence": 0.72 },
      { "from": "EVENT_OPERATION_EXPRESSION", "to":
  "STEP_EVENT_OPS_INCL_EXCL", "type": "requires", "confidence": 0.7 },
      { "from": "STEP_EVENT_OPS_INCL_EXCL", "to": "STEP_INCL_EXCL_2SET",
  "type": "requires", "confidence": 0.73 },
      { "from": "INCL_EXCL_2SET_MEANING", "to": "APPLY_INCL_EXCL_2SET",
  "type": "requires", "confidence": 0.78 },
      { "from": "APPLY_INCL_EXCL_2SET", "to": "STEP_INCL_EXCL_2SET",
  "type": "requires", "confidence": 0.75 },
      { "from": "STEP_INCL_EXCL_2SET", "to": "PROB_BASIC", "type":
  "requires", "confidence": 0.69 },

      { "from": "COMPLEMENT_EVENT", "to": "COMPLEMENT_RULE", "type":
  "requires", "confidence": 0.72 },
      { "from": "COMPLEMENT_RULE", "to": "PROB_BASIC", "type": "requires",
  "confidence": 0.74 }
    ],
    "remove_edges": [],
    "notes": [
      { "claim": "R3 전이 산출물에서 참조되는 COMB_AS_CHOOSE_R,
  FACTORIAL_ZERO_MEANING, COMB_FROM_PERM_DIVIDE 등은 add_nodes/
  merge_aliases로 정의를 보강해 단일 파일 검증이 가능해야 한다.",
  "reason": "dev_handoff만으로도 전이 대상 노드의 존재/의미가 확인되어야
  병합·DAG 검증·충돌 해결을 진행할 수 있다.", "confidence": 0.74 },
      { "claim": "COMB_FROM_PERM_DIVIDE ↔ APPLY_INCL_EXCL_2SET 유사성은
  '중복 제거 1회'라는 메타 절차로만 해석하고 requires(잠금)로 강제하지 않
  는 것이 안전하다.", "reason": "나누기(중복수로 나눔)와 빼기(겹침 1회 제
  거)는 수학적 의미가 달라 잠금으로 강제하면 오개념을 유발할 수 있다.",
  "confidence": 0.78 },
      { "claim": "COMPLEMENT_EVENT ↔ FACTORIAL_ZERO_MEANING 유사성은 '경계
  (없음/전부) 안정화'라는 메타 수준으로만 제한해야 한다.", "reason": "여사
  건(확률/집합)과 0!(조합 연산)은 내용 영역이 달라 동일시하면 혼란이 생긴
  다.", "confidence": 0.78 },
      { "claim": "STEP_SAMPLE_SPACE_BUILD→STEP_PROB_SETUP 경로를 두면 확률
  의 분모/분자 설정 오류가 감소한다.", "reason": "전체(표본공간) 고정→사건
  정의→전제(등확률) 확인→A/S 카운팅 순서가 흔들릴 때 분모가 바뀌거나 사건
  을 전체로 착각한다.", "confidence": 0.76 },
      { "claim": "EVENT_OPERATION_EXPRESSION과
  DISJOINT_OR_OVERLAP_DECISION을 경유하면 포함배제의 부호·항 누락이 줄어든
  다.", "reason": "문장 조건을 집합식으로 고정하고 겹침 여부를 먼저 분기하
  면 -교집합이 공식 암기가 아니라 중복 보정으로 연결된다.", "confidence":
  0.75 }
    ]
  }

  ## Standards Tags (내부 태그)

  - 추가된 태그: COUNT_MUL_RULE_MEANING, COUNT_ADD_RULE_MEANING,
    SLOT_DIAGRAM, PERM_AS_FILLING_SLOTS, PERM_PRODUCT_FORM,
    FACTORIAL_EXPANSION, FACTORIAL_ZERO_MEANING, FACTORIAL_CANCELLATION,
    STEP_PERM_DERIVE, ORDER_SENSITIVE_CHECK, COMB_AS_SUBSET,
    COMB_AS_CHOOSE_R, COMB_ORDER_IGNORED_REASON, COMB_FROM_PERM_DIVIDE,
    CHOOSE_THEN_ARRANGE, STEP_COMB_DERIVE, SYSTEMATIC_LISTING_BASIC,
    SET_NOTATION_BASICS, SAMPLE_SPACE_AS_SET, EVENT_AS_SUBSET,
    STEP_SAMPLE_SPACE_BUILD, PROB_AS_RATIO,
    CLASSICAL_PROB_EQUIPROBABLE_CHECK, EQUIPROBABLE_DECISION,
    COUNT_FAVORABLE_TOTAL, STEP_PROB_SETUP, EVENT_OPERATION_EXPRESSION,
    INTERSECTION_UNION_MEANING, CHECK_DOUBLE_COUNTING, DISJOINT_EVENTS,
    VENN_DIAGRAM_2SET, DISJOINT_OR_OVERLAP_DECISION,
    STEP_EVENT_OPS_INCL_EXCL, INCL_EXCL_2SET_MEANING,
    APPLY_INCL_EXCL_2SET, STEP_INCL_EXCL_2SET, COMPLEMENT_EVENT,
    COMPLEMENT_RULE
  - 수정된 태그: COUNT_MUL_RULE(→COUNT_MUL_RULE_MEANING),
    COUNT_ADD_RULE(→COUNT_ADD_RULE_MEANING),
    SLOT_DIAGRAM_BASIC(→SLOT_DIAGRAM),
    PERM_MEANING_SLOT(→PERM_AS_FILLING_SLOTS),
    FACTORIAL_ZERO(→FACTORIAL_ZERO_MEANING),
    COMB_MEANING_SUBSET(→COMB_AS_SUBSET),
    COMB_DERIVE_FROM_PERM_DIVIDE(→COMB_FROM_PERM_DIVIDE),
    SAMPLE_SPACE_DEFINE(→SAMPLE_SPACE_AS_SET),
    EVENT_DEFINE(→EVENT_AS_SUBSET),
    SET_INTERSECTION_UNION(→INTERSECTION_UNION_MEANING),
    INCLUSION_EXCLUSION_2SET_MEANING(→INCL_EXCL_2SET_MEANING)

  [/R1 Coverage Report]

  ###DONE:9372cf2003###


› Request 18f9bff97c: 아래 파일(티켓 지시)을 읽고 결과를 이 터미널에
  Output Format대로 그대로 출력해줘. 가능하면 repo 파일을 생성/수정하지
  말고, 마지막에 마커를 그대로 출력해. -> /mnt/c/Users/irron/Desktop/my/
  web_service_new/calculate_math/.agents/inbox/research_18f9bff97c.md


• Explored
  └ Read research_18f9bff97c.md

─ Worked for 2m 32s ──────────────────────────────────────────────────────

• ###BEGIN:18f9bff97c###

  ## Coverage Gap Report

  ### 1. 누락된 기초 개념 (최소 10개)

  | # | 개념명 | 누락 이유 | 심각도 |
  |---|--------|----------|--------|
  | 1 | COUNT_MUL_RULE_MEANING(곱셈 원리 의미) | 순열/조합/표본공간 카운팅
  의 기반인데 단계-곱 의미가 비면 공식/절차가 암기형으로 굳음 | 높음 |
  | 2 | ORDER_SENSITIVE_CHECK(순서 민감 판단) | 순열/조합 분기 기준이 없으
  면 도구 선택이 흔들려 오답이 고착 | 높음 |
  | 3 | PERM_AS_FILLING_SLOTS(순열 의미: 자리 채우기) | nPr을 “배열/배
  치”로 해석하지 못하면 조건을 공식 항에 매핑하기 어려움 | 높음 |
  | 4 | PERM_PRODUCT_FORM(nPr의 감소곱 형태) | 곱 형태가 없으면 팩토리얼
  표기/검산으로의 표현 전환이 끊김 | 중 |
  | 5 | FACTORIAL_EXPANSION(팩토리얼 전개) | n!=n*(n-1)*… 구조 부재 시 유
  도/검산이 블랙박스가 됨 | 높음 |
  | 6 | FACTORIAL_ZERO_MEANING(0! 의미) | r=0, r=n 같은 경계에서 값/식이
  흔들리면 전체 체계가 붕괴 | 중 |
  | 7 | FACTORIAL_CANCELLATION(팩토리얼 약분) | 조합 계산에서 약분 절차가
  없으면 nCr 계산이 기계적/오류 다발 | 중 |
  | 8 | COMB_AS_SUBSET(조합 의미: 부분집합 선택) | 선택=부분집합 관점이 없
  으면 조합 공식이 맥락 없는 계산으로 남음 | 높음 |
  | 9 | COMB_AS_CHOOSE_R(r개 선택 해석) | “r개 선택”을 입력으로 고정하지
  못하면 조건 누락/중복으로 연결 | 중 |
  |10| COMB_ORDER_IGNORED_REASON(왜 r!로 나누는가) | ‘중복 제거’ 이유가 없
  으면 조합 유도/공식이 암기 점프로 변함 | 높음 |
  |11| COMB_FROM_PERM_DIVIDE(nPr/r! 유도) | 유도 절차 부재 시 조합 공식으
  로의 전이가 과격해짐 | 중 |
  |12| SET_NOTATION_BASICS(집합 기초 기호) | 사건/연산을 집합 언어로 고정
  하는 전제가 없으면 조건을 수식화하기 어려움 | 높음 |
  |13| STEP_SAMPLE_SPACE_BUILD(표본공간 구성 단계) | “전체(분모) 고정” 중
  간 단계가 없으면 고전확률 설정에서 분모 오류 반복 | 높음 |
  |14| CLASSICAL_PROB_EQUIPROBABLE_CHECK(등확률 전제 확인) | 등확률 전제
  없이 A/S를 오적용하는 오개념 차단 장치가 필요 | 높음 |
  |15| EQUIPROBABLE_DECISION(등확률 게이트) | “적용 가능/불가” 분기가 없으
  면 고전확률 적용 범위가 흐려짐 | 중 |
  |16| COUNT_FAVORABLE_TOTAL(유리/전체 분리 카운팅) | 분자/분모를 분리해
  세는 절차가 없으면 설정/계산이 흔들림 | 높음 |
  |17| EVENT_OPERATION_EXPRESSION(문장→집합식) | 문장을 A∪B/A∩B/A^c로 고정
  하지 못하면 포함배제/여사건에서 항 매핑·부호 실수 증가 | 높음 |
  |18| INCL_EXCL_2SET_MEANING(2집합 포함배제 의미) | “왜 교집합을 빼는가
  (중복 보정)” 의미 없이 공식만 주면 오용/암기 위험 | 높음 |
  |19| APPLY_INCL_EXCL_2SET(포함배제 계산 실행) | 의미에서 곧바로 단계 완
  성으로 점프하면 항 매핑→대입→계산 실행이 불안정 | 중 |
  |20| COMPLEMENT_EVENT(여사건/보완 개념) | 1-p 규칙 전에 보완(전체-부분)
  개념이 고정되어야 규칙 남용이 줄어듦 | 중 |

  ### 2. 과잉 난이도/불필요 선행 (최소 5개)

  | # | 개념명 | 과잉 이유 | 조치 제안 |
  |---|--------|----------|----------|
  | 1 | 조건부확률 | 분모 재정의/사건 분할이 필요해 TS_COMB_PROB 기초에서
  인지부하가 큼 | 별도 심화 단원으로 분리 |
  | 2 | 베이즈 정리 | 조건부확률+역확률까지 요구하는 고난도 전이 | 범위외/
  선택 심화 |
  | 3 | 독립 사건/독립의 곱 | 적용 조건이 미세해 “무작위=독립” 오개념 유발
  가능 | 후순위(심화)로 이관 |
  | 4 | 확률변수/기댓값/분산 | 사건 확률에서 분포/통계로 축이 바뀌는 별도
  영역 | 별도 보스/단원 분리 |
  | 5 | 확률분포(이항/정규 등) | 모델링/분포는 기초 조합·확률 커버리지 밖
  | 별도 보스/단원 분리 |
  | 6 | 3집합 이상 포함배제 일반식 | 2집합 의미 정착 전에는 기호/계산 부담
  과도 | 기본은 2집합으로 제한 |
  | 7 | 중복순열/원순열/중복조합 | 추가 동치/중복 처리 규칙이 필요해 기초
  학습에 과잉 | 범위외/선택 심화 |

  ### 3. 학습 순서상 위험한 점프 (최소 5개)

  | # | From → To | 점프 이유 | 브릿지 제안 |
  |---|-----------|----------|------------|
  | 1 | COUNT_MUL_RULE_MEANING → PERM_BASIC | 단계 곱에서 곧바로 순열 단원
  으로 점프하면 의미(자리 채우기)와 표기(감소곱/팩토리얼)가 분리되어 공식
  암기화 | PERM_AS_FILLING_SLOTS + PERM_PRODUCT_FORM + FACTORIAL_EXPANSION
  + STEP_PERM_DERIVE |
  | 2 | PERM_BASIC → COMB_BASIC | 순열에서 조합으로 넘어갈 때 “순서 무시/
  중복 제거”가 비면 nPr/nCr 혼동이 고착 | COMB_ORDER_IGNORED_REASON +
  COMB_FROM_PERM_DIVIDE + STEP_COMB_DERIVE |
  | 3 | ORDER_SENSITIVE_CHECK → COMB_BASIC | 순서 게이트만 있고 “선택=부분
  집합/ r개 선택 입력”이 비면 조합 해석이 불안정 | COMB_AS_SUBSET +
  COMB_AS_CHOOSE_R |
  | 4 | SYSTEMATIC_LISTING_BASIC → STEP_PROB_SETUP | 나열에서 바로 확률 설
  정으로 가면 “전체(분모) 고정”이 약해 분모 오류 반복 |
  STEP_SAMPLE_SPACE_BUILD |
  | 5 | SAMPLE_SPACE_AS_SET → STEP_PROB_SETUP | 표본공간을 알아도 등확률
  전제/유리-전체 카운팅 절차가 비면 A/S 오적용 |
  CLASSICAL_PROB_EQUIPROBABLE_CHECK + EQUIPROBABLE_DECISION +
  COUNT_FAVORABLE_TOTAL + PROB_AS_RATIO |
  | 6 | SET_NOTATION_BASICS → STEP_INCL_EXCL_2SET | 집합 기호를 알아도 문
  장→집합식→겹침 판정이 없으면 포함배제가 공식 점프로 됨 |
  EVENT_OPERATION_EXPRESSION + DISJOINT_OR_OVERLAP_DECISION +
  STEP_EVENT_OPS_INCL_EXCL |
  | 7 | INCL_EXCL_2SET_MEANING → STEP_INCL_EXCL_2SET | 의미에서 단계 완성
  으로 바로 가면 항 매핑/대입/계산 실행이 비어 실수 증가 |
  APPLY_INCL_EXCL_2SET |
  | 8 | COMPLEMENT_EVENT → PROB_BASIC | 개념에서 곧바로 1-p로 점프하면 규
  칙 남용(문맥 없는 뒤집기) 위험 | COMPLEMENT_RULE (필요 시
  TOTAL_MINUS_STRATEGY 권장) |

  ## Graph Patch JSON

  {
    "researcher": "R1",
    "scope": "TS_COMB_PROB",
    "add_nodes": [
      { "id": "COUNT_MUL_RULE_MEANING", "type": "micro", "name_ko": "곱셈
  원리 의미(단계 곱)", "domain": "DA", "rep": "C", "confidence": 0.83 },
      { "id": "COUNT_ADD_RULE_MEANING", "type": "micro", "name_ko": "덧셈
  원리 의미(서로소 합)", "domain": "DA", "rep": "C", "confidence": 0.8 },
      { "id": "ORDER_SENSITIVE_CHECK", "type": "micro", "name_ko": "순서
  민감 판단(순열/조합 분기)", "domain": "DA", "rep": "C", "confidence":
  0.76 },
      { "id": "PERM_AS_FILLING_SLOTS", "type": "micro", "name_ko": "순열
  의미(자리 채우기)", "domain": "DA", "rep": "C", "confidence": 0.78 },
      { "id": "PERM_PRODUCT_FORM", "type": "micro", "name_ko": "nPr을 감소
  곱(곱 형태)로 표현", "domain": "DA", "rep": "P", "confidence": 0.74 },
      { "id": "FACTORIAL_EXPANSION", "type": "micro", "name_ko": "팩토리얼
  전개 n!=n*(n-1)*...", "domain": "DA", "rep": "P", "confidence": 0.82 },
      { "id": "FACTORIAL_ZERO_MEANING", "type": "micro", "name_ko": "0! 의
  미 해석(경계 사례)", "domain": "DA", "rep": "A", "confidence": 0.74 },
      { "id": "FACTORIAL_CANCELLATION", "type": "micro", "name_ko": "팩토
  리얼 약분", "domain": "DA", "rep": "P", "confidence": 0.78 },
      { "id": "STEP_PERM_DERIVE", "type": "step", "name_ko": "순열 공식 유
  도 단계", "domain": "DA", "rep": "C", "confidence": 0.74 },

      { "id": "COMB_AS_SUBSET", "type": "micro", "name_ko": "조합 의미(부
  분집합 선택)", "domain": "DA", "rep": "C", "confidence": 0.8 },
      { "id": "COMB_AS_CHOOSE_R", "type": "micro", "name_ko": "r개 선택 상
  황 해석", "domain": "DA", "rep": "C", "confidence": 0.75 },
      { "id": "COMB_ORDER_IGNORED_REASON", "type": "micro", "name_ko": "조
  합에서 순서 중복을 r!로 나누는 이유", "domain": "DA", "rep": "C",
  "confidence": 0.8 },
      { "id": "COMB_FROM_PERM_DIVIDE", "type": "micro", "name_ko": "nPr/r!
  로 nCr을 유도", "domain": "DA", "rep": "P", "confidence": 0.74 },
      { "id": "CHOOSE_THEN_ARRANGE", "type": "micro", "name_ko": "선택 후
  배열( nPr = nCr·r! ) 구조", "domain": "DA", "rep": "C", "confidence":
  0.72 },
      { "id": "STEP_COMB_DERIVE", "type": "step", "name_ko": "조합 공식 유
  도 단계", "domain": "DA", "rep": "C", "confidence": 0.74 },

      { "id": "SYSTEMATIC_LISTING_BASIC", "type": "micro", "name_ko": "체
  계적 나열 기초", "domain": "DA", "rep": "P", "confidence": 0.78 },
      { "id": "TREE_DIAGRAM_BASIC", "type": "micro", "name_ko": "트리 다이
  어그램으로 경우를 표현", "domain": "DA", "rep": "P", "confidence":
  0.7 },
      { "id": "STEP_SAMPLE_SPACE_BUILD", "type": "step", "name_ko": "표본
  공간 구성 단계(빠짐/중복 점검)", "domain": "DA", "rep": "C",
  "confidence": 0.75 },

      { "id": "SET_NOTATION_BASICS", "type": "micro", "name_ko": "집합 기
  초(원소/부분집합/기호)", "domain": "DA", "rep": "C", "confidence":
  0.78 },
      { "id": "SAMPLE_SPACE_AS_SET", "type": "micro", "name_ko": "표본공간
  =집합", "domain": "DA", "rep": "C", "confidence": 0.8 },
      { "id": "EVENT_AS_SUBSET", "type": "micro", "name_ko": "사건=부분집
  합", "domain": "DA", "rep": "C", "confidence": 0.8 },
      { "id": "PROB_AS_RATIO", "type": "micro", "name_ko": "확률=비율(A/
  S)", "domain": "DA", "rep": "A", "confidence": 0.76 },
      { "id": "CLASSICAL_PROB_EQUIPROBABLE_CHECK", "type": "micro",
  "name_ko": "고전확률 등확률 전제 확인", "domain": "DA", "rep": "C",
  "confidence": 0.77 },
      { "id": "EQUIPROBABLE_DECISION", "type": "micro", "name_ko": "등확률
  여부 게이트(Yes/No 분기)", "domain": "DA", "rep": "C", "confidence":
  0.74 },
      { "id": "COUNT_FAVORABLE_TOTAL", "type": "micro", "name_ko": "유리/
  전체 경우의 수 분리 카운팅(A/S)", "domain": "DA", "rep": "P",
  "confidence": 0.77 },
      { "id": "STEP_PROB_SETUP", "type": "step", "name_ko": "고전확률 설정
  단계(전체→사건→전제→A/S)", "domain": "DA", "rep": "C", "confidence":
  0.76 },

      { "id": "EVENT_OPERATION_EXPRESSION", "type": "micro", "name_ko":
  "사건 연산을 집합식으로 표현(문장→A∪B/A∩B/A^c)", "domain": "DA", "rep":
  "P", "confidence": 0.76 },
      { "id": "INTERSECTION_UNION_MEANING", "type": "micro", "name_ko":
  "교집합/합집합 의미(∩/∪)", "domain": "DA", "rep": "C", "confidence":
  0.76 },
      { "id": "CHECK_DOUBLE_COUNTING", "type": "micro", "name_ko": "중복계
  수(겹침) 점검", "domain": "DA", "rep": "C", "confidence": 0.74 },
      { "id": "DISJOINT_EVENTS", "type": "micro", "name_ko": "서로소 사건
  (겹치지 않음) 판별", "domain": "DA", "rep": "C", "confidence": 0.74 },
      { "id": "VENN_DIAGRAM_2SET", "type": "micro", "name_ko": "벤 다이어
  그램(2집합)으로 사건 연산 시각화", "domain": "DA", "rep": "P",
  "confidence": 0.74 },
      { "id": "DISJOINT_OR_OVERLAP_DECISION", "type": "micro", "name_ko":
  "서로소/겹침 판정 게이트", "domain": "DA", "rep": "C", "confidence":
  0.74 },
      { "id": "STEP_EVENT_OPS_INCL_EXCL", "type": "step", "name_ko": "문장
  →집합식→겹침 판정→중복 보정 단계", "domain": "DA", "rep": "C",
  "confidence": 0.74 },
      { "id": "INCL_EXCL_2SET_MEANING", "type": "micro", "name_ko": "2집합
  포함배제 의미(중복 보정)", "domain": "DA", "rep": "C", "confidence":
  0.78 },
      { "id": "APPLY_INCL_EXCL_2SET", "type": "micro", "name_ko": "2집합
  포함배제 식 적용 실행(항 매핑→대입→계산)", "domain": "DA", "rep": "P",
  "confidence": 0.75 },
      { "id": "STEP_INCL_EXCL_2SET", "type": "step", "name_ko": "2집합 포
  함배제 단계", "domain": "DA", "rep": "C", "confidence": 0.73 },

      { "id": "COMPLEMENT_EVENT", "type": "micro", "name_ko": "여사건(보
  완) 개념", "domain": "DA", "rep": "C", "confidence": 0.74 },
      { "id": "COMPLEMENT_RULE", "type": "micro", "name_ko": "여사건 규칙
  (1-p)", "domain": "DA", "rep": "A", "confidence": 0.74 },
      { "id": "TOTAL_MINUS_STRATEGY", "type": "micro", "name_ko": "전체-부
  분(보완) 전략(전체에서 빼기)", "domain": "DA", "rep": "C", "confidence":
  0.68 }
    ],
    "merge_aliases": [
      { "alias": "COUNT_MUL_RULE", "keep": "COUNT_MUL_RULE_MEANING" },
      { "alias": "COUNT_ADD_RULE", "keep": "COUNT_ADD_RULE_MEANING" },
      { "alias": "PERM_MEANING_SLOT", "keep": "PERM_AS_FILLING_SLOTS" },
      { "alias": "FACTORIAL_CONCEPT", "keep": "FACTORIAL_EXPANSION" },
      { "alias": "FACTORIAL_ZERO", "keep": "FACTORIAL_ZERO_MEANING" },
      { "alias": "COMB_MEANING_SUBSET", "keep": "COMB_AS_SUBSET" },
      { "alias": "COMB_DERIVE_FROM_PERM_DIVIDE", "keep":
  "COMB_FROM_PERM_DIVIDE" },
      { "alias": "SAMPLE_SPACE_DEFINE", "keep": "SAMPLE_SPACE_AS_SET" },
      { "alias": "EVENT_DEFINE", "keep": "EVENT_AS_SUBSET" },
      { "alias": "SET_INTERSECTION_UNION", "keep":
  "INTERSECTION_UNION_MEANING" },
      { "alias": "INCLUSION_EXCLUSION_2SET_MEANING", "keep":
  "INCL_EXCL_2SET_MEANING" }
    ],
    "add_edges": [
      { "from": "COUNT_MUL_RULE_MEANING", "to": "PERM_AS_FILLING_SLOTS",
  "type": "requires", "confidence": 0.83 },
      { "from": "PERM_AS_FILLING_SLOTS", "to": "PERM_PRODUCT_FORM",
  "type": "requires", "confidence": 0.74 },
      { "from": "PERM_PRODUCT_FORM", "to": "FACTORIAL_EXPANSION", "type":
  "requires", "confidence": 0.72 },
      { "from": "FACTORIAL_EXPANSION", "to": "STEP_PERM_DERIVE", "type":
  "requires", "confidence": 0.74 },
      { "from": "FACTORIAL_ZERO_MEANING", "to": "STEP_PERM_DERIVE",
  "type": "requires", "confidence": 0.66 },
      { "from": "STEP_PERM_DERIVE", "to": "PERM_BASIC", "type":
  "requires", "confidence": 0.74 },

      { "from": "ORDER_SENSITIVE_CHECK", "to": "STEP_COMB_DERIVE", "type":
  "requires", "confidence": 0.73 },
      { "from": "COMB_AS_SUBSET", "to": "COMB_AS_CHOOSE_R", "type":
  "requires", "confidence": 0.75 },
      { "from": "COMB_AS_CHOOSE_R", "to": "STEP_COMB_DERIVE", "type":
  "requires", "confidence": 0.74 },
      { "from": "COMB_AS_SUBSET", "to": "COMB_ORDER_IGNORED_REASON",
  "type": "requires", "confidence": 0.74 },
      { "from": "COMB_ORDER_IGNORED_REASON", "to":
  "COMB_FROM_PERM_DIVIDE", "type": "requires", "confidence": 0.82 },
      { "from": "PERM_PRODUCT_FORM", "to": "COMB_FROM_PERM_DIVIDE",
  "type": "requires", "confidence": 0.8 },
      { "from": "FACTORIAL_CANCELLATION", "to": "STEP_COMB_DERIVE",
  "type": "requires", "confidence": 0.74 },
      { "from": "COMB_FROM_PERM_DIVIDE", "to": "STEP_COMB_DERIVE", "type":
  "requires", "confidence": 0.74 },
      { "from": "STEP_COMB_DERIVE", "to": "COMB_BASIC", "type":
  "requires", "confidence": 0.74 },

      { "from": "SET_NOTATION_BASICS", "to": "SAMPLE_SPACE_AS_SET",
  "type": "requires", "confidence": 0.74 },
      { "from": "SET_NOTATION_BASICS", "to": "EVENT_AS_SUBSET", "type":
  "requires", "confidence": 0.74 },
      { "from": "SYSTEMATIC_LISTING_BASIC", "to":
  "STEP_SAMPLE_SPACE_BUILD", "type": "requires", "confidence": 0.76 },
      { "from": "SAMPLE_SPACE_AS_SET", "to": "STEP_SAMPLE_SPACE_BUILD",
  "type": "requires", "confidence": 0.75 },
      { "from": "STEP_SAMPLE_SPACE_BUILD", "to": "STEP_PROB_SETUP",
  "type": "requires", "confidence": 0.76 },
      { "from": "EVENT_AS_SUBSET", "to": "STEP_PROB_SETUP", "type":
  "requires", "confidence": 0.78 },
      { "from": "PROB_AS_RATIO", "to": "STEP_PROB_SETUP", "type":
  "requires", "confidence": 0.76 },
      { "from": "CLASSICAL_PROB_EQUIPROBABLE_CHECK", "to":
  "EQUIPROBABLE_DECISION", "type": "requires", "confidence": 0.77 },
      { "from": "EQUIPROBABLE_DECISION", "to": "STEP_PROB_SETUP", "type":
  "requires", "confidence": 0.74 },
      { "from": "COUNT_FAVORABLE_TOTAL", "to": "STEP_PROB_SETUP", "type":
  "requires", "confidence": 0.77 },
      { "from": "STEP_PROB_SETUP", "to": "PROB_BASIC", "type": "requires",
  "confidence": 0.72 },

      { "from": "INTERSECTION_UNION_MEANING", "to":
  "INCL_EXCL_2SET_MEANING", "type": "requires", "confidence": 0.76 },
      { "from": "CHECK_DOUBLE_COUNTING", "to": "INCL_EXCL_2SET_MEANING",
  "type": "requires", "confidence": 0.75 },
      { "from": "DISJOINT_EVENTS", "to": "DISJOINT_OR_OVERLAP_DECISION",
  "type": "requires", "confidence": 0.74 },
      { "from": "DISJOINT_OR_OVERLAP_DECISION", "to":
  "STEP_EVENT_OPS_INCL_EXCL", "type": "requires", "confidence": 0.72 },
      { "from": "EVENT_OPERATION_EXPRESSION", "to":
  "STEP_EVENT_OPS_INCL_EXCL", "type": "requires", "confidence": 0.7 },
      { "from": "STEP_EVENT_OPS_INCL_EXCL", "to": "STEP_INCL_EXCL_2SET",
  "type": "requires", "confidence": 0.73 },
      { "from": "INCL_EXCL_2SET_MEANING", "to": "APPLY_INCL_EXCL_2SET",
  "type": "requires", "confidence": 0.78 },
      { "from": "APPLY_INCL_EXCL_2SET", "to": "STEP_INCL_EXCL_2SET",
  "type": "requires", "confidence": 0.75 },
      { "from": "STEP_INCL_EXCL_2SET", "to": "PROB_BASIC", "type":
  "requires", "confidence": 0.69 },

      { "from": "COMPLEMENT_EVENT", "to": "COMPLEMENT_RULE", "type":
  "requires", "confidence": 0.72 },
      { "from": "COMPLEMENT_RULE", "to": "PROB_BASIC", "type": "requires",
  "confidence": 0.74 }
    ],
    "remove_edges": [],
    "notes": [
      { "claim": "R3 전이 산출물에서 참조되는 핵심 ID(예:
  COMB_AS_CHOOSE_R, FACTORIAL_ZERO_MEANING, STEP_* 등)는 본 파일의
  add_nodes/merge_aliases로 존재/정의가 확인되어야 한다.", "reason":
  "dev_handoff 단일 파일만으로도 병합·DAG 검증·충돌 해결을 진행할 수 있어
  야 한다.", "confidence": 0.74 },
      { "claim": "COMPLEMENT_EVENT(개념)과 COMPLEMENT_RULE(1-p 규칙)은
  alias 병합 없이 단계적으로 연결하는 편이 안전하다.", "reason": "개념과
  계산 규칙은 추상 수준/사용처가 달라 동일시하면 규칙 남용이 생길 수 있
  다.", "confidence": 0.78 },
      { "claim": "메타 수준 동형(예: 경계 케이스 패턴, 표현 전환 패턴)은
  requires(잠금)로 강제하지 않는 편이 안전하다.", "reason": "대체 경로가
  많아 잠금으로 강제하면 과잉 선행/혼동을 만들 수 있다.", "confidence":
  0.7 },
      { "claim": "STEP_SAMPLE_SPACE_BUILD→STEP_PROB_SETUP 경로를 두면 확률
  의 분모/분자 설정 오류가 감소한다.", "reason": "전체(표본공간) 고정→사건
  정의→전제(등확률) 확인→A/S 카운팅 순서가 흔들릴 때 분모가 바뀌거나 사건
  을 전체로 착각한다.", "confidence": 0.76 },
      { "claim": "EVENT_OPERATION_EXPRESSION과
  DISJOINT_OR_OVERLAP_DECISION을 포함배제 앞에 두면 부호·항 누락이 줄어든
  다.", "reason": "문장 조건을 집합식으로 고정하고 겹침 여부를 먼저 분기하
  면 -교집합이 공식 암기가 아니라 중복 보정으로 연결된다.", "confidence":
  0.75 }
    ]
  }

  ## Standards Tags (내부 태그)

  - 추가된 태그: COUNT_MUL_RULE_MEANING, COUNT_ADD_RULE_MEANING,
    ORDER_SENSITIVE_CHECK, PERM_AS_FILLING_SLOTS, PERM_PRODUCT_FORM,
    FACTORIAL_EXPANSION, FACTORIAL_ZERO_MEANING, FACTORIAL_CANCELLATION,
    STEP_PERM_DERIVE, COMB_AS_SUBSET, COMB_AS_CHOOSE_R,
    COMB_ORDER_IGNORED_REASON, COMB_FROM_PERM_DIVIDE, CHOOSE_THEN_ARRANGE,
    STEP_COMB_DERIVE, SYSTEMATIC_LISTING_BASIC, TREE_DIAGRAM_BASIC,
    STEP_SAMPLE_SPACE_BUILD, SET_NOTATION_BASICS, SAMPLE_SPACE_AS_SET,
    EVENT_AS_SUBSET, PROB_AS_RATIO, CLASSICAL_PROB_EQUIPROBABLE_CHECK,
    EQUIPROBABLE_DECISION, COUNT_FAVORABLE_TOTAL, STEP_PROB_SETUP,
    EVENT_OPERATION_EXPRESSION, INTERSECTION_UNION_MEANING,
    CHECK_DOUBLE_COUNTING, DISJOINT_EVENTS, VENN_DIAGRAM_2SET,
    DISJOINT_OR_OVERLAP_DECISION, STEP_EVENT_OPS_INCL_EXCL,
    INCL_EXCL_2SET_MEANING, APPLY_INCL_EXCL_2SET, STEP_INCL_EXCL_2SET,
    COMPLEMENT_EVENT, COMPLEMENT_RULE, TOTAL_MINUS_STRATEGY
  - 수정된 태그: COUNT_MUL_RULE(→COUNT_MUL_RULE_MEANING),
    COUNT_ADD_RULE(→COUNT_ADD_RULE_MEANING),
    PERM_MEANING_SLOT(→PERM_AS_FILLING_SLOTS),
    FACTORIAL_CONCEPT(→FACTORIAL_EXPANSION),
    FACTORIAL_ZERO(→FACTORIAL_ZERO_MEANING),
    COMB_MEANING_SUBSET(→COMB_AS_SUBSET),
    COMB_DERIVE_FROM_PERM_DIVIDE(→COMB_FROM_PERM_DIVIDE),
    SAMPLE_SPACE_DEFINE(→SAMPLE_SPACE_AS_SET),
    EVENT_DEFINE(→EVENT_AS_SUBSET),
    SET_INTERSECTION_UNION(→INTERSECTION_UNION_MEANING),
    INCLUSION_EXCLUSION_2SET_MEANING(→INCL_EXCL_2SET_MEANING)

  [/R1 Coverage Report]

  ###DONE:18f9bff97c###


› -> /mnt/c/Users/irron/Desktop/my/web_service_new/
  calculate_math/.agents/inbox/research_216a78baad.md


  49% context left



› Request 216a78baad: 아래 파일(티켓 지시)을 읽고 결과를 이
  터미널에 Output Format대로 그대로 출력해줘. 가능하면 repo
  파일을 생성/수정하지 말고, 마지막에 마커를 그대로 출력해.
  -> /mnt/c/Users/irron/Desktop/my/web_service_new/
  calculate_math/.agents/inbox/research_216a78baad.md



• Explored
  └ Read research_216a78baad.md, T1.md
                                                  

• Ran jq
  │ '.task_id, .plan.target_scope? // .plan.scope? // .pla
                            

─                                                           
                
    … +144 lines
                        
      "max_attempts_before_pm_patch"    


• ###BEGIN:216a78baad###

  ## Coverage Gap Report

  ### 1. 누락된 기초 개념 (최소 10개)

  | # | 개념명 | 누락 이유 | 심각도 |
  |---|--------|----------|--------|
  | 1 | 단일 버튼 UX(페이지 하단 채점하기/전체 제출) | 현재
  는 문제 카드별 제출만 존재해 “모든 문제 후 일괄 채점” 요구
  를 충족하지 못함 | 높음 |
  | 2 | 문제 카드별 제출 버튼 제거 | 요구사항 1)에서 제거가
  핵심인데 현재 UI는 per-problem 제출 흐름에 고정되어 있음 |
  높음 |
  | 3 | 채점하기 disabled 조건 정의(정규화 일관성) | 버튼
  disabled 기준이 normalizeNumericInput()과 일관되게 정의되
  어야 하나 현재는 해당 UX 자체가 없음 | 높음 |
  | 4 | “모든 문제 미입력” 판정 로직(allAnswered) |
  problems[] 전체를 기준으로 answerByProblemId가 모두 채워졌
  는지 판단하는 상태/계산이 필요(문제 수 변화/로딩 타이밍 포
  함) | 높음 |
  | 5 | 입력 엣지케이스(10개+) 목록/정의 | AC 요구(10개+)가
  문서/설계로 존재해야 하는데 현재 정의가 없음(예: "", "
  ", \"\\t\\n\", \",\", " , , ", "1,234", " 1 234 ", "0",
  "-0", "+", ".", "Infinity" 등) | 중 |
  | 6 | 일괄 채점 동작(전체 순회→채점→결과 맵 생성) | 현재는
  submitProblem(problem)로 단건 채점만 가능하며, 전체 문제를
  한 번에 채점해 결과를 고정하는 액션이 없음 | 높음 |
  | 7 | 채점 이후 UI 상태 정의(채점 전/후) | 현재는 결과가
  하나라도 있으면 점수 0/N이 항상 표시될 수 있고, “채점 전/
  후” 상태(예: hasGraded/isSubmitted) 기준이 없음 | 중 |
  | 8 | “채점 후 재입력” UX 정책 | bulk 채점 후 입력을 수정
  할 때 결과/점수의 일관성(자동 결과 초기화 vs “다시 채점”
  버튼) 정책이 필요하나 정의 없음 | 중 |
  | 9 | localStorage 저장 시점 변경(개별→일괄) | 현재는 개별
  제출 시 submissions를 merge 저장; 요구는 일괄 채점 후 답안
  +결과를 한 번에 저장 | 높음 |
  |10| 저장/복원 스키마 호환/마이그레이션 | 기존 키
  (curriculum-viewer:learn:lastResult:${nodeId})에 부분 제출
  데이터가 남아있을 수 있어 bulk 전환 시 호환 규칙이 필요 |
  높음 |
  |11| 초기화/다시 풀기(키 삭제 + 상태 리셋) | 요구사항 4)
  다시 풀기 버튼 및 저장된 결과/답안 삭제가 필요하나 현재 없
  음 | 높음 |
  |12| Out of Scope 가드레일 명시(무엇을 안 바꿀지) | 구현
  중 문제 타입 확장/서버 연동/커리큘럼 구조 변경으로 범위가
  새는 것을 막는 체크리스트가 필요 | 중 |

  ### 2. 과잉 난이도/불필요 선행 (최소 5개)

  | # | 개념명 | 과잉 이유 | 조치 제안 |
  |---|--------|----------|----------|
  | 1 | 서버 연동/DB 저장 | Out of Scope 위반이며
  localStorage 기반 요구를 흐림 | 금지(요구 범위 밖) |
  | 2 | 문제 타입 확장(서술형/객관식 등) | 이번 변경의 핵심
  은 “제출 UX/저장/복원”이며 타입 확장은 범위 밖 | 금지(향후
  별도 티켓) |
  | 3 | 문제은행 JSON 스키마 변경 | 현재는 problems_v1.json
  로딩으로 충분하며 스키마 변경은 회귀 위험만 큼 | 기존 스키
  마 유지 |
  | 4 | grading 로직 대개편(분수/근삿값/허용오차 등) | 요구
  는 제출 UX이며 채점 확장은 별도 사양 필요 |
  gradeNumericAnswer() 유지, 필요 시 후속 티켓 |
  | 5 | 대형 상태관리 도입(Redux/Zustand 등) | LearnPage 단
  일 화면 상태로 해결 가능, 도입은 과잉 | React state/
  useMemo로 해결 |
  | 6 | “입력 중 실시간 저장(autosave)” | 요구는 “채점 후 한
  번에 저장”이며 autosave는 UX/스키마를 복잡하게 함 | 이번
  범위에서 제외(필요 시 옵션) |

  ### 3. 학습 순서상 위험한 점프 (최소 5개)

  | # | From → To | 점프 이유 | 브릿지 제안 |
  |---|-----------|----------|------------|
  | 1 | 문제별 제출 제거 → bulk UX 미구현 | 제거만 하면 채점
  경로가 사라져 기능 공백 발생 | 단일 채점하기 버튼 +
  gradeAll 액션 먼저 추가 후 제거 |
  | 2 | disabled 판정(원문 입력 기준) → 실제 채점(정규화 기
  준) | " , " 같은 입력이 disabled 해제되거나 반대로 0이 미
  입력 처리되는 불일치 위험 | disabled는
  normalizeNumericInput(answer).length>0로 고정 |
  | 3 | 저장 시점 변경(개별→일괄) → 기존 localStorage 데이터
  무시 | 기존 submissions가 부분만 존재할 수 있어 복원/버튼
  상태가 꼬일 수 있음 | “legacy partial” 감지(개수/키) 후 초
  기화 또는 안내/정책 적용 |
  | 4 | 점수 표시(항상 0/N) → 채점 UX | 채점 전부터 점수가
  보이면 사용자가 이미 채점된 것으로 오해 | hasGraded 도입
  후 채점 후에만 점수/정답 표시 |
  | 5 | 채점 후 입력 수정 → 결과/점수 유지 | 입력과 결과가
  불일치(스테일) 상태가 생김 | 입력 변경 시 결과 초기화 또는
  버튼을 다시 채점으로 전환 |
  | 6 | 초기화(다시 풀기) 없음 → 상태 복원 유지 | 사용자가
  저장된 결과를 지울 방법이 없어 UX 막힘 | 다시 풀기(키 삭제
  +상태 리셋) 추가 |

  ## Graph Patch JSON

  {
    "researcher": "R1",
    "scope": "curriculum_viewer_learning_bulk_submit_v1",
    "add_nodes": [
      { "id": "LEARN_REMOVE_PER_PROBLEM_SUBMIT", "type":
  "micro", "name_ko": "문제 카드별 제출 버튼 제거",
  "domain": "FE", "rep": "P", "confidence": 0.85 },
      { "id": "LEARN_ADD_BULK_GRADE_BUTTON", "type":
  "micro", "name_ko": "페이지 하단 단일 버튼(채점하기/전체
  제출) 추가", "domain": "FE", "rep": "P", "confidence":
  0.85 },
      { "id": "LEARN_DISABLED_USES_NORMALIZE_NUMERIC_INPUT",
  "type": "micro", "name_ko": "disabled 판정 기준을
  normalizeNumericInput과 일치", "domain": "FE", "rep": "C",
  "confidence": 0.82 },
      { "id": "LEARN_ALL_ANSWERED_NORMALIZED", "type":
  "micro", "name_ko": "모든 문제 미입력 판정(allAnswered, 정
  규화 기반)", "domain": "FE", "rep": "P", "confidence":
  0.82 },
      { "id": "LEARN_BULK_GRADE_ALL_ACTION", "type":
  "micro", "name_ko": "일괄 채점 액션(전체 순회
  →gradeNumericAnswer)", "domain": "FE", "rep": "P",
  "confidence": 0.84 },
      { "id": "LEARN_GRADED_STATE_FLAG", "type": "micro",
  "name_ko": "채점 전/후 상태 플래그(hasGraded/isSubmitted)
  정의", "domain": "FE", "rep": "C", "confidence": 0.78 },
      { "id": "LEARN_SCORE_AND_RESULT_GATING", "type":
  "micro", "name_ko": "채점 후에만 점수/정오/정답 표시(게이
  팅)", "domain": "FE", "rep": "P", "confidence": 0.76 },
      { "id": "LEARN_LOCALSTORAGE_SAVE_BULK", "type":
  "micro", "name_ko": "일괄 채점 후 답안+결과를 한 번에 저
  장", "domain": "FE", "rep": "P", "confidence": 0.8 },
      { "id": "LEARN_LOCALSTORAGE_MIGRATION_LEGACY_PARTIAL",
  "type": "micro", "name_ko": "기존 부분 제출(submissions 일
  부) 데이터 호환/마이그레이션 규칙", "domain": "FE", "rep":
  "C", "confidence": 0.74 },
      { "id": "LEARN_RESET_CLEAR_STORAGE", "type": "micro",
  "name_ko": "다시 풀기(초기화): 저장 키 삭제 + 상태 리셋",
  "domain": "FE", "rep": "P", "confidence": 0.82 },
      { "id": "LEARN_AFTER_GRADE_EDIT_POLICY", "type":
  "micro", "name_ko": "채점 후 재입력 정책(결과 초기화 또는
  다시 채점)", "domain": "UX", "rep": "C", "confidence":
  0.7 },
      { "id": "LEARN_DISABLED_EDGECASES_12", "type":
  "micro", "name_ko": "disabled 판정 입력 엣지케이스 12종(빈
  값/공백/콤마/0/부호/소수점 등)", "domain": "QA", "rep":
  "C", "confidence": 0.76 }
    ],
    "merge_aliases": [],
    "add_edges": [
      { "from":
  "LEARN_DISABLED_USES_NORMALIZE_NUMERIC_INPUT", "to":
  "LEARN_ALL_ANSWERED_NORMALIZED", "type": "requires",
  "confidence": 0.82 },
      { "from": "LEARN_ALL_ANSWERED_NORMALIZED", "to":
  "LEARN_ADD_BULK_GRADE_BUTTON", "type": "requires",
  "confidence": 0.78 },
      { "from": "LEARN_ADD_BULK_GRADE_BUTTON", "to":
  "LEARN_BULK_GRADE_ALL_ACTION", "type": "requires",
  "confidence": 0.8 },
      { "from": "LEARN_BULK_GRADE_ALL_ACTION", "to":
  "LEARN_LOCALSTORAGE_SAVE_BULK", "type": "requires",
  "confidence": 0.8 },
      { "from": "LEARN_GRADED_STATE_FLAG", "to":
  "LEARN_SCORE_AND_RESULT_GATING", "type": "requires",
  "confidence": 0.76 },
      { "from": "LEARN_BULK_GRADE_ALL_ACTION", "to":
  "LEARN_GRADED_STATE_FLAG", "type": "requires",
  "confidence": 0.74 },
      { "from":
  "LEARN_LOCALSTORAGE_MIGRATION_LEGACY_PARTIAL", "to":
  "LEARN_LOCALSTORAGE_SAVE_BULK", "type": "requires",
  "confidence": 0.74 },
      { "from": "LEARN_RESET_CLEAR_STORAGE", "to":
  "LEARN_LOCALSTORAGE_SAVE_BULK", "type": "requires",
  "confidence": 0.78 },
      { "from": "LEARN_AFTER_GRADE_EDIT_POLICY", "to":
  "LEARN_SCORE_AND_RESULT_GATING", "type": "requires",
  "confidence": 0.7 },
      { "from": "LEARN_DISABLED_EDGECASES_12", "to":
  "LEARN_ALL_ANSWERED_NORMALIZED", "type": "requires",
  "confidence": 0.76 },
      { "from": "LEARN_ADD_BULK_GRADE_BUTTON", "to":
  "LEARN_REMOVE_PER_PROBLEM_SUBMIT", "type": "requires",
  "confidence": 0.72 }
    ],
    "remove_edges": [],
    "notes": [
      { "claim": "현재 LearnPage는 문제 카드별 제출
  (submitProblem)로 단건 채점/단건 저장을 수행하며,
  StoredResult는 { nodeId, updatedAt, submissions:
  { [problemId]: { submitted, isCorrect } } } 형태이다.",
  "reason": "LearnPage.tsx에서 gradeNumericAnswer 호출 및
  localStorage merge 저장 로직과 StoredResult 타입 정의가 확
  인된다.", "confidence": 0.86 },
      { "claim": "bulk UX의 disabled 판정은
  normalizeNumericInput(answer).length>0 기준으로 모든
  problems가 채워졌는지 검사해야 grading과 일관된다.",
  "reason": "grading.ts의 normalizeNumericInput은 공백/콤마
  제거를 수행하므로, 동일 기준을 쓰지 않으면 '미입력/입력됨'
  판단이 채점 결과와 어긋난다.", "confidence": 0.82 },
      { "claim": "점수/정오/정답 표시는 채점 전/후 상태
  (hasGraded 등)로 게이팅하지 않으면 채점 전에도 0/N이 노출
  되는 혼란이 발생할 수 있다.", "reason": "현재 score 계산은
  problems.length만으로 0/N을 만들 수 있어 bulk 전환 시 '채
  점 전' 상태를 별도로 분리하는 것이 안전하다.",
  "confidence": 0.74 },
      { "claim": "기존 localStorage에 부분 제출(submissions
  일부) 데이터가 남아 있을 수 있으므로 bulk 전환 시 호환 규
  칙(초기화/마이그레이션/안내)이 필요하다.", "reason": "기존
  구현은 문제별 제출 시마다 submissions를 merge 저장하므로,
  저장된 문제 수가 전체 problems 수보다 적은 legacy 데이터가
  자연스럽게 생성된다.", "confidence": 0.78 },
      { "claim": "Out of Scope(문제 타입 확장/서버 연동/커리
  큘럼 구조 변경)를 피하고 LearnPage.tsx 중심으로 제출 UX/저
  장 시점만 바꾸는 것이 회귀 위험이 낮다.", "reason":
  "task.md가 수정 중심 파일과 비범위를 명시하며, 현재 문제
  로딩/채점 로직은 요구 충족에 충분한 기반을 제공한다.",
  "confidence": 0.76 }
    ]
  }

  ## Standards Tags (내부 태그)

  - 추가된 태그: LEARN_ADD_BULK_GRADE_BUTTON,
    LEARN_REMOVE_PER_PROBLEM_SUBMIT,
    LEARN_ALL_ANSWERED_NORMALIZED,
    LEARN_DISABLED_USES_NORMALIZE_NUMERIC_INPUT,
    LEARN_DISABLED_EDGECASES_12,
    LEARN_BULK_GRADE_ALL_ACTION, LEARN_GRADED_STATE_FLAG,
    LEARN_SCORE_AND_RESULT_GATING,
    LEARN_LOCALSTORAGE_SAVE_BULK,
    LEARN_LOCALSTORAGE_MIGRATION_LEGACY_PARTIAL,
    LEARN_RESET_CLEAR_STORAGE, LEARN_AFTER_GRADE_EDIT_POLICY
  - 수정된 태그:
    LEARN_SINGLE_SUBMIT_FLOW(→LEARN_BULK_SUBMIT_FLOW),
    LEARN_STORAGE_UPDATE_PER_PROBLEM(→LEARN_STORAGE_SAVE_AFT
    ER_BULK_GRADE)

  [/R1 Coverage Report]

  ###DONE:216a78baad###


› Explain this codebase

  44% context left · ? for shortcuts


============================================================
[2026-01-08 10:24:54] RESEARCH1 (req_id: c49dfc24b0)
============================================================
  "STEP_EVENT_OPS_INCL_EXCL", "type": "requires", "confidence": 0.72 },
      { "from": "EVENT_OPERATION_EXPRESSION", "to":
  "STEP_EVENT_OPS_INCL_EXCL", "type": "requires", "confidence": 0.7 },
      { "from": "STEP_EVENT_OPS_INCL_EXCL", "to": "STEP_INCL_EXCL_2SET",
  "type": "requires", "confidence": 0.73 },
      { "from": "INCL_EXCL_2SET_MEANING", "to": "APPLY_INCL_EXCL_2SET",
  "type": "requires", "confidence": 0.78 },
      { "from": "APPLY_INCL_EXCL_2SET", "to": "STEP_INCL_EXCL_2SET",
  "type": "requires", "confidence": 0.75 },
      { "from": "STEP_INCL_EXCL_2SET", "to": "PROB_BASIC", "type":
  "requires", "confidence": 0.69 },

      { "from": "COMPLEMENT_EVENT", "to": "COMPLEMENT_RULE", "type":
  "requires", "confidence": 0.72 },
      { "from": "COMPLEMENT_RULE", "to": "PROB_BASIC", "type": "requires",
  "confidence": 0.74 }
    ],
    "remove_edges": [],
    "notes": [
      { "claim": "R3 전이 산출물에서 참조되는 FACTORIAL_ZERO_MEANING,
  COMB_AS_CHOOSE_R, COMB_FROM_PERM_DIVIDE 등은 add_nodes/merge_aliases로
  정의를 보강해 단일 파일 검증이 가능해야 한다.", "reason": "dev_handoff만
  으로도 전이 대상 노드의 존재/의미가 확인되어야 병합·DAG 검증·충돌 해결을
  진행할 수 있다.", "confidence": 0.74 },
      { "claim": "SLOT_DIAGRAM↔TREE_DIAGRAM_BASIC,
  SYSTEMATIC_LISTING_BASIC↔EVENT_OPERATION_EXPRESSION 같은 메타(표현 전환)
  유사성은 requires(잠금)로 강제하지 않는 편이 안전하다.", "reason": "표현
  전환은 대체 경로가 많아 잠금으로 강제하면 과잉 의존/불필요한 선행이 될
  수 있다.", "confidence": 0.69 },
      { "claim": "COMPLEMENT_EVENT↔FACTORIAL_ZERO_MEANING 유사성은 '경계
  사례 안정화'라는 메타 수준으로만 해석해야 하며 alias 병합은 피한다.",
  "reason": "여사건(확률/집합)과 0!(조합 연산)은 내용 영역이 달라 동일시하
  면 오개념을 유발할 수 있다.", "confidence": 0.78 },
      { "claim": "STEP_SAMPLE_SPACE_BUILD→STEP_PROB_SETUP 경로를 두면 확률
  의 분모/분자 설정 오류가 감소한다.", "reason": "전체(표본공간) 고정→사건
  정의→전제(등확률) 확인→A/S 카운팅 순서가 흔들릴 때 분모가 바뀌거나 사건
  을 전체로 착각한다.", "confidence": 0.76 },
      { "claim": "EVENT_OPERATION_EXPRESSION과
  DISJOINT_OR_OVERLAP_DECISION을 경유하면 포함배제의 부호·항 누락이 줄어든
  다.", "reason": "문장 조건을 집합식으로 고정하고 겹침 여부를 먼저 분기하
  면 -교집합이 공식 암기가 아니라 중복 보정으로 연결된다.", "confidence":
  0.75 }
    ]
  }

  ## Standards Tags (내부 태그)

  - 추가된 태그: COUNT_MUL_RULE_MEANING, COUNT_ADD_RULE_MEANING,
    SLOT_DIAGRAM, PERM_AS_FILLING_SLOTS, PERM_PRODUCT_FORM,
    FACTORIAL_EXPANSION, FACTORIAL_ZERO_MEANING, FACTORIAL_CANCELLATION,
    STEP_PERM_DERIVE, ORDER_SENSITIVE_CHECK, COMB_AS_SUBSET,
    COMB_AS_CHOOSE_R, COMB_ORDER_IGNORED_REASON, COMB_FROM_PERM_DIVIDE,
    CHOOSE_THEN_ARRANGE, STEP_COMB_DERIVE, SYSTEMATIC_LISTING_BASIC,
    TREE_DIAGRAM_BASIC, SET_NOTATION_BASICS, SAMPLE_SPACE_AS_SET,
    EVENT_AS_SUBSET, STEP_SAMPLE_SPACE_BUILD, PROB_AS_RATIO,
    CLASSICAL_PROB_EQUIPROBABLE_CHECK, EQUIPROBABLE_DECISION,
    COUNT_FAVORABLE_TOTAL, STEP_PROB_SETUP, EVENT_OPERATION_EXPRESSION,
    INTERSECTION_UNION_MEANING, CHECK_DOUBLE_COUNTING, DISJOINT_EVENTS,
    VENN_DIAGRAM_2SET, DISJOINT_OR_OVERLAP_DECISION,
    STEP_EVENT_OPS_INCL_EXCL, INCL_EXCL_2SET_MEANING,
    APPLY_INCL_EXCL_2SET, STEP_INCL_EXCL_2SET, COMPLEMENT_EVENT,
    COMPLEMENT_RULE
  - 수정된 태그: COUNT_MUL_RULE(→COUNT_MUL_RULE_MEANING),
    COUNT_ADD_RULE(→COUNT_ADD_RULE_MEANING),
    SLOT_DIAGRAM_BASIC(→SLOT_DIAGRAM),
    PERM_MEANING_SLOT(→PERM_AS_FILLING_SLOTS),
    FACTORIAL_ZERO(→FACTORIAL_ZERO_MEANING),
    COMB_MEANING_SUBSET(→COMB_AS_SUBSET),
    COMB_DERIVE_FROM_PERM_DIVIDE(→COMB_FROM_PERM_DIVIDE),
    SAMPLE_SPACE_DEFINE(→SAMPLE_SPACE_AS_SET),
    EVENT_DEFINE(→EVENT_AS_SUBSET),
    SET_INTERSECTION_UNION(→INTERSECTION_UNION_MEANING),
    INCLUSION_EXCLUSION_2SET_MEANING(→INCL_EXCL_2SET_MEANING)

  [/R1 Coverage Report]

  ###DONE:873d8d27e4###


› Request 9372cf2003: 아래 파일(티켓 지시)을 읽고 결과를 이 터미널에
  Output Format대로 그대로 출력해줘. 가능하면 repo 파일을 생성/수정하지
  말고, 마지막에 마커를 그대로 출력해. -> /mnt/c/Users/irron/Desktop/my/
  web_service_new/calculate_math/.agents/inbox/research_9372cf2003.md


• Explored
  └ Read research_9372cf2003.md

─ Worked for 9s ──────────────────────────────────────────────────────────

• ###BEGIN:9372cf2003###

  ## Coverage Gap Report

  ### 1. 누락된 기초 개념 (최소 10개)

  | # | 개념명 | 누락 이유 | 심각도 |
  |---|--------|----------|--------|
  | 1 | COUNT_MUL_RULE_MEANING(곱셈 원리 의미) | 순열/경우의 수의 핵심 기
  반인데 단계 곱 의미가 비면 공식·절차가 암기형으로 굳음 | 높음 |
  | 2 | SLOT_DIAGRAM(자리/슬롯 도식화) | 조건/제약을 “자리”로 외재화하지
  못하면 문장→곱 구조 전환이 약함 | 중 |
  | 3 | PERM_AS_FILLING_SLOTS(순열 의미: 자리 채우기) | nPr을 배열/배치 의
  미로 못 잡으면 조건을 공식 항에 매핑하기 어려움 | 높음 |
  | 4 | PERM_PRODUCT_FORM(nPr의 곱 형태) | 곱 형태가 없으면 팩토리얼 표기/
  전개로의 표현 전환이 끊김 | 중 |
  | 5 | FACTORIAL_EXPANSION(팩토리얼 전개) | n!=n*(n-1)*… 구조 부재 시 유
  도/검산이 블랙박스가 됨 | 높음 |
  | 6 | FACTORIAL_ZERO_MEANING(0! 의미) | r=0, r=n, nC0 등 경계 사례에서
  값이 흔들리면 전체 체계가 붕괴 | 중 |
  | 7 | FACTORIAL_CANCELLATION(팩토리얼 약분) | 조합 계산에서 약분 절차가
  없으면 nCr 계산이 기계적이거나 오류 다발 | 중 |
  | 8 | ORDER_SENSITIVE_CHECK(순서 민감 판단) | 순서 중요/무시 분기 기준이
  없으면 순열/조합 선택 혼동이 지속 | 높음 |
  | 9 | COMB_AS_SUBSET(조합 의미: 부분집합 선택) | 선택=부분집합 관점이 없
  으면 조합 공식이 맥락 없는 계산으로 남음 | 높음 |
  |10| COMB_AS_CHOOSE_R(r개 선택 해석) | “r개 선택”을 입력으로 고정하지 못
  하면 조건 누락/중복으로 연결 | 중 |
  |11| COMB_ORDER_IGNORED_REASON(왜 r!로 나누는가) | ‘중복 제거’ 이유가 없
  으면 nPr/r! 유도와 조합 공식이 암기 점프로 변함 | 높음 |
  |12| COMB_FROM_PERM_DIVIDE(nPr/r! 유도) | 유도 절차가 없으면 조합 공식으
  로의 전이가 과격해짐 | 중 |
  |13| CHOOSE_THEN_ARRANGE(선택 후 배열: nPr=nCr·r!) | 복합 카운팅(선택×배
  열)에서 구조 분해가 없으면 경로 선택이 불안정 | 중 |
  |14| SYSTEMATIC_LISTING_BASIC(체계적 나열) | 표본공간 구성의 기본 절차가
  없으면 분모(전체) 고정이 흔들림 | 높음 |
  |15| STEP_SAMPLE_SPACE_BUILD(표본공간 구성 단계) | “전체(분모) 고정” 중
  간 단계가 없으면 고전확률 설정에서 분모 오류 반복 | 높음 |
  |16| SET_NOTATION_BASICS(집합 기초 기호) | 사건/연산을 집합 언어로 고정
  하는 전제가 없으면 조건을 수식화하기 어려움 | 높음 |
  |17| EVENT_OPERATION_EXPRESSION(문장→집합식) | 문장을 A∪B/A∩B/A^c로 고정
  하지 못하면 포함배제/여사건에서 항 매핑·부호 실수 증가 | 높음 |
  |18| DISJOINT_EVENTS(서로소 사건 판별) | “서로소면 그냥 더함” 조건이 약
  하면 중복 합산/누락이 빈발 | 중 |
  |19| CHECK_DOUBLE_COUNTING(중복계수 점검) | 겹침(중복) 감지가 약하면 포
  함배제에서 부호·항 실수 빈발 | 중 |
  |20| INCL_EXCL_2SET_MEANING(2집합 포함배제 의미) | “왜 교집합을 빼는가
  (중복 보정)” 의미 없이 공식만 주면 오용/암기 위험 | 높음 |

  ### 2. 과잉 난이도/불필요 선행 (최소 5개)

  | # | 개념명 | 과잉 이유 | 조치 제안 |
  |---|--------|----------|----------|
  | 1 | 중복순열/같은 것이 있는 순열 | 분류/중복 처리까지 요구해 기초(자리
  채우기)에서 과잉 | 범위외/선택 심화 |
  | 2 | 원순열(원배치) | 회전동치 등 추가 규칙이 필요해 초기 학습에 과잉 |
  별도 심화로 이동 |
  | 3 | 중복조합(중복허용 조합) | 기초 조합(부분집합 선택) 정착 전에는 해
  석/공식 선택 부담이 큼 | 별도 심화로 분리 |
  | 4 | 3집합 이상 포함배제 일반식 | 2집합 의미 정착 전에는 기호/계산 부담
  과도 | 기본은 2집합으로 제한 |
  | 5 | 조건부확률 | 분모 재정의/사건 분할이 필요해 TS_COMB_PROB 기초에서
  인지부하가 큼 | 별도 심화 단원으로 분리 |
  | 6 | 베이즈 정리 | 조건부확률+역확률까지 요구하는 고난도 전이 | 범위외/
  선택 심화 |
  | 7 | 확률변수/기댓값/분산/분포 | 사건 확률에서 분포/통계로 축이 바뀌는
  별도 영역 | 별도 보스/단원 분리 |

  ### 3. 학습 순서상 위험한 점프 (최소 5개)

  | # | From → To | 점프 이유 | 브릿지 제안 |
  |---|-----------|----------|------------|
  | 1 | COUNT_MUL_RULE_MEANING → STEP_PERM_DERIVE | 단계 곱에서 바로 유도
  단계로 가면 ‘자리 의미/표현 전환’이 비어 유도가 절차 암기로 됨 |
  SLOT_DIAGRAM + PERM_AS_FILLING_SLOTS + PERM_PRODUCT_FORM |
  | 2 | PERM_PRODUCT_FORM → STEP_PERM_DERIVE | 곱 형태에서 팩토리얼로의 전
  개/경계(0!)가 없으면 유도·검산이 불안정 | FACTORIAL_EXPANSION +
  FACTORIAL_ZERO_MEANING |
  | 3 | COMB_AS_SUBSET → STEP_COMB_DERIVE | “왜 r!로 나누는가”가 없으면 조
  합 유도가 암기 점프로 변함 | COMB_ORDER_IGNORED_REASON +
  COMB_FROM_PERM_DIVIDE |
  | 4 | COMB_FROM_PERM_DIVIDE → STEP_COMB_DERIVE | 유도 실행(나누기)만 강
  조되면 의미(중복 제거) 없이 절차만 남아 오류 교정이 어려움 |
  COMB_ORDER_IGNORED_REASON + CHOOSE_THEN_ARRANGE |
  | 5 | SYSTEMATIC_LISTING_BASIC → STEP_PROB_SETUP | 나열에서 곧바로 확률
  설정으로 가면 분모(전체) 고정이 약해 분모 오류 반복 |
  STEP_SAMPLE_SPACE_BUILD |
  | 6 | SET_NOTATION_BASICS → STEP_INCL_EXCL_2SET | 집합 기호를 알아도 문
  장→집합식→겹침 판정이 없으면 포함배제가 공식 점프로 됨 |
  EVENT_OPERATION_EXPRESSION + DISJOINT_OR_OVERLAP_DECISION +
  STEP_EVENT_OPS_INCL_EXCL |
  | 7 | INCL_EXCL_2SET_MEANING → STEP_INCL_EXCL_2SET | 의미에서 바로 단계
  완성으로 가면 항 매핑→대입→계산 실행이 비어 실수가 증가 |
  APPLY_INCL_EXCL_2SET |

  ## Graph Patch JSON

  {
    "researcher": "R1",
    "scope": "TS_COMB_PROB",
    "add_nodes": [
      { "id": "COUNT_MUL_RULE_MEANING", "type": "micro", "name_ko": "곱셈
  원리 의미(단계 곱)", "domain": "DA", "rep": "C", "confidence": 0.83 },
      { "id": "COUNT_ADD_RULE_MEANING", "type": "micro", "name_ko": "덧셈
  원리 의미(서로소 합)", "domain": "DA", "rep": "C", "confidence": 0.8 },
      { "id": "SLOT_DIAGRAM", "type": "micro", "name_ko": "자리/슬롯 도식
  화", "domain": "DA", "rep": "P", "confidence": 0.76 },
      { "id": "PERM_AS_FILLING_SLOTS", "type": "micro", "name_ko": "순열
  의미(자리 채우기)", "domain": "DA", "rep": "C", "confidence": 0.78 },
      { "id": "PERM_PRODUCT_FORM", "type": "micro", "name_ko": "nPr을 곱의
  형태로 표현", "domain": "DA", "rep": "P", "confidence": 0.74 },
      { "id": "FACTORIAL_EXPANSION", "type": "micro", "name_ko": "팩토리얼
  전개 n!=n*(n-1)*...", "domain": "DA", "rep": "P", "confidence": 0.82 },
      { "id": "FACTORIAL_ZERO_MEANING", "type": "micro", "name_ko": "0! 의
  미 해석(경계 사례)", "domain": "DA", "rep": "A", "confidence": 0.74 },
      { "id": "FACTORIAL_CANCELLATION", "type": "micro", "name_ko": "팩토
  리얼 약분", "domain": "DA", "rep": "P", "confidence": 0.78 },
      { "id": "STEP_PERM_DERIVE", "type": "step", "name_ko": "순열 공식 유
  도 단계", "domain": "DA", "rep": "C", "confidence": 0.74 },

      { "id": "ORDER_SENSITIVE_CHECK", "type": "micro", "name_ko": "순서
  민감 판단(순열/조합 분기)", "domain": "DA", "rep": "C", "confidence":
  0.76 },
      { "id": "COMB_AS_SUBSET", "type": "micro", "name_ko": "조합 의미(부
  분집합 선택)", "domain": "DA", "rep": "C", "confidence": 0.8 },
      { "id": "COMB_AS_CHOOSE_R", "type": "micro", "name_ko": "r개 선택 상
  황 해석", "domain": "DA", "rep": "C", "confidence": 0.75 },
      { "id": "COMB_ORDER_IGNORED_REASON", "type": "micro", "name_ko": "조
  합에서 순서 중복을 r!로 나누는 이유", "domain": "DA", "rep": "C",
  "confidence": 0.8 },
      { "id": "COMB_FROM_PERM_DIVIDE", "type": "micro", "name_ko": "nPr/r!
  로 nCr을 유도", "domain": "DA", "rep": "P", "confidence": 0.74 },
      { "id": "CHOOSE_THEN_ARRANGE", "type": "micro", "name_ko": "선택 후
  배열( nPr = nCr·r! ) 구조", "domain": "DA", "rep": "C", "confidence":
  0.72 },
      { "id": "STEP_COMB_DERIVE", "type": "step", "name_ko": "조합 공식 유
  도 단계", "domain": "DA", "rep": "C", "confidence": 0.74 },

      { "id": "SYSTEMATIC_LISTING_BASIC", "type": "micro", "name_ko": "체
  계적 나열 기초", "domain": "DA", "rep": "P", "confidence": 0.78 },
      { "id": "SET_NOTATION_BASICS", "type": "micro", "name_ko": "집합 기
  초(원소/부분집합/기호)", "domain": "DA", "rep": "C", "confidence":
  0.78 },
      { "id": "SAMPLE_SPACE_AS_SET", "type": "micro", "name_ko": "표본공간
  =집합", "domain": "DA", "rep": "C", "confidence": 0.8 },
      { "id": "EVENT_AS_SUBSET", "type": "micro", "name_ko": "사건=부분집
  합", "domain": "DA", "rep": "C", "confidence": 0.8 },
      { "id": "STEP_SAMPLE_SPACE_BUILD", "type": "step", "name_ko": "표본
  공간 구성 단계(빠짐/중복 점검)", "domain": "DA", "rep": "C",
  "confidence": 0.75 },
      { "id": "PROB_AS_RATIO", "type": "micro", "name_ko": "확률=비율(A/
  S)", "domain": "DA", "rep": "A", "confidence": 0.76 },
      { "id": "CLASSICAL_PROB_EQUIPROBABLE_CHECK", "type": "micro",
  "name_ko": "고전확률 등확률 전제 확인", "domain": "DA", "rep": "C",
  "confidence": 0.77 },
      { "id": "EQUIPROBABLE_DECISION", "type": "micro", "name_ko": "등확률
  여부 게이트(Yes/No 분기)", "domain": "DA", "rep": "C", "confidence":
  0.74 },
      { "id": "COUNT_FAVORABLE_TOTAL", "type": "micro", "name_ko": "유리/
  전체 경우의 수 분리 카운팅(A/S)", "domain": "DA", "rep": "P",
  "confidence": 0.77 },
      { "id": "STEP_PROB_SETUP", "type": "step", "name_ko": "고전확률 설정
  단계(전체→사건→전제→A/S)", "domain": "DA", "rep": "C", "confidence":
  0.76 },

      { "id": "EVENT_OPERATION_EXPRESSION", "type": "micro", "name_ko":
  "사건 연산을 집합식으로 표현(문장→A∪B/A∩B/A^c)", "domain": "DA", "rep":
  "P", "confidence": 0.76 },
      { "id": "INTERSECTION_UNION_MEANING", "type": "micro", "name_ko":
  "교집합/합집합 의미(∩/∪)", "domain": "DA", "rep": "C", "confidence":
  0.76 },
      { "id": "CHECK_DOUBLE_COUNTING", "type": "micro", "name_ko": "중복계
  수(겹침) 점검", "domain": "DA", "rep": "C", "confidence": 0.74 },
      { "id": "DISJOINT_EVENTS", "type": "micro", "name_ko": "서로소 사건
  (겹치지 않음) 판별", "domain": "DA", "rep": "C", "confidence": 0.74 },
      { "id": "VENN_DIAGRAM_2SET", "type": "micro", "name_ko": "벤 다이어
  그램(2집합)", "domain": "DA", "rep": "P", "confidence": 0.74 },
      { "id": "DISJOINT_OR_OVERLAP_DECISION", "type": "micro", "name_ko":
  "서로소/겹침 판정 게이트", "domain": "DA", "rep": "C", "confidence":
  0.74 },
      { "id": "STEP_EVENT_OPS_INCL_EXCL", "type": "step", "name_ko": "사건
  연산→포함배제 적용 단계", "domain": "DA", "rep": "C", "confidence":
  0.74 },
      { "id": "INCL_EXCL_2SET_MEANING", "type": "micro", "name_ko": "2집합
  포함배제 의미(중복 보정)", "domain": "DA", "rep": "C", "confidence":
  0.78 },
      { "id": "APPLY_INCL_EXCL_2SET", "type": "micro", "name_ko": "2집합
  포함배제 식 적용 실행(항 매핑→대입→계산)", "domain": "DA", "rep": "P",
  "confidence": 0.75 },
      { "id": "STEP_INCL_EXCL_2SET", "type": "step", "name_ko": "2집합 포
  함배제 단계", "domain": "DA", "rep": "C", "confidence": 0.73 },

      { "id": "COMPLEMENT_EVENT", "type": "micro", "name_ko": "여사건(보
  완) 개념", "domain": "DA", "rep": "C", "confidence": 0.74 },
      { "id": "COMPLEMENT_RULE", "type": "micro", "name_ko": "여사건 규칙
  (1-p)", "domain": "DA", "rep": "A", "confidence": 0.74 }
    ],
    "merge_aliases": [
      { "alias": "COUNT_MUL_RULE", "keep": "COUNT_MUL_RULE_MEANING" },
      { "alias": "COUNT_ADD_RULE", "keep": "COUNT_ADD_RULE_MEANING" },
      { "alias": "SLOT_DIAGRAM_BASIC", "keep": "SLOT_DIAGRAM" },
      { "alias": "PERM_MEANING_SLOT", "keep": "PERM_AS_FILLING_SLOTS" },
      { "alias": "FACTORIAL_ZERO", "keep": "FACTORIAL_ZERO_MEANING" },
      { "alias": "COMB_MEANING_SUBSET", "keep": "COMB_AS_SUBSET" },
      { "alias": "COMB_DERIVE_FROM_PERM_DIVIDE", "keep":
  "COMB_FROM_PERM_DIVIDE" },
      { "alias": "SAMPLE_SPACE_DEFINE", "keep": "SAMPLE_SPACE_AS_SET" },
      { "alias": "EVENT_DEFINE", "keep": "EVENT_AS_SUBSET" },
      { "alias": "SET_INTERSECTION_UNION", "keep":
  "INTERSECTION_UNION_MEANING" },
      { "alias": "INCLUSION_EXCLUSION_2SET_MEANING", "keep":
  "INCL_EXCL_2SET_MEANING" }
    ],
    "add_edges": [
      { "from": "COUNT_MUL_RULE_MEANING", "to": "SLOT_DIAGRAM", "type":
  "requires", "confidence": 0.77 },
      { "from": "SLOT_DIAGRAM", "to": "PERM_AS_FILLING_SLOTS", "type":
  "requires", "confidence": 0.78 },
      { "from": "PERM_AS_FILLING_SLOTS", "to": "PERM_PRODUCT_FORM",
  "type": "requires", "confidence": 0.74 },
      { "from": "PERM_PRODUCT_FORM", "to": "FACTORIAL_EXPANSION", "type":
  "requires", "confidence": 0.72 },
      { "from": "FACTORIAL_EXPANSION", "to": "STEP_PERM_DERIVE", "type":
  "requires", "confidence": 0.74 },
      { "from": "FACTORIAL_ZERO_MEANING", "to": "STEP_PERM_DERIVE",
  "type": "requires", "confidence": 0.66 },
      { "from": "STEP_PERM_DERIVE", "to": "PERM_BASIC", "type":
  "requires", "confidence": 0.74 },

      { "from": "ORDER_SENSITIVE_CHECK", "to": "STEP_COMB_DERIVE", "type":
  "requires", "confidence": 0.74 },
      { "from": "COMB_AS_SUBSET", "to": "COMB_AS_CHOOSE_R", "type":
  "requires", "confidence": 0.75 },
      { "from": "COMB_AS_SUBSET", "to": "COMB_ORDER_IGNORED_REASON",
  "type": "requires", "confidence": 0.74 },
      { "from": "COMB_ORDER_IGNORED_REASON", "to":
  "COMB_FROM_PERM_DIVIDE", "type": "requires", "confidence": 0.82 },
      { "from": "PERM_PRODUCT_FORM", "to": "COMB_FROM_PERM_DIVIDE",
  "type": "requires", "confidence": 0.8 },
      { "from": "FACTORIAL_EXPANSION", "to": "FACTORIAL_CANCELLATION",
  "type": "requires", "confidence": 0.78 },
      { "from": "COMB_FROM_PERM_DIVIDE", "to": "STEP_COMB_DERIVE", "type":
  "requires", "confidence": 0.74 },
      { "from": "COMB_AS_CHOOSE_R", "to": "STEP_COMB_DERIVE", "type":
  "requires", "confidence": 0.74 },
      { "from": "FACTORIAL_CANCELLATION", "to": "STEP_COMB_DERIVE",
  "type": "requires", "confidence": 0.74 },
      { "from": "CHOOSE_THEN_ARRANGE", "to": "STEP_COMB_DERIVE", "type":
  "requires", "confidence": 0.72 },
      { "from": "STEP_COMB_DERIVE", "to": "COMB_BASIC", "type":
  "requires", "confidence": 0.74 },

      { "from": "SET_NOTATION_BASICS", "to": "SAMPLE_SPACE_AS_SET",
  "type": "requires", "confidence": 0.74 },
      { "from": "SET_NOTATION_BASICS", "to": "EVENT_AS_SUBSET", "type":
  "requires", "confidence": 0.74 },
      { "from": "SYSTEMATIC_LISTING_BASIC", "to":
  "STEP_SAMPLE_SPACE_BUILD", "type": "requires", "confidence": 0.76 },
      { "from": "SAMPLE_SPACE_AS_SET", "to": "STEP_SAMPLE_SPACE_BUILD",
  "type": "requires", "confidence": 0.75 },
      { "from": "STEP_SAMPLE_SPACE_BUILD", "to": "STEP_PROB_SETUP",
  "type": "requires", "confidence": 0.76 },
      { "from": "EVENT_AS_SUBSET", "to": "STEP_PROB_SETUP", "type":
  "requires", "confidence": 0.78 },
      { "from": "PROB_AS_RATIO", "to": "STEP_PROB_SETUP", "type":
  "requires", "confidence": 0.76 },
      { "from": "CLASSICAL_PROB_EQUIPROBABLE_CHECK", "to":
  "EQUIPROBABLE_DECISION", "type": "requires", "confidence": 0.77 },
      { "from": "EQUIPROBABLE_DECISION", "to": "STEP_PROB_SETUP", "type":
  "requires", "confidence": 0.74 },
      { "from": "COUNT_FAVORABLE_TOTAL", "to": "STEP_PROB_SETUP", "type":
  "requires", "confidence": 0.77 },
      { "from": "STEP_PROB_SETUP", "to": "PROB_BASIC", "type": "requires",
  "confidence": 0.72 },

      { "from": "INTERSECTION_UNION_MEANING", "to":
  "INCL_EXCL_2SET_MEANING", "type": "requires", "confidence": 0.76 },
      { "from": "CHECK_DOUBLE_COUNTING", "to": "INCL_EXCL_2SET_MEANING",
  "type": "requires", "confidence": 0.75 },
      { "from": "DISJOINT_EVENTS", "to": "DISJOINT_OR_OVERLAP_DECISION",
  "type": "requires", "confidence": 0.74 },
      { "from": "VENN_DIAGRAM_2SET", "to": "DISJOINT_OR_OVERLAP_DECISION",
  "type": "requires", "confidence": 0.73 },
      { "from": "DISJOINT_OR_OVERLAP_DECISION", "to":
  "STEP_EVENT_OPS_INCL_EXCL", "type": "requires", "confidence": 0.72 },
      { "from": "EVENT_OPERATION_EXPRESSION", "to":
  "STEP_EVENT_OPS_INCL_EXCL", "type": "requires", "confidence": 0.7 },
      { "from": "STEP_EVENT_OPS_INCL_EXCL", "to": "STEP_INCL_EXCL_2SET",
  "type": "requires", "confidence": 0.73 },
      { "from": "INCL_EXCL_2SET_MEANING", "to": "APPLY_INCL_EXCL_2SET",
  "type": "requires", "confidence": 0.78 },
      { "from": "APPLY_INCL_EXCL_2SET", "to": "STEP_INCL_EXCL_2SET",
  "type": "requires", "confidence": 0.75 },
      { "from": "STEP_INCL_EXCL_2SET", "to": "PROB_BASIC", "type":
  "requires", "confidence": 0.69 },

      { "from": "COMPLEMENT_EVENT", "to": "COMPLEMENT_RULE", "type":
  "requires", "confidence": 0.72 },
      { "from": "COMPLEMENT_RULE", "to": "PROB_BASIC", "type": "requires",
  "confidence": 0.74 }
    ],
    "remove_edges": [],
    "notes": [
      { "claim": "R3 전이 산출물에서 참조되는 COMB_AS_CHOOSE_R,
  FACTORIAL_ZERO_MEANING, COMB_FROM_PERM_DIVIDE 등은 add_nodes/
  merge_aliases로 정의를 보강해 단일 파일 검증이 가능해야 한다.",
  "reason": "dev_handoff만으로도 전이 대상 노드의 존재/의미가 확인되어야
  병합·DAG 검증·충돌 해결을 진행할 수 있다.", "confidence": 0.74 },
      { "claim": "COMB_FROM_PERM_DIVIDE ↔ APPLY_INCL_EXCL_2SET 유사성은
  '중복 제거 1회'라는 메타 절차로만 해석하고 requires(잠금)로 강제하지 않
  는 것이 안전하다.", "reason": "나누기(중복수로 나눔)와 빼기(겹침 1회 제
  거)는 수학적 의미가 달라 잠금으로 강제하면 오개념을 유발할 수 있다.",
  "confidence": 0.78 },
      { "claim": "COMPLEMENT_EVENT ↔ FACTORIAL_ZERO_MEANING 유사성은 '경계
  (없음/전부) 안정화'라는 메타 수준으로만 제한해야 한다.", "reason": "여사
  건(확률/집합)과 0!(조합 연산)은 내용 영역이 달라 동일시하면 혼란이 생긴
  다.", "confidence": 0.78 },
      { "claim": "STEP_SAMPLE_SPACE_BUILD→STEP_PROB_SETUP 경로를 두면 확률
  의 분모/분자 설정 오류가 감소한다.", "reason": "전체(표본공간) 고정→사건
  정의→전제(등확률) 확인→A/S 카운팅 순서가 흔들릴 때 분모가 바뀌거나 사건
  을 전체로 착각한다.", "confidence": 0.76 },
      { "claim": "EVENT_OPERATION_EXPRESSION과
  DISJOINT_OR_OVERLAP_DECISION을 경유하면 포함배제의 부호·항 누락이 줄어든
  다.", "reason": "문장 조건을 집합식으로 고정하고 겹침 여부를 먼저 분기하
  면 -교집합이 공식 암기가 아니라 중복 보정으로 연결된다.", "confidence":
  0.75 }
    ]
  }

  ## Standards Tags (내부 태그)

  - 추가된 태그: COUNT_MUL_RULE_MEANING, COUNT_ADD_RULE_MEANING,
    SLOT_DIAGRAM, PERM_AS_FILLING_SLOTS, PERM_PRODUCT_FORM,
    FACTORIAL_EXPANSION, FACTORIAL_ZERO_MEANING, FACTORIAL_CANCELLATION,
    STEP_PERM_DERIVE, ORDER_SENSITIVE_CHECK, COMB_AS_SUBSET,
    COMB_AS_CHOOSE_R, COMB_ORDER_IGNORED_REASON, COMB_FROM_PERM_DIVIDE,
    CHOOSE_THEN_ARRANGE, STEP_COMB_DERIVE, SYSTEMATIC_LISTING_BASIC,
    SET_NOTATION_BASICS, SAMPLE_SPACE_AS_SET, EVENT_AS_SUBSET,
    STEP_SAMPLE_SPACE_BUILD, PROB_AS_RATIO,
    CLASSICAL_PROB_EQUIPROBABLE_CHECK, EQUIPROBABLE_DECISION,
    COUNT_FAVORABLE_TOTAL, STEP_PROB_SETUP, EVENT_OPERATION_EXPRESSION,
    INTERSECTION_UNION_MEANING, CHECK_DOUBLE_COUNTING, DISJOINT_EVENTS,
    VENN_DIAGRAM_2SET, DISJOINT_OR_OVERLAP_DECISION,
    STEP_EVENT_OPS_INCL_EXCL, INCL_EXCL_2SET_MEANING,
    APPLY_INCL_EXCL_2SET, STEP_INCL_EXCL_2SET, COMPLEMENT_EVENT,
    COMPLEMENT_RULE
  - 수정된 태그: COUNT_MUL_RULE(→COUNT_MUL_RULE_MEANING),
    COUNT_ADD_RULE(→COUNT_ADD_RULE_MEANING),
    SLOT_DIAGRAM_BASIC(→SLOT_DIAGRAM),
    PERM_MEANING_SLOT(→PERM_AS_FILLING_SLOTS),
    FACTORIAL_ZERO(→FACTORIAL_ZERO_MEANING),
    COMB_MEANING_SUBSET(→COMB_AS_SUBSET),
    COMB_DERIVE_FROM_PERM_DIVIDE(→COMB_FROM_PERM_DIVIDE),
    SAMPLE_SPACE_DEFINE(→SAMPLE_SPACE_AS_SET),
    EVENT_DEFINE(→EVENT_AS_SUBSET),
    SET_INTERSECTION_UNION(→INTERSECTION_UNION_MEANING),
    INCLUSION_EXCLUSION_2SET_MEANING(→INCL_EXCL_2SET_MEANING)

  [/R1 Coverage Report]

  ###DONE:9372cf2003###


› Request 18f9bff97c: 아래 파일(티켓 지시)을 읽고 결과를 이 터미널에
  Output Format대로 그대로 출력해줘. 가능하면 repo 파일을 생성/수정하지
  말고, 마지막에 마커를 그대로 출력해. -> /mnt/c/Users/irron/Desktop/my/
  web_service_new/calculate_math/.agents/inbox/research_18f9bff97c.md


• Explored
  └ Read research_18f9bff97c.md

─ Worked for 2m 32s ──────────────────────────────────────────────────────

• ###BEGIN:18f9bff97c###

  ## Coverage Gap Report

  ### 1. 누락된 기초 개념 (최소 10개)

  | # | 개념명 | 누락 이유 | 심각도 |
  |---|--------|----------|--------|
  | 1 | COUNT_MUL_RULE_MEANING(곱셈 원리 의미) | 순열/조합/표본공간 카운팅
  의 기반인데 단계-곱 의미가 비면 공식/절차가 암기형으로 굳음 | 높음 |
  | 2 | ORDER_SENSITIVE_CHECK(순서 민감 판단) | 순열/조합 분기 기준이 없으
  면 도구 선택이 흔들려 오답이 고착 | 높음 |
  | 3 | PERM_AS_FILLING_SLOTS(순열 의미: 자리 채우기) | nPr을 “배열/배
  치”로 해석하지 못하면 조건을 공식 항에 매핑하기 어려움 | 높음 |
  | 4 | PERM_PRODUCT_FORM(nPr의 감소곱 형태) | 곱 형태가 없으면 팩토리얼
  표기/검산으로의 표현 전환이 끊김 | 중 |
  | 5 | FACTORIAL_EXPANSION(팩토리얼 전개) | n!=n*(n-1)*… 구조 부재 시 유
  도/검산이 블랙박스가 됨 | 높음 |
  | 6 | FACTORIAL_ZERO_MEANING(0! 의미) | r=0, r=n 같은 경계에서 값/식이
  흔들리면 전체 체계가 붕괴 | 중 |
  | 7 | FACTORIAL_CANCELLATION(팩토리얼 약분) | 조합 계산에서 약분 절차가
  없으면 nCr 계산이 기계적/오류 다발 | 중 |
  | 8 | COMB_AS_SUBSET(조합 의미: 부분집합 선택) | 선택=부분집합 관점이 없
  으면 조합 공식이 맥락 없는 계산으로 남음 | 높음 |
  | 9 | COMB_AS_CHOOSE_R(r개 선택 해석) | “r개 선택”을 입력으로 고정하지
  못하면 조건 누락/중복으로 연결 | 중 |
  |10| COMB_ORDER_IGNORED_REASON(왜 r!로 나누는가) | ‘중복 제거’ 이유가 없
  으면 조합 유도/공식이 암기 점프로 변함 | 높음 |
  |11| COMB_FROM_PERM_DIVIDE(nPr/r! 유도) | 유도 절차 부재 시 조합 공식으
  로의 전이가 과격해짐 | 중 |
  |12| SET_NOTATION_BASICS(집합 기초 기호) | 사건/연산을 집합 언어로 고정
  하는 전제가 없으면 조건을 수식화하기 어려움 | 높음 |
  |13| STEP_SAMPLE_SPACE_BUILD(표본공간 구성 단계) | “전체(분모) 고정” 중
  간 단계가 없으면 고전확률 설정에서 분모 오류 반복 | 높음 |
  |14| CLASSICAL_PROB_EQUIPROBABLE_CHECK(등확률 전제 확인) | 등확률 전제
  없이 A/S를 오적용하는 오개념 차단 장치가 필요 | 높음 |
  |15| EQUIPROBABLE_DECISION(등확률 게이트) | “적용 가능/불가” 분기가 없으
  면 고전확률 적용 범위가 흐려짐 | 중 |
  |16| COUNT_FAVORABLE_TOTAL(유리/전체 분리 카운팅) | 분자/분모를 분리해
  세는 절차가 없으면 설정/계산이 흔들림 | 높음 |
  |17| EVENT_OPERATION_EXPRESSION(문장→집합식) | 문장을 A∪B/A∩B/A^c로 고정
  하지 못하면 포함배제/여사건에서 항 매핑·부호 실수 증가 | 높음 |
  |18| INCL_EXCL_2SET_MEANING(2집합 포함배제 의미) | “왜 교집합을 빼는가
  (중복 보정)” 의미 없이 공식만 주면 오용/암기 위험 | 높음 |
  |19| APPLY_INCL_EXCL_2SET(포함배제 계산 실행) | 의미에서 곧바로 단계 완
  성으로 점프하면 항 매핑→대입→계산 실행이 불안정 | 중 |
  |20| COMPLEMENT_EVENT(여사건/보완 개념) | 1-p 규칙 전에 보완(전체-부분)
  개념이 고정되어야 규칙 남용이 줄어듦 | 중 |

  ### 2. 과잉 난이도/불필요 선행 (최소 5개)

  | # | 개념명 | 과잉 이유 | 조치 제안 |
  |---|--------|----------|----------|
  | 1 | 조건부확률 | 분모 재정의/사건 분할이 필요해 TS_COMB_PROB 기초에서
  인지부하가 큼 | 별도 심화 단원으로 분리 |
  | 2 | 베이즈 정리 | 조건부확률+역확률까지 요구하는 고난도 전이 | 범위외/
  선택 심화 |
  | 3 | 독립 사건/독립의 곱 | 적용 조건이 미세해 “무작위=독립” 오개념 유발
  가능 | 후순위(심화)로 이관 |
  | 4 | 확률변수/기댓값/분산 | 사건 확률에서 분포/통계로 축이 바뀌는 별도
  영역 | 별도 보스/단원 분리 |
  | 5 | 확률분포(이항/정규 등) | 모델링/분포는 기초 조합·확률 커버리지 밖
  | 별도 보스/단원 분리 |
  | 6 | 3집합 이상 포함배제 일반식 | 2집합 의미 정착 전에는 기호/계산 부담
  과도 | 기본은 2집합으로 제한 |
  | 7 | 중복순열/원순열/중복조합 | 추가 동치/중복 처리 규칙이 필요해 기초
  학습에 과잉 | 범위외/선택 심화 |

  ### 3. 학습 순서상 위험한 점프 (최소 5개)

  | # | From → To | 점프 이유 | 브릿지 제안 |
  |---|-----------|----------|------------|
  | 1 | COUNT_MUL_RULE_MEANING → PERM_BASIC | 단계 곱에서 곧바로 순열 단원
  으로 점프하면 의미(자리 채우기)와 표기(감소곱/팩토리얼)가 분리되어 공식
  암기화 | PERM_AS_FILLING_SLOTS + PERM_PRODUCT_FORM + FACTORIAL_EXPANSION
  + STEP_PERM_DERIVE |
  | 2 | PERM_BASIC → COMB_BASIC | 순열에서 조합으로 넘어갈 때 “순서 무시/
  중복 제거”가 비면 nPr/nCr 혼동이 고착 | COMB_ORDER_IGNORED_REASON +
  COMB_FROM_PERM_DIVIDE + STEP_COMB_DERIVE |
  | 3 | ORDER_SENSITIVE_CHECK → COMB_BASIC | 순서 게이트만 있고 “선택=부분
  집합/ r개 선택 입력”이 비면 조합 해석이 불안정 | COMB_AS_SUBSET +
  COMB_AS_CHOOSE_R |
  | 4 | SYSTEMATIC_LISTING_BASIC → STEP_PROB_SETUP | 나열에서 바로 확률 설
  정으로 가면 “전체(분모) 고정”이 약해 분모 오류 반복 |
  STEP_SAMPLE_SPACE_BUILD |
  | 5 | SAMPLE_SPACE_AS_SET → STEP_PROB_SETUP | 표본공간을 알아도 등확률
  전제/유리-전체 카운팅 절차가 비면 A/S 오적용 |
  CLASSICAL_PROB_EQUIPROBABLE_CHECK + EQUIPROBABLE_DECISION +
  COUNT_FAVORABLE_TOTAL + PROB_AS_RATIO |
  | 6 | SET_NOTATION_BASICS → STEP_INCL_EXCL_2SET | 집합 기호를 알아도 문
  장→집합식→겹침 판정이 없으면 포함배제가 공식 점프로 됨 |
  EVENT_OPERATION_EXPRESSION + DISJOINT_OR_OVERLAP_DECISION +
  STEP_EVENT_OPS_INCL_EXCL |
  | 7 | INCL_EXCL_2SET_MEANING → STEP_INCL_EXCL_2SET | 의미에서 단계 완성
  으로 바로 가면 항 매핑/대입/계산 실행이 비어 실수 증가 |
  APPLY_INCL_EXCL_2SET |
  | 8 | COMPLEMENT_EVENT → PROB_BASIC | 개념에서 곧바로 1-p로 점프하면 규
  칙 남용(문맥 없는 뒤집기) 위험 | COMPLEMENT_RULE (필요 시
  TOTAL_MINUS_STRATEGY 권장) |

  ## Graph Patch JSON

  {
    "researcher": "R1",
    "scope": "TS_COMB_PROB",
    "add_nodes": [
      { "id": "COUNT_MUL_RULE_MEANING", "type": "micro", "name_ko": "곱셈
  원리 의미(단계 곱)", "domain": "DA", "rep": "C", "confidence": 0.83 },
      { "id": "COUNT_ADD_RULE_MEANING", "type": "micro", "name_ko": "덧셈
  원리 의미(서로소 합)", "domain": "DA", "rep": "C", "confidence": 0.8 },
      { "id": "ORDER_SENSITIVE_CHECK", "type": "micro", "name_ko": "순서
  민감 판단(순열/조합 분기)", "domain": "DA", "rep": "C", "confidence":
  0.76 },
      { "id": "PERM_AS_FILLING_SLOTS", "type": "micro", "name_ko": "순열
  의미(자리 채우기)", "domain": "DA", "rep": "C", "confidence": 0.78 },
      { "id": "PERM_PRODUCT_FORM", "type": "micro", "name_ko": "nPr을 감소
  곱(곱 형태)로 표현", "domain": "DA", "rep": "P", "confidence": 0.74 },
      { "id": "FACTORIAL_EXPANSION", "type": "micro", "name_ko": "팩토리얼
  전개 n!=n*(n-1)*...", "domain": "DA", "rep": "P", "confidence": 0.82 },
      { "id": "FACTORIAL_ZERO_MEANING", "type": "micro", "name_ko": "0! 의
  미 해석(경계 사례)", "domain": "DA", "rep": "A", "confidence": 0.74 },
      { "id": "FACTORIAL_CANCELLATION", "type": "micro", "name_ko": "팩토
  리얼 약분", "domain": "DA", "rep": "P", "confidence": 0.78 },
      { "id": "STEP_PERM_DERIVE", "type": "step", "name_ko": "순열 공식 유
  도 단계", "domain": "DA", "rep": "C", "confidence": 0.74 },

      { "id": "COMB_AS_SUBSET", "type": "micro", "name_ko": "조합 의미(부
  분집합 선택)", "domain": "DA", "rep": "C", "confidence": 0.8 },
      { "id": "COMB_AS_CHOOSE_R", "type": "micro", "name_ko": "r개 선택 상
  황 해석", "domain": "DA", "rep": "C", "confidence": 0.75 },
      { "id": "COMB_ORDER_IGNORED_REASON", "type": "micro", "name_ko": "조
  합에서 순서 중복을 r!로 나누는 이유", "domain": "DA", "rep": "C",
  "confidence": 0.8 },
      { "id": "COMB_FROM_PERM_DIVIDE", "type": "micro", "name_ko": "nPr/r!
  로 nCr을 유도", "domain": "DA", "rep": "P", "confidence": 0.74 },
      { "id": "CHOOSE_THEN_ARRANGE", "type": "micro", "name_ko": "선택 후
  배열( nPr = nCr·r! ) 구조", "domain": "DA", "rep": "C", "confidence":
  0.72 },
      { "id": "STEP_COMB_DERIVE", "type": "step", "name_ko": "조합 공식 유
  도 단계", "domain": "DA", "rep": "C", "confidence": 0.74 },

      { "id": "SYSTEMATIC_LISTING_BASIC", "type": "micro", "name_ko": "체
  계적 나열 기초", "domain": "DA", "rep": "P", "confidence": 0.78 },
      { "id": "TREE_DIAGRAM_BASIC", "type": "micro", "name_ko": "트리 다이
  어그램으로 경우를 표현", "domain": "DA", "rep": "P", "confidence":
  0.7 },
      { "id": "STEP_SAMPLE_SPACE_BUILD", "type": "step", "name_ko": "표본
  공간 구성 단계(빠짐/중복 점검)", "domain": "DA", "rep": "C",
  "confidence": 0.75 },

      { "id": "SET_NOTATION_BASICS", "type": "micro", "name_ko": "집합 기
  초(원소/부분집합/기호)", "domain": "DA", "rep": "C", "confidence":
  0.78 },
      { "id": "SAMPLE_SPACE_AS_SET", "type": "micro", "name_ko": "표본공간
  =집합", "domain": "DA", "rep": "C", "confidence": 0.8 },
      { "id": "EVENT_AS_SUBSET", "type": "micro", "name_ko": "사건=부분집
  합", "domain": "DA", "rep": "C", "confidence": 0.8 },
      { "id": "PROB_AS_RATIO", "type": "micro", "name_ko": "확률=비율(A/
  S)", "domain": "DA", "rep": "A", "confidence": 0.76 },
      { "id": "CLASSICAL_PROB_EQUIPROBABLE_CHECK", "type": "micro",
  "name_ko": "고전확률 등확률 전제 확인", "domain": "DA", "rep": "C",
  "confidence": 0.77 },
      { "id": "EQUIPROBABLE_DECISION", "type": "micro", "name_ko": "등확률
  여부 게이트(Yes/No 분기)", "domain": "DA", "rep": "C", "confidence":
  0.74 },
      { "id": "COUNT_FAVORABLE_TOTAL", "type": "micro", "name_ko": "유리/
  전체 경우의 수 분리 카운팅(A/S)", "domain": "DA", "rep": "P",
  "confidence": 0.77 },
      { "id": "STEP_PROB_SETUP", "type": "step", "name_ko": "고전확률 설정
  단계(전체→사건→전제→A/S)", "domain": "DA", "rep": "C", "confidence":
  0.76 },

      { "id": "EVENT_OPERATION_EXPRESSION", "type": "micro", "name_ko":
  "사건 연산을 집합식으로 표현(문장→A∪B/A∩B/A^c)", "domain": "DA", "rep":
  "P", "confidence": 0.76 },
      { "id": "INTERSECTION_UNION_MEANING", "type": "micro", "name_ko":
  "교집합/합집합 의미(∩/∪)", "domain": "DA", "rep": "C", "confidence":
  0.76 },
      { "id": "CHECK_DOUBLE_COUNTING", "type": "micro", "name_ko": "중복계
  수(겹침) 점검", "domain": "DA", "rep": "C", "confidence": 0.74 },
      { "id": "DISJOINT_EVENTS", "type": "micro", "name_ko": "서로소 사건
  (겹치지 않음) 판별", "domain": "DA", "rep": "C", "confidence": 0.74 },
      { "id": "VENN_DIAGRAM_2SET", "type": "micro", "name_ko": "벤 다이어
  그램(2집합)으로 사건 연산 시각화", "domain": "DA", "rep": "P",
  "confidence": 0.74 },
      { "id": "DISJOINT_OR_OVERLAP_DECISION", "type": "micro", "name_ko":
  "서로소/겹침 판정 게이트", "domain": "DA", "rep": "C", "confidence":
  0.74 },
      { "id": "STEP_EVENT_OPS_INCL_EXCL", "type": "step", "name_ko": "문장
  →집합식→겹침 판정→중복 보정 단계", "domain": "DA", "rep": "C",
  "confidence": 0.74 },
      { "id": "INCL_EXCL_2SET_MEANING", "type": "micro", "name_ko": "2집합
  포함배제 의미(중복 보정)", "domain": "DA", "rep": "C", "confidence":
  0.78 },
      { "id": "APPLY_INCL_EXCL_2SET", "type": "micro", "name_ko": "2집합
  포함배제 식 적용 실행(항 매핑→대입→계산)", "domain": "DA", "rep": "P",
  "confidence": 0.75 },
      { "id": "STEP_INCL_EXCL_2SET", "type": "step", "name_ko": "2집합 포
  함배제 단계", "domain": "DA", "rep": "C", "confidence": 0.73 },

      { "id": "COMPLEMENT_EVENT", "type": "micro", "name_ko": "여사건(보
  완) 개념", "domain": "DA", "rep": "C", "confidence": 0.74 },
      { "id": "COMPLEMENT_RULE", "type": "micro", "name_ko": "여사건 규칙
  (1-p)", "domain": "DA", "rep": "A", "confidence": 0.74 },
      { "id": "TOTAL_MINUS_STRATEGY", "type": "micro", "name_ko": "전체-부
  분(보완) 전략(전체에서 빼기)", "domain": "DA", "rep": "C", "confidence":
  0.68 }
    ],
    "merge_aliases": [
      { "alias": "COUNT_MUL_RULE", "keep": "COUNT_MUL_RULE_MEANING" },
      { "alias": "COUNT_ADD_RULE", "keep": "COUNT_ADD_RULE_MEANING" },
      { "alias": "PERM_MEANING_SLOT", "keep": "PERM_AS_FILLING_SLOTS" },
      { "alias": "FACTORIAL_CONCEPT", "keep": "FACTORIAL_EXPANSION" },
      { "alias": "FACTORIAL_ZERO", "keep": "FACTORIAL_ZERO_MEANING" },
      { "alias": "COMB_MEANING_SUBSET", "keep": "COMB_AS_SUBSET" },
      { "alias": "COMB_DERIVE_FROM_PERM_DIVIDE", "keep":
  "COMB_FROM_PERM_DIVIDE" },
      { "alias": "SAMPLE_SPACE_DEFINE", "keep": "SAMPLE_SPACE_AS_SET" },
      { "alias": "EVENT_DEFINE", "keep": "EVENT_AS_SUBSET" },
      { "alias": "SET_INTERSECTION_UNION", "keep":
  "INTERSECTION_UNION_MEANING" },
      { "alias": "INCLUSION_EXCLUSION_2SET_MEANING", "keep":
  "INCL_EXCL_2SET_MEANING" }
    ],
    "add_edges": [
      { "from": "COUNT_MUL_RULE_MEANING", "to": "PERM_AS_FILLING_SLOTS",
  "type": "requires", "confidence": 0.83 },
      { "from": "PERM_AS_FILLING_SLOTS", "to": "PERM_PRODUCT_FORM",
  "type": "requires", "confidence": 0.74 },
      { "from": "PERM_PRODUCT_FORM", "to": "FACTORIAL_EXPANSION", "type":
  "requires", "confidence": 0.72 },
      { "from": "FACTORIAL_EXPANSION", "to": "STEP_PERM_DERIVE", "type":
  "requires", "confidence": 0.74 },
      { "from": "FACTORIAL_ZERO_MEANING", "to": "STEP_PERM_DERIVE",
  "type": "requires", "confidence": 0.66 },
      { "from": "STEP_PERM_DERIVE", "to": "PERM_BASIC", "type":
  "requires", "confidence": 0.74 },

      { "from": "ORDER_SENSITIVE_CHECK", "to": "STEP_COMB_DERIVE", "type":
  "requires", "confidence": 0.73 },
      { "from": "COMB_AS_SUBSET", "to": "COMB_AS_CHOOSE_R", "type":
  "requires", "confidence": 0.75 },
      { "from": "COMB_AS_CHOOSE_R", "to": "STEP_COMB_DERIVE", "type":
  "requires", "confidence": 0.74 },
      { "from": "COMB_AS_SUBSET", "to": "COMB_ORDER_IGNORED_REASON",
  "type": "requires", "confidence": 0.74 },
      { "from": "COMB_ORDER_IGNORED_REASON", "to":
  "COMB_FROM_PERM_DIVIDE", "type": "requires", "confidence": 0.82 },
      { "from": "PERM_PRODUCT_FORM", "to": "COMB_FROM_PERM_DIVIDE",
  "type": "requires", "confidence": 0.8 },
      { "from": "FACTORIAL_CANCELLATION", "to": "STEP_COMB_DERIVE",
  "type": "requires", "confidence": 0.74 },
      { "from": "COMB_FROM_PERM_DIVIDE", "to": "STEP_COMB_DERIVE", "type":
  "requires", "confidence": 0.74 },
      { "from": "STEP_COMB_DERIVE", "to": "COMB_BASIC", "type":
  "requires", "confidence": 0.74 },

      { "from": "SET_NOTATION_BASICS", "to": "SAMPLE_SPACE_AS_SET",
  "type": "requires", "confidence": 0.74 },
      { "from": "SET_NOTATION_BASICS", "to": "EVENT_AS_SUBSET", "type":
  "requires", "confidence": 0.74 },
      { "from": "SYSTEMATIC_LISTING_BASIC", "to":
  "STEP_SAMPLE_SPACE_BUILD", "type": "requires", "confidence": 0.76 },
      { "from": "SAMPLE_SPACE_AS_SET", "to": "STEP_SAMPLE_SPACE_BUILD",
  "type": "requires", "confidence": 0.75 },
      { "from": "STEP_SAMPLE_SPACE_BUILD", "to": "STEP_PROB_SETUP",
  "type": "requires", "confidence": 0.76 },
      { "from": "EVENT_AS_SUBSET", "to": "STEP_PROB_SETUP", "type":
  "requires", "confidence": 0.78 },
      { "from": "PROB_AS_RATIO", "to": "STEP_PROB_SETUP", "type":
  "requires", "confidence": 0.76 },
      { "from": "CLASSICAL_PROB_EQUIPROBABLE_CHECK", "to":
  "EQUIPROBABLE_DECISION", "type": "requires", "confidence": 0.77 },
      { "from": "EQUIPROBABLE_DECISION", "to": "STEP_PROB_SETUP", "type":
  "requires", "confidence": 0.74 },
      { "from": "COUNT_FAVORABLE_TOTAL", "to": "STEP_PROB_SETUP", "type":
  "requires", "confidence": 0.77 },
      { "from": "STEP_PROB_SETUP", "to": "PROB_BASIC", "type": "requires",
  "confidence": 0.72 },

      { "from": "INTERSECTION_UNION_MEANING", "to":
  "INCL_EXCL_2SET_MEANING", "type": "requires", "confidence": 0.76 },
      { "from": "CHECK_DOUBLE_COUNTING", "to": "INCL_EXCL_2SET_MEANING",
  "type": "requires", "confidence": 0.75 },
      { "from": "DISJOINT_EVENTS", "to": "DISJOINT_OR_OVERLAP_DECISION",
  "type": "requires", "confidence": 0.74 },
      { "from": "DISJOINT_OR_OVERLAP_DECISION", "to":
  "STEP_EVENT_OPS_INCL_EXCL", "type": "requires", "confidence": 0.72 },
      { "from": "EVENT_OPERATION_EXPRESSION", "to":
  "STEP_EVENT_OPS_INCL_EXCL", "type": "requires", "confidence": 0.7 },
      { "from": "STEP_EVENT_OPS_INCL_EXCL", "to": "STEP_INCL_EXCL_2SET",
  "type": "requires", "confidence": 0.73 },
      { "from": "INCL_EXCL_2SET_MEANING", "to": "APPLY_INCL_EXCL_2SET",
  "type": "requires", "confidence": 0.78 },
      { "from": "APPLY_INCL_EXCL_2SET", "to": "STEP_INCL_EXCL_2SET",
  "type": "requires", "confidence": 0.75 },
      { "from": "STEP_INCL_EXCL_2SET", "to": "PROB_BASIC", "type":
  "requires", "confidence": 0.69 },

      { "from": "COMPLEMENT_EVENT", "to": "COMPLEMENT_RULE", "type":
  "requires", "confidence": 0.72 },
      { "from": "COMPLEMENT_RULE", "to": "PROB_BASIC", "type": "requires",
  "confidence": 0.74 }
    ],
    "remove_edges": [],
    "notes": [
      { "claim": "R3 전이 산출물에서 참조되는 핵심 ID(예:
  COMB_AS_CHOOSE_R, FACTORIAL_ZERO_MEANING, STEP_* 등)는 본 파일의
  add_nodes/merge_aliases로 존재/정의가 확인되어야 한다.", "reason":
  "dev_handoff 단일 파일만으로도 병합·DAG 검증·충돌 해결을 진행할 수 있어
  야 한다.", "confidence": 0.74 },
      { "claim": "COMPLEMENT_EVENT(개념)과 COMPLEMENT_RULE(1-p 규칙)은
  alias 병합 없이 단계적으로 연결하는 편이 안전하다.", "reason": "개념과
  계산 규칙은 추상 수준/사용처가 달라 동일시하면 규칙 남용이 생길 수 있
  다.", "confidence": 0.78 },
      { "claim": "메타 수준 동형(예: 경계 케이스 패턴, 표현 전환 패턴)은
  requires(잠금)로 강제하지 않는 편이 안전하다.", "reason": "대체 경로가
  많아 잠금으로 강제하면 과잉 선행/혼동을 만들 수 있다.", "confidence":
  0.7 },
      { "claim": "STEP_SAMPLE_SPACE_BUILD→STEP_PROB_SETUP 경로를 두면 확률
  의 분모/분자 설정 오류가 감소한다.", "reason": "전체(표본공간) 고정→사건
  정의→전제(등확률) 확인→A/S 카운팅 순서가 흔들릴 때 분모가 바뀌거나 사건
  을 전체로 착각한다.", "confidence": 0.76 },
      { "claim": "EVENT_OPERATION_EXPRESSION과
  DISJOINT_OR_OVERLAP_DECISION을 포함배제 앞에 두면 부호·항 누락이 줄어든
  다.", "reason": "문장 조건을 집합식으로 고정하고 겹침 여부를 먼저 분기하
  면 -교집합이 공식 암기가 아니라 중복 보정으로 연결된다.", "confidence":
  0.75 }
    ]
  }

  ## Standards Tags (내부 태그)

  - 추가된 태그: COUNT_MUL_RULE_MEANING, COUNT_ADD_RULE_MEANING,
    ORDER_SENSITIVE_CHECK, PERM_AS_FILLING_SLOTS, PERM_PRODUCT_FORM,
    FACTORIAL_EXPANSION, FACTORIAL_ZERO_MEANING, FACTORIAL_CANCELLATION,
    STEP_PERM_DERIVE, COMB_AS_SUBSET, COMB_AS_CHOOSE_R,
    COMB_ORDER_IGNORED_REASON, COMB_FROM_PERM_DIVIDE, CHOOSE_THEN_ARRANGE,
    STEP_COMB_DERIVE, SYSTEMATIC_LISTING_BASIC, TREE_DIAGRAM_BASIC,
    STEP_SAMPLE_SPACE_BUILD, SET_NOTATION_BASICS, SAMPLE_SPACE_AS_SET,
    EVENT_AS_SUBSET, PROB_AS_RATIO, CLASSICAL_PROB_EQUIPROBABLE_CHECK,
    EQUIPROBABLE_DECISION, COUNT_FAVORABLE_TOTAL, STEP_PROB_SETUP,
    EVENT_OPERATION_EXPRESSION, INTERSECTION_UNION_MEANING,
    CHECK_DOUBLE_COUNTING, DISJOINT_EVENTS, VENN_DIAGRAM_2SET,
    DISJOINT_OR_OVERLAP_DECISION, STEP_EVENT_OPS_INCL_EXCL,
    INCL_EXCL_2SET_MEANING, APPLY_INCL_EXCL_2SET, STEP_INCL_EXCL_2SET,
    COMPLEMENT_EVENT, COMPLEMENT_RULE, TOTAL_MINUS_STRATEGY
  - 수정된 태그: COUNT_MUL_RULE(→COUNT_MUL_RULE_MEANING),
    COUNT_ADD_RULE(→COUNT_ADD_RULE_MEANING),
    PERM_MEANING_SLOT(→PERM_AS_FILLING_SLOTS),
    FACTORIAL_CONCEPT(→FACTORIAL_EXPANSION),
    FACTORIAL_ZERO(→FACTORIAL_ZERO_MEANING),
    COMB_MEANING_SUBSET(→COMB_AS_SUBSET),
    COMB_DERIVE_FROM_PERM_DIVIDE(→COMB_FROM_PERM_DIVIDE),
    SAMPLE_SPACE_DEFINE(→SAMPLE_SPACE_AS_SET),
    EVENT_DEFINE(→EVENT_AS_SUBSET),
    SET_INTERSECTION_UNION(→INTERSECTION_UNION_MEANING),
    INCLUSION_EXCLUSION_2SET_MEANING(→INCL_EXCL_2SET_MEANING)

  [/R1 Coverage Report]

  ###DONE:18f9bff97c###


› -> /mnt/c/Users/irron/Desktop/my/web_service_new/
  calculate_math/.agents/inbox/research_216a78baad.md


  49% context left



› Request 216a78baad: 아래 파일(티켓 지시)을 읽고 결과를 이
  터미널에 Output Format대로 그대로 출력해줘. 가능하면 repo
  파일을 생성/수정하지 말고, 마지막에 마커를 그대로 출력해.
  -> /mnt/c/Users/irron/Desktop/my/web_service_new/
  calculate_math/.agents/inbox/research_216a78baad.md



• Explored
  └ Read research_216a78baad.md, T1.md
                                                  

• Ran jq
  │ '.task_id, .plan.target_scope? // .plan.scope? // .pla
                            

─                                                           
                
    … +144 lines
                        
      "max_attempts_before_pm_patch"    


• ###BEGIN:216a78baad###

  ## Coverage Gap Report

  ### 1. 누락된 기초 개념 (최소 10개)

  | # | 개념명 | 누락 이유 | 심각도 |
  |---|--------|----------|--------|
  | 1 | 단일 버튼 UX(페이지 하단 채점하기/전체 제출) | 현재
  는 문제 카드별 제출만 존재해 “모든 문제 후 일괄 채점” 요구
  를 충족하지 못함 | 높음 |
  | 2 | 문제 카드별 제출 버튼 제거 | 요구사항 1)에서 제거가
  핵심인데 현재 UI는 per-problem 제출 흐름에 고정되어 있음 |
  높음 |
  | 3 | 채점하기 disabled 조건 정의(정규화 일관성) | 버튼
  disabled 기준이 normalizeNumericInput()과 일관되게 정의되
  어야 하나 현재는 해당 UX 자체가 없음 | 높음 |
  | 4 | “모든 문제 미입력” 판정 로직(allAnswered) |
  problems[] 전체를 기준으로 answerByProblemId가 모두 채워졌
  는지 판단하는 상태/계산이 필요(문제 수 변화/로딩 타이밍 포
  함) | 높음 |
  | 5 | 입력 엣지케이스(10개+) 목록/정의 | AC 요구(10개+)가
  문서/설계로 존재해야 하는데 현재 정의가 없음(예: "", "
  ", \"\\t\\n\", \",\", " , , ", "1,234", " 1 234 ", "0",
  "-0", "+", ".", "Infinity" 등) | 중 |
  | 6 | 일괄 채점 동작(전체 순회→채점→결과 맵 생성) | 현재는
  submitProblem(problem)로 단건 채점만 가능하며, 전체 문제를
  한 번에 채점해 결과를 고정하는 액션이 없음 | 높음 |
  | 7 | 채점 이후 UI 상태 정의(채점 전/후) | 현재는 결과가
  하나라도 있으면 점수 0/N이 항상 표시될 수 있고, “채점 전/
  후” 상태(예: hasGraded/isSubmitted) 기준이 없음 | 중 |
  | 8 | “채점 후 재입력” UX 정책 | bulk 채점 후 입력을 수정
  할 때 결과/점수의 일관성(자동 결과 초기화 vs “다시 채점”
  버튼) 정책이 필요하나 정의 없음 | 중 |
  | 9 | localStorage 저장 시점 변경(개별→일괄) | 현재는 개별
  제출 시 submissions를 merge 저장; 요구는 일괄 채점 후 답안
  +결과를 한 번에 저장 | 높음 |
  |10| 저장/복원 스키마 호환/마이그레이션 | 기존 키
  (curriculum-viewer:learn:lastResult:${nodeId})에 부분 제출
  데이터가 남아있을 수 있어 bulk 전환 시 호환 규칙이 필요 |
  높음 |
  |11| 초기화/다시 풀기(키 삭제 + 상태 리셋) | 요구사항 4)
  다시 풀기 버튼 및 저장된 결과/답안 삭제가 필요하나 현재 없
  음 | 높음 |
  |12| Out of Scope 가드레일 명시(무엇을 안 바꿀지) | 구현
  중 문제 타입 확장/서버 연동/커리큘럼 구조 변경으로 범위가
  새는 것을 막는 체크리스트가 필요 | 중 |

  ### 2. 과잉 난이도/불필요 선행 (최소 5개)

  | # | 개념명 | 과잉 이유 | 조치 제안 |
  |---|--------|----------|----------|
  | 1 | 서버 연동/DB 저장 | Out of Scope 위반이며
  localStorage 기반 요구를 흐림 | 금지(요구 범위 밖) |
  | 2 | 문제 타입 확장(서술형/객관식 등) | 이번 변경의 핵심
  은 “제출 UX/저장/복원”이며 타입 확장은 범위 밖 | 금지(향후
  별도 티켓) |
  | 3 | 문제은행 JSON 스키마 변경 | 현재는 problems_v1.json
  로딩으로 충분하며 스키마 변경은 회귀 위험만 큼 | 기존 스키
  마 유지 |
  | 4 | grading 로직 대개편(분수/근삿값/허용오차 등) | 요구
  는 제출 UX이며 채점 확장은 별도 사양 필요 |
  gradeNumericAnswer() 유지, 필요 시 후속 티켓 |
  | 5 | 대형 상태관리 도입(Redux/Zustand 등) | LearnPage 단
  일 화면 상태로 해결 가능, 도입은 과잉 | React state/
  useMemo로 해결 |
  | 6 | “입력 중 실시간 저장(autosave)” | 요구는 “채점 후 한
  번에 저장”이며 autosave는 UX/스키마를 복잡하게 함 | 이번
  범위에서 제외(필요 시 옵션) |

  ### 3. 학습 순서상 위험한 점프 (최소 5개)

  | # | From → To | 점프 이유 | 브릿지 제안 |
  |---|-----------|----------|------------|
  | 1 | 문제별 제출 제거 → bulk UX 미구현 | 제거만 하면 채점
  경로가 사라져 기능 공백 발생 | 단일 채점하기 버튼 +
  gradeAll 액션 먼저 추가 후 제거 |
  | 2 | disabled 판정(원문 입력 기준) → 실제 채점(정규화 기
  준) | " , " 같은 입력이 disabled 해제되거나 반대로 0이 미
  입력 처리되는 불일치 위험 | disabled는
  normalizeNumericInput(answer).length>0로 고정 |
  | 3 | 저장 시점 변경(개별→일괄) → 기존 localStorage 데이터
  무시 | 기존 submissions가 부분만 존재할 수 있어 복원/버튼
  상태가 꼬일 수 있음 | “legacy partial” 감지(개수/키) 후 초
  기화 또는 안내/정책 적용 |
  | 4 | 점수 표시(항상 0/N) → 채점 UX | 채점 전부터 점수가
  보이면 사용자가 이미 채점된 것으로 오해 | hasGraded 도입
  후 채점 후에만 점수/정답 표시 |
  | 5 | 채점 후 입력 수정 → 결과/점수 유지 | 입력과 결과가
  불일치(스테일) 상태가 생김 | 입력 변경 시 결과 초기화 또는
  버튼을 다시 채점으로 전환 |
  | 6 | 초기화(다시 풀기) 없음 → 상태 복원 유지 | 사용자가
  저장된 결과를 지울 방법이 없어 UX 막힘 | 다시 풀기(키 삭제
  +상태 리셋) 추가 |

  ## Graph Patch JSON

  {
    "researcher": "R1",
    "scope": "curriculum_viewer_learning_bulk_submit_v1",
    "add_nodes": [
      { "id": "LEARN_REMOVE_PER_PROBLEM_SUBMIT", "type":
  "micro", "name_ko": "문제 카드별 제출 버튼 제거",
  "domain": "FE", "rep": "P", "confidence": 0.85 },
      { "id": "LEARN_ADD_BULK_GRADE_BUTTON", "type":
  "micro", "name_ko": "페이지 하단 단일 버튼(채점하기/전체
  제출) 추가", "domain": "FE", "rep": "P", "confidence":
  0.85 },
      { "id": "LEARN_DISABLED_USES_NORMALIZE_NUMERIC_INPUT",
  "type": "micro", "name_ko": "disabled 판정 기준을
  normalizeNumericInput과 일치", "domain": "FE", "rep": "C",
  "confidence": 0.82 },
      { "id": "LEARN_ALL_ANSWERED_NORMALIZED", "type":
  "micro", "name_ko": "모든 문제 미입력 판정(allAnswered, 정
  규화 기반)", "domain": "FE", "rep": "P", "confidence":
  0.82 },
      { "id": "LEARN_BULK_GRADE_ALL_ACTION", "type":
  "micro", "name_ko": "일괄 채점 액션(전체 순회
  →gradeNumericAnswer)", "domain": "FE", "rep": "P",
  "confidence": 0.84 },
      { "id": "LEARN_GRADED_STATE_FLAG", "type": "micro",
  "name_ko": "채점 전/후 상태 플래그(hasGraded/isSubmitted)
  정의", "domain": "FE", "rep": "C", "confidence": 0.78 },
      { "id": "LEARN_SCORE_AND_RESULT_GATING", "type":
  "micro", "name_ko": "채점 후에만 점수/정오/정답 표시(게이
  팅)", "domain": "FE", "rep": "P", "confidence": 0.76 },
      { "id": "LEARN_LOCALSTORAGE_SAVE_BULK", "type":
  "micro", "name_ko": "일괄 채점 후 답안+결과를 한 번에 저
  장", "domain": "FE", "rep": "P", "confidence": 0.8 },
      { "id": "LEARN_LOCALSTORAGE_MIGRATION_LEGACY_PARTIAL",
  "type": "micro", "name_ko": "기존 부분 제출(submissions 일
  부) 데이터 호환/마이그레이션 규칙", "domain": "FE", "rep":
  "C", "confidence": 0.74 },
      { "id": "LEARN_RESET_CLEAR_STORAGE", "type": "micro",
  "name_ko": "다시 풀기(초기화): 저장 키 삭제 + 상태 리셋",
  "domain": "FE", "rep": "P", "confidence": 0.82 },
      { "id": "LEARN_AFTER_GRADE_EDIT_POLICY", "type":
  "micro", "name_ko": "채점 후 재입력 정책(결과 초기화 또는
  다시 채점)", "domain": "UX", "rep": "C", "confidence":
  0.7 },
      { "id": "LEARN_DISABLED_EDGECASES_12", "type":
  "micro", "name_ko": "disabled 판정 입력 엣지케이스 12종(빈
  값/공백/콤마/0/부호/소수점 등)", "domain": "QA", "rep":
  "C", "confidence": 0.76 }
    ],
    "merge_aliases": [],
    "add_edges": [
      { "from":
  "LEARN_DISABLED_USES_NORMALIZE_NUMERIC_INPUT", "to":
  "LEARN_ALL_ANSWERED_NORMALIZED", "type": "requires",
  "confidence": 0.82 },
      { "from": "LEARN_ALL_ANSWERED_NORMALIZED", "to":
  "LEARN_ADD_BULK_GRADE_BUTTON", "type": "requires",
  "confidence": 0.78 },
      { "from": "LEARN_ADD_BULK_GRADE_BUTTON", "to":
  "LEARN_BULK_GRADE_ALL_ACTION", "type": "requires",
  "confidence": 0.8 },
      { "from": "LEARN_BULK_GRADE_ALL_ACTION", "to":
  "LEARN_LOCALSTORAGE_SAVE_BULK", "type": "requires",
  "confidence": 0.8 },
      { "from": "LEARN_GRADED_STATE_FLAG", "to":
  "LEARN_SCORE_AND_RESULT_GATING", "type": "requires",
  "confidence": 0.76 },
      { "from": "LEARN_BULK_GRADE_ALL_ACTION", "to":
  "LEARN_GRADED_STATE_FLAG", "type": "requires",
  "confidence": 0.74 },
      { "from":
  "LEARN_LOCALSTORAGE_MIGRATION_LEGACY_PARTIAL", "to":
  "LEARN_LOCALSTORAGE_SAVE_BULK", "type": "requires",
  "confidence": 0.74 },
      { "from": "LEARN_RESET_CLEAR_STORAGE", "to":
  "LEARN_LOCALSTORAGE_SAVE_BULK", "type": "requires",
  "confidence": 0.78 },
      { "from": "LEARN_AFTER_GRADE_EDIT_POLICY", "to":
  "LEARN_SCORE_AND_RESULT_GATING", "type": "requires",
  "confidence": 0.7 },
      { "from": "LEARN_DISABLED_EDGECASES_12", "to":
  "LEARN_ALL_ANSWERED_NORMALIZED", "type": "requires",
  "confidence": 0.76 },
      { "from": "LEARN_ADD_BULK_GRADE_BUTTON", "to":
  "LEARN_REMOVE_PER_PROBLEM_SUBMIT", "type": "requires",
  "confidence": 0.72 }
    ],
    "remove_edges": [],
    "notes": [
      { "claim": "현재 LearnPage는 문제 카드별 제출
  (submitProblem)로 단건 채점/단건 저장을 수행하며,
  StoredResult는 { nodeId, updatedAt, submissions:
  { [problemId]: { submitted, isCorrect } } } 형태이다.",
  "reason": "LearnPage.tsx에서 gradeNumericAnswer 호출 및
  localStorage merge 저장 로직과 StoredResult 타입 정의가 확
  인된다.", "confidence": 0.86 },
      { "claim": "bulk UX의 disabled 판정은
  normalizeNumericInput(answer).length>0 기준으로 모든
  problems가 채워졌는지 검사해야 grading과 일관된다.",
  "reason": "grading.ts의 normalizeNumericInput은 공백/콤마
  제거를 수행하므로, 동일 기준을 쓰지 않으면 '미입력/입력됨'
  판단이 채점 결과와 어긋난다.", "confidence": 0.82 },
      { "claim": "점수/정오/정답 표시는 채점 전/후 상태
  (hasGraded 등)로 게이팅하지 않으면 채점 전에도 0/N이 노출
  되는 혼란이 발생할 수 있다.", "reason": "현재 score 계산은
  problems.length만으로 0/N을 만들 수 있어 bulk 전환 시 '채
  점 전' 상태를 별도로 분리하는 것이 안전하다.",
  "confidence": 0.74 },
      { "claim": "기존 localStorage에 부분 제출(submissions
  일부) 데이터가 남아 있을 수 있으므로 bulk 전환 시 호환 규
  칙(초기화/마이그레이션/안내)이 필요하다.", "reason": "기존
  구현은 문제별 제출 시마다 submissions를 merge 저장하므로,
  저장된 문제 수가 전체 problems 수보다 적은 legacy 데이터가
  자연스럽게 생성된다.", "confidence": 0.78 },
      { "claim": "Out of Scope(문제 타입 확장/서버 연동/커리
  큘럼 구조 변경)를 피하고 LearnPage.tsx 중심으로 제출 UX/저
  장 시점만 바꾸는 것이 회귀 위험이 낮다.", "reason":
  "task.md가 수정 중심 파일과 비범위를 명시하며, 현재 문제
  로딩/채점 로직은 요구 충족에 충분한 기반을 제공한다.",
  "confidence": 0.76 }
    ]
  }

  ## Standards Tags (내부 태그)

  - 추가된 태그: LEARN_ADD_BULK_GRADE_BUTTON,
    LEARN_REMOVE_PER_PROBLEM_SUBMIT,
    LEARN_ALL_ANSWERED_NORMALIZED,
    LEARN_DISABLED_USES_NORMALIZE_NUMERIC_INPUT,
    LEARN_DISABLED_EDGECASES_12,
    LEARN_BULK_GRADE_ALL_ACTION, LEARN_GRADED_STATE_FLAG,
    LEARN_SCORE_AND_RESULT_GATING,
    LEARN_LOCALSTORAGE_SAVE_BULK,
    LEARN_LOCALSTORAGE_MIGRATION_LEGACY_PARTIAL,
    LEARN_RESET_CLEAR_STORAGE, LEARN_AFTER_GRADE_EDIT_POLICY
  - 수정된 태그:
    LEARN_SINGLE_SUBMIT_FLOW(→LEARN_BULK_SUBMIT_FLOW),
    LEARN_STORAGE_UPDATE_PER_PROBLEM(→LEARN_STORAGE_SAVE_AFT
    ER_BULK_GRADE)

  [/R1 Coverage Report]

  ###DONE:216a78baad###


› -> /mnt/c/Users/irron/Desktop/my/web_service_new/
  calculate_math/.agents/inbox/research_c49dfc24b0.md


  44% context left



› Request c49dfc24b0: 아래 파일(티켓 지시)을 읽고 결과를 이
  터미널에 Output Format대로 그대로 출력해줘. 가능하면 repo
  파일을 생성/수정하지 말고, 마지막에 마커를 그대로 출력해.
  -> /mnt/c/Users/irron/Desktop/my/web_service_new/
  calculate_math/.agents/inbox/research_c49dfc24b0.md


                  Ou
•         
                               

─                                                           
  45% context left · ? for shortcuts


• ###BEGIN:c49dfc24b0###

  ## Coverage Gap Report

  ### 1. 누락된 기초 개념 (최소 10개)

  | # | 개념명 | 누락 이유 | 심각도 |
  |---|--------|----------|--------|
  | 1 | 현재 동작 1페이지 요약(상태 흐름/데이터 스키마) |
  LearnPage는 문제별 제출→단건 채점→localStorage merge 저장
  흐름이며 StoredResult{submissions} 계약이 기준점인데, 이를
  명시 요약하지 않으면 변경 시 회귀가 발생 | 높음 |
  | 2 | 문제 카드별 제출 버튼 제거 | 요구사항 핵심(개별 제출
  제거)인데 현재 UI는 per-problem 제출에 고정 | 높음 |
  | 3 | 페이지 하단 단일 버튼 채점하기(전체 제출) | 일괄 채
  점 UX의 유일한 진입점이 필요하나 현재 없음 | 높음 |
  | 4 | 채점하기 disabled 기준(정규화 일관성) | disabled 판
  정이 normalizeNumericInput()과 불일치하면 " , " 같은 입력
  에서 버튼 활성/비활성이 채점과 엇갈림 | 높음 |
  | 5 | allAnswered 계산(정규화 기반) | “모든 문제 답 입력
  전까지 disabled”를 problems[] 기준으로 안정적으로 계산하는
  로직이 필요(로딩/문제수 변화 포함) | 높음 |
  | 6 | 입력 엣지케이스 10+ 정의 | AC 요구(10개+) 충족을 위
  해 최소 벡터가 필요: "", "   ", "\t\n", ",", " , , ",
  "1,234", " 1 234 ", "0", "-0", "+", ".", "Infinity" | 중 |
  | 7 | 일괄 채점 액션(전체 순회→gradeNumericAnswer) | 현재
  는 단건 submitProblem(problem)만 존재해 “한 번에 전체 채
  점” 동작이 없음 | 높음 |
  | 8 | 채점 전/후 상태 플래그(hasGraded/isSubmitted) | 채점
  전에도 점수/정답이 노출되거나(0/N) 저장/복원 시 상태가 꼬
  이는 것을 막기 위한 상태 기준이 필요 | 중 |
  | 9 | 문제별 결과 표시(정오/정답) 정책(일괄 채점 후) | 요
  구는 채점 후 각 문제 카드에 정오/정답 표시인데, 현재는 단
  건 제출 시에만 결과가 생김 | 높음 |
  |10| 총점 X/N 표시 정책(채점 후에만) | 상단 점수는 채점 후
  에만 의미가 있으나 현재 구조는 “결과 일부 존재”만으로 0/N
  노출 가능 | 중 |
  |11| 저장/복원 계약(답안+채점결과를 한 번에 저장/복원) |
  요구는 일괄 채점 후 저장/복원인데, 현재는 문제별 제출 시마
  다 submissions를 merge 저장 | 높음 |
  |12| legacy partial(기존 부분 제출 데이터) 호환/마이그레이
  션 | 기존 데이터가 일부 문제만 채점/저장된 형태로 남아 있
  을 수 있어 bulk 전환 시 복원/disabled/표시가 꼬임 | 높음 |
  |13| 다시 풀기(초기화): 키 삭제 + UI 상태 리셋 | 요구사항
  4)인데 현재는 사용자가 저장된 결과/답안을 삭제할 UX가 없음
  | 높음 |
  |14| 채점 후 재입력 정책(스테일 결과 처리) | 채점 후 입력
  변경 시 결과/점수와 입력이 불일치하는 스테일 상태가 발생할
  수 있어 정책이 필요 | 중 |

  ### 2. 과잉 난이도/불필요 선행 (최소 5개)

  | # | 개념명 | 과잉 이유 | 조치 제안 |
  |---|--------|----------|----------|
  | 1 | 서버 연동/DB 저장 | Out of Scope(서버 연동) 위반이며
  localStorage 요구를 흐림 | 금지(이번 범위 밖) |
  | 2 | 문제 타입 확장(서술형/객관식 등) | 이번 티켓은 제출
  UX/저장/복원이며 타입 확장은 별도 사양 필요 | 금지(후속 티
  켓) |
  | 3 | grading 대개편(허용오차/분수/근삿값) | 요구는 일괄
  제출 UX이며 채점 정책 변경은 회귀 위험만 증대 | 기존
  gradeNumericAnswer() 유지 |
  | 4 | 문제은행 JSON 스키마 변경 | 로딩/데이터 구조 변경은
  범위 밖이며 회귀 위험 큼 | 기존 problems_v1.json 유지 |
  | 5 | 전역 상태관리 도입(Redux/Zustand 등) | LearnPage 단
  일 화면 상태로 충분, 도입은 과잉 | React state/useMemo로
  해결 |
  | 6 | 입력 중 실시간 autosave | 요구는 “채점 후 한 번에 저
  장”이며 autosave는 정책/호환을 복잡화 | 이번 범위에서 제외
  |

  ### 3. 학습 순서상 위험한 점프 (최소 5개)

  | # | From → To | 점프 이유 | 브릿지 제안 |
  |---|-----------|----------|------------|
  | 1 | 문제별 제출 제거 → bulk 제출 미구현 | 제거만 하면 채
  점/저장 경로가 사라져 기능 공백 발생 | 단일 채점하기
  +gradeAll 구현 후 제거 |
  | 2 | disabled(원문 입력 기준) → 채점(정규화 기준) | " , "
  같은 케이스에서 버튼 활성/비활성과 채점 결과가 불일치 |
  disabled 판정은 normalizeNumericInput(answer).length>0로
  고정 |
  | 3 | 일괄 저장(한 번에 저장) → 기존 partial 데이터 복원 |
  legacy partial이 “채점됨”처럼 보이거나 allAnswered와 충돌
  | partial 감지 후 정책(초기화/답안만 복원/재채점 요구) 정
  의 |
  | 4 | 점수 표시(항상 0/N 가능) → 채점 UX | 채점 전 0/N 노
  출은 “이미 채점됨” 오해 유발 | hasGraded 도입 후 채점 후에
  만 점수/정답 표시 |
  | 5 | 채점 후 입력 수정 → 결과/점수 유지 | 입력과 결과가
  불일치(스테일) 상태가 발생 | 입력 변경 시 결과 초기화 또는
  버튼을 다시 채점으로 전환 |
  | 6 | 초기화(키 삭제만) → UI 상태 유지 | localStorage만 지
  우면 화면은 이전 결과/답안을 계속 표시 | 키 삭제 +
  answerByProblemId/resultByProblemId/hasGraded 리셋 |

  ## Graph Patch JSON

  {
    "researcher": "R1",
    "scope": "curriculum_viewer_learning_bulk_submit_v1",
    "add_nodes": [
      { "id": "LEARN_MAP_CURRENT_SUBMIT_FLOW", "type":
  "micro", "name_ko": "현재 per-problem 제출/저장 흐름 요
  약", "domain": "FE", "rep": "C", "confidence": 0.86 },
      { "id": "LEARN_REMOVE_PER_PROBLEM_SUBMIT", "type":
  "micro", "name_ko": "문제 카드별 제출 버튼 제거",
  "domain": "FE", "rep": "P", "confidence": 0.85 },
      { "id": "LEARN_ADD_BULK_GRADE_BUTTON", "type":
  "micro", "name_ko": "페이지 하단 단일 버튼(채점하기/전체
  제출) 추가", "domain": "FE", "rep": "P", "confidence":
  0.85 },
      { "id": "LEARN_DISABLED_USES_NORMALIZE_NUMERIC_INPUT",
  "type": "micro", "name_ko": "disabled 판정 기준을
  normalizeNumericInput과 일치", "domain": "FE", "rep": "C",
  "confidence": 0.82 },
      { "id": "LEARN_ALL_ANSWERED_NORMALIZED", "type":
  "micro", "name_ko": "allAnswered 계산(정규화 기반)",
  "domain": "FE", "rep": "P", "confidence": 0.82 },
      { "id": "LEARN_DISABLED_EDGECASES_12", "type":
  "micro", "name_ko": "disabled/정규화 입력 엣지케이스 12종
  정의", "domain": "QA", "rep": "C", "confidence": 0.76 },
      { "id": "LEARN_BULK_GRADE_ALL_ACTION", "type":
  "micro", "name_ko": "일괄 채점 액션(전체 순회
  →gradeNumericAnswer)", "domain": "FE", "rep": "P",
  "confidence": 0.84 },
      { "id": "LEARN_GRADED_STATE_FLAG", "type": "micro",
  "name_ko": "채점 전/후 상태 플래그(hasGraded/isSubmitted)
  정의", "domain": "FE", "rep": "C", "confidence": 0.78 },
      { "id": "LEARN_SHOW_PER_PROBLEM_RESULT", "type":
  "micro", "name_ko": "문제별 정오/정답 표시(일괄 채점 후)",
  "domain": "FE", "rep": "P", "confidence": 0.8 },
      { "id": "LEARN_SCORE_SUMMARY_CALC", "type": "micro",
  "name_ko": "총점 X/N 계산(결과 맵 기반)", "domain": "FE",
  "rep": "P", "confidence": 0.78 },
      { "id": "LEARN_SCORE_AND_RESULT_GATING", "type":
  "micro", "name_ko": "채점 후에만 점수/정오/정답 표시(게이
  팅)", "domain": "FE", "rep": "P", "confidence": 0.76 },
      { "id": "LEARN_STORE_RESULT_SCHEMA_BULK", "type":
  "micro", "name_ko": "bulk 저장 스키마(답안+결과) 계약 정
  의", "domain": "FE", "rep": "C", "confidence": 0.76 },
      { "id": "LEARN_LOCALSTORAGE_SAVE_BULK", "type":
  "micro", "name_ko": "일괄 채점 후 답안+결과를 한 번에 저
  장", "domain": "FE", "rep": "P", "confidence": 0.8 },
      { "id": "LEARN_LOCALSTORAGE_RESTORE_BULK", "type":
  "micro", "name_ko": "재진입/새로고침 시 결과/답안 복원",
  "domain": "FE", "rep": "P", "confidence": 0.78 },
      { "id": "LEARN_LOCALSTORAGE_MIGRATION_LEGACY_PARTIAL",
  "type": "micro", "name_ko": "기존 부분 제출 데이터 호환/마
  이그레이션 규칙", "domain": "FE", "rep": "C",
  "confidence": 0.74 },
      { "id": "LEARN_RESET_CLEAR_STORAGE", "type": "micro",
  "name_ko": "다시 풀기: localStorage 키 삭제", "domain":
  "FE", "rep": "P", "confidence": 0.82 },
      { "id": "LEARN_RESET_UI_STATE", "type": "micro",
  "name_ko": "다시 풀기: UI 상태 리셋(answerByProblemId/
  results/hasGraded)", "domain": "FE", "rep": "P",
  "confidence": 0.78 },
      { "id": "LEARN_AFTER_GRADE_EDIT_POLICY", "type":
  "micro", "name_ko": "채점 후 재입력 정책(결과 초기화 또는
  다시 채점)", "domain": "UX", "rep": "C", "confidence":
  0.7 }
    ],
    "merge_aliases": [],
    "add_edges": [
      { "from":
  "LEARN_DISABLED_USES_NORMALIZE_NUMERIC_INPUT", "to":
  "LEARN_ALL_ANSWERED_NORMALIZED", "type": "requires",
  "confidence": 0.82 },
      { "from": "LEARN_ALL_ANSWERED_NORMALIZED", "to":
  "LEARN_ADD_BULK_GRADE_BUTTON", "type": "requires",
  "confidence": 0.7 },
      { "from": "LEARN_ADD_BULK_GRADE_BUTTON", "to":
  "LEARN_BULK_GRADE_ALL_ACTION", "type": "requires",
  "confidence": 0.8 },
      { "from": "LEARN_BULK_GRADE_ALL_ACTION", "to":
  "LEARN_GRADED_STATE_FLAG", "type": "requires",
  "confidence": 0.74 },
      { "from": "LEARN_GRADED_STATE_FLAG", "to":
  "LEARN_SCORE_AND_RESULT_GATING", "type": "requires",
  "confidence": 0.76 },
      { "from": "LEARN_GRADED_STATE_FLAG", "to":
  "LEARN_SHOW_PER_PROBLEM_RESULT", "type": "requires",
  "confidence": 0.74 },
      { "from": "LEARN_BULK_GRADE_ALL_ACTION", "to":
  "LEARN_SCORE_SUMMARY_CALC", "type": "requires",
  "confidence": 0.78 },
      { "from": "LEARN_STORE_RESULT_SCHEMA_BULK", "to":
  "LEARN_LOCALSTORAGE_SAVE_BULK", "type": "requires",
  "confidence": 0.8 },
      { "from": "LEARN_STORE_RESULT_SCHEMA_BULK", "to":
  "LEARN_LOCALSTORAGE_RESTORE_BULK", "type": "requires",
  "confidence": 0.8 },
      { "from": "LEARN_BULK_GRADE_ALL_ACTION", "to":
  "LEARN_LOCALSTORAGE_SAVE_BULK", "type": "requires",
  "confidence": 0.8 },
      { "from":
  "LEARN_LOCALSTORAGE_MIGRATION_LEGACY_PARTIAL", "to":
  "LEARN_LOCALSTORAGE_RESTORE_BULK", "type": "requires",
  "confidence": 0.74 },
      { "from": "LEARN_LOCALSTORAGE_RESTORE_BULK", "to":
  "LEARN_GRADED_STATE_FLAG", "type": "requires",
  "confidence": 0.72 },
      { "from": "LEARN_LOCALSTORAGE_SAVE_BULK", "to":
  "LEARN_RESET_CLEAR_STORAGE", "type": "requires",
  "confidence": 0.74 },
      { "from": "LEARN_RESET_CLEAR_STORAGE", "to":
  "LEARN_RESET_UI_STATE", "type": "requires", "confidence":
  0.78 },
      { "from": "LEARN_AFTER_GRADE_EDIT_POLICY", "to":
  "LEARN_SCORE_AND_RESULT_GATING", "type": "requires",
  "confidence": 0.7 },
      { "from": "LEARN_BULK_GRADE_ALL_ACTION", "to":
  "LEARN_REMOVE_PER_PROBLEM_SUBMIT", "type": "requires",
  "confidence": 0.72 }
    ],
    "remove_edges": [],
    "notes": [
      { "claim": "현재 LearnPage는 문제 카드별 제출
  (submitProblem)로 단건 채점 후 submissions를 localStorage
  키(curriculum-viewer:learn:lastResult:${nodeId})에 merge
  저장한다.", "reason": "LearnPage.tsx에서
  StoredResult{submissions} 타입과 submitProblem의
  setItem(JSON.stringify(payload)) 흐름이 확인된다.",
  "confidence": 0.86 },
      { "claim": "disabled 판정은 normalizeNumericInput과 동
  일 기준으로 정의해야 한다.", "reason": "grading.ts의
  normalizeNumericInput은 공백/콤마 제거를 수행하므로,
  disabled가 원문 기준이면 '입력됨/미입력'이 채점과 불일치한
  다.", "confidence": 0.82 },
      { "claim": "bulk 전환 시 legacy partial(일부 문제만
  submissions에 존재) 데이터가 자연스럽게 존재하므로 호환/마
  이그레이션 정책이 필요하다.", "reason": "기존 구현은 문제
  별 제출 시마다 submissions를 누적 저장하므로 전체 문제 수
  보다 적은 저장 데이터가 생성된다.", "confidence": 0.78 },
      { "claim": "점수/정오/정답 표시는 hasGraded 같은 상태
  로 게이팅해야 한다.", "reason": "채점 전 0/N 노출 및 저장/
  복원 시 표시 기준 혼란을 막기 위해 채점 전/후를 분리해야
  한다.", "confidence": 0.74 },
      { "claim": "다시 풀기는 localStorage 키 삭제와 UI 상태
  리셋을 함께 수행해야 한다.", "reason": "키 삭제만으로는 화
  면에 남아있는 answer/result 상태가 즉시 초기화되지 않아 UX
  가 어긋난다.", "confidence": 0.78 }
    ]
  }

  ## Standards Tags (내부 태그)

  - 추가된 태그: LEARN_MAP_CURRENT_SUBMIT_FLOW,
    LEARN_REMOVE_PER_PROBLEM_SUBMIT,
    LEARN_ADD_BULK_GRADE_BUTTON,
    LEARN_DISABLED_USES_NORMALIZE_NUMERIC_INPUT,
    LEARN_ALL_ANSWERED_NORMALIZED,
    LEARN_DISABLED_EDGECASES_12,
    LEARN_BULK_GRADE_ALL_ACTION, LEARN_GRADED_STATE_FLAG,
    LEARN_SHOW_PER_PROBLEM_RESULT, LEARN_SCORE_SUMMARY_CALC,
    LEARN_SCORE_AND_RESULT_GATING,
    LEARN_STORE_RESULT_SCHEMA_BULK,
    LEARN_LOCALSTORAGE_SAVE_BULK,
    LEARN_LOCALSTORAGE_RESTORE_BULK,
    LEARN_LOCALSTORAGE_MIGRATION_LEGACY_PARTIAL,
    LEARN_RESET_CLEAR_STORAGE, LEARN_RESET_UI_STATE,
    LEARN_AFTER_GRADE_EDIT_POLICY
  - 수정된 태그: (없음)

  [/R1 Coverage Report]

  ###DONE:c49dfc24b0###


› Explain this codebase

  40% context left · ? for shortcuts


============================================================
[2026-01-08 10:54:39] RESEARCH1 (req_id: cd88845efc)
============================================================
  ### 2. 과잉 난이도/불필요 선행 (최소 5개)

  | # | 개념명 | 과잉 이유 | 조치 제안 |
  |---|--------|----------|----------|
  | 1 | 중복순열/같은 것이 있는 순열 | 분류/중복 처리까지 요구해 기초(자리
  채우기)에서 과잉 | 범위외/선택 심화 |
  | 2 | 원순열(원배치) | 회전동치 등 추가 규칙이 필요해 초기 학습에 과잉 |
  별도 심화로 이동 |
  | 3 | 중복조합(중복허용 조합) | 기초 조합(부분집합 선택) 정착 전에는 해
  석/공식 선택 부담이 큼 | 별도 심화로 분리 |
  | 4 | 3집합 이상 포함배제 일반식 | 2집합 의미 정착 전에는 기호/계산 부담
  과도 | 기본은 2집합으로 제한 |
  | 5 | 조건부확률 | 분모 재정의/사건 분할이 필요해 TS_COMB_PROB 기초에서
  인지부하가 큼 | 별도 심화 단원으로 분리 |
  | 6 | 베이즈 정리 | 조건부확률+역확률까지 요구하는 고난도 전이 | 범위외/
  선택 심화 |
  | 7 | 확률변수/기댓값/분산/분포 | 사건 확률에서 분포/통계로 축이 바뀌는
  별도 영역 | 별도 보스/단원 분리 |

  ### 3. 학습 순서상 위험한 점프 (최소 5개)

  | # | From → To | 점프 이유 | 브릿지 제안 |
  |---|-----------|----------|------------|
  | 1 | COUNT_MUL_RULE_MEANING → STEP_PERM_DERIVE | 단계 곱에서 바로 유도
  단계로 가면 ‘자리 의미/표현 전환’이 비어 유도가 절차 암기로 됨 |
  SLOT_DIAGRAM + PERM_AS_FILLING_SLOTS + PERM_PRODUCT_FORM |
  | 2 | PERM_PRODUCT_FORM → STEP_PERM_DERIVE | 곱 형태에서 팩토리얼로의 전
  개/경계(0!)가 없으면 유도·검산이 불안정 | FACTORIAL_EXPANSION +
  FACTORIAL_ZERO_MEANING |
  | 3 | COMB_AS_SUBSET → STEP_COMB_DERIVE | “왜 r!로 나누는가”가 없으면 조
  합 유도가 암기 점프로 변함 | COMB_ORDER_IGNORED_REASON +
  COMB_FROM_PERM_DIVIDE |
  | 4 | COMB_FROM_PERM_DIVIDE → STEP_COMB_DERIVE | 유도 실행(나누기)만 강
  조되면 의미(중복 제거) 없이 절차만 남아 오류 교정이 어려움 |
  COMB_ORDER_IGNORED_REASON + CHOOSE_THEN_ARRANGE |
  | 5 | SYSTEMATIC_LISTING_BASIC → STEP_PROB_SETUP | 나열에서 곧바로 확률
  설정으로 가면 분모(전체) 고정이 약해 분모 오류 반복 |
  STEP_SAMPLE_SPACE_BUILD |
  | 6 | SET_NOTATION_BASICS → STEP_INCL_EXCL_2SET | 집합 기호를 알아도 문
  장→집합식→겹침 판정이 없으면 포함배제가 공식 점프로 됨 |
  EVENT_OPERATION_EXPRESSION + DISJOINT_OR_OVERLAP_DECISION +
  STEP_EVENT_OPS_INCL_EXCL |
  | 7 | INCL_EXCL_2SET_MEANING → STEP_INCL_EXCL_2SET | 의미에서 바로 단계
  완성으로 가면 항 매핑→대입→계산 실행이 비어 실수가 증가 |
  APPLY_INCL_EXCL_2SET |

  ## Graph Patch JSON

  {
    "researcher": "R1",
    "scope": "TS_COMB_PROB",
    "add_nodes": [
      { "id": "COUNT_MUL_RULE_MEANING", "type": "micro", "name_ko": "곱셈
  원리 의미(단계 곱)", "domain": "DA", "rep": "C", "confidence": 0.83 },
      { "id": "COUNT_ADD_RULE_MEANING", "type": "micro", "name_ko": "덧셈
  원리 의미(서로소 합)", "domain": "DA", "rep": "C", "confidence": 0.8 },
      { "id": "SLOT_DIAGRAM", "type": "micro", "name_ko": "자리/슬롯 도식
  화", "domain": "DA", "rep": "P", "confidence": 0.76 },
      { "id": "PERM_AS_FILLING_SLOTS", "type": "micro", "name_ko": "순열
  의미(자리 채우기)", "domain": "DA", "rep": "C", "confidence": 0.78 },
      { "id": "PERM_PRODUCT_FORM", "type": "micro", "name_ko": "nPr을 곱의
  형태로 표현", "domain": "DA", "rep": "P", "confidence": 0.74 },
      { "id": "FACTORIAL_EXPANSION", "type": "micro", "name_ko": "팩토리얼
  전개 n!=n*(n-1)*...", "domain": "DA", "rep": "P", "confidence": 0.82 },
      { "id": "FACTORIAL_ZERO_MEANING", "type": "micro", "name_ko": "0! 의
  미 해석(경계 사례)", "domain": "DA", "rep": "A", "confidence": 0.74 },
      { "id": "FACTORIAL_CANCELLATION", "type": "micro", "name_ko": "팩토
  리얼 약분", "domain": "DA", "rep": "P", "confidence": 0.78 },
      { "id": "STEP_PERM_DERIVE", "type": "step", "name_ko": "순열 공식 유
  도 단계", "domain": "DA", "rep": "C", "confidence": 0.74 },

      { "id": "ORDER_SENSITIVE_CHECK", "type": "micro", "name_ko": "순서
  민감 판단(순열/조합 분기)", "domain": "DA", "rep": "C", "confidence":
  0.76 },
      { "id": "COMB_AS_SUBSET", "type": "micro", "name_ko": "조합 의미(부
  분집합 선택)", "domain": "DA", "rep": "C", "confidence": 0.8 },
      { "id": "COMB_AS_CHOOSE_R", "type": "micro", "name_ko": "r개 선택 상
  황 해석", "domain": "DA", "rep": "C", "confidence": 0.75 },
      { "id": "COMB_ORDER_IGNORED_REASON", "type": "micro", "name_ko": "조
  합에서 순서 중복을 r!로 나누는 이유", "domain": "DA", "rep": "C",
  "confidence": 0.8 },
      { "id": "COMB_FROM_PERM_DIVIDE", "type": "micro", "name_ko": "nPr/r!
  로 nCr을 유도", "domain": "DA", "rep": "P", "confidence": 0.74 },
      { "id": "CHOOSE_THEN_ARRANGE", "type": "micro", "name_ko": "선택 후
  배열( nPr = nCr·r! ) 구조", "domain": "DA", "rep": "C", "confidence":
  0.72 },
      { "id": "STEP_COMB_DERIVE", "type": "step", "name_ko": "조합 공식 유
  도 단계", "domain": "DA", "rep": "C", "confidence": 0.74 },

      { "id": "SYSTEMATIC_LISTING_BASIC", "type": "micro", "name_ko": "체
  계적 나열 기초", "domain": "DA", "rep": "P", "confidence": 0.78 },
      { "id": "SET_NOTATION_BASICS", "type": "micro", "name_ko": "집합 기
  초(원소/부분집합/기호)", "domain": "DA", "rep": "C", "confidence":
  0.78 },
      { "id": "SAMPLE_SPACE_AS_SET", "type": "micro", "name_ko": "표본공간
  =집합", "domain": "DA", "rep": "C", "confidence": 0.8 },
      { "id": "EVENT_AS_SUBSET", "type": "micro", "name_ko": "사건=부분집
  합", "domain": "DA", "rep": "C", "confidence": 0.8 },
      { "id": "STEP_SAMPLE_SPACE_BUILD", "type": "step", "name_ko": "표본
  공간 구성 단계(빠짐/중복 점검)", "domain": "DA", "rep": "C",
  "confidence": 0.75 },
      { "id": "PROB_AS_RATIO", "type": "micro", "name_ko": "확률=비율(A/
  S)", "domain": "DA", "rep": "A", "confidence": 0.76 },
      { "id": "CLASSICAL_PROB_EQUIPROBABLE_CHECK", "type": "micro",
  "name_ko": "고전확률 등확률 전제 확인", "domain": "DA", "rep": "C",
  "confidence": 0.77 },
      { "id": "EQUIPROBABLE_DECISION", "type": "micro", "name_ko": "등확률
  여부 게이트(Yes/No 분기)", "domain": "DA", "rep": "C", "confidence":
  0.74 },
      { "id": "COUNT_FAVORABLE_TOTAL", "type": "micro", "name_ko": "유리/
  전체 경우의 수 분리 카운팅(A/S)", "domain": "DA", "rep": "P",
  "confidence": 0.77 },
      { "id": "STEP_PROB_SETUP", "type": "step", "name_ko": "고전확률 설정
  단계(전체→사건→전제→A/S)", "domain": "DA", "rep": "C", "confidence":
  0.76 },

      { "id": "EVENT_OPERATION_EXPRESSION", "type": "micro", "name_ko":
  "사건 연산을 집합식으로 표현(문장→A∪B/A∩B/A^c)", "domain": "DA", "rep":
  "P", "confidence": 0.76 },
      { "id": "INTERSECTION_UNION_MEANING", "type": "micro", "name_ko":
  "교집합/합집합 의미(∩/∪)", "domain": "DA", "rep": "C", "confidence":
  0.76 },
      { "id": "CHECK_DOUBLE_COUNTING", "type": "micro", "name_ko": "중복계
  수(겹침) 점검", "domain": "DA", "rep": "C", "confidence": 0.74 },
      { "id": "DISJOINT_EVENTS", "type": "micro", "name_ko": "서로소 사건
  (겹치지 않음) 판별", "domain": "DA", "rep": "C", "confidence": 0.74 },
      { "id": "VENN_DIAGRAM_2SET", "type": "micro", "name_ko": "벤 다이어
  그램(2집합)", "domain": "DA", "rep": "P", "confidence": 0.74 },
      { "id": "DISJOINT_OR_OVERLAP_DECISION", "type": "micro", "name_ko":
  "서로소/겹침 판정 게이트", "domain": "DA", "rep": "C", "confidence":
  0.74 },
      { "id": "STEP_EVENT_OPS_INCL_EXCL", "type": "step", "name_ko": "사건
  연산→포함배제 적용 단계", "domain": "DA", "rep": "C", "confidence":
  0.74 },
      { "id": "INCL_EXCL_2SET_MEANING", "type": "micro", "name_ko": "2집합
  포함배제 의미(중복 보정)", "domain": "DA", "rep": "C", "confidence":
  0.78 },
      { "id": "APPLY_INCL_EXCL_2SET", "type": "micro", "name_ko": "2집합
  포함배제 식 적용 실행(항 매핑→대입→계산)", "domain": "DA", "rep": "P",
  "confidence": 0.75 },
      { "id": "STEP_INCL_EXCL_2SET", "type": "step", "name_ko": "2집합 포
  함배제 단계", "domain": "DA", "rep": "C", "confidence": 0.73 },

      { "id": "COMPLEMENT_EVENT", "type": "micro", "name_ko": "여사건(보
  완) 개념", "domain": "DA", "rep": "C", "confidence": 0.74 },
      { "id": "COMPLEMENT_RULE", "type": "micro", "name_ko": "여사건 규칙
  (1-p)", "domain": "DA", "rep": "A", "confidence": 0.74 }
    ],
    "merge_aliases": [
      { "alias": "COUNT_MUL_RULE", "keep": "COUNT_MUL_RULE_MEANING" },
      { "alias": "COUNT_ADD_RULE", "keep": "COUNT_ADD_RULE_MEANING" },
      { "alias": "SLOT_DIAGRAM_BASIC", "keep": "SLOT_DIAGRAM" },
      { "alias": "PERM_MEANING_SLOT", "keep": "PERM_AS_FILLING_SLOTS" },
      { "alias": "FACTORIAL_ZERO", "keep": "FACTORIAL_ZERO_MEANING" },
      { "alias": "COMB_MEANING_SUBSET", "keep": "COMB_AS_SUBSET" },
      { "alias": "COMB_DERIVE_FROM_PERM_DIVIDE", "keep":
  "COMB_FROM_PERM_DIVIDE" },
      { "alias": "SAMPLE_SPACE_DEFINE", "keep": "SAMPLE_SPACE_AS_SET" },
      { "alias": "EVENT_DEFINE", "keep": "EVENT_AS_SUBSET" },
      { "alias": "SET_INTERSECTION_UNION", "keep":
  "INTERSECTION_UNION_MEANING" },
      { "alias": "INCLUSION_EXCLUSION_2SET_MEANING", "keep":
  "INCL_EXCL_2SET_MEANING" }
    ],
    "add_edges": [
      { "from": "COUNT_MUL_RULE_MEANING", "to": "SLOT_DIAGRAM", "type":
  "requires", "confidence": 0.77 },
      { "from": "SLOT_DIAGRAM", "to": "PERM_AS_FILLING_SLOTS", "type":
  "requires", "confidence": 0.78 },
      { "from": "PERM_AS_FILLING_SLOTS", "to": "PERM_PRODUCT_FORM",
  "type": "requires", "confidence": 0.74 },
      { "from": "PERM_PRODUCT_FORM", "to": "FACTORIAL_EXPANSION", "type":
  "requires", "confidence": 0.72 },
      { "from": "FACTORIAL_EXPANSION", "to": "STEP_PERM_DERIVE", "type":
  "requires", "confidence": 0.74 },
      { "from": "FACTORIAL_ZERO_MEANING", "to": "STEP_PERM_DERIVE",
  "type": "requires", "confidence": 0.66 },
      { "from": "STEP_PERM_DERIVE", "to": "PERM_BASIC", "type":
  "requires", "confidence": 0.74 },

      { "from": "ORDER_SENSITIVE_CHECK", "to": "STEP_COMB_DERIVE", "type":
  "requires", "confidence": 0.74 },
      { "from": "COMB_AS_SUBSET", "to": "COMB_AS_CHOOSE_R", "type":
  "requires", "confidence": 0.75 },
      { "from": "COMB_AS_SUBSET", "to": "COMB_ORDER_IGNORED_REASON",
  "type": "requires", "confidence": 0.74 },
      { "from": "COMB_ORDER_IGNORED_REASON", "to":
  "COMB_FROM_PERM_DIVIDE", "type": "requires", "confidence": 0.82 },
      { "from": "PERM_PRODUCT_FORM", "to": "COMB_FROM_PERM_DIVIDE",
  "type": "requires", "confidence": 0.8 },
      { "from": "FACTORIAL_EXPANSION", "to": "FACTORIAL_CANCELLATION",
  "type": "requires", "confidence": 0.78 },
      { "from": "COMB_FROM_PERM_DIVIDE", "to": "STEP_COMB_DERIVE", "type":
  "requires", "confidence": 0.74 },
      { "from": "COMB_AS_CHOOSE_R", "to": "STEP_COMB_DERIVE", "type":
  "requires", "confidence": 0.74 },
      { "from": "FACTORIAL_CANCELLATION", "to": "STEP_COMB_DERIVE",
  "type": "requires", "confidence": 0.74 },
      { "from": "CHOOSE_THEN_ARRANGE", "to": "STEP_COMB_DERIVE", "type":
  "requires", "confidence": 0.72 },
      { "from": "STEP_COMB_DERIVE", "to": "COMB_BASIC", "type":
  "requires", "confidence": 0.74 },

      { "from": "SET_NOTATION_BASICS", "to": "SAMPLE_SPACE_AS_SET",
  "type": "requires", "confidence": 0.74 },
      { "from": "SET_NOTATION_BASICS", "to": "EVENT_AS_SUBSET", "type":
  "requires", "confidence": 0.74 },
      { "from": "SYSTEMATIC_LISTING_BASIC", "to":
  "STEP_SAMPLE_SPACE_BUILD", "type": "requires", "confidence": 0.76 },
      { "from": "SAMPLE_SPACE_AS_SET", "to": "STEP_SAMPLE_SPACE_BUILD",
  "type": "requires", "confidence": 0.75 },
      { "from": "STEP_SAMPLE_SPACE_BUILD", "to": "STEP_PROB_SETUP",
  "type": "requires", "confidence": 0.76 },
      { "from": "EVENT_AS_SUBSET", "to": "STEP_PROB_SETUP", "type":
  "requires", "confidence": 0.78 },
      { "from": "PROB_AS_RATIO", "to": "STEP_PROB_SETUP", "type":
  "requires", "confidence": 0.76 },
      { "from": "CLASSICAL_PROB_EQUIPROBABLE_CHECK", "to":
  "EQUIPROBABLE_DECISION", "type": "requires", "confidence": 0.77 },
      { "from": "EQUIPROBABLE_DECISION", "to": "STEP_PROB_SETUP", "type":
  "requires", "confidence": 0.74 },
      { "from": "COUNT_FAVORABLE_TOTAL", "to": "STEP_PROB_SETUP", "type":
  "requires", "confidence": 0.77 },
      { "from": "STEP_PROB_SETUP", "to": "PROB_BASIC", "type": "requires",
  "confidence": 0.72 },

      { "from": "INTERSECTION_UNION_MEANING", "to":
  "INCL_EXCL_2SET_MEANING", "type": "requires", "confidence": 0.76 },
      { "from": "CHECK_DOUBLE_COUNTING", "to": "INCL_EXCL_2SET_MEANING",
  "type": "requires", "confidence": 0.75 },
      { "from": "DISJOINT_EVENTS", "to": "DISJOINT_OR_OVERLAP_DECISION",
  "type": "requires", "confidence": 0.74 },
      { "from": "VENN_DIAGRAM_2SET", "to": "DISJOINT_OR_OVERLAP_DECISION",
  "type": "requires", "confidence": 0.73 },
      { "from": "DISJOINT_OR_OVERLAP_DECISION", "to":
  "STEP_EVENT_OPS_INCL_EXCL", "type": "requires", "confidence": 0.72 },
      { "from": "EVENT_OPERATION_EXPRESSION", "to":
  "STEP_EVENT_OPS_INCL_EXCL", "type": "requires", "confidence": 0.7 },
      { "from": "STEP_EVENT_OPS_INCL_EXCL", "to": "STEP_INCL_EXCL_2SET",
  "type": "requires", "confidence": 0.73 },
      { "from": "INCL_EXCL_2SET_MEANING", "to": "APPLY_INCL_EXCL_2SET",
  "type": "requires", "confidence": 0.78 },
      { "from": "APPLY_INCL_EXCL_2SET", "to": "STEP_INCL_EXCL_2SET",
  "type": "requires", "confidence": 0.75 },
      { "from": "STEP_INCL_EXCL_2SET", "to": "PROB_BASIC", "type":
  "requires", "confidence": 0.69 },

      { "from": "COMPLEMENT_EVENT", "to": "COMPLEMENT_RULE", "type":
  "requires", "confidence": 0.72 },
      { "from": "COMPLEMENT_RULE", "to": "PROB_BASIC", "type": "requires",
  "confidence": 0.74 }
    ],
    "remove_edges": [],
    "notes": [
      { "claim": "R3 전이 산출물에서 참조되는 COMB_AS_CHOOSE_R,
  FACTORIAL_ZERO_MEANING, COMB_FROM_PERM_DIVIDE 등은 add_nodes/
  merge_aliases로 정의를 보강해 단일 파일 검증이 가능해야 한다.",
  "reason": "dev_handoff만으로도 전이 대상 노드의 존재/의미가 확인되어야
  병합·DAG 검증·충돌 해결을 진행할 수 있다.", "confidence": 0.74 },
      { "claim": "COMB_FROM_PERM_DIVIDE ↔ APPLY_INCL_EXCL_2SET 유사성은
  '중복 제거 1회'라는 메타 절차로만 해석하고 requires(잠금)로 강제하지 않
  는 것이 안전하다.", "reason": "나누기(중복수로 나눔)와 빼기(겹침 1회 제
  거)는 수학적 의미가 달라 잠금으로 강제하면 오개념을 유발할 수 있다.",
  "confidence": 0.78 },
      { "claim": "COMPLEMENT_EVENT ↔ FACTORIAL_ZERO_MEANING 유사성은 '경계
  (없음/전부) 안정화'라는 메타 수준으로만 제한해야 한다.", "reason": "여사
  건(확률/집합)과 0!(조합 연산)은 내용 영역이 달라 동일시하면 혼란이 생긴
  다.", "confidence": 0.78 },
      { "claim": "STEP_SAMPLE_SPACE_BUILD→STEP_PROB_SETUP 경로를 두면 확률
  의 분모/분자 설정 오류가 감소한다.", "reason": "전체(표본공간) 고정→사건
  정의→전제(등확률) 확인→A/S 카운팅 순서가 흔들릴 때 분모가 바뀌거나 사건
  을 전체로 착각한다.", "confidence": 0.76 },
      { "claim": "EVENT_OPERATION_EXPRESSION과
  DISJOINT_OR_OVERLAP_DECISION을 경유하면 포함배제의 부호·항 누락이 줄어든
  다.", "reason": "문장 조건을 집합식으로 고정하고 겹침 여부를 먼저 분기하
  면 -교집합이 공식 암기가 아니라 중복 보정으로 연결된다.", "confidence":
  0.75 }
    ]
  }

  ## Standards Tags (내부 태그)

  - 추가된 태그: COUNT_MUL_RULE_MEANING, COUNT_ADD_RULE_MEANING,
    SLOT_DIAGRAM, PERM_AS_FILLING_SLOTS, PERM_PRODUCT_FORM,
    FACTORIAL_EXPANSION, FACTORIAL_ZERO_MEANING, FACTORIAL_CANCELLATION,
    STEP_PERM_DERIVE, ORDER_SENSITIVE_CHECK, COMB_AS_SUBSET,
    COMB_AS_CHOOSE_R, COMB_ORDER_IGNORED_REASON, COMB_FROM_PERM_DIVIDE,
    CHOOSE_THEN_ARRANGE, STEP_COMB_DERIVE, SYSTEMATIC_LISTING_BASIC,
    SET_NOTATION_BASICS, SAMPLE_SPACE_AS_SET, EVENT_AS_SUBSET,
    STEP_SAMPLE_SPACE_BUILD, PROB_AS_RATIO,
    CLASSICAL_PROB_EQUIPROBABLE_CHECK, EQUIPROBABLE_DECISION,
    COUNT_FAVORABLE_TOTAL, STEP_PROB_SETUP, EVENT_OPERATION_EXPRESSION,
    INTERSECTION_UNION_MEANING, CHECK_DOUBLE_COUNTING, DISJOINT_EVENTS,
    VENN_DIAGRAM_2SET, DISJOINT_OR_OVERLAP_DECISION,
    STEP_EVENT_OPS_INCL_EXCL, INCL_EXCL_2SET_MEANING,
    APPLY_INCL_EXCL_2SET, STEP_INCL_EXCL_2SET, COMPLEMENT_EVENT,
    COMPLEMENT_RULE
  - 수정된 태그: COUNT_MUL_RULE(→COUNT_MUL_RULE_MEANING),
    COUNT_ADD_RULE(→COUNT_ADD_RULE_MEANING),
    SLOT_DIAGRAM_BASIC(→SLOT_DIAGRAM),
    PERM_MEANING_SLOT(→PERM_AS_FILLING_SLOTS),
    FACTORIAL_ZERO(→FACTORIAL_ZERO_MEANING),
    COMB_MEANING_SUBSET(→COMB_AS_SUBSET),
    COMB_DERIVE_FROM_PERM_DIVIDE(→COMB_FROM_PERM_DIVIDE),
    SAMPLE_SPACE_DEFINE(→SAMPLE_SPACE_AS_SET),
    EVENT_DEFINE(→EVENT_AS_SUBSET),
    SET_INTERSECTION_UNION(→INTERSECTION_UNION_MEANING),
    INCLUSION_EXCLUSION_2SET_MEANING(→INCL_EXCL_2SET_MEANING)

  [/R1 Coverage Report]

  ###DONE:9372cf2003###


› Request 18f9bff97c: 아래 파일(티켓 지시)을 읽고 결과를 이 터미널에
  Output Format대로 그대로 출력해줘. 가능하면 repo 파일을 생성/수정하지
  말고, 마지막에 마커를 그대로 출력해. -> /mnt/c/Users/irron/Desktop/my/
  web_service_new/calculate_math/.agents/inbox/research_18f9bff97c.md


• Explored
  └ Read research_18f9bff97c.md

─ Worked for 2m 32s ──────────────────────────────────────────────────────

• ###BEGIN:18f9bff97c###

  ## Coverage Gap Report

  ### 1. 누락된 기초 개념 (최소 10개)

  | # | 개념명 | 누락 이유 | 심각도 |
  |---|--------|----------|--------|
  | 1 | COUNT_MUL_RULE_MEANING(곱셈 원리 의미) | 순열/조합/표본공간 카운팅
  의 기반인데 단계-곱 의미가 비면 공식/절차가 암기형으로 굳음 | 높음 |
  | 2 | ORDER_SENSITIVE_CHECK(순서 민감 판단) | 순열/조합 분기 기준이 없으
  면 도구 선택이 흔들려 오답이 고착 | 높음 |
  | 3 | PERM_AS_FILLING_SLOTS(순열 의미: 자리 채우기) | nPr을 “배열/배
  치”로 해석하지 못하면 조건을 공식 항에 매핑하기 어려움 | 높음 |
  | 4 | PERM_PRODUCT_FORM(nPr의 감소곱 형태) | 곱 형태가 없으면 팩토리얼
  표기/검산으로의 표현 전환이 끊김 | 중 |
  | 5 | FACTORIAL_EXPANSION(팩토리얼 전개) | n!=n*(n-1)*… 구조 부재 시 유
  도/검산이 블랙박스가 됨 | 높음 |
  | 6 | FACTORIAL_ZERO_MEANING(0! 의미) | r=0, r=n 같은 경계에서 값/식이
  흔들리면 전체 체계가 붕괴 | 중 |
  | 7 | FACTORIAL_CANCELLATION(팩토리얼 약분) | 조합 계산에서 약분 절차가
  없으면 nCr 계산이 기계적/오류 다발 | 중 |
  | 8 | COMB_AS_SUBSET(조합 의미: 부분집합 선택) | 선택=부분집합 관점이 없
  으면 조합 공식이 맥락 없는 계산으로 남음 | 높음 |
  | 9 | COMB_AS_CHOOSE_R(r개 선택 해석) | “r개 선택”을 입력으로 고정하지
  못하면 조건 누락/중복으로 연결 | 중 |
  |10| COMB_ORDER_IGNORED_REASON(왜 r!로 나누는가) | ‘중복 제거’ 이유가 없
  으면 조합 유도/공식이 암기 점프로 변함 | 높음 |
  |11| COMB_FROM_PERM_DIVIDE(nPr/r! 유도) | 유도 절차 부재 시 조합 공식으
  로의 전이가 과격해짐 | 중 |
  |12| SET_NOTATION_BASICS(집합 기초 기호) | 사건/연산을 집합 언어로 고정
  하는 전제가 없으면 조건을 수식화하기 어려움 | 높음 |
  |13| STEP_SAMPLE_SPACE_BUILD(표본공간 구성 단계) | “전체(분모) 고정” 중
  간 단계가 없으면 고전확률 설정에서 분모 오류 반복 | 높음 |
  |14| CLASSICAL_PROB_EQUIPROBABLE_CHECK(등확률 전제 확인) | 등확률 전제
  없이 A/S를 오적용하는 오개념 차단 장치가 필요 | 높음 |
  |15| EQUIPROBABLE_DECISION(등확률 게이트) | “적용 가능/불가” 분기가 없으
  면 고전확률 적용 범위가 흐려짐 | 중 |
  |16| COUNT_FAVORABLE_TOTAL(유리/전체 분리 카운팅) | 분자/분모를 분리해
  세는 절차가 없으면 설정/계산이 흔들림 | 높음 |
  |17| EVENT_OPERATION_EXPRESSION(문장→집합식) | 문장을 A∪B/A∩B/A^c로 고정
  하지 못하면 포함배제/여사건에서 항 매핑·부호 실수 증가 | 높음 |
  |18| INCL_EXCL_2SET_MEANING(2집합 포함배제 의미) | “왜 교집합을 빼는가
  (중복 보정)” 의미 없이 공식만 주면 오용/암기 위험 | 높음 |
  |19| APPLY_INCL_EXCL_2SET(포함배제 계산 실행) | 의미에서 곧바로 단계 완
  성으로 점프하면 항 매핑→대입→계산 실행이 불안정 | 중 |
  |20| COMPLEMENT_EVENT(여사건/보완 개념) | 1-p 규칙 전에 보완(전체-부분)
  개념이 고정되어야 규칙 남용이 줄어듦 | 중 |

  ### 2. 과잉 난이도/불필요 선행 (최소 5개)

  | # | 개념명 | 과잉 이유 | 조치 제안 |
  |---|--------|----------|----------|
  | 1 | 조건부확률 | 분모 재정의/사건 분할이 필요해 TS_COMB_PROB 기초에서
  인지부하가 큼 | 별도 심화 단원으로 분리 |
  | 2 | 베이즈 정리 | 조건부확률+역확률까지 요구하는 고난도 전이 | 범위외/
  선택 심화 |
  | 3 | 독립 사건/독립의 곱 | 적용 조건이 미세해 “무작위=독립” 오개념 유발
  가능 | 후순위(심화)로 이관 |
  | 4 | 확률변수/기댓값/분산 | 사건 확률에서 분포/통계로 축이 바뀌는 별도
  영역 | 별도 보스/단원 분리 |
  | 5 | 확률분포(이항/정규 등) | 모델링/분포는 기초 조합·확률 커버리지 밖
  | 별도 보스/단원 분리 |
  | 6 | 3집합 이상 포함배제 일반식 | 2집합 의미 정착 전에는 기호/계산 부담
  과도 | 기본은 2집합으로 제한 |
  | 7 | 중복순열/원순열/중복조합 | 추가 동치/중복 처리 규칙이 필요해 기초
  학습에 과잉 | 범위외/선택 심화 |

  ### 3. 학습 순서상 위험한 점프 (최소 5개)

  | # | From → To | 점프 이유 | 브릿지 제안 |
  |---|-----------|----------|------------|
  | 1 | COUNT_MUL_RULE_MEANING → PERM_BASIC | 단계 곱에서 곧바로 순열 단원
  으로 점프하면 의미(자리 채우기)와 표기(감소곱/팩토리얼)가 분리되어 공식
  암기화 | PERM_AS_FILLING_SLOTS + PERM_PRODUCT_FORM + FACTORIAL_EXPANSION
  + STEP_PERM_DERIVE |
  | 2 | PERM_BASIC → COMB_BASIC | 순열에서 조합으로 넘어갈 때 “순서 무시/
  중복 제거”가 비면 nPr/nCr 혼동이 고착 | COMB_ORDER_IGNORED_REASON +
  COMB_FROM_PERM_DIVIDE + STEP_COMB_DERIVE |
  | 3 | ORDER_SENSITIVE_CHECK → COMB_BASIC | 순서 게이트만 있고 “선택=부분
  집합/ r개 선택 입력”이 비면 조합 해석이 불안정 | COMB_AS_SUBSET +
  COMB_AS_CHOOSE_R |
  | 4 | SYSTEMATIC_LISTING_BASIC → STEP_PROB_SETUP | 나열에서 바로 확률 설
  정으로 가면 “전체(분모) 고정”이 약해 분모 오류 반복 |
  STEP_SAMPLE_SPACE_BUILD |
  | 5 | SAMPLE_SPACE_AS_SET → STEP_PROB_SETUP | 표본공간을 알아도 등확률
  전제/유리-전체 카운팅 절차가 비면 A/S 오적용 |
  CLASSICAL_PROB_EQUIPROBABLE_CHECK + EQUIPROBABLE_DECISION +
  COUNT_FAVORABLE_TOTAL + PROB_AS_RATIO |
  | 6 | SET_NOTATION_BASICS → STEP_INCL_EXCL_2SET | 집합 기호를 알아도 문
  장→집합식→겹침 판정이 없으면 포함배제가 공식 점프로 됨 |
  EVENT_OPERATION_EXPRESSION + DISJOINT_OR_OVERLAP_DECISION +
  STEP_EVENT_OPS_INCL_EXCL |
  | 7 | INCL_EXCL_2SET_MEANING → STEP_INCL_EXCL_2SET | 의미에서 단계 완성
  으로 바로 가면 항 매핑/대입/계산 실행이 비어 실수 증가 |
  APPLY_INCL_EXCL_2SET |
  | 8 | COMPLEMENT_EVENT → PROB_BASIC | 개념에서 곧바로 1-p로 점프하면 규
  칙 남용(문맥 없는 뒤집기) 위험 | COMPLEMENT_RULE (필요 시
  TOTAL_MINUS_STRATEGY 권장) |

  ## Graph Patch JSON

  {
    "researcher": "R1",
    "scope": "TS_COMB_PROB",
    "add_nodes": [
      { "id": "COUNT_MUL_RULE_MEANING", "type": "micro", "name_ko": "곱셈
  원리 의미(단계 곱)", "domain": "DA", "rep": "C", "confidence": 0.83 },
      { "id": "COUNT_ADD_RULE_MEANING", "type": "micro", "name_ko": "덧셈
  원리 의미(서로소 합)", "domain": "DA", "rep": "C", "confidence": 0.8 },
      { "id": "ORDER_SENSITIVE_CHECK", "type": "micro", "name_ko": "순서
  민감 판단(순열/조합 분기)", "domain": "DA", "rep": "C", "confidence":
  0.76 },
      { "id": "PERM_AS_FILLING_SLOTS", "type": "micro", "name_ko": "순열
  의미(자리 채우기)", "domain": "DA", "rep": "C", "confidence": 0.78 },
      { "id": "PERM_PRODUCT_FORM", "type": "micro", "name_ko": "nPr을 감소
  곱(곱 형태)로 표현", "domain": "DA", "rep": "P", "confidence": 0.74 },
      { "id": "FACTORIAL_EXPANSION", "type": "micro", "name_ko": "팩토리얼
  전개 n!=n*(n-1)*...", "domain": "DA", "rep": "P", "confidence": 0.82 },
      { "id": "FACTORIAL_ZERO_MEANING", "type": "micro", "name_ko": "0! 의
  미 해석(경계 사례)", "domain": "DA", "rep": "A", "confidence": 0.74 },
      { "id": "FACTORIAL_CANCELLATION", "type": "micro", "name_ko": "팩토
  리얼 약분", "domain": "DA", "rep": "P", "confidence": 0.78 },
      { "id": "STEP_PERM_DERIVE", "type": "step", "name_ko": "순열 공식 유
  도 단계", "domain": "DA", "rep": "C", "confidence": 0.74 },

      { "id": "COMB_AS_SUBSET", "type": "micro", "name_ko": "조합 의미(부
  분집합 선택)", "domain": "DA", "rep": "C", "confidence": 0.8 },
      { "id": "COMB_AS_CHOOSE_R", "type": "micro", "name_ko": "r개 선택 상
  황 해석", "domain": "DA", "rep": "C", "confidence": 0.75 },
      { "id": "COMB_ORDER_IGNORED_REASON", "type": "micro", "name_ko": "조
  합에서 순서 중복을 r!로 나누는 이유", "domain": "DA", "rep": "C",
  "confidence": 0.8 },
      { "id": "COMB_FROM_PERM_DIVIDE", "type": "micro", "name_ko": "nPr/r!
  로 nCr을 유도", "domain": "DA", "rep": "P", "confidence": 0.74 },
      { "id": "CHOOSE_THEN_ARRANGE", "type": "micro", "name_ko": "선택 후
  배열( nPr = nCr·r! ) 구조", "domain": "DA", "rep": "C", "confidence":
  0.72 },
      { "id": "STEP_COMB_DERIVE", "type": "step", "name_ko": "조합 공식 유
  도 단계", "domain": "DA", "rep": "C", "confidence": 0.74 },

      { "id": "SYSTEMATIC_LISTING_BASIC", "type": "micro", "name_ko": "체
  계적 나열 기초", "domain": "DA", "rep": "P", "confidence": 0.78 },
      { "id": "TREE_DIAGRAM_BASIC", "type": "micro", "name_ko": "트리 다이
  어그램으로 경우를 표현", "domain": "DA", "rep": "P", "confidence":
  0.7 },
      { "id": "STEP_SAMPLE_SPACE_BUILD", "type": "step", "name_ko": "표본
  공간 구성 단계(빠짐/중복 점검)", "domain": "DA", "rep": "C",
  "confidence": 0.75 },

      { "id": "SET_NOTATION_BASICS", "type": "micro", "name_ko": "집합 기
  초(원소/부분집합/기호)", "domain": "DA", "rep": "C", "confidence":
  0.78 },
      { "id": "SAMPLE_SPACE_AS_SET", "type": "micro", "name_ko": "표본공간
  =집합", "domain": "DA", "rep": "C", "confidence": 0.8 },
      { "id": "EVENT_AS_SUBSET", "type": "micro", "name_ko": "사건=부분집
  합", "domain": "DA", "rep": "C", "confidence": 0.8 },
      { "id": "PROB_AS_RATIO", "type": "micro", "name_ko": "확률=비율(A/
  S)", "domain": "DA", "rep": "A", "confidence": 0.76 },
      { "id": "CLASSICAL_PROB_EQUIPROBABLE_CHECK", "type": "micro",
  "name_ko": "고전확률 등확률 전제 확인", "domain": "DA", "rep": "C",
  "confidence": 0.77 },
      { "id": "EQUIPROBABLE_DECISION", "type": "micro", "name_ko": "등확률
  여부 게이트(Yes/No 분기)", "domain": "DA", "rep": "C", "confidence":
  0.74 },
      { "id": "COUNT_FAVORABLE_TOTAL", "type": "micro", "name_ko": "유리/
  전체 경우의 수 분리 카운팅(A/S)", "domain": "DA", "rep": "P",
  "confidence": 0.77 },
      { "id": "STEP_PROB_SETUP", "type": "step", "name_ko": "고전확률 설정
  단계(전체→사건→전제→A/S)", "domain": "DA", "rep": "C", "confidence":
  0.76 },

      { "id": "EVENT_OPERATION_EXPRESSION", "type": "micro", "name_ko":
  "사건 연산을 집합식으로 표현(문장→A∪B/A∩B/A^c)", "domain": "DA", "rep":
  "P", "confidence": 0.76 },
      { "id": "INTERSECTION_UNION_MEANING", "type": "micro", "name_ko":
  "교집합/합집합 의미(∩/∪)", "domain": "DA", "rep": "C", "confidence":
  0.76 },
      { "id": "CHECK_DOUBLE_COUNTING", "type": "micro", "name_ko": "중복계
  수(겹침) 점검", "domain": "DA", "rep": "C", "confidence": 0.74 },
      { "id": "DISJOINT_EVENTS", "type": "micro", "name_ko": "서로소 사건
  (겹치지 않음) 판별", "domain": "DA", "rep": "C", "confidence": 0.74 },
      { "id": "VENN_DIAGRAM_2SET", "type": "micro", "name_ko": "벤 다이어
  그램(2집합)으로 사건 연산 시각화", "domain": "DA", "rep": "P",
  "confidence": 0.74 },
      { "id": "DISJOINT_OR_OVERLAP_DECISION", "type": "micro", "name_ko":
  "서로소/겹침 판정 게이트", "domain": "DA", "rep": "C", "confidence":
  0.74 },
      { "id": "STEP_EVENT_OPS_INCL_EXCL", "type": "step", "name_ko": "문장
  →집합식→겹침 판정→중복 보정 단계", "domain": "DA", "rep": "C",
  "confidence": 0.74 },
      { "id": "INCL_EXCL_2SET_MEANING", "type": "micro", "name_ko": "2집합
  포함배제 의미(중복 보정)", "domain": "DA", "rep": "C", "confidence":
  0.78 },
      { "id": "APPLY_INCL_EXCL_2SET", "type": "micro", "name_ko": "2집합
  포함배제 식 적용 실행(항 매핑→대입→계산)", "domain": "DA", "rep": "P",
  "confidence": 0.75 },
      { "id": "STEP_INCL_EXCL_2SET", "type": "step", "name_ko": "2집합 포
  함배제 단계", "domain": "DA", "rep": "C", "confidence": 0.73 },

      { "id": "COMPLEMENT_EVENT", "type": "micro", "name_ko": "여사건(보
  완) 개념", "domain": "DA", "rep": "C", "confidence": 0.74 },
      { "id": "COMPLEMENT_RULE", "type": "micro", "name_ko": "여사건 규칙
  (1-p)", "domain": "DA", "rep": "A", "confidence": 0.74 },
      { "id": "TOTAL_MINUS_STRATEGY", "type": "micro", "name_ko": "전체-부
  분(보완) 전략(전체에서 빼기)", "domain": "DA", "rep": "C", "confidence":
  0.68 }
    ],
    "merge_aliases": [
      { "alias": "COUNT_MUL_RULE", "keep": "COUNT_MUL_RULE_MEANING" },
      { "alias": "COUNT_ADD_RULE", "keep": "COUNT_ADD_RULE_MEANING" },
      { "alias": "PERM_MEANING_SLOT", "keep": "PERM_AS_FILLING_SLOTS" },
      { "alias": "FACTORIAL_CONCEPT", "keep": "FACTORIAL_EXPANSION" },
      { "alias": "FACTORIAL_ZERO", "keep": "FACTORIAL_ZERO_MEANING" },
      { "alias": "COMB_MEANING_SUBSET", "keep": "COMB_AS_SUBSET" },
      { "alias": "COMB_DERIVE_FROM_PERM_DIVIDE", "keep":
  "COMB_FROM_PERM_DIVIDE" },
      { "alias": "SAMPLE_SPACE_DEFINE", "keep": "SAMPLE_SPACE_AS_SET" },
      { "alias": "EVENT_DEFINE", "keep": "EVENT_AS_SUBSET" },
      { "alias": "SET_INTERSECTION_UNION", "keep":
  "INTERSECTION_UNION_MEANING" },
      { "alias": "INCLUSION_EXCLUSION_2SET_MEANING", "keep":
  "INCL_EXCL_2SET_MEANING" }
    ],
    "add_edges": [
      { "from": "COUNT_MUL_RULE_MEANING", "to": "PERM_AS_FILLING_SLOTS",
  "type": "requires", "confidence": 0.83 },
      { "from": "PERM_AS_FILLING_SLOTS", "to": "PERM_PRODUCT_FORM",
  "type": "requires", "confidence": 0.74 },
      { "from": "PERM_PRODUCT_FORM", "to": "FACTORIAL_EXPANSION", "type":
  "requires", "confidence": 0.72 },
      { "from": "FACTORIAL_EXPANSION", "to": "STEP_PERM_DERIVE", "type":
  "requires", "confidence": 0.74 },
      { "from": "FACTORIAL_ZERO_MEANING", "to": "STEP_PERM_DERIVE",
  "type": "requires", "confidence": 0.66 },
      { "from": "STEP_PERM_DERIVE", "to": "PERM_BASIC", "type":
  "requires", "confidence": 0.74 },

      { "from": "ORDER_SENSITIVE_CHECK", "to": "STEP_COMB_DERIVE", "type":
  "requires", "confidence": 0.73 },
      { "from": "COMB_AS_SUBSET", "to": "COMB_AS_CHOOSE_R", "type":
  "requires", "confidence": 0.75 },
      { "from": "COMB_AS_CHOOSE_R", "to": "STEP_COMB_DERIVE", "type":
  "requires", "confidence": 0.74 },
      { "from": "COMB_AS_SUBSET", "to": "COMB_ORDER_IGNORED_REASON",
  "type": "requires", "confidence": 0.74 },
      { "from": "COMB_ORDER_IGNORED_REASON", "to":
  "COMB_FROM_PERM_DIVIDE", "type": "requires", "confidence": 0.82 },
      { "from": "PERM_PRODUCT_FORM", "to": "COMB_FROM_PERM_DIVIDE",
  "type": "requires", "confidence": 0.8 },
      { "from": "FACTORIAL_CANCELLATION", "to": "STEP_COMB_DERIVE",
  "type": "requires", "confidence": 0.74 },
      { "from": "COMB_FROM_PERM_DIVIDE", "to": "STEP_COMB_DERIVE", "type":
  "requires", "confidence": 0.74 },
      { "from": "STEP_COMB_DERIVE", "to": "COMB_BASIC", "type":
  "requires", "confidence": 0.74 },

      { "from": "SET_NOTATION_BASICS", "to": "SAMPLE_SPACE_AS_SET",
  "type": "requires", "confidence": 0.74 },
      { "from": "SET_NOTATION_BASICS", "to": "EVENT_AS_SUBSET", "type":
  "requires", "confidence": 0.74 },
      { "from": "SYSTEMATIC_LISTING_BASIC", "to":
  "STEP_SAMPLE_SPACE_BUILD", "type": "requires", "confidence": 0.76 },
      { "from": "SAMPLE_SPACE_AS_SET", "to": "STEP_SAMPLE_SPACE_BUILD",
  "type": "requires", "confidence": 0.75 },
      { "from": "STEP_SAMPLE_SPACE_BUILD", "to": "STEP_PROB_SETUP",
  "type": "requires", "confidence": 0.76 },
      { "from": "EVENT_AS_SUBSET", "to": "STEP_PROB_SETUP", "type":
  "requires", "confidence": 0.78 },
      { "from": "PROB_AS_RATIO", "to": "STEP_PROB_SETUP", "type":
  "requires", "confidence": 0.76 },
      { "from": "CLASSICAL_PROB_EQUIPROBABLE_CHECK", "to":
  "EQUIPROBABLE_DECISION", "type": "requires", "confidence": 0.77 },
      { "from": "EQUIPROBABLE_DECISION", "to": "STEP_PROB_SETUP", "type":
  "requires", "confidence": 0.74 },
      { "from": "COUNT_FAVORABLE_TOTAL", "to": "STEP_PROB_SETUP", "type":
  "requires", "confidence": 0.77 },
      { "from": "STEP_PROB_SETUP", "to": "PROB_BASIC", "type": "requires",
  "confidence": 0.72 },

      { "from": "INTERSECTION_UNION_MEANING", "to":
  "INCL_EXCL_2SET_MEANING", "type": "requires", "confidence": 0.76 },
      { "from": "CHECK_DOUBLE_COUNTING", "to": "INCL_EXCL_2SET_MEANING",
  "type": "requires", "confidence": 0.75 },
      { "from": "DISJOINT_EVENTS", "to": "DISJOINT_OR_OVERLAP_DECISION",
  "type": "requires", "confidence": 0.74 },
      { "from": "DISJOINT_OR_OVERLAP_DECISION", "to":
  "STEP_EVENT_OPS_INCL_EXCL", "type": "requires", "confidence": 0.72 },
      { "from": "EVENT_OPERATION_EXPRESSION", "to":
  "STEP_EVENT_OPS_INCL_EXCL", "type": "requires", "confidence": 0.7 },
      { "from": "STEP_EVENT_OPS_INCL_EXCL", "to": "STEP_INCL_EXCL_2SET",
  "type": "requires", "confidence": 0.73 },
      { "from": "INCL_EXCL_2SET_MEANING", "to": "APPLY_INCL_EXCL_2SET",
  "type": "requires", "confidence": 0.78 },
      { "from": "APPLY_INCL_EXCL_2SET", "to": "STEP_INCL_EXCL_2SET",
  "type": "requires", "confidence": 0.75 },
      { "from": "STEP_INCL_EXCL_2SET", "to": "PROB_BASIC", "type":
  "requires", "confidence": 0.69 },

      { "from": "COMPLEMENT_EVENT", "to": "COMPLEMENT_RULE", "type":
  "requires", "confidence": 0.72 },
      { "from": "COMPLEMENT_RULE", "to": "PROB_BASIC", "type": "requires",
  "confidence": 0.74 }
    ],
    "remove_edges": [],
    "notes": [
      { "claim": "R3 전이 산출물에서 참조되는 핵심 ID(예:
  COMB_AS_CHOOSE_R, FACTORIAL_ZERO_MEANING, STEP_* 등)는 본 파일의
  add_nodes/merge_aliases로 존재/정의가 확인되어야 한다.", "reason":
  "dev_handoff 단일 파일만으로도 병합·DAG 검증·충돌 해결을 진행할 수 있어
  야 한다.", "confidence": 0.74 },
      { "claim": "COMPLEMENT_EVENT(개념)과 COMPLEMENT_RULE(1-p 규칙)은
  alias 병합 없이 단계적으로 연결하는 편이 안전하다.", "reason": "개념과
  계산 규칙은 추상 수준/사용처가 달라 동일시하면 규칙 남용이 생길 수 있
  다.", "confidence": 0.78 },
      { "claim": "메타 수준 동형(예: 경계 케이스 패턴, 표현 전환 패턴)은
  requires(잠금)로 강제하지 않는 편이 안전하다.", "reason": "대체 경로가
  많아 잠금으로 강제하면 과잉 선행/혼동을 만들 수 있다.", "confidence":
  0.7 },
      { "claim": "STEP_SAMPLE_SPACE_BUILD→STEP_PROB_SETUP 경로를 두면 확률
  의 분모/분자 설정 오류가 감소한다.", "reason": "전체(표본공간) 고정→사건
  정의→전제(등확률) 확인→A/S 카운팅 순서가 흔들릴 때 분모가 바뀌거나 사건
  을 전체로 착각한다.", "confidence": 0.76 },
      { "claim": "EVENT_OPERATION_EXPRESSION과
  DISJOINT_OR_OVERLAP_DECISION을 포함배제 앞에 두면 부호·항 누락이 줄어든
  다.", "reason": "문장 조건을 집합식으로 고정하고 겹침 여부를 먼저 분기하
  면 -교집합이 공식 암기가 아니라 중복 보정으로 연결된다.", "confidence":
  0.75 }
    ]
  }

  ## Standards Tags (내부 태그)

  - 추가된 태그: COUNT_MUL_RULE_MEANING, COUNT_ADD_RULE_MEANING,
    ORDER_SENSITIVE_CHECK, PERM_AS_FILLING_SLOTS, PERM_PRODUCT_FORM,
    FACTORIAL_EXPANSION, FACTORIAL_ZERO_MEANING, FACTORIAL_CANCELLATION,
    STEP_PERM_DERIVE, COMB_AS_SUBSET, COMB_AS_CHOOSE_R,
    COMB_ORDER_IGNORED_REASON, COMB_FROM_PERM_DIVIDE, CHOOSE_THEN_ARRANGE,
    STEP_COMB_DERIVE, SYSTEMATIC_LISTING_BASIC, TREE_DIAGRAM_BASIC,
    STEP_SAMPLE_SPACE_BUILD, SET_NOTATION_BASICS, SAMPLE_SPACE_AS_SET,
    EVENT_AS_SUBSET, PROB_AS_RATIO, CLASSICAL_PROB_EQUIPROBABLE_CHECK,
    EQUIPROBABLE_DECISION, COUNT_FAVORABLE_TOTAL, STEP_PROB_SETUP,
    EVENT_OPERATION_EXPRESSION, INTERSECTION_UNION_MEANING,
    CHECK_DOUBLE_COUNTING, DISJOINT_EVENTS, VENN_DIAGRAM_2SET,
    DISJOINT_OR_OVERLAP_DECISION, STEP_EVENT_OPS_INCL_EXCL,
    INCL_EXCL_2SET_MEANING, APPLY_INCL_EXCL_2SET, STEP_INCL_EXCL_2SET,
    COMPLEMENT_EVENT, COMPLEMENT_RULE, TOTAL_MINUS_STRATEGY
  - 수정된 태그: COUNT_MUL_RULE(→COUNT_MUL_RULE_MEANING),
    COUNT_ADD_RULE(→COUNT_ADD_RULE_MEANING),
    PERM_MEANING_SLOT(→PERM_AS_FILLING_SLOTS),
    FACTORIAL_CONCEPT(→FACTORIAL_EXPANSION),
    FACTORIAL_ZERO(→FACTORIAL_ZERO_MEANING),
    COMB_MEANING_SUBSET(→COMB_AS_SUBSET),
    COMB_DERIVE_FROM_PERM_DIVIDE(→COMB_FROM_PERM_DIVIDE),
    SAMPLE_SPACE_DEFINE(→SAMPLE_SPACE_AS_SET),
    EVENT_DEFINE(→EVENT_AS_SUBSET),
    SET_INTERSECTION_UNION(→INTERSECTION_UNION_MEANING),
    INCLUSION_EXCLUSION_2SET_MEANING(→INCL_EXCL_2SET_MEANING)

  [/R1 Coverage Report]

  ###DONE:18f9bff97c###


› -> /mnt/c/Users/irron/Desktop/my/web_service_new/
  calculate_math/.agents/inbox/research_216a78baad.md


  49% context left



› Request 216a78baad: 아래 파일(티켓 지시)을 읽고 결과를 이
  터미널에 Output Format대로 그대로 출력해줘. 가능하면 repo
  파일을 생성/수정하지 말고, 마지막에 마커를 그대로 출력해.
  -> /mnt/c/Users/irron/Desktop/my/web_service_new/
  calculate_math/.agents/inbox/research_216a78baad.md



• Explored
  └ Read research_216a78baad.md, T1.md
                                                  

• Ran jq
  │ '.task_id, .plan.target_scope? // .plan.scope? // .pla
                            

─                                                           
                
    … +144 lines
                        
      "max_attempts_before_pm_patch"    


• ###BEGIN:216a78baad###

  ## Coverage Gap Report

  ### 1. 누락된 기초 개념 (최소 10개)

  | # | 개념명 | 누락 이유 | 심각도 |
  |---|--------|----------|--------|
  | 1 | 단일 버튼 UX(페이지 하단 채점하기/전체 제출) | 현재
  는 문제 카드별 제출만 존재해 “모든 문제 후 일괄 채점” 요구
  를 충족하지 못함 | 높음 |
  | 2 | 문제 카드별 제출 버튼 제거 | 요구사항 1)에서 제거가
  핵심인데 현재 UI는 per-problem 제출 흐름에 고정되어 있음 |
  높음 |
  | 3 | 채점하기 disabled 조건 정의(정규화 일관성) | 버튼
  disabled 기준이 normalizeNumericInput()과 일관되게 정의되
  어야 하나 현재는 해당 UX 자체가 없음 | 높음 |
  | 4 | “모든 문제 미입력” 판정 로직(allAnswered) |
  problems[] 전체를 기준으로 answerByProblemId가 모두 채워졌
  는지 판단하는 상태/계산이 필요(문제 수 변화/로딩 타이밍 포
  함) | 높음 |
  | 5 | 입력 엣지케이스(10개+) 목록/정의 | AC 요구(10개+)가
  문서/설계로 존재해야 하는데 현재 정의가 없음(예: "", "
  ", \"\\t\\n\", \",\", " , , ", "1,234", " 1 234 ", "0",
  "-0", "+", ".", "Infinity" 등) | 중 |
  | 6 | 일괄 채점 동작(전체 순회→채점→결과 맵 생성) | 현재는
  submitProblem(problem)로 단건 채점만 가능하며, 전체 문제를
  한 번에 채점해 결과를 고정하는 액션이 없음 | 높음 |
  | 7 | 채점 이후 UI 상태 정의(채점 전/후) | 현재는 결과가
  하나라도 있으면 점수 0/N이 항상 표시될 수 있고, “채점 전/
  후” 상태(예: hasGraded/isSubmitted) 기준이 없음 | 중 |
  | 8 | “채점 후 재입력” UX 정책 | bulk 채점 후 입력을 수정
  할 때 결과/점수의 일관성(자동 결과 초기화 vs “다시 채점”
  버튼) 정책이 필요하나 정의 없음 | 중 |
  | 9 | localStorage 저장 시점 변경(개별→일괄) | 현재는 개별
  제출 시 submissions를 merge 저장; 요구는 일괄 채점 후 답안
  +결과를 한 번에 저장 | 높음 |
  |10| 저장/복원 스키마 호환/마이그레이션 | 기존 키
  (curriculum-viewer:learn:lastResult:${nodeId})에 부분 제출
  데이터가 남아있을 수 있어 bulk 전환 시 호환 규칙이 필요 |
  높음 |
  |11| 초기화/다시 풀기(키 삭제 + 상태 리셋) | 요구사항 4)
  다시 풀기 버튼 및 저장된 결과/답안 삭제가 필요하나 현재 없
  음 | 높음 |
  |12| Out of Scope 가드레일 명시(무엇을 안 바꿀지) | 구현
  중 문제 타입 확장/서버 연동/커리큘럼 구조 변경으로 범위가
  새는 것을 막는 체크리스트가 필요 | 중 |

  ### 2. 과잉 난이도/불필요 선행 (최소 5개)

  | # | 개념명 | 과잉 이유 | 조치 제안 |
  |---|--------|----------|----------|
  | 1 | 서버 연동/DB 저장 | Out of Scope 위반이며
  localStorage 기반 요구를 흐림 | 금지(요구 범위 밖) |
  | 2 | 문제 타입 확장(서술형/객관식 등) | 이번 변경의 핵심
  은 “제출 UX/저장/복원”이며 타입 확장은 범위 밖 | 금지(향후
  별도 티켓) |
  | 3 | 문제은행 JSON 스키마 변경 | 현재는 problems_v1.json
  로딩으로 충분하며 스키마 변경은 회귀 위험만 큼 | 기존 스키
  마 유지 |
  | 4 | grading 로직 대개편(분수/근삿값/허용오차 등) | 요구
  는 제출 UX이며 채점 확장은 별도 사양 필요 |
  gradeNumericAnswer() 유지, 필요 시 후속 티켓 |
  | 5 | 대형 상태관리 도입(Redux/Zustand 등) | LearnPage 단
  일 화면 상태로 해결 가능, 도입은 과잉 | React state/
  useMemo로 해결 |
  | 6 | “입력 중 실시간 저장(autosave)” | 요구는 “채점 후 한
  번에 저장”이며 autosave는 UX/스키마를 복잡하게 함 | 이번
  범위에서 제외(필요 시 옵션) |

  ### 3. 학습 순서상 위험한 점프 (최소 5개)

  | # | From → To | 점프 이유 | 브릿지 제안 |
  |---|-----------|----------|------------|
  | 1 | 문제별 제출 제거 → bulk UX 미구현 | 제거만 하면 채점
  경로가 사라져 기능 공백 발생 | 단일 채점하기 버튼 +
  gradeAll 액션 먼저 추가 후 제거 |
  | 2 | disabled 판정(원문 입력 기준) → 실제 채점(정규화 기
  준) | " , " 같은 입력이 disabled 해제되거나 반대로 0이 미
  입력 처리되는 불일치 위험 | disabled는
  normalizeNumericInput(answer).length>0로 고정 |
  | 3 | 저장 시점 변경(개별→일괄) → 기존 localStorage 데이터
  무시 | 기존 submissions가 부분만 존재할 수 있어 복원/버튼
  상태가 꼬일 수 있음 | “legacy partial” 감지(개수/키) 후 초
  기화 또는 안내/정책 적용 |
  | 4 | 점수 표시(항상 0/N) → 채점 UX | 채점 전부터 점수가
  보이면 사용자가 이미 채점된 것으로 오해 | hasGraded 도입
  후 채점 후에만 점수/정답 표시 |
  | 5 | 채점 후 입력 수정 → 결과/점수 유지 | 입력과 결과가
  불일치(스테일) 상태가 생김 | 입력 변경 시 결과 초기화 또는
  버튼을 다시 채점으로 전환 |
  | 6 | 초기화(다시 풀기) 없음 → 상태 복원 유지 | 사용자가
  저장된 결과를 지울 방법이 없어 UX 막힘 | 다시 풀기(키 삭제
  +상태 리셋) 추가 |

  ## Graph Patch JSON

  {
    "researcher": "R1",
    "scope": "curriculum_viewer_learning_bulk_submit_v1",
    "add_nodes": [
      { "id": "LEARN_REMOVE_PER_PROBLEM_SUBMIT", "type":
  "micro", "name_ko": "문제 카드별 제출 버튼 제거",
  "domain": "FE", "rep": "P", "confidence": 0.85 },
      { "id": "LEARN_ADD_BULK_GRADE_BUTTON", "type":
  "micro", "name_ko": "페이지 하단 단일 버튼(채점하기/전체
  제출) 추가", "domain": "FE", "rep": "P", "confidence":
  0.85 },
      { "id": "LEARN_DISABLED_USES_NORMALIZE_NUMERIC_INPUT",
  "type": "micro", "name_ko": "disabled 판정 기준을
  normalizeNumericInput과 일치", "domain": "FE", "rep": "C",
  "confidence": 0.82 },
      { "id": "LEARN_ALL_ANSWERED_NORMALIZED", "type":
  "micro", "name_ko": "모든 문제 미입력 판정(allAnswered, 정
  규화 기반)", "domain": "FE", "rep": "P", "confidence":
  0.82 },
      { "id": "LEARN_BULK_GRADE_ALL_ACTION", "type":
  "micro", "name_ko": "일괄 채점 액션(전체 순회
  →gradeNumericAnswer)", "domain": "FE", "rep": "P",
  "confidence": 0.84 },
      { "id": "LEARN_GRADED_STATE_FLAG", "type": "micro",
  "name_ko": "채점 전/후 상태 플래그(hasGraded/isSubmitted)
  정의", "domain": "FE", "rep": "C", "confidence": 0.78 },
      { "id": "LEARN_SCORE_AND_RESULT_GATING", "type":
  "micro", "name_ko": "채점 후에만 점수/정오/정답 표시(게이
  팅)", "domain": "FE", "rep": "P", "confidence": 0.76 },
      { "id": "LEARN_LOCALSTORAGE_SAVE_BULK", "type":
  "micro", "name_ko": "일괄 채점 후 답안+결과를 한 번에 저
  장", "domain": "FE", "rep": "P", "confidence": 0.8 },
      { "id": "LEARN_LOCALSTORAGE_MIGRATION_LEGACY_PARTIAL",
  "type": "micro", "name_ko": "기존 부분 제출(submissions 일
  부) 데이터 호환/마이그레이션 규칙", "domain": "FE", "rep":
  "C", "confidence": 0.74 },
      { "id": "LEARN_RESET_CLEAR_STORAGE", "type": "micro",
  "name_ko": "다시 풀기(초기화): 저장 키 삭제 + 상태 리셋",
  "domain": "FE", "rep": "P", "confidence": 0.82 },
      { "id": "LEARN_AFTER_GRADE_EDIT_POLICY", "type":
  "micro", "name_ko": "채점 후 재입력 정책(결과 초기화 또는
  다시 채점)", "domain": "UX", "rep": "C", "confidence":
  0.7 },
      { "id": "LEARN_DISABLED_EDGECASES_12", "type":
  "micro", "name_ko": "disabled 판정 입력 엣지케이스 12종(빈
  값/공백/콤마/0/부호/소수점 등)", "domain": "QA", "rep":
  "C", "confidence": 0.76 }
    ],
    "merge_aliases": [],
    "add_edges": [
      { "from":
  "LEARN_DISABLED_USES_NORMALIZE_NUMERIC_INPUT", "to":
  "LEARN_ALL_ANSWERED_NORMALIZED", "type": "requires",
  "confidence": 0.82 },
      { "from": "LEARN_ALL_ANSWERED_NORMALIZED", "to":
  "LEARN_ADD_BULK_GRADE_BUTTON", "type": "requires",
  "confidence": 0.78 },
      { "from": "LEARN_ADD_BULK_GRADE_BUTTON", "to":
  "LEARN_BULK_GRADE_ALL_ACTION", "type": "requires",
  "confidence": 0.8 },
      { "from": "LEARN_BULK_GRADE_ALL_ACTION", "to":
  "LEARN_LOCALSTORAGE_SAVE_BULK", "type": "requires",
  "confidence": 0.8 },
      { "from": "LEARN_GRADED_STATE_FLAG", "to":
  "LEARN_SCORE_AND_RESULT_GATING", "type": "requires",
  "confidence": 0.76 },
      { "from": "LEARN_BULK_GRADE_ALL_ACTION", "to":
  "LEARN_GRADED_STATE_FLAG", "type": "requires",
  "confidence": 0.74 },
      { "from":
  "LEARN_LOCALSTORAGE_MIGRATION_LEGACY_PARTIAL", "to":
  "LEARN_LOCALSTORAGE_SAVE_BULK", "type": "requires",
  "confidence": 0.74 },
      { "from": "LEARN_RESET_CLEAR_STORAGE", "to":
  "LEARN_LOCALSTORAGE_SAVE_BULK", "type": "requires",
  "confidence": 0.78 },
      { "from": "LEARN_AFTER_GRADE_EDIT_POLICY", "to":
  "LEARN_SCORE_AND_RESULT_GATING", "type": "requires",
  "confidence": 0.7 },
      { "from": "LEARN_DISABLED_EDGECASES_12", "to":
  "LEARN_ALL_ANSWERED_NORMALIZED", "type": "requires",
  "confidence": 0.76 },
      { "from": "LEARN_ADD_BULK_GRADE_BUTTON", "to":
  "LEARN_REMOVE_PER_PROBLEM_SUBMIT", "type": "requires",
  "confidence": 0.72 }
    ],
    "remove_edges": [],
    "notes": [
      { "claim": "현재 LearnPage는 문제 카드별 제출
  (submitProblem)로 단건 채점/단건 저장을 수행하며,
  StoredResult는 { nodeId, updatedAt, submissions:
  { [problemId]: { submitted, isCorrect } } } 형태이다.",
  "reason": "LearnPage.tsx에서 gradeNumericAnswer 호출 및
  localStorage merge 저장 로직과 StoredResult 타입 정의가 확
  인된다.", "confidence": 0.86 },
      { "claim": "bulk UX의 disabled 판정은
  normalizeNumericInput(answer).length>0 기준으로 모든
  problems가 채워졌는지 검사해야 grading과 일관된다.",
  "reason": "grading.ts의 normalizeNumericInput은 공백/콤마
  제거를 수행하므로, 동일 기준을 쓰지 않으면 '미입력/입력됨'
  판단이 채점 결과와 어긋난다.", "confidence": 0.82 },
      { "claim": "점수/정오/정답 표시는 채점 전/후 상태
  (hasGraded 등)로 게이팅하지 않으면 채점 전에도 0/N이 노출
  되는 혼란이 발생할 수 있다.", "reason": "현재 score 계산은
  problems.length만으로 0/N을 만들 수 있어 bulk 전환 시 '채
  점 전' 상태를 별도로 분리하는 것이 안전하다.",
  "confidence": 0.74 },
      { "claim": "기존 localStorage에 부분 제출(submissions
  일부) 데이터가 남아 있을 수 있으므로 bulk 전환 시 호환 규
  칙(초기화/마이그레이션/안내)이 필요하다.", "reason": "기존
  구현은 문제별 제출 시마다 submissions를 merge 저장하므로,
  저장된 문제 수가 전체 problems 수보다 적은 legacy 데이터가
  자연스럽게 생성된다.", "confidence": 0.78 },
      { "claim": "Out of Scope(문제 타입 확장/서버 연동/커리
  큘럼 구조 변경)를 피하고 LearnPage.tsx 중심으로 제출 UX/저
  장 시점만 바꾸는 것이 회귀 위험이 낮다.", "reason":
  "task.md가 수정 중심 파일과 비범위를 명시하며, 현재 문제
  로딩/채점 로직은 요구 충족에 충분한 기반을 제공한다.",
  "confidence": 0.76 }
    ]
  }

  ## Standards Tags (내부 태그)

  - 추가된 태그: LEARN_ADD_BULK_GRADE_BUTTON,
    LEARN_REMOVE_PER_PROBLEM_SUBMIT,
    LEARN_ALL_ANSWERED_NORMALIZED,
    LEARN_DISABLED_USES_NORMALIZE_NUMERIC_INPUT,
    LEARN_DISABLED_EDGECASES_12,
    LEARN_BULK_GRADE_ALL_ACTION, LEARN_GRADED_STATE_FLAG,
    LEARN_SCORE_AND_RESULT_GATING,
    LEARN_LOCALSTORAGE_SAVE_BULK,
    LEARN_LOCALSTORAGE_MIGRATION_LEGACY_PARTIAL,
    LEARN_RESET_CLEAR_STORAGE, LEARN_AFTER_GRADE_EDIT_POLICY
  - 수정된 태그:
    LEARN_SINGLE_SUBMIT_FLOW(→LEARN_BULK_SUBMIT_FLOW),
    LEARN_STORAGE_UPDATE_PER_PROBLEM(→LEARN_STORAGE_SAVE_AFT
    ER_BULK_GRADE)

  [/R1 Coverage Report]

  ###DONE:216a78baad###


› -> /mnt/c/Users/irron/Desktop/my/web_service_new/
  calculate_math/.agents/inbox/research_c49dfc24b0.md


  44% context left



› Request c49dfc24b0: 아래 파일(티켓 지시)을 읽고 결과를 이
  터미널에 Output Format대로 그대로 출력해줘. 가능하면 repo
  파일을 생성/수정하지 말고, 마지막에 마커를 그대로 출력해.
  -> /mnt/c/Users/irron/Desktop/my/web_service_new/
  calculate_math/.agents/inbox/research_c49dfc24b0.md


                  Ou
•         
                               

─                                                           
  45% context left · ? for shortcuts


• ###BEGIN:c49dfc24b0###

  ## Coverage Gap Report

  ### 1. 누락된 기초 개념 (최소 10개)

  | # | 개념명 | 누락 이유 | 심각도 |
  |---|--------|----------|--------|
  | 1 | 현재 동작 1페이지 요약(상태 흐름/데이터 스키마) |
  LearnPage는 문제별 제출→단건 채점→localStorage merge 저장
  흐름이며 StoredResult{submissions} 계약이 기준점인데, 이를
  명시 요약하지 않으면 변경 시 회귀가 발생 | 높음 |
  | 2 | 문제 카드별 제출 버튼 제거 | 요구사항 핵심(개별 제출
  제거)인데 현재 UI는 per-problem 제출에 고정 | 높음 |
  | 3 | 페이지 하단 단일 버튼 채점하기(전체 제출) | 일괄 채
  점 UX의 유일한 진입점이 필요하나 현재 없음 | 높음 |
  | 4 | 채점하기 disabled 기준(정규화 일관성) | disabled 판
  정이 normalizeNumericInput()과 불일치하면 " , " 같은 입력
  에서 버튼 활성/비활성이 채점과 엇갈림 | 높음 |
  | 5 | allAnswered 계산(정규화 기반) | “모든 문제 답 입력
  전까지 disabled”를 problems[] 기준으로 안정적으로 계산하는
  로직이 필요(로딩/문제수 변화 포함) | 높음 |
  | 6 | 입력 엣지케이스 10+ 정의 | AC 요구(10개+) 충족을 위
  해 최소 벡터가 필요: "", "   ", "\t\n", ",", " , , ",
  "1,234", " 1 234 ", "0", "-0", "+", ".", "Infinity" | 중 |
  | 7 | 일괄 채점 액션(전체 순회→gradeNumericAnswer) | 현재
  는 단건 submitProblem(problem)만 존재해 “한 번에 전체 채
  점” 동작이 없음 | 높음 |
  | 8 | 채점 전/후 상태 플래그(hasGraded/isSubmitted) | 채점
  전에도 점수/정답이 노출되거나(0/N) 저장/복원 시 상태가 꼬
  이는 것을 막기 위한 상태 기준이 필요 | 중 |
  | 9 | 문제별 결과 표시(정오/정답) 정책(일괄 채점 후) | 요
  구는 채점 후 각 문제 카드에 정오/정답 표시인데, 현재는 단
  건 제출 시에만 결과가 생김 | 높음 |
  |10| 총점 X/N 표시 정책(채점 후에만) | 상단 점수는 채점 후
  에만 의미가 있으나 현재 구조는 “결과 일부 존재”만으로 0/N
  노출 가능 | 중 |
  |11| 저장/복원 계약(답안+채점결과를 한 번에 저장/복원) |
  요구는 일괄 채점 후 저장/복원인데, 현재는 문제별 제출 시마
  다 submissions를 merge 저장 | 높음 |
  |12| legacy partial(기존 부분 제출 데이터) 호환/마이그레이
  션 | 기존 데이터가 일부 문제만 채점/저장된 형태로 남아 있
  을 수 있어 bulk 전환 시 복원/disabled/표시가 꼬임 | 높음 |
  |13| 다시 풀기(초기화): 키 삭제 + UI 상태 리셋 | 요구사항
  4)인데 현재는 사용자가 저장된 결과/답안을 삭제할 UX가 없음
  | 높음 |
  |14| 채점 후 재입력 정책(스테일 결과 처리) | 채점 후 입력
  변경 시 결과/점수와 입력이 불일치하는 스테일 상태가 발생할
  수 있어 정책이 필요 | 중 |

  ### 2. 과잉 난이도/불필요 선행 (최소 5개)

  | # | 개념명 | 과잉 이유 | 조치 제안 |
  |---|--------|----------|----------|
  | 1 | 서버 연동/DB 저장 | Out of Scope(서버 연동) 위반이며
  localStorage 요구를 흐림 | 금지(이번 범위 밖) |
  | 2 | 문제 타입 확장(서술형/객관식 등) | 이번 티켓은 제출
  UX/저장/복원이며 타입 확장은 별도 사양 필요 | 금지(후속 티
  켓) |
  | 3 | grading 대개편(허용오차/분수/근삿값) | 요구는 일괄
  제출 UX이며 채점 정책 변경은 회귀 위험만 증대 | 기존
  gradeNumericAnswer() 유지 |
  | 4 | 문제은행 JSON 스키마 변경 | 로딩/데이터 구조 변경은
  범위 밖이며 회귀 위험 큼 | 기존 problems_v1.json 유지 |
  | 5 | 전역 상태관리 도입(Redux/Zustand 등) | LearnPage 단
  일 화면 상태로 충분, 도입은 과잉 | React state/useMemo로
  해결 |
  | 6 | 입력 중 실시간 autosave | 요구는 “채점 후 한 번에 저
  장”이며 autosave는 정책/호환을 복잡화 | 이번 범위에서 제외
  |

  ### 3. 학습 순서상 위험한 점프 (최소 5개)

  | # | From → To | 점프 이유 | 브릿지 제안 |
  |---|-----------|----------|------------|
  | 1 | 문제별 제출 제거 → bulk 제출 미구현 | 제거만 하면 채
  점/저장 경로가 사라져 기능 공백 발생 | 단일 채점하기
  +gradeAll 구현 후 제거 |
  | 2 | disabled(원문 입력 기준) → 채점(정규화 기준) | " , "
  같은 케이스에서 버튼 활성/비활성과 채점 결과가 불일치 |
  disabled 판정은 normalizeNumericInput(answer).length>0로
  고정 |
  | 3 | 일괄 저장(한 번에 저장) → 기존 partial 데이터 복원 |
  legacy partial이 “채점됨”처럼 보이거나 allAnswered와 충돌
  | partial 감지 후 정책(초기화/답안만 복원/재채점 요구) 정
  의 |
  | 4 | 점수 표시(항상 0/N 가능) → 채점 UX | 채점 전 0/N 노
  출은 “이미 채점됨” 오해 유발 | hasGraded 도입 후 채점 후에
  만 점수/정답 표시 |
  | 5 | 채점 후 입력 수정 → 결과/점수 유지 | 입력과 결과가
  불일치(스테일) 상태가 발생 | 입력 변경 시 결과 초기화 또는
  버튼을 다시 채점으로 전환 |
  | 6 | 초기화(키 삭제만) → UI 상태 유지 | localStorage만 지
  우면 화면은 이전 결과/답안을 계속 표시 | 키 삭제 +
  answerByProblemId/resultByProblemId/hasGraded 리셋 |

  ## Graph Patch JSON

  {
    "researcher": "R1",
    "scope": "curriculum_viewer_learning_bulk_submit_v1",
    "add_nodes": [
      { "id": "LEARN_MAP_CURRENT_SUBMIT_FLOW", "type":
  "micro", "name_ko": "현재 per-problem 제출/저장 흐름 요
  약", "domain": "FE", "rep": "C", "confidence": 0.86 },
      { "id": "LEARN_REMOVE_PER_PROBLEM_SUBMIT", "type":
  "micro", "name_ko": "문제 카드별 제출 버튼 제거",
  "domain": "FE", "rep": "P", "confidence": 0.85 },
      { "id": "LEARN_ADD_BULK_GRADE_BUTTON", "type":
  "micro", "name_ko": "페이지 하단 단일 버튼(채점하기/전체
  제출) 추가", "domain": "FE", "rep": "P", "confidence":
  0.85 },
      { "id": "LEARN_DISABLED_USES_NORMALIZE_NUMERIC_INPUT",
  "type": "micro", "name_ko": "disabled 판정 기준을
  normalizeNumericInput과 일치", "domain": "FE", "rep": "C",
  "confidence": 0.82 },
      { "id": "LEARN_ALL_ANSWERED_NORMALIZED", "type":
  "micro", "name_ko": "allAnswered 계산(정규화 기반)",
  "domain": "FE", "rep": "P", "confidence": 0.82 },
      { "id": "LEARN_DISABLED_EDGECASES_12", "type":
  "micro", "name_ko": "disabled/정규화 입력 엣지케이스 12종
  정의", "domain": "QA", "rep": "C", "confidence": 0.76 },
      { "id": "LEARN_BULK_GRADE_ALL_ACTION", "type":
  "micro", "name_ko": "일괄 채점 액션(전체 순회
  →gradeNumericAnswer)", "domain": "FE", "rep": "P",
  "confidence": 0.84 },
      { "id": "LEARN_GRADED_STATE_FLAG", "type": "micro",
  "name_ko": "채점 전/후 상태 플래그(hasGraded/isSubmitted)
  정의", "domain": "FE", "rep": "C", "confidence": 0.78 },
      { "id": "LEARN_SHOW_PER_PROBLEM_RESULT", "type":
  "micro", "name_ko": "문제별 정오/정답 표시(일괄 채점 후)",
  "domain": "FE", "rep": "P", "confidence": 0.8 },
      { "id": "LEARN_SCORE_SUMMARY_CALC", "type": "micro",
  "name_ko": "총점 X/N 계산(결과 맵 기반)", "domain": "FE",
  "rep": "P", "confidence": 0.78 },
      { "id": "LEARN_SCORE_AND_RESULT_GATING", "type":
  "micro", "name_ko": "채점 후에만 점수/정오/정답 표시(게이
  팅)", "domain": "FE", "rep": "P", "confidence": 0.76 },
      { "id": "LEARN_STORE_RESULT_SCHEMA_BULK", "type":
  "micro", "name_ko": "bulk 저장 스키마(답안+결과) 계약 정
  의", "domain": "FE", "rep": "C", "confidence": 0.76 },
      { "id": "LEARN_LOCALSTORAGE_SAVE_BULK", "type":
  "micro", "name_ko": "일괄 채점 후 답안+결과를 한 번에 저
  장", "domain": "FE", "rep": "P", "confidence": 0.8 },
      { "id": "LEARN_LOCALSTORAGE_RESTORE_BULK", "type":
  "micro", "name_ko": "재진입/새로고침 시 결과/답안 복원",
  "domain": "FE", "rep": "P", "confidence": 0.78 },
      { "id": "LEARN_LOCALSTORAGE_MIGRATION_LEGACY_PARTIAL",
  "type": "micro", "name_ko": "기존 부분 제출 데이터 호환/마
  이그레이션 규칙", "domain": "FE", "rep": "C",
  "confidence": 0.74 },
      { "id": "LEARN_RESET_CLEAR_STORAGE", "type": "micro",
  "name_ko": "다시 풀기: localStorage 키 삭제", "domain":
  "FE", "rep": "P", "confidence": 0.82 },
      { "id": "LEARN_RESET_UI_STATE", "type": "micro",
  "name_ko": "다시 풀기: UI 상태 리셋(answerByProblemId/
  results/hasGraded)", "domain": "FE", "rep": "P",
  "confidence": 0.78 },
      { "id": "LEARN_AFTER_GRADE_EDIT_POLICY", "type":
  "micro", "name_ko": "채점 후 재입력 정책(결과 초기화 또는
  다시 채점)", "domain": "UX", "rep": "C", "confidence":
  0.7 }
    ],
    "merge_aliases": [],
    "add_edges": [
      { "from":
  "LEARN_DISABLED_USES_NORMALIZE_NUMERIC_INPUT", "to":
  "LEARN_ALL_ANSWERED_NORMALIZED", "type": "requires",
  "confidence": 0.82 },
      { "from": "LEARN_ALL_ANSWERED_NORMALIZED", "to":
  "LEARN_ADD_BULK_GRADE_BUTTON", "type": "requires",
  "confidence": 0.7 },
      { "from": "LEARN_ADD_BULK_GRADE_BUTTON", "to":
  "LEARN_BULK_GRADE_ALL_ACTION", "type": "requires",
  "confidence": 0.8 },
      { "from": "LEARN_BULK_GRADE_ALL_ACTION", "to":
  "LEARN_GRADED_STATE_FLAG", "type": "requires",
  "confidence": 0.74 },
      { "from": "LEARN_GRADED_STATE_FLAG", "to":
  "LEARN_SCORE_AND_RESULT_GATING", "type": "requires",
  "confidence": 0.76 },
      { "from": "LEARN_GRADED_STATE_FLAG", "to":
  "LEARN_SHOW_PER_PROBLEM_RESULT", "type": "requires",
  "confidence": 0.74 },
      { "from": "LEARN_BULK_GRADE_ALL_ACTION", "to":
  "LEARN_SCORE_SUMMARY_CALC", "type": "requires",
  "confidence": 0.78 },
      { "from": "LEARN_STORE_RESULT_SCHEMA_BULK", "to":
  "LEARN_LOCALSTORAGE_SAVE_BULK", "type": "requires",
  "confidence": 0.8 },
      { "from": "LEARN_STORE_RESULT_SCHEMA_BULK", "to":
  "LEARN_LOCALSTORAGE_RESTORE_BULK", "type": "requires",
  "confidence": 0.8 },
      { "from": "LEARN_BULK_GRADE_ALL_ACTION", "to":
  "LEARN_LOCALSTORAGE_SAVE_BULK", "type": "requires",
  "confidence": 0.8 },
      { "from":
  "LEARN_LOCALSTORAGE_MIGRATION_LEGACY_PARTIAL", "to":
  "LEARN_LOCALSTORAGE_RESTORE_BULK", "type": "requires",
  "confidence": 0.74 },
      { "from": "LEARN_LOCALSTORAGE_RESTORE_BULK", "to":
  "LEARN_GRADED_STATE_FLAG", "type": "requires",
  "confidence": 0.72 },
      { "from": "LEARN_LOCALSTORAGE_SAVE_BULK", "to":
  "LEARN_RESET_CLEAR_STORAGE", "type": "requires",
  "confidence": 0.74 },
      { "from": "LEARN_RESET_CLEAR_STORAGE", "to":
  "LEARN_RESET_UI_STATE", "type": "requires", "confidence":
  0.78 },
      { "from": "LEARN_AFTER_GRADE_EDIT_POLICY", "to":
  "LEARN_SCORE_AND_RESULT_GATING", "type": "requires",
  "confidence": 0.7 },
      { "from": "LEARN_BULK_GRADE_ALL_ACTION", "to":
  "LEARN_REMOVE_PER_PROBLEM_SUBMIT", "type": "requires",
  "confidence": 0.72 }
    ],
    "remove_edges": [],
    "notes": [
      { "claim": "현재 LearnPage는 문제 카드별 제출
  (submitProblem)로 단건 채점 후 submissions를 localStorage
  키(curriculum-viewer:learn:lastResult:${nodeId})에 merge
  저장한다.", "reason": "LearnPage.tsx에서
  StoredResult{submissions} 타입과 submitProblem의
  setItem(JSON.stringify(payload)) 흐름이 확인된다.",
  "confidence": 0.86 },
      { "claim": "disabled 판정은 normalizeNumericInput과 동
  일 기준으로 정의해야 한다.", "reason": "grading.ts의
  normalizeNumericInput은 공백/콤마 제거를 수행하므로,
  disabled가 원문 기준이면 '입력됨/미입력'이 채점과 불일치한
  다.", "confidence": 0.82 },
      { "claim": "bulk 전환 시 legacy partial(일부 문제만
  submissions에 존재) 데이터가 자연스럽게 존재하므로 호환/마
  이그레이션 정책이 필요하다.", "reason": "기존 구현은 문제
  별 제출 시마다 submissions를 누적 저장하므로 전체 문제 수
  보다 적은 저장 데이터가 생성된다.", "confidence": 0.78 },
      { "claim": "점수/정오/정답 표시는 hasGraded 같은 상태
  로 게이팅해야 한다.", "reason": "채점 전 0/N 노출 및 저장/
  복원 시 표시 기준 혼란을 막기 위해 채점 전/후를 분리해야
  한다.", "confidence": 0.74 },
      { "claim": "다시 풀기는 localStorage 키 삭제와 UI 상태
  리셋을 함께 수행해야 한다.", "reason": "키 삭제만으로는 화
  면에 남아있는 answer/result 상태가 즉시 초기화되지 않아 UX
  가 어긋난다.", "confidence": 0.78 }
    ]
  }

  ## Standards Tags (내부 태그)

  - 추가된 태그: LEARN_MAP_CURRENT_SUBMIT_FLOW,
    LEARN_REMOVE_PER_PROBLEM_SUBMIT,
    LEARN_ADD_BULK_GRADE_BUTTON,
    LEARN_DISABLED_USES_NORMALIZE_NUMERIC_INPUT,
    LEARN_ALL_ANSWERED_NORMALIZED,
    LEARN_DISABLED_EDGECASES_12,
    LEARN_BULK_GRADE_ALL_ACTION, LEARN_GRADED_STATE_FLAG,
    LEARN_SHOW_PER_PROBLEM_RESULT, LEARN_SCORE_SUMMARY_CALC,
    LEARN_SCORE_AND_RESULT_GATING,
    LEARN_STORE_RESULT_SCHEMA_BULK,
    LEARN_LOCALSTORAGE_SAVE_BULK,
    LEARN_LOCALSTORAGE_RESTORE_BULK,
    LEARN_LOCALSTORAGE_MIGRATION_LEGACY_PARTIAL,
    LEARN_RESET_CLEAR_STORAGE, LEARN_RESET_UI_STATE,
    LEARN_AFTER_GRADE_EDIT_POLICY
  - 수정된 태그: (없음)

  [/R1 Coverage Report]

  ###DONE:c49dfc24b0###


› -> /mnt/c/Users/irron/Desktop/my/web_service_new/
  calculate_math/.agents/inbox/research_cd88845efc.md


  40% context left



› Request cd88845efc: 아래 파일(티켓 지시)을 읽고 결과를 이
  터미널에 Output Format대로 그대로 출력해줘. 가능하면 repo
  파일을 생성/수정하지 말고, 마지막에 마커를 그대로 출력해.
  -> /mnt/c/Users/irron/Desktop/my/web_service_new/
  calculate_math/.agents/inbox/research_cd88845efc.md


    rki
•         
                               

─                                                           
  42% context left · ? for shortcuts


• ###BEGIN:cd88845efc###

  ## Coverage Gap Report

  ### 1. 누락된 기초 개념 (최소 10개)

  | # | 개념명 | 누락 이유 | 심각도 |
  |---|--------|----------|--------|
  | 1 | 현재 동작/상태 흐름 1페이지 요약 | LearnPage는 “문제
  별 제출→단건 채점→localStorage merge 저장” 구조인데, 이를
  기준선으로 요약하지 않으면 bulk 전환 시 회귀 원인을 추적하
  기 어려움 | 높음 |
  | 2 | StoredResult 스키마 명시(현재: submissions) | 저장/
  복원 계약이 { nodeId, updatedAt, submissions }인데 bulk 저
  장으로 바뀔 때 호환/마이그레이션 규칙이 필요 | 높음 |
  | 3 | 단일 버튼 채점하기 UX(하단 고정) | 요구사항은 “모든
  문제 입력 후 한 번에 제출”인데 현재 UI는 문제 카드별 제출
  만 존재 | 높음 |
  | 4 | 채점하기 disabled 기준(정규화 일치) | disabled 판정
  이 normalizeNumericInput()과 일관되지 않으면 " , " 같은 입
  력에서 활성/비활성이 채점과 불일치 | 높음 |
  | 5 | allAnswered 계산(정규화 기반) | problems[] 전체에 대
  해 정규화 후 빈 값 여부를 확인해야 “모든 문제 입력 전까지
  disabled”를 구현 가능 | 높음 |
  | 6 | 입력 엣지케이스 10+ 정의 | AC 요구(10개+) 충족을 위
  해 최소 벡터가 필요(빈값/공백/콤마/0/부호/소수점/Infinity
  등) | 중 |
  | 7 | 일괄 채점 액션(전체 순회→gradeNumericAnswer) | 현재
  는 단건 submitProblem만 있어 “한 번에 전체 채점” 동작이 없
  음 | 높음 |
  | 8 | 채점 전/후 상태 플래그(hasGraded/isSubmitted) | 채점
  전 0/N 노출, 복원 후 표시 기준 혼란을 막기 위해 채점 전/후
  상태를 분리해야 함 | 중 |
  | 9 | 점수/정오/정답 표시 게이팅 | 채점 후에만 결과를 노출
  해야 사용자 혼란(채점 전 점수 노출/legacy partial) 최소화
  | 중 |
  |10| bulk 저장(답안+결과를 한 번에 저장) | 요구사항 3) 저
  장 시점이 “개별 제출”이 아니라 “일괄 채점 후”로 바뀌어야
  함 | 높음 |
  |11| bulk 복원(재진입/새로고침) | 저장된 답안/결과를 한 번
  에 복원해 UI 상태를 재구성해야 함 | 높음 |
  |12| legacy partial 호환/마이그레이션 정책 | 기존 per-
  problem 저장은 submissions 일부만 남기는 데이터가 자연스럽
  게 생성되므로 bulk 전환 후 충돌 방지 정책이 필요 | 높음 |
  |13| 초기화(다시 풀기): localStorage 삭제 + UI 리셋 | 요구
  사항 4)인데 현재 사용자가 저장된 결과/답안을 지울 방법이
  없음 | 높음 |
  |14| strict JSON 출력 가드(줄바꿈 금지) | reviewer 지적처
  럼 문자열 내부 줄바꿈이 있으면 자동 파싱/병합이 실패하므로
  산출물 JSON은 strict JSON이어야 함 | 높음 |

  ### 2. 과잉 난이도/불필요 선행 (최소 5개)

  | # | 개념명 | 과잉 이유 | 조치 제안 |
  |---|--------|----------|----------|
  | 1 | 서버 연동/DB 저장 | Out of Scope 위반이며
  localStorage 요구를 흐림 | 금지 |
  | 2 | 문제 타입 확장(서술형/객관식) | 이번 티켓은 제출 UX/
  저장/복원이며 타입 확장은 별도 설계 필요 | 금지(후속 티켓)
  |
  | 3 | 채점 정책 확장(허용오차/분수/근사) | bulk 제출 UX와
  무관하며 회귀 위험만 증가 | gradeNumericAnswer() 유지 |
  | 4 | 문제은행 스키마 변경 | 데이터 구조 변경은 범위 밖이
  며 회귀 위험 큼 | problems_v1.json 유지 |
  | 5 | 전역 상태관리 도입(Redux/Zustand) | LearnPage 단일
  화면 상태로 충분 | 도입 금지 |
  | 6 | autosave(입력 즉시 저장) | 요구는 “채점 후 한 번에
  저장”이며 호환/정책을 복잡화 | 제외 |

  ### 3. 학습 순서상 위험한 점프 (최소 5개)

  | # | From → To | 점프 이유 | 브릿지 제안 |
  |---|-----------|----------|------------|
  | 1 | 문제별 제출 제거 → bulk 액션/버튼 미구현 | 제거만 하
  면 채점/저장 경로가 사라져 기능 공백 발생 | 채점하기
  +gradeAll 구현 후 제거 |
  | 2 | disabled(원문 기준) → 채점(정규화 기준) | " , " 등에
  서 활성/비활성과 채점이 불일치해 UX 붕괴 | disabled는
  normalizeNumericInput(answer).length>0로 통일 |
  | 3 | bulk 저장 도입 → legacy partial 복원 | 기존
  submissions 일부만 저장된 데이터가 bulk 상태/표시와 충돌 |
  legacy partial 감지 후 정책(초기화/답안만 복원/재채점 유
  도) |
  | 4 | 점수 표시(항상 0/N 가능) → 채점 UX | 채점 전 점수 노
  출은 “이미 채점됨” 오해 유발 | hasGraded 도입 후 채점 후에
  만 점수/정답 표시 |
  | 5 | 채점 후 입력 수정 → 결과 유지 | 입력과 결과가 불일치
  (스테일) 상태 발생 | 입력 변경 시 결과 초기화 또는 다시 채
  점 플로우 |
  | 6 | 초기화(키 삭제만) → UI 상태 유지 | 저장소만 지우면
  화면에 남아있는 answer/result/flags가 그대로 | 키 삭제 +
  UI 상태 리셋 동시 수행 |

  ## Graph Patch JSON

  {
    "researcher": "R1",
    "scope": "curriculum_viewer_learning_bulk_submit_v1",
    "add_nodes": [
      { "id": "LEARN_MAP_CURRENT_SUBMIT_FLOW", "type":
  "micro", "name_ko": "현재 per-problem 제출/저장 흐름 1페이
  지 요약", "domain": "FE", "rep": "C", "confidence":
  0.86 },
      { "id": "LEARN_DOCUMENT_STORED_RESULT_SCHEMA", "type":
  "micro", "name_ko": "StoredResult/ submisions 스키마 문서
  화", "domain": "FE", "rep": "C", "confidence": 0.82 },
      { "id": "LEARN_REMOVE_PER_PROBLEM_SUBMIT", "type":
  "micro", "name_ko": "문제 카드별 제출 버튼 제거",
  "domain": "FE", "rep": "P", "confidence": 0.85 },
      { "id": "LEARN_ADD_BULK_GRADE_BUTTON", "type":
  "micro", "name_ko": "페이지 하단 단일 버튼(채점하기/전체
  제출) 추가", "domain": "FE", "rep": "P", "confidence":
  0.85 },
      { "id": "LEARN_DISABLED_USES_NORMALIZE_NUMERIC_INPUT",
  "type": "micro", "name_ko": "disabled 판정 기준을
  normalizeNumericInput과 일치", "domain": "FE", "rep": "C",
  "confidence": 0.82 },
      { "id": "LEARN_ALL_ANSWERED_NORMALIZED", "type":
  "micro", "name_ko": "allAnswered 계산(정규화 기반)",
  "domain": "FE", "rep": "P", "confidence": 0.82 },
      { "id": "LEARN_DISABLED_EDGECASES_12", "type":
  "micro", "name_ko": "입력 엣지케이스 12종 정의(빈값/공백/
  콤마/0/부호/소수점 등)", "domain": "QA", "rep": "C",
  "confidence": 0.76 },
      { "id": "LEARN_BULK_GRADE_ALL_ACTION", "type":
  "micro", "name_ko": "일괄 채점 액션(전체 순회
  →gradeNumericAnswer)", "domain": "FE", "rep": "P",
  "confidence": 0.84 },
      { "id": "LEARN_GRADED_STATE_FLAG", "type": "micro",
  "name_ko": "채점 전/후 상태 플래그(hasGraded/isSubmitted)
  정의", "domain": "FE", "rep": "C", "confidence": 0.78 },
      { "id": "LEARN_SCORE_AND_RESULT_GATING", "type":
  "micro", "name_ko": "채점 후에만 점수/정오/정답 표시(게이
  팅)", "domain": "FE", "rep": "P", "confidence": 0.76 },
      { "id": "LEARN_STORE_RESULT_SCHEMA_BULK", "type":
  "micro", "name_ko": "bulk 저장 스키마(답안+결과) 계약 정
  의", "domain": "FE", "rep": "C", "confidence": 0.76 },
      { "id": "LEARN_LOCALSTORAGE_SAVE_BULK", "type":
  "micro", "name_ko": "일괄 채점 후 답안+결과를 한 번에 저
  장", "domain": "FE", "rep": "P", "confidence": 0.8 },
      { "id": "LEARN_LOCALSTORAGE_RESTORE_BULK", "type":
  "micro", "name_ko": "재진입/새로고침 시 결과/답안 복원",
  "domain": "FE", "rep": "P", "confidence": 0.78 },
      { "id": "LEARN_LOCALSTORAGE_MIGRATION_LEGACY_PARTIAL",
  "type": "micro", "name_ko": "legacy partial(부분 제출) 데
  이터 호환/정책", "domain": "FE", "rep": "C", "confidence":
  0.74 },
      { "id": "LEARN_RESET_CLEAR_STORAGE", "type": "micro",
  "name_ko": "다시 풀기: localStorage 키 삭제", "domain":
  "FE", "rep": "P", "confidence": 0.82 },
      { "id": "LEARN_RESET_UI_STATE", "type": "micro",
  "name_ko": "다시 풀기: UI 상태 리셋(answer/results/
  flags)", "domain": "FE", "rep": "P", "confidence": 0.78 },
      { "id": "LEARN_AFTER_GRADE_EDIT_POLICY", "type":
  "micro", "name_ko": "채점 후 재입력 정책(결과 초기화 또는
  다시 채점)", "domain": "UX", "rep": "C", "confidence":
  0.7 },
      { "id": "LEARN_STRICT_JSON_OUTPUT_GUARD", "type":
  "micro", "name_ko": "Graph Patch JSON strict JSON 보장(문
  자열 줄바꿈 금지)", "domain": "QA", "rep": "C",
  "confidence": 0.84 }
    ],
    "merge_aliases": [],
    "add_edges": [
      { "from": "LEARN_MAP_CURRENT_SUBMIT_FLOW", "to":
  "LEARN_DOCUMENT_STORED_RESULT_SCHEMA", "type": "requires",
  "confidence": 0.78 },
      { "from":
  "LEARN_DISABLED_USES_NORMALIZE_NUMERIC_INPUT", "to":
  "LEARN_ALL_ANSWERED_NORMALIZED", "type": "requires",
  "confidence": 0.82 },
      { "from": "LEARN_ALL_ANSWERED_NORMALIZED", "to":
  "LEARN_ADD_BULK_GRADE_BUTTON", "type": "requires",
  "confidence": 0.7 },
      { "from": "LEARN_ADD_BULK_GRADE_BUTTON", "to":
  "LEARN_BULK_GRADE_ALL_ACTION", "type": "requires",
  "confidence": 0.8 },
      { "from": "LEARN_BULK_GRADE_ALL_ACTION", "to":
  "LEARN_GRADED_STATE_FLAG", "type": "requires",
  "confidence": 0.74 },
      { "from": "LEARN_GRADED_STATE_FLAG", "to":
  "LEARN_SCORE_AND_RESULT_GATING", "type": "requires",
  "confidence": 0.76 },
      { "from": "LEARN_STORE_RESULT_SCHEMA_BULK", "to":
  "LEARN_LOCALSTORAGE_SAVE_BULK", "type": "requires",
  "confidence": 0.8 },
      { "from": "LEARN_STORE_RESULT_SCHEMA_BULK", "to":
  "LEARN_LOCALSTORAGE_RESTORE_BULK", "type": "requires",
  "confidence": 0.8 },
      { "from":
  "LEARN_LOCALSTORAGE_MIGRATION_LEGACY_PARTIAL", "to":
  "LEARN_LOCALSTORAGE_RESTORE_BULK", "type": "requires",
  "confidence": 0.74 },
      { "from": "LEARN_LOCALSTORAGE_RESTORE_BULK", "to":
  "LEARN_GRADED_STATE_FLAG", "type": "requires",
  "confidence": 0.72 },
      { "from": "LEARN_LOCALSTORAGE_SAVE_BULK", "to":
  "LEARN_RESET_CLEAR_STORAGE", "type": "requires",
  "confidence": 0.74 },
      { "from": "LEARN_RESET_CLEAR_STORAGE", "to":
  "LEARN_RESET_UI_STATE", "type": "requires", "confidence":
  0.78 },
      { "from": "LEARN_AFTER_GRADE_EDIT_POLICY", "to":
  "LEARN_SCORE_AND_RESULT_GATING", "type": "requires",
  "confidence": 0.7 },
      { "from": "LEARN_BULK_GRADE_ALL_ACTION", "to":
  "LEARN_REMOVE_PER_PROBLEM_SUBMIT", "type": "requires",
  "confidence": 0.72 },
      { "from": "LEARN_STRICT_JSON_OUTPUT_GUARD", "to":
  "LEARN_STORE_RESULT_SCHEMA_BULK", "type": "requires",
  "confidence": 0.74 }
    ],
    "remove_edges": [],
    "notes": [
      { "claim": "현재 LearnPage는 문제별 제출
  (submitProblem)로 단건 채점 후 submissions를 localStorage
  키(curriculum-viewer:learn:lastResult:${nodeId})에 merge
  저장한다.", "reason": "LearnPage.tsx에서
  StoredResult{submissions} 타입 정의와
  setItem(JSON.stringify(payload))가 확인된다.",
  "confidence": 0.86 },
      { "claim": "disabled 판정은 normalizeNumericInput과 동
  일 기준으로 정의해야 한다.", "reason":
  "normalizeNumericInput이 공백/콤마 제거를 수행하므로 원문
  기준 disabled는 채점과 불일치해 UX가 붕괴한다.",
  "confidence": 0.82 },
      { "claim": "legacy partial 데이터는 bulk 전환 시 필연
  적으로 존재할 수 있어 복원 단계에서 감지/정책화가 필요하
  다.", "reason": "기존 per-problem 저장은 전체 문제 수보다
  적은 submissions를 남기는 것이 정상 동작이었다.",
  "confidence": 0.74 },
      { "claim": "채점 전/후 게이팅(hasGraded)은 점수/정답
  조기 노출과 저장/복원 혼선을 줄인다.", "reason": "채점 전
  0/N 노출, 부분 저장 데이터 노출을 통제하려면 표시 기준이
  필요하다.", "confidence": 0.74 },
      { "claim": "Graph Patch JSON은 문자열 내부 줄바꿈이 있
  으면 파서가 실패하므로 strict JSON으로 재출력되어야 한
  다.", "reason": "reviewer 지적처럼 JSON 파싱 실패는 결합
  패치 검증/병합 파이프라인을 중단시킨다.", "confidence":
  0.84 }
    ]
  }

  ## Standards Tags (내부 태그)

  - 추가된 태그: LEARN_MAP_CURRENT_SUBMIT_FLOW,
    LEARN_DOCUMENT_STORED_RESULT_SCHEMA,
    LEARN_REMOVE_PER_PROBLEM_SUBMIT,
    LEARN_ADD_BULK_GRADE_BUTTON,
    LEARN_DISABLED_USES_NORMALIZE_NUMERIC_INPUT,
    LEARN_ALL_ANSWERED_NORMALIZED,
    LEARN_DISABLED_EDGECASES_12,
    LEARN_BULK_GRADE_ALL_ACTION, LEARN_GRADED_STATE_FLAG,
    LEARN_SCORE_AND_RESULT_GATING,
    LEARN_STORE_RESULT_SCHEMA_BULK,
    LEARN_LOCALSTORAGE_SAVE_BULK,
    LEARN_LOCALSTORAGE_RESTORE_BULK,
    LEARN_LOCALSTORAGE_MIGRATION_LEGACY_PARTIAL,
    LEARN_RESET_CLEAR_STORAGE, LEARN_RESET_UI_STATE,
    LEARN_AFTER_GRADE_EDIT_POLICY,
    LEARN_STRICT_JSON_OUTPUT_GUARD
  - 수정된 태그: (없음)

  [/R1 Coverage Report]

  ###DONE:cd88845efc###


› Explain this codebase

  40% context left · ? for shortcuts


============================================================
[2026-01-08 11:18:32] RESEARCH1 (req_id: f0805f8d87)
============================================================
  병합·DAG 검증·충돌 해결을 진행할 수 있다.", "confidence": 0.74 },
      { "claim": "COMB_FROM_PERM_DIVIDE ↔ APPLY_INCL_EXCL_2SET 유사성은
  '중복 제거 1회'라는 메타 절차로만 해석하고 requires(잠금)로 강제하지 않
  는 것이 안전하다.", "reason": "나누기(중복수로 나눔)와 빼기(겹침 1회 제
  거)는 수학적 의미가 달라 잠금으로 강제하면 오개념을 유발할 수 있다.",
  "confidence": 0.78 },
      { "claim": "COMPLEMENT_EVENT ↔ FACTORIAL_ZERO_MEANING 유사성은 '경계
  (없음/전부) 안정화'라는 메타 수준으로만 제한해야 한다.", "reason": "여사
  건(확률/집합)과 0!(조합 연산)은 내용 영역이 달라 동일시하면 혼란이 생긴
  다.", "confidence": 0.78 },
      { "claim": "STEP_SAMPLE_SPACE_BUILD→STEP_PROB_SETUP 경로를 두면 확률
  의 분모/분자 설정 오류가 감소한다.", "reason": "전체(표본공간) 고정→사건
  정의→전제(등확률) 확인→A/S 카운팅 순서가 흔들릴 때 분모가 바뀌거나 사건
  을 전체로 착각한다.", "confidence": 0.76 },
      { "claim": "EVENT_OPERATION_EXPRESSION과
  DISJOINT_OR_OVERLAP_DECISION을 경유하면 포함배제의 부호·항 누락이 줄어든
  다.", "reason": "문장 조건을 집합식으로 고정하고 겹침 여부를 먼저 분기하
  면 -교집합이 공식 암기가 아니라 중복 보정으로 연결된다.", "confidence":
  0.75 }
    ]
  }

  ## Standards Tags (내부 태그)

  - 추가된 태그: COUNT_MUL_RULE_MEANING, COUNT_ADD_RULE_MEANING,
    SLOT_DIAGRAM, PERM_AS_FILLING_SLOTS, PERM_PRODUCT_FORM,
    FACTORIAL_EXPANSION, FACTORIAL_ZERO_MEANING, FACTORIAL_CANCELLATION,
    STEP_PERM_DERIVE, ORDER_SENSITIVE_CHECK, COMB_AS_SUBSET,
    COMB_AS_CHOOSE_R, COMB_ORDER_IGNORED_REASON, COMB_FROM_PERM_DIVIDE,
    CHOOSE_THEN_ARRANGE, STEP_COMB_DERIVE, SYSTEMATIC_LISTING_BASIC,
    SET_NOTATION_BASICS, SAMPLE_SPACE_AS_SET, EVENT_AS_SUBSET,
    STEP_SAMPLE_SPACE_BUILD, PROB_AS_RATIO,
    CLASSICAL_PROB_EQUIPROBABLE_CHECK, EQUIPROBABLE_DECISION,
    COUNT_FAVORABLE_TOTAL, STEP_PROB_SETUP, EVENT_OPERATION_EXPRESSION,
    INTERSECTION_UNION_MEANING, CHECK_DOUBLE_COUNTING, DISJOINT_EVENTS,
    VENN_DIAGRAM_2SET, DISJOINT_OR_OVERLAP_DECISION,
    STEP_EVENT_OPS_INCL_EXCL, INCL_EXCL_2SET_MEANING,
    APPLY_INCL_EXCL_2SET, STEP_INCL_EXCL_2SET, COMPLEMENT_EVENT,
    COMPLEMENT_RULE
  - 수정된 태그: COUNT_MUL_RULE(→COUNT_MUL_RULE_MEANING),
    COUNT_ADD_RULE(→COUNT_ADD_RULE_MEANING),
    SLOT_DIAGRAM_BASIC(→SLOT_DIAGRAM),
    PERM_MEANING_SLOT(→PERM_AS_FILLING_SLOTS),
    FACTORIAL_ZERO(→FACTORIAL_ZERO_MEANING),
    COMB_MEANING_SUBSET(→COMB_AS_SUBSET),
    COMB_DERIVE_FROM_PERM_DIVIDE(→COMB_FROM_PERM_DIVIDE),
    SAMPLE_SPACE_DEFINE(→SAMPLE_SPACE_AS_SET),
    EVENT_DEFINE(→EVENT_AS_SUBSET),
    SET_INTERSECTION_UNION(→INTERSECTION_UNION_MEANING),
    INCLUSION_EXCLUSION_2SET_MEANING(→INCL_EXCL_2SET_MEANING)

  [/R1 Coverage Report]

  ###DONE:9372cf2003###


› Request 18f9bff97c: 아래 파일(티켓 지시)을 읽고 결과를 이 터미널에
  Output Format대로 그대로 출력해줘. 가능하면 repo 파일을 생성/수정하지
  말고, 마지막에 마커를 그대로 출력해. -> /mnt/c/Users/irron/Desktop/my/
  web_service_new/calculate_math/.agents/inbox/research_18f9bff97c.md


• Explored
  └ Read research_18f9bff97c.md

─ Worked for 2m 32s ──────────────────────────────────────────────────────

• ###BEGIN:18f9bff97c###

  ## Coverage Gap Report

  ### 1. 누락된 기초 개념 (최소 10개)

  | # | 개념명 | 누락 이유 | 심각도 |
  |---|--------|----------|--------|
  | 1 | COUNT_MUL_RULE_MEANING(곱셈 원리 의미) | 순열/조합/표본공간 카운팅
  의 기반인데 단계-곱 의미가 비면 공식/절차가 암기형으로 굳음 | 높음 |
  | 2 | ORDER_SENSITIVE_CHECK(순서 민감 판단) | 순열/조합 분기 기준이 없으
  면 도구 선택이 흔들려 오답이 고착 | 높음 |
  | 3 | PERM_AS_FILLING_SLOTS(순열 의미: 자리 채우기) | nPr을 “배열/배
  치”로 해석하지 못하면 조건을 공식 항에 매핑하기 어려움 | 높음 |
  | 4 | PERM_PRODUCT_FORM(nPr의 감소곱 형태) | 곱 형태가 없으면 팩토리얼
  표기/검산으로의 표현 전환이 끊김 | 중 |
  | 5 | FACTORIAL_EXPANSION(팩토리얼 전개) | n!=n*(n-1)*… 구조 부재 시 유
  도/검산이 블랙박스가 됨 | 높음 |
  | 6 | FACTORIAL_ZERO_MEANING(0! 의미) | r=0, r=n 같은 경계에서 값/식이
  흔들리면 전체 체계가 붕괴 | 중 |
  | 7 | FACTORIAL_CANCELLATION(팩토리얼 약분) | 조합 계산에서 약분 절차가
  없으면 nCr 계산이 기계적/오류 다발 | 중 |
  | 8 | COMB_AS_SUBSET(조합 의미: 부분집합 선택) | 선택=부분집합 관점이 없
  으면 조합 공식이 맥락 없는 계산으로 남음 | 높음 |
  | 9 | COMB_AS_CHOOSE_R(r개 선택 해석) | “r개 선택”을 입력으로 고정하지
  못하면 조건 누락/중복으로 연결 | 중 |
  |10| COMB_ORDER_IGNORED_REASON(왜 r!로 나누는가) | ‘중복 제거’ 이유가 없
  으면 조합 유도/공식이 암기 점프로 변함 | 높음 |
  |11| COMB_FROM_PERM_DIVIDE(nPr/r! 유도) | 유도 절차 부재 시 조합 공식으
  로의 전이가 과격해짐 | 중 |
  |12| SET_NOTATION_BASICS(집합 기초 기호) | 사건/연산을 집합 언어로 고정
  하는 전제가 없으면 조건을 수식화하기 어려움 | 높음 |
  |13| STEP_SAMPLE_SPACE_BUILD(표본공간 구성 단계) | “전체(분모) 고정” 중
  간 단계가 없으면 고전확률 설정에서 분모 오류 반복 | 높음 |
  |14| CLASSICAL_PROB_EQUIPROBABLE_CHECK(등확률 전제 확인) | 등확률 전제
  없이 A/S를 오적용하는 오개념 차단 장치가 필요 | 높음 |
  |15| EQUIPROBABLE_DECISION(등확률 게이트) | “적용 가능/불가” 분기가 없으
  면 고전확률 적용 범위가 흐려짐 | 중 |
  |16| COUNT_FAVORABLE_TOTAL(유리/전체 분리 카운팅) | 분자/분모를 분리해
  세는 절차가 없으면 설정/계산이 흔들림 | 높음 |
  |17| EVENT_OPERATION_EXPRESSION(문장→집합식) | 문장을 A∪B/A∩B/A^c로 고정
  하지 못하면 포함배제/여사건에서 항 매핑·부호 실수 증가 | 높음 |
  |18| INCL_EXCL_2SET_MEANING(2집합 포함배제 의미) | “왜 교집합을 빼는가
  (중복 보정)” 의미 없이 공식만 주면 오용/암기 위험 | 높음 |
  |19| APPLY_INCL_EXCL_2SET(포함배제 계산 실행) | 의미에서 곧바로 단계 완
  성으로 점프하면 항 매핑→대입→계산 실행이 불안정 | 중 |
  |20| COMPLEMENT_EVENT(여사건/보완 개념) | 1-p 규칙 전에 보완(전체-부분)
  개념이 고정되어야 규칙 남용이 줄어듦 | 중 |

  ### 2. 과잉 난이도/불필요 선행 (최소 5개)

  | # | 개념명 | 과잉 이유 | 조치 제안 |
  |---|--------|----------|----------|
  | 1 | 조건부확률 | 분모 재정의/사건 분할이 필요해 TS_COMB_PROB 기초에서
  인지부하가 큼 | 별도 심화 단원으로 분리 |
  | 2 | 베이즈 정리 | 조건부확률+역확률까지 요구하는 고난도 전이 | 범위외/
  선택 심화 |
  | 3 | 독립 사건/독립의 곱 | 적용 조건이 미세해 “무작위=독립” 오개념 유발
  가능 | 후순위(심화)로 이관 |
  | 4 | 확률변수/기댓값/분산 | 사건 확률에서 분포/통계로 축이 바뀌는 별도
  영역 | 별도 보스/단원 분리 |
  | 5 | 확률분포(이항/정규 등) | 모델링/분포는 기초 조합·확률 커버리지 밖
  | 별도 보스/단원 분리 |
  | 6 | 3집합 이상 포함배제 일반식 | 2집합 의미 정착 전에는 기호/계산 부담
  과도 | 기본은 2집합으로 제한 |
  | 7 | 중복순열/원순열/중복조합 | 추가 동치/중복 처리 규칙이 필요해 기초
  학습에 과잉 | 범위외/선택 심화 |

  ### 3. 학습 순서상 위험한 점프 (최소 5개)

  | # | From → To | 점프 이유 | 브릿지 제안 |
  |---|-----------|----------|------------|
  | 1 | COUNT_MUL_RULE_MEANING → PERM_BASIC | 단계 곱에서 곧바로 순열 단원
  으로 점프하면 의미(자리 채우기)와 표기(감소곱/팩토리얼)가 분리되어 공식
  암기화 | PERM_AS_FILLING_SLOTS + PERM_PRODUCT_FORM + FACTORIAL_EXPANSION
  + STEP_PERM_DERIVE |
  | 2 | PERM_BASIC → COMB_BASIC | 순열에서 조합으로 넘어갈 때 “순서 무시/
  중복 제거”가 비면 nPr/nCr 혼동이 고착 | COMB_ORDER_IGNORED_REASON +
  COMB_FROM_PERM_DIVIDE + STEP_COMB_DERIVE |
  | 3 | ORDER_SENSITIVE_CHECK → COMB_BASIC | 순서 게이트만 있고 “선택=부분
  집합/ r개 선택 입력”이 비면 조합 해석이 불안정 | COMB_AS_SUBSET +
  COMB_AS_CHOOSE_R |
  | 4 | SYSTEMATIC_LISTING_BASIC → STEP_PROB_SETUP | 나열에서 바로 확률 설
  정으로 가면 “전체(분모) 고정”이 약해 분모 오류 반복 |
  STEP_SAMPLE_SPACE_BUILD |
  | 5 | SAMPLE_SPACE_AS_SET → STEP_PROB_SETUP | 표본공간을 알아도 등확률
  전제/유리-전체 카운팅 절차가 비면 A/S 오적용 |
  CLASSICAL_PROB_EQUIPROBABLE_CHECK + EQUIPROBABLE_DECISION +
  COUNT_FAVORABLE_TOTAL + PROB_AS_RATIO |
  | 6 | SET_NOTATION_BASICS → STEP_INCL_EXCL_2SET | 집합 기호를 알아도 문
  장→집합식→겹침 판정이 없으면 포함배제가 공식 점프로 됨 |
  EVENT_OPERATION_EXPRESSION + DISJOINT_OR_OVERLAP_DECISION +
  STEP_EVENT_OPS_INCL_EXCL |
  | 7 | INCL_EXCL_2SET_MEANING → STEP_INCL_EXCL_2SET | 의미에서 단계 완성
  으로 바로 가면 항 매핑/대입/계산 실행이 비어 실수 증가 |
  APPLY_INCL_EXCL_2SET |
  | 8 | COMPLEMENT_EVENT → PROB_BASIC | 개념에서 곧바로 1-p로 점프하면 규
  칙 남용(문맥 없는 뒤집기) 위험 | COMPLEMENT_RULE (필요 시
  TOTAL_MINUS_STRATEGY 권장) |

  ## Graph Patch JSON

  {
    "researcher": "R1",
    "scope": "TS_COMB_PROB",
    "add_nodes": [
      { "id": "COUNT_MUL_RULE_MEANING", "type": "micro", "name_ko": "곱셈
  원리 의미(단계 곱)", "domain": "DA", "rep": "C", "confidence": 0.83 },
      { "id": "COUNT_ADD_RULE_MEANING", "type": "micro", "name_ko": "덧셈
  원리 의미(서로소 합)", "domain": "DA", "rep": "C", "confidence": 0.8 },
      { "id": "ORDER_SENSITIVE_CHECK", "type": "micro", "name_ko": "순서
  민감 판단(순열/조합 분기)", "domain": "DA", "rep": "C", "confidence":
  0.76 },
      { "id": "PERM_AS_FILLING_SLOTS", "type": "micro", "name_ko": "순열
  의미(자리 채우기)", "domain": "DA", "rep": "C", "confidence": 0.78 },
      { "id": "PERM_PRODUCT_FORM", "type": "micro", "name_ko": "nPr을 감소
  곱(곱 형태)로 표현", "domain": "DA", "rep": "P", "confidence": 0.74 },
      { "id": "FACTORIAL_EXPANSION", "type": "micro", "name_ko": "팩토리얼
  전개 n!=n*(n-1)*...", "domain": "DA", "rep": "P", "confidence": 0.82 },
      { "id": "FACTORIAL_ZERO_MEANING", "type": "micro", "name_ko": "0! 의
  미 해석(경계 사례)", "domain": "DA", "rep": "A", "confidence": 0.74 },
      { "id": "FACTORIAL_CANCELLATION", "type": "micro", "name_ko": "팩토
  리얼 약분", "domain": "DA", "rep": "P", "confidence": 0.78 },
      { "id": "STEP_PERM_DERIVE", "type": "step", "name_ko": "순열 공식 유
  도 단계", "domain": "DA", "rep": "C", "confidence": 0.74 },

      { "id": "COMB_AS_SUBSET", "type": "micro", "name_ko": "조합 의미(부
  분집합 선택)", "domain": "DA", "rep": "C", "confidence": 0.8 },
      { "id": "COMB_AS_CHOOSE_R", "type": "micro", "name_ko": "r개 선택 상
  황 해석", "domain": "DA", "rep": "C", "confidence": 0.75 },
      { "id": "COMB_ORDER_IGNORED_REASON", "type": "micro", "name_ko": "조
  합에서 순서 중복을 r!로 나누는 이유", "domain": "DA", "rep": "C",
  "confidence": 0.8 },
      { "id": "COMB_FROM_PERM_DIVIDE", "type": "micro", "name_ko": "nPr/r!
  로 nCr을 유도", "domain": "DA", "rep": "P", "confidence": 0.74 },
      { "id": "CHOOSE_THEN_ARRANGE", "type": "micro", "name_ko": "선택 후
  배열( nPr = nCr·r! ) 구조", "domain": "DA", "rep": "C", "confidence":
  0.72 },
      { "id": "STEP_COMB_DERIVE", "type": "step", "name_ko": "조합 공식 유
  도 단계", "domain": "DA", "rep": "C", "confidence": 0.74 },

      { "id": "SYSTEMATIC_LISTING_BASIC", "type": "micro", "name_ko": "체
  계적 나열 기초", "domain": "DA", "rep": "P", "confidence": 0.78 },
      { "id": "TREE_DIAGRAM_BASIC", "type": "micro", "name_ko": "트리 다이
  어그램으로 경우를 표현", "domain": "DA", "rep": "P", "confidence":
  0.7 },
      { "id": "STEP_SAMPLE_SPACE_BUILD", "type": "step", "name_ko": "표본
  공간 구성 단계(빠짐/중복 점검)", "domain": "DA", "rep": "C",
  "confidence": 0.75 },

      { "id": "SET_NOTATION_BASICS", "type": "micro", "name_ko": "집합 기
  초(원소/부분집합/기호)", "domain": "DA", "rep": "C", "confidence":
  0.78 },
      { "id": "SAMPLE_SPACE_AS_SET", "type": "micro", "name_ko": "표본공간
  =집합", "domain": "DA", "rep": "C", "confidence": 0.8 },
      { "id": "EVENT_AS_SUBSET", "type": "micro", "name_ko": "사건=부분집
  합", "domain": "DA", "rep": "C", "confidence": 0.8 },
      { "id": "PROB_AS_RATIO", "type": "micro", "name_ko": "확률=비율(A/
  S)", "domain": "DA", "rep": "A", "confidence": 0.76 },
      { "id": "CLASSICAL_PROB_EQUIPROBABLE_CHECK", "type": "micro",
  "name_ko": "고전확률 등확률 전제 확인", "domain": "DA", "rep": "C",
  "confidence": 0.77 },
      { "id": "EQUIPROBABLE_DECISION", "type": "micro", "name_ko": "등확률
  여부 게이트(Yes/No 분기)", "domain": "DA", "rep": "C", "confidence":
  0.74 },
      { "id": "COUNT_FAVORABLE_TOTAL", "type": "micro", "name_ko": "유리/
  전체 경우의 수 분리 카운팅(A/S)", "domain": "DA", "rep": "P",
  "confidence": 0.77 },
      { "id": "STEP_PROB_SETUP", "type": "step", "name_ko": "고전확률 설정
  단계(전체→사건→전제→A/S)", "domain": "DA", "rep": "C", "confidence":
  0.76 },

      { "id": "EVENT_OPERATION_EXPRESSION", "type": "micro", "name_ko":
  "사건 연산을 집합식으로 표현(문장→A∪B/A∩B/A^c)", "domain": "DA", "rep":
  "P", "confidence": 0.76 },
      { "id": "INTERSECTION_UNION_MEANING", "type": "micro", "name_ko":
  "교집합/합집합 의미(∩/∪)", "domain": "DA", "rep": "C", "confidence":
  0.76 },
      { "id": "CHECK_DOUBLE_COUNTING", "type": "micro", "name_ko": "중복계
  수(겹침) 점검", "domain": "DA", "rep": "C", "confidence": 0.74 },
      { "id": "DISJOINT_EVENTS", "type": "micro", "name_ko": "서로소 사건
  (겹치지 않음) 판별", "domain": "DA", "rep": "C", "confidence": 0.74 },
      { "id": "VENN_DIAGRAM_2SET", "type": "micro", "name_ko": "벤 다이어
  그램(2집합)으로 사건 연산 시각화", "domain": "DA", "rep": "P",
  "confidence": 0.74 },
      { "id": "DISJOINT_OR_OVERLAP_DECISION", "type": "micro", "name_ko":
  "서로소/겹침 판정 게이트", "domain": "DA", "rep": "C", "confidence":
  0.74 },
      { "id": "STEP_EVENT_OPS_INCL_EXCL", "type": "step", "name_ko": "문장
  →집합식→겹침 판정→중복 보정 단계", "domain": "DA", "rep": "C",
  "confidence": 0.74 },
      { "id": "INCL_EXCL_2SET_MEANING", "type": "micro", "name_ko": "2집합
  포함배제 의미(중복 보정)", "domain": "DA", "rep": "C", "confidence":
  0.78 },
      { "id": "APPLY_INCL_EXCL_2SET", "type": "micro", "name_ko": "2집합
  포함배제 식 적용 실행(항 매핑→대입→계산)", "domain": "DA", "rep": "P",
  "confidence": 0.75 },
      { "id": "STEP_INCL_EXCL_2SET", "type": "step", "name_ko": "2집합 포
  함배제 단계", "domain": "DA", "rep": "C", "confidence": 0.73 },

      { "id": "COMPLEMENT_EVENT", "type": "micro", "name_ko": "여사건(보
  완) 개념", "domain": "DA", "rep": "C", "confidence": 0.74 },
      { "id": "COMPLEMENT_RULE", "type": "micro", "name_ko": "여사건 규칙
  (1-p)", "domain": "DA", "rep": "A", "confidence": 0.74 },
      { "id": "TOTAL_MINUS_STRATEGY", "type": "micro", "name_ko": "전체-부
  분(보완) 전략(전체에서 빼기)", "domain": "DA", "rep": "C", "confidence":
  0.68 }
    ],
    "merge_aliases": [
      { "alias": "COUNT_MUL_RULE", "keep": "COUNT_MUL_RULE_MEANING" },
      { "alias": "COUNT_ADD_RULE", "keep": "COUNT_ADD_RULE_MEANING" },
      { "alias": "PERM_MEANING_SLOT", "keep": "PERM_AS_FILLING_SLOTS" },
      { "alias": "FACTORIAL_CONCEPT", "keep": "FACTORIAL_EXPANSION" },
      { "alias": "FACTORIAL_ZERO", "keep": "FACTORIAL_ZERO_MEANING" },
      { "alias": "COMB_MEANING_SUBSET", "keep": "COMB_AS_SUBSET" },
      { "alias": "COMB_DERIVE_FROM_PERM_DIVIDE", "keep":
  "COMB_FROM_PERM_DIVIDE" },
      { "alias": "SAMPLE_SPACE_DEFINE", "keep": "SAMPLE_SPACE_AS_SET" },
      { "alias": "EVENT_DEFINE", "keep": "EVENT_AS_SUBSET" },
      { "alias": "SET_INTERSECTION_UNION", "keep":
  "INTERSECTION_UNION_MEANING" },
      { "alias": "INCLUSION_EXCLUSION_2SET_MEANING", "keep":
  "INCL_EXCL_2SET_MEANING" }
    ],
    "add_edges": [
      { "from": "COUNT_MUL_RULE_MEANING", "to": "PERM_AS_FILLING_SLOTS",
  "type": "requires", "confidence": 0.83 },
      { "from": "PERM_AS_FILLING_SLOTS", "to": "PERM_PRODUCT_FORM",
  "type": "requires", "confidence": 0.74 },
      { "from": "PERM_PRODUCT_FORM", "to": "FACTORIAL_EXPANSION", "type":
  "requires", "confidence": 0.72 },
      { "from": "FACTORIAL_EXPANSION", "to": "STEP_PERM_DERIVE", "type":
  "requires", "confidence": 0.74 },
      { "from": "FACTORIAL_ZERO_MEANING", "to": "STEP_PERM_DERIVE",
  "type": "requires", "confidence": 0.66 },
      { "from": "STEP_PERM_DERIVE", "to": "PERM_BASIC", "type":
  "requires", "confidence": 0.74 },

      { "from": "ORDER_SENSITIVE_CHECK", "to": "STEP_COMB_DERIVE", "type":
  "requires", "confidence": 0.73 },
      { "from": "COMB_AS_SUBSET", "to": "COMB_AS_CHOOSE_R", "type":
  "requires", "confidence": 0.75 },
      { "from": "COMB_AS_CHOOSE_R", "to": "STEP_COMB_DERIVE", "type":
  "requires", "confidence": 0.74 },
      { "from": "COMB_AS_SUBSET", "to": "COMB_ORDER_IGNORED_REASON",
  "type": "requires", "confidence": 0.74 },
      { "from": "COMB_ORDER_IGNORED_REASON", "to":
  "COMB_FROM_PERM_DIVIDE", "type": "requires", "confidence": 0.82 },
      { "from": "PERM_PRODUCT_FORM", "to": "COMB_FROM_PERM_DIVIDE",
  "type": "requires", "confidence": 0.8 },
      { "from": "FACTORIAL_CANCELLATION", "to": "STEP_COMB_DERIVE",
  "type": "requires", "confidence": 0.74 },
      { "from": "COMB_FROM_PERM_DIVIDE", "to": "STEP_COMB_DERIVE", "type":
  "requires", "confidence": 0.74 },
      { "from": "STEP_COMB_DERIVE", "to": "COMB_BASIC", "type":
  "requires", "confidence": 0.74 },

      { "from": "SET_NOTATION_BASICS", "to": "SAMPLE_SPACE_AS_SET",
  "type": "requires", "confidence": 0.74 },
      { "from": "SET_NOTATION_BASICS", "to": "EVENT_AS_SUBSET", "type":
  "requires", "confidence": 0.74 },
      { "from": "SYSTEMATIC_LISTING_BASIC", "to":
  "STEP_SAMPLE_SPACE_BUILD", "type": "requires", "confidence": 0.76 },
      { "from": "SAMPLE_SPACE_AS_SET", "to": "STEP_SAMPLE_SPACE_BUILD",
  "type": "requires", "confidence": 0.75 },
      { "from": "STEP_SAMPLE_SPACE_BUILD", "to": "STEP_PROB_SETUP",
  "type": "requires", "confidence": 0.76 },
      { "from": "EVENT_AS_SUBSET", "to": "STEP_PROB_SETUP", "type":
  "requires", "confidence": 0.78 },
      { "from": "PROB_AS_RATIO", "to": "STEP_PROB_SETUP", "type":
  "requires", "confidence": 0.76 },
      { "from": "CLASSICAL_PROB_EQUIPROBABLE_CHECK", "to":
  "EQUIPROBABLE_DECISION", "type": "requires", "confidence": 0.77 },
      { "from": "EQUIPROBABLE_DECISION", "to": "STEP_PROB_SETUP", "type":
  "requires", "confidence": 0.74 },
      { "from": "COUNT_FAVORABLE_TOTAL", "to": "STEP_PROB_SETUP", "type":
  "requires", "confidence": 0.77 },
      { "from": "STEP_PROB_SETUP", "to": "PROB_BASIC", "type": "requires",
  "confidence": 0.72 },

      { "from": "INTERSECTION_UNION_MEANING", "to":
  "INCL_EXCL_2SET_MEANING", "type": "requires", "confidence": 0.76 },
      { "from": "CHECK_DOUBLE_COUNTING", "to": "INCL_EXCL_2SET_MEANING",
  "type": "requires", "confidence": 0.75 },
      { "from": "DISJOINT_EVENTS", "to": "DISJOINT_OR_OVERLAP_DECISION",
  "type": "requires", "confidence": 0.74 },
      { "from": "DISJOINT_OR_OVERLAP_DECISION", "to":
  "STEP_EVENT_OPS_INCL_EXCL", "type": "requires", "confidence": 0.72 },
      { "from": "EVENT_OPERATION_EXPRESSION", "to":
  "STEP_EVENT_OPS_INCL_EXCL", "type": "requires", "confidence": 0.7 },
      { "from": "STEP_EVENT_OPS_INCL_EXCL", "to": "STEP_INCL_EXCL_2SET",
  "type": "requires", "confidence": 0.73 },
      { "from": "INCL_EXCL_2SET_MEANING", "to": "APPLY_INCL_EXCL_2SET",
  "type": "requires", "confidence": 0.78 },
      { "from": "APPLY_INCL_EXCL_2SET", "to": "STEP_INCL_EXCL_2SET",
  "type": "requires", "confidence": 0.75 },
      { "from": "STEP_INCL_EXCL_2SET", "to": "PROB_BASIC", "type":
  "requires", "confidence": 0.69 },

      { "from": "COMPLEMENT_EVENT", "to": "COMPLEMENT_RULE", "type":
  "requires", "confidence": 0.72 },
      { "from": "COMPLEMENT_RULE", "to": "PROB_BASIC", "type": "requires",
  "confidence": 0.74 }
    ],
    "remove_edges": [],
    "notes": [
      { "claim": "R3 전이 산출물에서 참조되는 핵심 ID(예:
  COMB_AS_CHOOSE_R, FACTORIAL_ZERO_MEANING, STEP_* 등)는 본 파일의
  add_nodes/merge_aliases로 존재/정의가 확인되어야 한다.", "reason":
  "dev_handoff 단일 파일만으로도 병합·DAG 검증·충돌 해결을 진행할 수 있어
  야 한다.", "confidence": 0.74 },
      { "claim": "COMPLEMENT_EVENT(개념)과 COMPLEMENT_RULE(1-p 규칙)은
  alias 병합 없이 단계적으로 연결하는 편이 안전하다.", "reason": "개념과
  계산 규칙은 추상 수준/사용처가 달라 동일시하면 규칙 남용이 생길 수 있
  다.", "confidence": 0.78 },
      { "claim": "메타 수준 동형(예: 경계 케이스 패턴, 표현 전환 패턴)은
  requires(잠금)로 강제하지 않는 편이 안전하다.", "reason": "대체 경로가
  많아 잠금으로 강제하면 과잉 선행/혼동을 만들 수 있다.", "confidence":
  0.7 },
      { "claim": "STEP_SAMPLE_SPACE_BUILD→STEP_PROB_SETUP 경로를 두면 확률
  의 분모/분자 설정 오류가 감소한다.", "reason": "전체(표본공간) 고정→사건
  정의→전제(등확률) 확인→A/S 카운팅 순서가 흔들릴 때 분모가 바뀌거나 사건
  을 전체로 착각한다.", "confidence": 0.76 },
      { "claim": "EVENT_OPERATION_EXPRESSION과
  DISJOINT_OR_OVERLAP_DECISION을 포함배제 앞에 두면 부호·항 누락이 줄어든
  다.", "reason": "문장 조건을 집합식으로 고정하고 겹침 여부를 먼저 분기하
  면 -교집합이 공식 암기가 아니라 중복 보정으로 연결된다.", "confidence":
  0.75 }
    ]
  }

  ## Standards Tags (내부 태그)

  - 추가된 태그: COUNT_MUL_RULE_MEANING, COUNT_ADD_RULE_MEANING,
    ORDER_SENSITIVE_CHECK, PERM_AS_FILLING_SLOTS, PERM_PRODUCT_FORM,
    FACTORIAL_EXPANSION, FACTORIAL_ZERO_MEANING, FACTORIAL_CANCELLATION,
    STEP_PERM_DERIVE, COMB_AS_SUBSET, COMB_AS_CHOOSE_R,
    COMB_ORDER_IGNORED_REASON, COMB_FROM_PERM_DIVIDE, CHOOSE_THEN_ARRANGE,
    STEP_COMB_DERIVE, SYSTEMATIC_LISTING_BASIC, TREE_DIAGRAM_BASIC,
    STEP_SAMPLE_SPACE_BUILD, SET_NOTATION_BASICS, SAMPLE_SPACE_AS_SET,
    EVENT_AS_SUBSET, PROB_AS_RATIO, CLASSICAL_PROB_EQUIPROBABLE_CHECK,
    EQUIPROBABLE_DECISION, COUNT_FAVORABLE_TOTAL, STEP_PROB_SETUP,
    EVENT_OPERATION_EXPRESSION, INTERSECTION_UNION_MEANING,
    CHECK_DOUBLE_COUNTING, DISJOINT_EVENTS, VENN_DIAGRAM_2SET,
    DISJOINT_OR_OVERLAP_DECISION, STEP_EVENT_OPS_INCL_EXCL,
    INCL_EXCL_2SET_MEANING, APPLY_INCL_EXCL_2SET, STEP_INCL_EXCL_2SET,
    COMPLEMENT_EVENT, COMPLEMENT_RULE, TOTAL_MINUS_STRATEGY
  - 수정된 태그: COUNT_MUL_RULE(→COUNT_MUL_RULE_MEANING),
    COUNT_ADD_RULE(→COUNT_ADD_RULE_MEANING),
    PERM_MEANING_SLOT(→PERM_AS_FILLING_SLOTS),
    FACTORIAL_CONCEPT(→FACTORIAL_EXPANSION),
    FACTORIAL_ZERO(→FACTORIAL_ZERO_MEANING),
    COMB_MEANING_SUBSET(→COMB_AS_SUBSET),
    COMB_DERIVE_FROM_PERM_DIVIDE(→COMB_FROM_PERM_DIVIDE),
    SAMPLE_SPACE_DEFINE(→SAMPLE_SPACE_AS_SET),
    EVENT_DEFINE(→EVENT_AS_SUBSET),
    SET_INTERSECTION_UNION(→INTERSECTION_UNION_MEANING),
    INCLUSION_EXCLUSION_2SET_MEANING(→INCL_EXCL_2SET_MEANING)

  [/R1 Coverage Report]

  ###DONE:18f9bff97c###


› -> /mnt/c/Users/irron/Desktop/my/web_service_new/
  calculate_math/.agents/inbox/research_216a78baad.md


  49% context left



› Request 216a78baad: 아래 파일(티켓 지시)을 읽고 결과를 이
  터미널에 Output Format대로 그대로 출력해줘. 가능하면 repo
  파일을 생성/수정하지 말고, 마지막에 마커를 그대로 출력해.
  -> /mnt/c/Users/irron/Desktop/my/web_service_new/
  calculate_math/.agents/inbox/research_216a78baad.md



• Explored
  └ Read research_216a78baad.md, T1.md
                                                  

• Ran jq
  │ '.task_id, .plan.target_scope? // .plan.scope? // .pla
                            

─                                                           
                
    … +144 lines
                        
      "max_attempts_before_pm_patch"    


• ###BEGIN:216a78baad###

  ## Coverage Gap Report

  ### 1. 누락된 기초 개념 (최소 10개)

  | # | 개념명 | 누락 이유 | 심각도 |
  |---|--------|----------|--------|
  | 1 | 단일 버튼 UX(페이지 하단 채점하기/전체 제출) | 현재
  는 문제 카드별 제출만 존재해 “모든 문제 후 일괄 채점” 요구
  를 충족하지 못함 | 높음 |
  | 2 | 문제 카드별 제출 버튼 제거 | 요구사항 1)에서 제거가
  핵심인데 현재 UI는 per-problem 제출 흐름에 고정되어 있음 |
  높음 |
  | 3 | 채점하기 disabled 조건 정의(정규화 일관성) | 버튼
  disabled 기준이 normalizeNumericInput()과 일관되게 정의되
  어야 하나 현재는 해당 UX 자체가 없음 | 높음 |
  | 4 | “모든 문제 미입력” 판정 로직(allAnswered) |
  problems[] 전체를 기준으로 answerByProblemId가 모두 채워졌
  는지 판단하는 상태/계산이 필요(문제 수 변화/로딩 타이밍 포
  함) | 높음 |
  | 5 | 입력 엣지케이스(10개+) 목록/정의 | AC 요구(10개+)가
  문서/설계로 존재해야 하는데 현재 정의가 없음(예: "", "
  ", \"\\t\\n\", \",\", " , , ", "1,234", " 1 234 ", "0",
  "-0", "+", ".", "Infinity" 등) | 중 |
  | 6 | 일괄 채점 동작(전체 순회→채점→결과 맵 생성) | 현재는
  submitProblem(problem)로 단건 채점만 가능하며, 전체 문제를
  한 번에 채점해 결과를 고정하는 액션이 없음 | 높음 |
  | 7 | 채점 이후 UI 상태 정의(채점 전/후) | 현재는 결과가
  하나라도 있으면 점수 0/N이 항상 표시될 수 있고, “채점 전/
  후” 상태(예: hasGraded/isSubmitted) 기준이 없음 | 중 |
  | 8 | “채점 후 재입력” UX 정책 | bulk 채점 후 입력을 수정
  할 때 결과/점수의 일관성(자동 결과 초기화 vs “다시 채점”
  버튼) 정책이 필요하나 정의 없음 | 중 |
  | 9 | localStorage 저장 시점 변경(개별→일괄) | 현재는 개별
  제출 시 submissions를 merge 저장; 요구는 일괄 채점 후 답안
  +결과를 한 번에 저장 | 높음 |
  |10| 저장/복원 스키마 호환/마이그레이션 | 기존 키
  (curriculum-viewer:learn:lastResult:${nodeId})에 부분 제출
  데이터가 남아있을 수 있어 bulk 전환 시 호환 규칙이 필요 |
  높음 |
  |11| 초기화/다시 풀기(키 삭제 + 상태 리셋) | 요구사항 4)
  다시 풀기 버튼 및 저장된 결과/답안 삭제가 필요하나 현재 없
  음 | 높음 |
  |12| Out of Scope 가드레일 명시(무엇을 안 바꿀지) | 구현
  중 문제 타입 확장/서버 연동/커리큘럼 구조 변경으로 범위가
  새는 것을 막는 체크리스트가 필요 | 중 |

  ### 2. 과잉 난이도/불필요 선행 (최소 5개)

  | # | 개념명 | 과잉 이유 | 조치 제안 |
  |---|--------|----------|----------|
  | 1 | 서버 연동/DB 저장 | Out of Scope 위반이며
  localStorage 기반 요구를 흐림 | 금지(요구 범위 밖) |
  | 2 | 문제 타입 확장(서술형/객관식 등) | 이번 변경의 핵심
  은 “제출 UX/저장/복원”이며 타입 확장은 범위 밖 | 금지(향후
  별도 티켓) |
  | 3 | 문제은행 JSON 스키마 변경 | 현재는 problems_v1.json
  로딩으로 충분하며 스키마 변경은 회귀 위험만 큼 | 기존 스키
  마 유지 |
  | 4 | grading 로직 대개편(분수/근삿값/허용오차 등) | 요구
  는 제출 UX이며 채점 확장은 별도 사양 필요 |
  gradeNumericAnswer() 유지, 필요 시 후속 티켓 |
  | 5 | 대형 상태관리 도입(Redux/Zustand 등) | LearnPage 단
  일 화면 상태로 해결 가능, 도입은 과잉 | React state/
  useMemo로 해결 |
  | 6 | “입력 중 실시간 저장(autosave)” | 요구는 “채점 후 한
  번에 저장”이며 autosave는 UX/스키마를 복잡하게 함 | 이번
  범위에서 제외(필요 시 옵션) |

  ### 3. 학습 순서상 위험한 점프 (최소 5개)

  | # | From → To | 점프 이유 | 브릿지 제안 |
  |---|-----------|----------|------------|
  | 1 | 문제별 제출 제거 → bulk UX 미구현 | 제거만 하면 채점
  경로가 사라져 기능 공백 발생 | 단일 채점하기 버튼 +
  gradeAll 액션 먼저 추가 후 제거 |
  | 2 | disabled 판정(원문 입력 기준) → 실제 채점(정규화 기
  준) | " , " 같은 입력이 disabled 해제되거나 반대로 0이 미
  입력 처리되는 불일치 위험 | disabled는
  normalizeNumericInput(answer).length>0로 고정 |
  | 3 | 저장 시점 변경(개별→일괄) → 기존 localStorage 데이터
  무시 | 기존 submissions가 부분만 존재할 수 있어 복원/버튼
  상태가 꼬일 수 있음 | “legacy partial” 감지(개수/키) 후 초
  기화 또는 안내/정책 적용 |
  | 4 | 점수 표시(항상 0/N) → 채점 UX | 채점 전부터 점수가
  보이면 사용자가 이미 채점된 것으로 오해 | hasGraded 도입
  후 채점 후에만 점수/정답 표시 |
  | 5 | 채점 후 입력 수정 → 결과/점수 유지 | 입력과 결과가
  불일치(스테일) 상태가 생김 | 입력 변경 시 결과 초기화 또는
  버튼을 다시 채점으로 전환 |
  | 6 | 초기화(다시 풀기) 없음 → 상태 복원 유지 | 사용자가
  저장된 결과를 지울 방법이 없어 UX 막힘 | 다시 풀기(키 삭제
  +상태 리셋) 추가 |

  ## Graph Patch JSON

  {
    "researcher": "R1",
    "scope": "curriculum_viewer_learning_bulk_submit_v1",
    "add_nodes": [
      { "id": "LEARN_REMOVE_PER_PROBLEM_SUBMIT", "type":
  "micro", "name_ko": "문제 카드별 제출 버튼 제거",
  "domain": "FE", "rep": "P", "confidence": 0.85 },
      { "id": "LEARN_ADD_BULK_GRADE_BUTTON", "type":
  "micro", "name_ko": "페이지 하단 단일 버튼(채점하기/전체
  제출) 추가", "domain": "FE", "rep": "P", "confidence":
  0.85 },
      { "id": "LEARN_DISABLED_USES_NORMALIZE_NUMERIC_INPUT",
  "type": "micro", "name_ko": "disabled 판정 기준을
  normalizeNumericInput과 일치", "domain": "FE", "rep": "C",
  "confidence": 0.82 },
      { "id": "LEARN_ALL_ANSWERED_NORMALIZED", "type":
  "micro", "name_ko": "모든 문제 미입력 판정(allAnswered, 정
  규화 기반)", "domain": "FE", "rep": "P", "confidence":
  0.82 },
      { "id": "LEARN_BULK_GRADE_ALL_ACTION", "type":
  "micro", "name_ko": "일괄 채점 액션(전체 순회
  →gradeNumericAnswer)", "domain": "FE", "rep": "P",
  "confidence": 0.84 },
      { "id": "LEARN_GRADED_STATE_FLAG", "type": "micro",
  "name_ko": "채점 전/후 상태 플래그(hasGraded/isSubmitted)
  정의", "domain": "FE", "rep": "C", "confidence": 0.78 },
      { "id": "LEARN_SCORE_AND_RESULT_GATING", "type":
  "micro", "name_ko": "채점 후에만 점수/정오/정답 표시(게이
  팅)", "domain": "FE", "rep": "P", "confidence": 0.76 },
      { "id": "LEARN_LOCALSTORAGE_SAVE_BULK", "type":
  "micro", "name_ko": "일괄 채점 후 답안+결과를 한 번에 저
  장", "domain": "FE", "rep": "P", "confidence": 0.8 },
      { "id": "LEARN_LOCALSTORAGE_MIGRATION_LEGACY_PARTIAL",
  "type": "micro", "name_ko": "기존 부분 제출(submissions 일
  부) 데이터 호환/마이그레이션 규칙", "domain": "FE", "rep":
  "C", "confidence": 0.74 },
      { "id": "LEARN_RESET_CLEAR_STORAGE", "type": "micro",
  "name_ko": "다시 풀기(초기화): 저장 키 삭제 + 상태 리셋",
  "domain": "FE", "rep": "P", "confidence": 0.82 },
      { "id": "LEARN_AFTER_GRADE_EDIT_POLICY", "type":
  "micro", "name_ko": "채점 후 재입력 정책(결과 초기화 또는
  다시 채점)", "domain": "UX", "rep": "C", "confidence":
  0.7 },
      { "id": "LEARN_DISABLED_EDGECASES_12", "type":
  "micro", "name_ko": "disabled 판정 입력 엣지케이스 12종(빈
  값/공백/콤마/0/부호/소수점 등)", "domain": "QA", "rep":
  "C", "confidence": 0.76 }
    ],
    "merge_aliases": [],
    "add_edges": [
      { "from":
  "LEARN_DISABLED_USES_NORMALIZE_NUMERIC_INPUT", "to":
  "LEARN_ALL_ANSWERED_NORMALIZED", "type": "requires",
  "confidence": 0.82 },
      { "from": "LEARN_ALL_ANSWERED_NORMALIZED", "to":
  "LEARN_ADD_BULK_GRADE_BUTTON", "type": "requires",
  "confidence": 0.78 },
      { "from": "LEARN_ADD_BULK_GRADE_BUTTON", "to":
  "LEARN_BULK_GRADE_ALL_ACTION", "type": "requires",
  "confidence": 0.8 },
      { "from": "LEARN_BULK_GRADE_ALL_ACTION", "to":
  "LEARN_LOCALSTORAGE_SAVE_BULK", "type": "requires",
  "confidence": 0.8 },
      { "from": "LEARN_GRADED_STATE_FLAG", "to":
  "LEARN_SCORE_AND_RESULT_GATING", "type": "requires",
  "confidence": 0.76 },
      { "from": "LEARN_BULK_GRADE_ALL_ACTION", "to":
  "LEARN_GRADED_STATE_FLAG", "type": "requires",
  "confidence": 0.74 },
      { "from":
  "LEARN_LOCALSTORAGE_MIGRATION_LEGACY_PARTIAL", "to":
  "LEARN_LOCALSTORAGE_SAVE_BULK", "type": "requires",
  "confidence": 0.74 },
      { "from": "LEARN_RESET_CLEAR_STORAGE", "to":
  "LEARN_LOCALSTORAGE_SAVE_BULK", "type": "requires",
  "confidence": 0.78 },
      { "from": "LEARN_AFTER_GRADE_EDIT_POLICY", "to":
  "LEARN_SCORE_AND_RESULT_GATING", "type": "requires",
  "confidence": 0.7 },
      { "from": "LEARN_DISABLED_EDGECASES_12", "to":
  "LEARN_ALL_ANSWERED_NORMALIZED", "type": "requires",
  "confidence": 0.76 },
      { "from": "LEARN_ADD_BULK_GRADE_BUTTON", "to":
  "LEARN_REMOVE_PER_PROBLEM_SUBMIT", "type": "requires",
  "confidence": 0.72 }
    ],
    "remove_edges": [],
    "notes": [
      { "claim": "현재 LearnPage는 문제 카드별 제출
  (submitProblem)로 단건 채점/단건 저장을 수행하며,
  StoredResult는 { nodeId, updatedAt, submissions:
  { [problemId]: { submitted, isCorrect } } } 형태이다.",
  "reason": "LearnPage.tsx에서 gradeNumericAnswer 호출 및
  localStorage merge 저장 로직과 StoredResult 타입 정의가 확
  인된다.", "confidence": 0.86 },
      { "claim": "bulk UX의 disabled 판정은
  normalizeNumericInput(answer).length>0 기준으로 모든
  problems가 채워졌는지 검사해야 grading과 일관된다.",
  "reason": "grading.ts의 normalizeNumericInput은 공백/콤마
  제거를 수행하므로, 동일 기준을 쓰지 않으면 '미입력/입력됨'
  판단이 채점 결과와 어긋난다.", "confidence": 0.82 },
      { "claim": "점수/정오/정답 표시는 채점 전/후 상태
  (hasGraded 등)로 게이팅하지 않으면 채점 전에도 0/N이 노출
  되는 혼란이 발생할 수 있다.", "reason": "현재 score 계산은
  problems.length만으로 0/N을 만들 수 있어 bulk 전환 시 '채
  점 전' 상태를 별도로 분리하는 것이 안전하다.",
  "confidence": 0.74 },
      { "claim": "기존 localStorage에 부분 제출(submissions
  일부) 데이터가 남아 있을 수 있으므로 bulk 전환 시 호환 규
  칙(초기화/마이그레이션/안내)이 필요하다.", "reason": "기존
  구현은 문제별 제출 시마다 submissions를 merge 저장하므로,
  저장된 문제 수가 전체 problems 수보다 적은 legacy 데이터가
  자연스럽게 생성된다.", "confidence": 0.78 },
      { "claim": "Out of Scope(문제 타입 확장/서버 연동/커리
  큘럼 구조 변경)를 피하고 LearnPage.tsx 중심으로 제출 UX/저
  장 시점만 바꾸는 것이 회귀 위험이 낮다.", "reason":
  "task.md가 수정 중심 파일과 비범위를 명시하며, 현재 문제
  로딩/채점 로직은 요구 충족에 충분한 기반을 제공한다.",
  "confidence": 0.76 }
    ]
  }

  ## Standards Tags (내부 태그)

  - 추가된 태그: LEARN_ADD_BULK_GRADE_BUTTON,
    LEARN_REMOVE_PER_PROBLEM_SUBMIT,
    LEARN_ALL_ANSWERED_NORMALIZED,
    LEARN_DISABLED_USES_NORMALIZE_NUMERIC_INPUT,
    LEARN_DISABLED_EDGECASES_12,
    LEARN_BULK_GRADE_ALL_ACTION, LEARN_GRADED_STATE_FLAG,
    LEARN_SCORE_AND_RESULT_GATING,
    LEARN_LOCALSTORAGE_SAVE_BULK,
    LEARN_LOCALSTORAGE_MIGRATION_LEGACY_PARTIAL,
    LEARN_RESET_CLEAR_STORAGE, LEARN_AFTER_GRADE_EDIT_POLICY
  - 수정된 태그:
    LEARN_SINGLE_SUBMIT_FLOW(→LEARN_BULK_SUBMIT_FLOW),
    LEARN_STORAGE_UPDATE_PER_PROBLEM(→LEARN_STORAGE_SAVE_AFT
    ER_BULK_GRADE)

  [/R1 Coverage Report]

  ###DONE:216a78baad###


› -> /mnt/c/Users/irron/Desktop/my/web_service_new/
  calculate_math/.agents/inbox/research_c49dfc24b0.md


  44% context left



› Request c49dfc24b0: 아래 파일(티켓 지시)을 읽고 결과를 이
  터미널에 Output Format대로 그대로 출력해줘. 가능하면 repo
  파일을 생성/수정하지 말고, 마지막에 마커를 그대로 출력해.
  -> /mnt/c/Users/irron/Desktop/my/web_service_new/
  calculate_math/.agents/inbox/research_c49dfc24b0.md


                  Ou
•         
                               

─                                                           
  45% context left · ? for shortcuts


• ###BEGIN:c49dfc24b0###

  ## Coverage Gap Report

  ### 1. 누락된 기초 개념 (최소 10개)

  | # | 개념명 | 누락 이유 | 심각도 |
  |---|--------|----------|--------|
  | 1 | 현재 동작 1페이지 요약(상태 흐름/데이터 스키마) |
  LearnPage는 문제별 제출→단건 채점→localStorage merge 저장
  흐름이며 StoredResult{submissions} 계약이 기준점인데, 이를
  명시 요약하지 않으면 변경 시 회귀가 발생 | 높음 |
  | 2 | 문제 카드별 제출 버튼 제거 | 요구사항 핵심(개별 제출
  제거)인데 현재 UI는 per-problem 제출에 고정 | 높음 |
  | 3 | 페이지 하단 단일 버튼 채점하기(전체 제출) | 일괄 채
  점 UX의 유일한 진입점이 필요하나 현재 없음 | 높음 |
  | 4 | 채점하기 disabled 기준(정규화 일관성) | disabled 판
  정이 normalizeNumericInput()과 불일치하면 " , " 같은 입력
  에서 버튼 활성/비활성이 채점과 엇갈림 | 높음 |
  | 5 | allAnswered 계산(정규화 기반) | “모든 문제 답 입력
  전까지 disabled”를 problems[] 기준으로 안정적으로 계산하는
  로직이 필요(로딩/문제수 변화 포함) | 높음 |
  | 6 | 입력 엣지케이스 10+ 정의 | AC 요구(10개+) 충족을 위
  해 최소 벡터가 필요: "", "   ", "\t\n", ",", " , , ",
  "1,234", " 1 234 ", "0", "-0", "+", ".", "Infinity" | 중 |
  | 7 | 일괄 채점 액션(전체 순회→gradeNumericAnswer) | 현재
  는 단건 submitProblem(problem)만 존재해 “한 번에 전체 채
  점” 동작이 없음 | 높음 |
  | 8 | 채점 전/후 상태 플래그(hasGraded/isSubmitted) | 채점
  전에도 점수/정답이 노출되거나(0/N) 저장/복원 시 상태가 꼬
  이는 것을 막기 위한 상태 기준이 필요 | 중 |
  | 9 | 문제별 결과 표시(정오/정답) 정책(일괄 채점 후) | 요
  구는 채점 후 각 문제 카드에 정오/정답 표시인데, 현재는 단
  건 제출 시에만 결과가 생김 | 높음 |
  |10| 총점 X/N 표시 정책(채점 후에만) | 상단 점수는 채점 후
  에만 의미가 있으나 현재 구조는 “결과 일부 존재”만으로 0/N
  노출 가능 | 중 |
  |11| 저장/복원 계약(답안+채점결과를 한 번에 저장/복원) |
  요구는 일괄 채점 후 저장/복원인데, 현재는 문제별 제출 시마
  다 submissions를 merge 저장 | 높음 |
  |12| legacy partial(기존 부분 제출 데이터) 호환/마이그레이
  션 | 기존 데이터가 일부 문제만 채점/저장된 형태로 남아 있
  을 수 있어 bulk 전환 시 복원/disabled/표시가 꼬임 | 높음 |
  |13| 다시 풀기(초기화): 키 삭제 + UI 상태 리셋 | 요구사항
  4)인데 현재는 사용자가 저장된 결과/답안을 삭제할 UX가 없음
  | 높음 |
  |14| 채점 후 재입력 정책(스테일 결과 처리) | 채점 후 입력
  변경 시 결과/점수와 입력이 불일치하는 스테일 상태가 발생할
  수 있어 정책이 필요 | 중 |

  ### 2. 과잉 난이도/불필요 선행 (최소 5개)

  | # | 개념명 | 과잉 이유 | 조치 제안 |
  |---|--------|----------|----------|
  | 1 | 서버 연동/DB 저장 | Out of Scope(서버 연동) 위반이며
  localStorage 요구를 흐림 | 금지(이번 범위 밖) |
  | 2 | 문제 타입 확장(서술형/객관식 등) | 이번 티켓은 제출
  UX/저장/복원이며 타입 확장은 별도 사양 필요 | 금지(후속 티
  켓) |
  | 3 | grading 대개편(허용오차/분수/근삿값) | 요구는 일괄
  제출 UX이며 채점 정책 변경은 회귀 위험만 증대 | 기존
  gradeNumericAnswer() 유지 |
  | 4 | 문제은행 JSON 스키마 변경 | 로딩/데이터 구조 변경은
  범위 밖이며 회귀 위험 큼 | 기존 problems_v1.json 유지 |
  | 5 | 전역 상태관리 도입(Redux/Zustand 등) | LearnPage 단
  일 화면 상태로 충분, 도입은 과잉 | React state/useMemo로
  해결 |
  | 6 | 입력 중 실시간 autosave | 요구는 “채점 후 한 번에 저
  장”이며 autosave는 정책/호환을 복잡화 | 이번 범위에서 제외
  |

  ### 3. 학습 순서상 위험한 점프 (최소 5개)

  | # | From → To | 점프 이유 | 브릿지 제안 |
  |---|-----------|----------|------------|
  | 1 | 문제별 제출 제거 → bulk 제출 미구현 | 제거만 하면 채
  점/저장 경로가 사라져 기능 공백 발생 | 단일 채점하기
  +gradeAll 구현 후 제거 |
  | 2 | disabled(원문 입력 기준) → 채점(정규화 기준) | " , "
  같은 케이스에서 버튼 활성/비활성과 채점 결과가 불일치 |
  disabled 판정은 normalizeNumericInput(answer).length>0로
  고정 |
  | 3 | 일괄 저장(한 번에 저장) → 기존 partial 데이터 복원 |
  legacy partial이 “채점됨”처럼 보이거나 allAnswered와 충돌
  | partial 감지 후 정책(초기화/답안만 복원/재채점 요구) 정
  의 |
  | 4 | 점수 표시(항상 0/N 가능) → 채점 UX | 채점 전 0/N 노
  출은 “이미 채점됨” 오해 유발 | hasGraded 도입 후 채점 후에
  만 점수/정답 표시 |
  | 5 | 채점 후 입력 수정 → 결과/점수 유지 | 입력과 결과가
  불일치(스테일) 상태가 발생 | 입력 변경 시 결과 초기화 또는
  버튼을 다시 채점으로 전환 |
  | 6 | 초기화(키 삭제만) → UI 상태 유지 | localStorage만 지
  우면 화면은 이전 결과/답안을 계속 표시 | 키 삭제 +
  answerByProblemId/resultByProblemId/hasGraded 리셋 |

  ## Graph Patch JSON

  {
    "researcher": "R1",
    "scope": "curriculum_viewer_learning_bulk_submit_v1",
    "add_nodes": [
      { "id": "LEARN_MAP_CURRENT_SUBMIT_FLOW", "type":
  "micro", "name_ko": "현재 per-problem 제출/저장 흐름 요
  약", "domain": "FE", "rep": "C", "confidence": 0.86 },
      { "id": "LEARN_REMOVE_PER_PROBLEM_SUBMIT", "type":
  "micro", "name_ko": "문제 카드별 제출 버튼 제거",
  "domain": "FE", "rep": "P", "confidence": 0.85 },
      { "id": "LEARN_ADD_BULK_GRADE_BUTTON", "type":
  "micro", "name_ko": "페이지 하단 단일 버튼(채점하기/전체
  제출) 추가", "domain": "FE", "rep": "P", "confidence":
  0.85 },
      { "id": "LEARN_DISABLED_USES_NORMALIZE_NUMERIC_INPUT",
  "type": "micro", "name_ko": "disabled 판정 기준을
  normalizeNumericInput과 일치", "domain": "FE", "rep": "C",
  "confidence": 0.82 },
      { "id": "LEARN_ALL_ANSWERED_NORMALIZED", "type":
  "micro", "name_ko": "allAnswered 계산(정규화 기반)",
  "domain": "FE", "rep": "P", "confidence": 0.82 },
      { "id": "LEARN_DISABLED_EDGECASES_12", "type":
  "micro", "name_ko": "disabled/정규화 입력 엣지케이스 12종
  정의", "domain": "QA", "rep": "C", "confidence": 0.76 },
      { "id": "LEARN_BULK_GRADE_ALL_ACTION", "type":
  "micro", "name_ko": "일괄 채점 액션(전체 순회
  →gradeNumericAnswer)", "domain": "FE", "rep": "P",
  "confidence": 0.84 },
      { "id": "LEARN_GRADED_STATE_FLAG", "type": "micro",
  "name_ko": "채점 전/후 상태 플래그(hasGraded/isSubmitted)
  정의", "domain": "FE", "rep": "C", "confidence": 0.78 },
      { "id": "LEARN_SHOW_PER_PROBLEM_RESULT", "type":
  "micro", "name_ko": "문제별 정오/정답 표시(일괄 채점 후)",
  "domain": "FE", "rep": "P", "confidence": 0.8 },
      { "id": "LEARN_SCORE_SUMMARY_CALC", "type": "micro",
  "name_ko": "총점 X/N 계산(결과 맵 기반)", "domain": "FE",
  "rep": "P", "confidence": 0.78 },
      { "id": "LEARN_SCORE_AND_RESULT_GATING", "type":
  "micro", "name_ko": "채점 후에만 점수/정오/정답 표시(게이
  팅)", "domain": "FE", "rep": "P", "confidence": 0.76 },
      { "id": "LEARN_STORE_RESULT_SCHEMA_BULK", "type":
  "micro", "name_ko": "bulk 저장 스키마(답안+결과) 계약 정
  의", "domain": "FE", "rep": "C", "confidence": 0.76 },
      { "id": "LEARN_LOCALSTORAGE_SAVE_BULK", "type":
  "micro", "name_ko": "일괄 채점 후 답안+결과를 한 번에 저
  장", "domain": "FE", "rep": "P", "confidence": 0.8 },
      { "id": "LEARN_LOCALSTORAGE_RESTORE_BULK", "type":
  "micro", "name_ko": "재진입/새로고침 시 결과/답안 복원",
  "domain": "FE", "rep": "P", "confidence": 0.78 },
      { "id": "LEARN_LOCALSTORAGE_MIGRATION_LEGACY_PARTIAL",
  "type": "micro", "name_ko": "기존 부분 제출 데이터 호환/마
  이그레이션 규칙", "domain": "FE", "rep": "C",
  "confidence": 0.74 },
      { "id": "LEARN_RESET_CLEAR_STORAGE", "type": "micro",
  "name_ko": "다시 풀기: localStorage 키 삭제", "domain":
  "FE", "rep": "P", "confidence": 0.82 },
      { "id": "LEARN_RESET_UI_STATE", "type": "micro",
  "name_ko": "다시 풀기: UI 상태 리셋(answerByProblemId/
  results/hasGraded)", "domain": "FE", "rep": "P",
  "confidence": 0.78 },
      { "id": "LEARN_AFTER_GRADE_EDIT_POLICY", "type":
  "micro", "name_ko": "채점 후 재입력 정책(결과 초기화 또는
  다시 채점)", "domain": "UX", "rep": "C", "confidence":
  0.7 }
    ],
    "merge_aliases": [],
    "add_edges": [
      { "from":
  "LEARN_DISABLED_USES_NORMALIZE_NUMERIC_INPUT", "to":
  "LEARN_ALL_ANSWERED_NORMALIZED", "type": "requires",
  "confidence": 0.82 },
      { "from": "LEARN_ALL_ANSWERED_NORMALIZED", "to":
  "LEARN_ADD_BULK_GRADE_BUTTON", "type": "requires",
  "confidence": 0.7 },
      { "from": "LEARN_ADD_BULK_GRADE_BUTTON", "to":
  "LEARN_BULK_GRADE_ALL_ACTION", "type": "requires",
  "confidence": 0.8 },
      { "from": "LEARN_BULK_GRADE_ALL_ACTION", "to":
  "LEARN_GRADED_STATE_FLAG", "type": "requires",
  "confidence": 0.74 },
      { "from": "LEARN_GRADED_STATE_FLAG", "to":
  "LEARN_SCORE_AND_RESULT_GATING", "type": "requires",
  "confidence": 0.76 },
      { "from": "LEARN_GRADED_STATE_FLAG", "to":
  "LEARN_SHOW_PER_PROBLEM_RESULT", "type": "requires",
  "confidence": 0.74 },
      { "from": "LEARN_BULK_GRADE_ALL_ACTION", "to":
  "LEARN_SCORE_SUMMARY_CALC", "type": "requires",
  "confidence": 0.78 },
      { "from": "LEARN_STORE_RESULT_SCHEMA_BULK", "to":
  "LEARN_LOCALSTORAGE_SAVE_BULK", "type": "requires",
  "confidence": 0.8 },
      { "from": "LEARN_STORE_RESULT_SCHEMA_BULK", "to":
  "LEARN_LOCALSTORAGE_RESTORE_BULK", "type": "requires",
  "confidence": 0.8 },
      { "from": "LEARN_BULK_GRADE_ALL_ACTION", "to":
  "LEARN_LOCALSTORAGE_SAVE_BULK", "type": "requires",
  "confidence": 0.8 },
      { "from":
  "LEARN_LOCALSTORAGE_MIGRATION_LEGACY_PARTIAL", "to":
  "LEARN_LOCALSTORAGE_RESTORE_BULK", "type": "requires",
  "confidence": 0.74 },
      { "from": "LEARN_LOCALSTORAGE_RESTORE_BULK", "to":
  "LEARN_GRADED_STATE_FLAG", "type": "requires",
  "confidence": 0.72 },
      { "from": "LEARN_LOCALSTORAGE_SAVE_BULK", "to":
  "LEARN_RESET_CLEAR_STORAGE", "type": "requires",
  "confidence": 0.74 },
      { "from": "LEARN_RESET_CLEAR_STORAGE", "to":
  "LEARN_RESET_UI_STATE", "type": "requires", "confidence":
  0.78 },
      { "from": "LEARN_AFTER_GRADE_EDIT_POLICY", "to":
  "LEARN_SCORE_AND_RESULT_GATING", "type": "requires",
  "confidence": 0.7 },
      { "from": "LEARN_BULK_GRADE_ALL_ACTION", "to":
  "LEARN_REMOVE_PER_PROBLEM_SUBMIT", "type": "requires",
  "confidence": 0.72 }
    ],
    "remove_edges": [],
    "notes": [
      { "claim": "현재 LearnPage는 문제 카드별 제출
  (submitProblem)로 단건 채점 후 submissions를 localStorage
  키(curriculum-viewer:learn:lastResult:${nodeId})에 merge
  저장한다.", "reason": "LearnPage.tsx에서
  StoredResult{submissions} 타입과 submitProblem의
  setItem(JSON.stringify(payload)) 흐름이 확인된다.",
  "confidence": 0.86 },
      { "claim": "disabled 판정은 normalizeNumericInput과 동
  일 기준으로 정의해야 한다.", "reason": "grading.ts의
  normalizeNumericInput은 공백/콤마 제거를 수행하므로,
  disabled가 원문 기준이면 '입력됨/미입력'이 채점과 불일치한
  다.", "confidence": 0.82 },
      { "claim": "bulk 전환 시 legacy partial(일부 문제만
  submissions에 존재) 데이터가 자연스럽게 존재하므로 호환/마
  이그레이션 정책이 필요하다.", "reason": "기존 구현은 문제
  별 제출 시마다 submissions를 누적 저장하므로 전체 문제 수
  보다 적은 저장 데이터가 생성된다.", "confidence": 0.78 },
      { "claim": "점수/정오/정답 표시는 hasGraded 같은 상태
  로 게이팅해야 한다.", "reason": "채점 전 0/N 노출 및 저장/
  복원 시 표시 기준 혼란을 막기 위해 채점 전/후를 분리해야
  한다.", "confidence": 0.74 },
      { "claim": "다시 풀기는 localStorage 키 삭제와 UI 상태
  리셋을 함께 수행해야 한다.", "reason": "키 삭제만으로는 화
  면에 남아있는 answer/result 상태가 즉시 초기화되지 않아 UX
  가 어긋난다.", "confidence": 0.78 }
    ]
  }

  ## Standards Tags (내부 태그)

  - 추가된 태그: LEARN_MAP_CURRENT_SUBMIT_FLOW,
    LEARN_REMOVE_PER_PROBLEM_SUBMIT,
    LEARN_ADD_BULK_GRADE_BUTTON,
    LEARN_DISABLED_USES_NORMALIZE_NUMERIC_INPUT,
    LEARN_ALL_ANSWERED_NORMALIZED,
    LEARN_DISABLED_EDGECASES_12,
    LEARN_BULK_GRADE_ALL_ACTION, LEARN_GRADED_STATE_FLAG,
    LEARN_SHOW_PER_PROBLEM_RESULT, LEARN_SCORE_SUMMARY_CALC,
    LEARN_SCORE_AND_RESULT_GATING,
    LEARN_STORE_RESULT_SCHEMA_BULK,
    LEARN_LOCALSTORAGE_SAVE_BULK,
    LEARN_LOCALSTORAGE_RESTORE_BULK,
    LEARN_LOCALSTORAGE_MIGRATION_LEGACY_PARTIAL,
    LEARN_RESET_CLEAR_STORAGE, LEARN_RESET_UI_STATE,
    LEARN_AFTER_GRADE_EDIT_POLICY
  - 수정된 태그: (없음)

  [/R1 Coverage Report]

  ###DONE:c49dfc24b0###


› -> /mnt/c/Users/irron/Desktop/my/web_service_new/
  calculate_math/.agents/inbox/research_cd88845efc.md


  40% context left



› Request cd88845efc: 아래 파일(티켓 지시)을 읽고 결과를 이
  터미널에 Output Format대로 그대로 출력해줘. 가능하면 repo
  파일을 생성/수정하지 말고, 마지막에 마커를 그대로 출력해.
  -> /mnt/c/Users/irron/Desktop/my/web_service_new/
  calculate_math/.agents/inbox/research_cd88845efc.md


    rki
•         
                               

─                                                           
  42% context left · ? for shortcuts


• ###BEGIN:cd88845efc###

  ## Coverage Gap Report

  ### 1. 누락된 기초 개념 (최소 10개)

  | # | 개념명 | 누락 이유 | 심각도 |
  |---|--------|----------|--------|
  | 1 | 현재 동작/상태 흐름 1페이지 요약 | LearnPage는 “문제
  별 제출→단건 채점→localStorage merge 저장” 구조인데, 이를
  기준선으로 요약하지 않으면 bulk 전환 시 회귀 원인을 추적하
  기 어려움 | 높음 |
  | 2 | StoredResult 스키마 명시(현재: submissions) | 저장/
  복원 계약이 { nodeId, updatedAt, submissions }인데 bulk 저
  장으로 바뀔 때 호환/마이그레이션 규칙이 필요 | 높음 |
  | 3 | 단일 버튼 채점하기 UX(하단 고정) | 요구사항은 “모든
  문제 입력 후 한 번에 제출”인데 현재 UI는 문제 카드별 제출
  만 존재 | 높음 |
  | 4 | 채점하기 disabled 기준(정규화 일치) | disabled 판정
  이 normalizeNumericInput()과 일관되지 않으면 " , " 같은 입
  력에서 활성/비활성이 채점과 불일치 | 높음 |
  | 5 | allAnswered 계산(정규화 기반) | problems[] 전체에 대
  해 정규화 후 빈 값 여부를 확인해야 “모든 문제 입력 전까지
  disabled”를 구현 가능 | 높음 |
  | 6 | 입력 엣지케이스 10+ 정의 | AC 요구(10개+) 충족을 위
  해 최소 벡터가 필요(빈값/공백/콤마/0/부호/소수점/Infinity
  등) | 중 |
  | 7 | 일괄 채점 액션(전체 순회→gradeNumericAnswer) | 현재
  는 단건 submitProblem만 있어 “한 번에 전체 채점” 동작이 없
  음 | 높음 |
  | 8 | 채점 전/후 상태 플래그(hasGraded/isSubmitted) | 채점
  전 0/N 노출, 복원 후 표시 기준 혼란을 막기 위해 채점 전/후
  상태를 분리해야 함 | 중 |
  | 9 | 점수/정오/정답 표시 게이팅 | 채점 후에만 결과를 노출
  해야 사용자 혼란(채점 전 점수 노출/legacy partial) 최소화
  | 중 |
  |10| bulk 저장(답안+결과를 한 번에 저장) | 요구사항 3) 저
  장 시점이 “개별 제출”이 아니라 “일괄 채점 후”로 바뀌어야
  함 | 높음 |
  |11| bulk 복원(재진입/새로고침) | 저장된 답안/결과를 한 번
  에 복원해 UI 상태를 재구성해야 함 | 높음 |
  |12| legacy partial 호환/마이그레이션 정책 | 기존 per-
  problem 저장은 submissions 일부만 남기는 데이터가 자연스럽
  게 생성되므로 bulk 전환 후 충돌 방지 정책이 필요 | 높음 |
  |13| 초기화(다시 풀기): localStorage 삭제 + UI 리셋 | 요구
  사항 4)인데 현재 사용자가 저장된 결과/답안을 지울 방법이
  없음 | 높음 |
  |14| strict JSON 출력 가드(줄바꿈 금지) | reviewer 지적처
  럼 문자열 내부 줄바꿈이 있으면 자동 파싱/병합이 실패하므로
  산출물 JSON은 strict JSON이어야 함 | 높음 |

  ### 2. 과잉 난이도/불필요 선행 (최소 5개)

  | # | 개념명 | 과잉 이유 | 조치 제안 |
  |---|--------|----------|----------|
  | 1 | 서버 연동/DB 저장 | Out of Scope 위반이며
  localStorage 요구를 흐림 | 금지 |
  | 2 | 문제 타입 확장(서술형/객관식) | 이번 티켓은 제출 UX/
  저장/복원이며 타입 확장은 별도 설계 필요 | 금지(후속 티켓)
  |
  | 3 | 채점 정책 확장(허용오차/분수/근사) | bulk 제출 UX와
  무관하며 회귀 위험만 증가 | gradeNumericAnswer() 유지 |
  | 4 | 문제은행 스키마 변경 | 데이터 구조 변경은 범위 밖이
  며 회귀 위험 큼 | problems_v1.json 유지 |
  | 5 | 전역 상태관리 도입(Redux/Zustand) | LearnPage 단일
  화면 상태로 충분 | 도입 금지 |
  | 6 | autosave(입력 즉시 저장) | 요구는 “채점 후 한 번에
  저장”이며 호환/정책을 복잡화 | 제외 |

  ### 3. 학습 순서상 위험한 점프 (최소 5개)

  | # | From → To | 점프 이유 | 브릿지 제안 |
  |---|-----------|----------|------------|
  | 1 | 문제별 제출 제거 → bulk 액션/버튼 미구현 | 제거만 하
  면 채점/저장 경로가 사라져 기능 공백 발생 | 채점하기
  +gradeAll 구현 후 제거 |
  | 2 | disabled(원문 기준) → 채점(정규화 기준) | " , " 등에
  서 활성/비활성과 채점이 불일치해 UX 붕괴 | disabled는
  normalizeNumericInput(answer).length>0로 통일 |
  | 3 | bulk 저장 도입 → legacy partial 복원 | 기존
  submissions 일부만 저장된 데이터가 bulk 상태/표시와 충돌 |
  legacy partial 감지 후 정책(초기화/답안만 복원/재채점 유
  도) |
  | 4 | 점수 표시(항상 0/N 가능) → 채점 UX | 채점 전 점수 노
  출은 “이미 채점됨” 오해 유발 | hasGraded 도입 후 채점 후에
  만 점수/정답 표시 |
  | 5 | 채점 후 입력 수정 → 결과 유지 | 입력과 결과가 불일치
  (스테일) 상태 발생 | 입력 변경 시 결과 초기화 또는 다시 채
  점 플로우 |
  | 6 | 초기화(키 삭제만) → UI 상태 유지 | 저장소만 지우면
  화면에 남아있는 answer/result/flags가 그대로 | 키 삭제 +
  UI 상태 리셋 동시 수행 |

  ## Graph Patch JSON

  {
    "researcher": "R1",
    "scope": "curriculum_viewer_learning_bulk_submit_v1",
    "add_nodes": [
      { "id": "LEARN_MAP_CURRENT_SUBMIT_FLOW", "type":
  "micro", "name_ko": "현재 per-problem 제출/저장 흐름 1페이
  지 요약", "domain": "FE", "rep": "C", "confidence":
  0.86 },
      { "id": "LEARN_DOCUMENT_STORED_RESULT_SCHEMA", "type":
  "micro", "name_ko": "StoredResult/ submisions 스키마 문서
  화", "domain": "FE", "rep": "C", "confidence": 0.82 },
      { "id": "LEARN_REMOVE_PER_PROBLEM_SUBMIT", "type":
  "micro", "name_ko": "문제 카드별 제출 버튼 제거",
  "domain": "FE", "rep": "P", "confidence": 0.85 },
      { "id": "LEARN_ADD_BULK_GRADE_BUTTON", "type":
  "micro", "name_ko": "페이지 하단 단일 버튼(채점하기/전체
  제출) 추가", "domain": "FE", "rep": "P", "confidence":
  0.85 },
      { "id": "LEARN_DISABLED_USES_NORMALIZE_NUMERIC_INPUT",
  "type": "micro", "name_ko": "disabled 판정 기준을
  normalizeNumericInput과 일치", "domain": "FE", "rep": "C",
  "confidence": 0.82 },
      { "id": "LEARN_ALL_ANSWERED_NORMALIZED", "type":
  "micro", "name_ko": "allAnswered 계산(정규화 기반)",
  "domain": "FE", "rep": "P", "confidence": 0.82 },
      { "id": "LEARN_DISABLED_EDGECASES_12", "type":
  "micro", "name_ko": "입력 엣지케이스 12종 정의(빈값/공백/
  콤마/0/부호/소수점 등)", "domain": "QA", "rep": "C",
  "confidence": 0.76 },
      { "id": "LEARN_BULK_GRADE_ALL_ACTION", "type":
  "micro", "name_ko": "일괄 채점 액션(전체 순회
  →gradeNumericAnswer)", "domain": "FE", "rep": "P",
  "confidence": 0.84 },
      { "id": "LEARN_GRADED_STATE_FLAG", "type": "micro",
  "name_ko": "채점 전/후 상태 플래그(hasGraded/isSubmitted)
  정의", "domain": "FE", "rep": "C", "confidence": 0.78 },
      { "id": "LEARN_SCORE_AND_RESULT_GATING", "type":
  "micro", "name_ko": "채점 후에만 점수/정오/정답 표시(게이
  팅)", "domain": "FE", "rep": "P", "confidence": 0.76 },
      { "id": "LEARN_STORE_RESULT_SCHEMA_BULK", "type":
  "micro", "name_ko": "bulk 저장 스키마(답안+결과) 계약 정
  의", "domain": "FE", "rep": "C", "confidence": 0.76 },
      { "id": "LEARN_LOCALSTORAGE_SAVE_BULK", "type":
  "micro", "name_ko": "일괄 채점 후 답안+결과를 한 번에 저
  장", "domain": "FE", "rep": "P", "confidence": 0.8 },
      { "id": "LEARN_LOCALSTORAGE_RESTORE_BULK", "type":
  "micro", "name_ko": "재진입/새로고침 시 결과/답안 복원",
  "domain": "FE", "rep": "P", "confidence": 0.78 },
      { "id": "LEARN_LOCALSTORAGE_MIGRATION_LEGACY_PARTIAL",
  "type": "micro", "name_ko": "legacy partial(부분 제출) 데
  이터 호환/정책", "domain": "FE", "rep": "C", "confidence":
  0.74 },
      { "id": "LEARN_RESET_CLEAR_STORAGE", "type": "micro",
  "name_ko": "다시 풀기: localStorage 키 삭제", "domain":
  "FE", "rep": "P", "confidence": 0.82 },
      { "id": "LEARN_RESET_UI_STATE", "type": "micro",
  "name_ko": "다시 풀기: UI 상태 리셋(answer/results/
  flags)", "domain": "FE", "rep": "P", "confidence": 0.78 },
      { "id": "LEARN_AFTER_GRADE_EDIT_POLICY", "type":
  "micro", "name_ko": "채점 후 재입력 정책(결과 초기화 또는
  다시 채점)", "domain": "UX", "rep": "C", "confidence":
  0.7 },
      { "id": "LEARN_STRICT_JSON_OUTPUT_GUARD", "type":
  "micro", "name_ko": "Graph Patch JSON strict JSON 보장(문
  자열 줄바꿈 금지)", "domain": "QA", "rep": "C",
  "confidence": 0.84 }
    ],
    "merge_aliases": [],
    "add_edges": [
      { "from": "LEARN_MAP_CURRENT_SUBMIT_FLOW", "to":
  "LEARN_DOCUMENT_STORED_RESULT_SCHEMA", "type": "requires",
  "confidence": 0.78 },
      { "from":
  "LEARN_DISABLED_USES_NORMALIZE_NUMERIC_INPUT", "to":
  "LEARN_ALL_ANSWERED_NORMALIZED", "type": "requires",
  "confidence": 0.82 },
      { "from": "LEARN_ALL_ANSWERED_NORMALIZED", "to":
  "LEARN_ADD_BULK_GRADE_BUTTON", "type": "requires",
  "confidence": 0.7 },
      { "from": "LEARN_ADD_BULK_GRADE_BUTTON", "to":
  "LEARN_BULK_GRADE_ALL_ACTION", "type": "requires",
  "confidence": 0.8 },
      { "from": "LEARN_BULK_GRADE_ALL_ACTION", "to":
  "LEARN_GRADED_STATE_FLAG", "type": "requires",
  "confidence": 0.74 },
      { "from": "LEARN_GRADED_STATE_FLAG", "to":
  "LEARN_SCORE_AND_RESULT_GATING", "type": "requires",
  "confidence": 0.76 },
      { "from": "LEARN_STORE_RESULT_SCHEMA_BULK", "to":
  "LEARN_LOCALSTORAGE_SAVE_BULK", "type": "requires",
  "confidence": 0.8 },
      { "from": "LEARN_STORE_RESULT_SCHEMA_BULK", "to":
  "LEARN_LOCALSTORAGE_RESTORE_BULK", "type": "requires",
  "confidence": 0.8 },
      { "from":
  "LEARN_LOCALSTORAGE_MIGRATION_LEGACY_PARTIAL", "to":
  "LEARN_LOCALSTORAGE_RESTORE_BULK", "type": "requires",
  "confidence": 0.74 },
      { "from": "LEARN_LOCALSTORAGE_RESTORE_BULK", "to":
  "LEARN_GRADED_STATE_FLAG", "type": "requires",
  "confidence": 0.72 },
      { "from": "LEARN_LOCALSTORAGE_SAVE_BULK", "to":
  "LEARN_RESET_CLEAR_STORAGE", "type": "requires",
  "confidence": 0.74 },
      { "from": "LEARN_RESET_CLEAR_STORAGE", "to":
  "LEARN_RESET_UI_STATE", "type": "requires", "confidence":
  0.78 },
      { "from": "LEARN_AFTER_GRADE_EDIT_POLICY", "to":
  "LEARN_SCORE_AND_RESULT_GATING", "type": "requires",
  "confidence": 0.7 },
      { "from": "LEARN_BULK_GRADE_ALL_ACTION", "to":
  "LEARN_REMOVE_PER_PROBLEM_SUBMIT", "type": "requires",
  "confidence": 0.72 },
      { "from": "LEARN_STRICT_JSON_OUTPUT_GUARD", "to":
  "LEARN_STORE_RESULT_SCHEMA_BULK", "type": "requires",
  "confidence": 0.74 }
    ],
    "remove_edges": [],
    "notes": [
      { "claim": "현재 LearnPage는 문제별 제출
  (submitProblem)로 단건 채점 후 submissions를 localStorage
  키(curriculum-viewer:learn:lastResult:${nodeId})에 merge
  저장한다.", "reason": "LearnPage.tsx에서
  StoredResult{submissions} 타입 정의와
  setItem(JSON.stringify(payload))가 확인된다.",
  "confidence": 0.86 },
      { "claim": "disabled 판정은 normalizeNumericInput과 동
  일 기준으로 정의해야 한다.", "reason":
  "normalizeNumericInput이 공백/콤마 제거를 수행하므로 원문
  기준 disabled는 채점과 불일치해 UX가 붕괴한다.",
  "confidence": 0.82 },
      { "claim": "legacy partial 데이터는 bulk 전환 시 필연
  적으로 존재할 수 있어 복원 단계에서 감지/정책화가 필요하
  다.", "reason": "기존 per-problem 저장은 전체 문제 수보다
  적은 submissions를 남기는 것이 정상 동작이었다.",
  "confidence": 0.74 },
      { "claim": "채점 전/후 게이팅(hasGraded)은 점수/정답
  조기 노출과 저장/복원 혼선을 줄인다.", "reason": "채점 전
  0/N 노출, 부분 저장 데이터 노출을 통제하려면 표시 기준이
  필요하다.", "confidence": 0.74 },
      { "claim": "Graph Patch JSON은 문자열 내부 줄바꿈이 있
  으면 파서가 실패하므로 strict JSON으로 재출력되어야 한
  다.", "reason": "reviewer 지적처럼 JSON 파싱 실패는 결합
  패치 검증/병합 파이프라인을 중단시킨다.", "confidence":
  0.84 }
    ]
  }

  ## Standards Tags (내부 태그)

  - 추가된 태그: LEARN_MAP_CURRENT_SUBMIT_FLOW,
    LEARN_DOCUMENT_STORED_RESULT_SCHEMA,
    LEARN_REMOVE_PER_PROBLEM_SUBMIT,
    LEARN_ADD_BULK_GRADE_BUTTON,
    LEARN_DISABLED_USES_NORMALIZE_NUMERIC_INPUT,
    LEARN_ALL_ANSWERED_NORMALIZED,
    LEARN_DISABLED_EDGECASES_12,
    LEARN_BULK_GRADE_ALL_ACTION, LEARN_GRADED_STATE_FLAG,
    LEARN_SCORE_AND_RESULT_GATING,
    LEARN_STORE_RESULT_SCHEMA_BULK,
    LEARN_LOCALSTORAGE_SAVE_BULK,
    LEARN_LOCALSTORAGE_RESTORE_BULK,
    LEARN_LOCALSTORAGE_MIGRATION_LEGACY_PARTIAL,
    LEARN_RESET_CLEAR_STORAGE, LEARN_RESET_UI_STATE,
    LEARN_AFTER_GRADE_EDIT_POLICY,
    LEARN_STRICT_JSON_OUTPUT_GUARD
  - 수정된 태그: (없음)

  [/R1 Coverage Report]

  ###DONE:cd88845efc###


› -> /mnt/c/Users/irron/Desktop/my/web_service_new/
  calculate_math/.agents/inbox/research_f0805f8d87.md


  40% context left



› Request f0805f8d87: 아래 파일(티켓 지시)을 읽고 결과를 이
  터미널에 Output Format대로 그대로 출력해줘. 가능하면 repo
  파일을 생성/수정하지 말고, 마지막에 마커를 그대로 출력해.
  -> /mnt/c/Users/irron/Desktop/my/web_service_new/
  calculate_math/.agents/inbox/research_f0805f8d87.md


   ork     10s • esc to inte rupt)
•         
                               

─                                                           
  39% context left · ? for shortcuts


• ###BEGIN:f0805f8d87###

  ## Coverage Gap Report

  ### 1. 누락된 기초 개념 (최소 10개)

  | # | 개념명 | 누락 이유 | 심각도 |
  |---|--------|----------|--------|
  | 1 | 현재 LearnPage 제출/저장 흐름 기준선 요약 | 현재는
  문제별 제출→단건 채점→submissions merge 저장 구조라, bulk
  전환 시 무엇이 바뀌는지 기준선이 필요 | 높음 |
  | 2 | StoredResult(submissions) 스키마 명시 | localStorage
  저장/복원 계약이 명시되지 않으면 bulk 저장으로 전환 시 호
  환/마이그레이션 규칙이 흔들림 | 높음 |
  | 3 | 문제 카드별 제출 버튼 제거 | 요구사항 1) 핵심인데 현
  재 UI는 per-problem 제출에 고정 | 높음 |
  | 4 | 하단 단일 채점하기(전체 제출) 버튼 | 요구 UX의 유일
  한 진입점이 필요하나 현재 없음 | 높음 |
  | 5 | 채점하기 disabled 기준(정규화 일관성) | disabled 판
  정이 normalizeNumericInput()과 불일치하면 " , " 같은 입력
  에서 활성/비활성이 채점과 엇갈림 | 높음 |
  | 6 | allAnswered 계산(정규화 기반) | problems[] 전체를 기
  준으로 “모두 입력됨”을 안정적으로 계산해야 함(로딩 타이밍/
  문제 수 변화 포함) | 높음 |
  | 7 | 입력 엣지케이스 10+ 정의 | AC 요구 충족을 위해 최소
  벡터가 필요(예: "", " ", ",", " , ", "0", "-0", "1,234", "
  1 234 ", "+", ".", "Infinity" 등) | 중 |
  | 8 | 일괄 채점 액션(전체 순회→gradeNumericAnswer) | 현재
  는 submitProblem(problem)로 단건 채점만 가능해 bulk 채점
  동작이 없음 | 높음 |
  | 9 | 채점 전/후 상태 플래그(hasGraded/isSubmitted) | 채점
  전 점수/정답 노출(0/N) 및 복원 후 표시 기준 혼란을 막기 위
  해 필요 | 중 |
  |10| 점수/정오/정답 표시 게이팅 | 채점 후에만 결과를 노출
  해야 UX가 일관되고 legacy partial 데이터 혼선을 줄임 | 중
  |
  |11| bulk 저장(답안+결과를 한 번에 저장) | 요구사항 3) 저
  장 시점이 개별 제출이 아니라 일괄 채점 후로 바뀌어야 함 |
  높음 |
  |12| bulk 복원(재진입/새로고침) | 저장된 답안/결과를 복원
  해 상태를 재구성해야 함 | 높음 |
  |13| legacy partial 호환/정책 | 기존 per-problem 저장은
  submissions 일부만 남기는 데이터가 정상으로 생성되므로,
  bulk 전환 후 충돌 방지 정책이 필요 | 높음 |
  |14| 다시 풀기(초기화): 키 삭제 + UI 리셋 | 요구사항 4)이
  며 키 삭제만으로는 화면이 즉시 초기화되지 않음 | 높음 |
  |15| strict JSON 산출 가드 | reviewer 지적처럼 문자열 내부
  줄바꿈이 있으면 파싱/병합이 실패하므로 산출물 JSON은
  strict JSON이어야 함 | 높음 |

  ### 2. 과잉 난이도/불필요 선행 (최소 5개)

  | # | 개념명 | 과잉 이유 | 조치 제안 |
  |---|--------|----------|----------|
  | 1 | R3 Transfer 템플릿/트리플릿 강제 | 본 티켓은 FE/UX
  개선이며 problem templates/triplets은 도메인 부적합(또는
  N/A 처리 필요) | N/A 명시 또는 최소 전이(상태 전이) 예시로
  대체 |
  | 2 | 서버 연동/DB 저장 | Out of Scope 위반, localStorage
  요구를 흐림 | 금지 |
  | 3 | 문제 타입 확장(서술형/객관식) | 이번 티켓 범위를 벗
  어남 | 금지(후속 티켓) |
  | 4 | grading 정책 확장(허용오차/분수/근사) | bulk 제출 UX
  와 무관하며 회귀 위험 증가 | 기존 gradeNumericAnswer 유지
  |
  | 5 | 문제은행 JSON 스키마 변경 | 데이터 구조 변경은 범위
  밖, 회귀 위험 큼 | 기존 스키마 유지 |
  | 6 | 전역 상태관리 도입(Redux/Zustand) | LearnPage 단일
  화면 상태로 충분 | 도입 금지 |

  ### 3. 학습 순서상 위험한 점프 (최소 5개)

  | # | From → To | 점프 이유 | 브릿지 제안 |
  |---|-----------|----------|------------|
  | 1 | 문제별 제출 제거 → bulk 버튼/액션 미구현 | 제거만 하
  면 채점/저장 경로가 사라져 기능 공백 발생 | 채점하기
  +gradeAll 구현 후 제거 |
  | 2 | disabled(원문 기준) → 채점(정규화 기준) | " , " 등에
  서 활성/비활성과 채점이 불일치해 UX 붕괴 | disabled는
  normalizeNumericInput(answer).length>0로 통일 |
  | 3 | bulk 저장 도입 → legacy partial 복원 | 기존
  submissions 일부만 저장된 데이터가 bulk 표시/disabled와 충
  돌 | partial 감지 후 정책(초기화/답안만 복원/재채점 유도)
  |
  | 4 | 점수 표시 → 채점 UX | 채점 전 0/N 노출은 “이미 채점
  됨” 오해 유발 | hasGraded 도입 후 채점 후에만 점수/정답 표
  시 |
  | 5 | 채점 후 입력 수정 → 결과 유지 | 입력과 결과가 불일치
  (스테일) 상태 발생 | 입력 변경 시 결과 초기화 또는 다시 채
  점 플로우 |
  | 6 | 초기화(키 삭제만) → UI 상태 유지 | 저장소만 지우면
  화면에 남은 answer/result/flags가 그대로 | 키 삭제 + UI 리
  셋 동시 수행 |

  ## Graph Patch JSON

  {
    "researcher": "R1",
    "scope": "curriculum_viewer_learning_bulk_submit_v1",
    "add_nodes": [
      { "id": "LEARN_MAP_CURRENT_SUBMIT_FLOW", "type":
  "micro", "name_ko": "현재 per-problem 제출/저장 흐름 1페이
  지 요약", "domain": "FE", "rep": "C", "confidence":
  0.86 },
      { "id": "LEARN_DOCUMENT_STORED_RESULT_SCHEMA", "type":
  "micro", "name_ko": "StoredResult/submissions 스키마 문서
  화", "domain": "FE", "rep": "C", "confidence": 0.82 },
      { "id": "LEARN_REMOVE_PER_PROBLEM_SUBMIT", "type":
  "micro", "name_ko": "문제 카드별 제출 버튼 제거",
  "domain": "FE", "rep": "P", "confidence": 0.85 },
      { "id": "LEARN_ADD_BULK_GRADE_BUTTON", "type":
  "micro", "name_ko": "페이지 하단 단일 버튼(채점하기/전체
  제출) 추가", "domain": "FE", "rep": "P", "confidence":
  0.85 },
      { "id": "LEARN_DISABLED_USES_NORMALIZE_NUMERIC_INPUT",
  "type": "micro", "name_ko": "disabled 판정 기준을
  normalizeNumericInput과 일치", "domain": "FE", "rep": "C",
  "confidence": 0.82 },
      { "id": "LEARN_ALL_ANSWERED_NORMALIZED", "type":
  "micro", "name_ko": "allAnswered 계산(정규화 기반)",
  "domain": "FE", "rep": "P", "confidence": 0.82 },
      { "id": "LEARN_DISABLED_EDGECASES_12", "type":
  "micro", "name_ko": "입력 엣지케이스 12종 정의(빈값/공백/
  콤마/0/부호/소수점 등)", "domain": "QA", "rep": "C",
  "confidence": 0.76 },
      { "id": "LEARN_BULK_GRADE_ALL_ACTION", "type":
  "micro", "name_ko": "일괄 채점 액션(전체 순회
  →gradeNumericAnswer)", "domain": "FE", "rep": "P",
  "confidence": 0.84 },
      { "id": "LEARN_BUILD_RESULT_MAP", "type": "micro",
  "name_ko": "문제별 결과 맵(resultByProblemId) 생성",
  "domain": "FE", "rep": "P", "confidence": 0.78 },
      { "id": "LEARN_GRADED_STATE_FLAG", "type": "micro",
  "name_ko": "채점 전/후 상태 플래그(hasGraded 등) 정의",
  "domain": "FE", "rep": "C", "confidence": 0.78 },
      { "id": "LEARN_SCORE_SUMMARY_CALC", "type": "micro",
  "name_ko": "총점 X/N 계산(결과 맵 기반)", "domain": "FE",
  "rep": "P", "confidence": 0.76 },
      { "id": "LEARN_SCORE_AND_RESULT_GATING", "type":
  "micro", "name_ko": "채점 후에만 점수/정오/정답 표시(게이
  팅)", "domain": "FE", "rep": "P", "confidence": 0.76 },
      { "id": "LEARN_SHOW_PER_PROBLEM_RESULT", "type":
  "micro", "name_ko": "문제별 정오/정답 표시(일괄 채점 후)",
  "domain": "FE", "rep": "P", "confidence": 0.78 },
      { "id": "LEARN_STORE_RESULT_SCHEMA_BULK", "type":
  "micro", "name_ko": "bulk 저장 스키마(답안+결과) 계약 정
  의", "domain": "FE", "rep": "C", "confidence": 0.76 },
      { "id": "LEARN_LOCALSTORAGE_VALIDATE_SHAPE", "type":
  "micro", "name_ko": "복원 데이터 파싱/검증 규칙(JSON shape
  validate)", "domain": "FE", "rep": "C", "confidence":
  0.78 },
      { "id": "LEARN_LOCALSTORAGE_SAVE_BULK", "type":
  "micro", "name_ko": "일괄 채점 후 답안+결과를 한 번에 저
  장", "domain": "FE", "rep": "P", "confidence": 0.8 },
      { "id": "LEARN_LOCALSTORAGE_RESTORE_BULK", "type":
  "micro", "name_ko": "재진입/새로고침 시 결과/답안 복원",
  "domain": "FE", "rep": "P", "confidence": 0.78 },
      { "id": "LEARN_LOCALSTORAGE_MIGRATION_LEGACY_PARTIAL",
  "type": "micro", "name_ko": "legacy partial(부분 제출) 호
  환/정책", "domain": "FE", "rep": "C", "confidence":
  0.74 },
      { "id": "LEARN_RESET_CLEAR_STORAGE", "type": "micro",
  "name_ko": "다시 풀기: localStorage 키 삭제", "domain":
  "FE", "rep": "P", "confidence": 0.82 },
      { "id": "LEARN_RESET_UI_STATE", "type": "micro",
  "name_ko": "다시 풀기: UI 상태 리셋(answer/results/
  flags)", "domain": "FE", "rep": "P", "confidence": 0.78 },
      { "id": "LEARN_AFTER_GRADE_EDIT_POLICY", "type":
  "micro", "name_ko": "채점 후 재입력 정책(결과 초기화 또는
  다시 채점)", "domain": "UX", "rep": "C", "confidence":
  0.7 },
      { "id": "LEARN_STRICT_JSON_OUTPUT_GUARD", "type":
  "micro", "name_ko": "Graph Patch JSON strict JSON 보장(문
  자열 줄바꿈 금지)", "domain": "QA", "rep": "C",
  "confidence": 0.84 }
    ],
    "merge_aliases": [],
    "add_edges": [
      { "from": "LEARN_MAP_CURRENT_SUBMIT_FLOW", "to":
  "LEARN_DOCUMENT_STORED_RESULT_SCHEMA", "type": "requires",
  "confidence": 0.78 },
      { "from":
  "LEARN_DISABLED_USES_NORMALIZE_NUMERIC_INPUT", "to":
  "LEARN_ALL_ANSWERED_NORMALIZED", "type": "requires",
  "confidence": 0.82 },
      { "from": "LEARN_ALL_ANSWERED_NORMALIZED", "to":
  "LEARN_ADD_BULK_GRADE_BUTTON", "type": "requires",
  "confidence": 0.7 },
      { "from": "LEARN_ADD_BULK_GRADE_BUTTON", "to":
  "LEARN_BULK_GRADE_ALL_ACTION", "type": "requires",
  "confidence": 0.8 },
      { "from": "LEARN_BULK_GRADE_ALL_ACTION", "to":
  "LEARN_BUILD_RESULT_MAP", "type": "requires",
  "confidence": 0.78 },
      { "from": "LEARN_BUILD_RESULT_MAP", "to":
  "LEARN_SCORE_SUMMARY_CALC", "type": "requires",
  "confidence": 0.76 },
      { "from": "LEARN_BUILD_RESULT_MAP", "to":
  "LEARN_SHOW_PER_PROBLEM_RESULT", "type": "requires",
  "confidence": 0.78 },
      { "from": "LEARN_BULK_GRADE_ALL_ACTION", "to":
  "LEARN_GRADED_STATE_FLAG", "type": "requires",
  "confidence": 0.74 },
      { "from": "LEARN_GRADED_STATE_FLAG", "to":
  "LEARN_SCORE_AND_RESULT_GATING", "type": "requires",
  "confidence": 0.76 },
      { "from": "LEARN_STORE_RESULT_SCHEMA_BULK", "to":
  "LEARN_LOCALSTORAGE_SAVE_BULK", "type": "requires",
  "confidence": 0.8 },
      { "from": "LEARN_STORE_RESULT_SCHEMA_BULK", "to":
  "LEARN_LOCALSTORAGE_RESTORE_BULK", "type": "requires",
  "confidence": 0.8 },
      { "from": "LEARN_LOCALSTORAGE_VALIDATE_SHAPE", "to":
  "LEARN_LOCALSTORAGE_RESTORE_BULK", "type": "requires",
  "confidence": 0.78 },
      { "from":
  "LEARN_LOCALSTORAGE_MIGRATION_LEGACY_PARTIAL", "to":
  "LEARN_LOCALSTORAGE_RESTORE_BULK", "type": "requires",
  "confidence": 0.74 },
      { "from": "LEARN_LOCALSTORAGE_RESTORE_BULK", "to":
  "LEARN_GRADED_STATE_FLAG", "type": "requires",
  "confidence": 0.7 },
      { "from": "LEARN_LOCALSTORAGE_SAVE_BULK", "to":
  "LEARN_RESET_CLEAR_STORAGE", "type": "requires",
  "confidence": 0.74 },
      { "from": "LEARN_RESET_CLEAR_STORAGE", "to":
  "LEARN_RESET_UI_STATE", "type": "requires", "confidence":
  0.78 },
      { "from": "LEARN_AFTER_GRADE_EDIT_POLICY", "to":
  "LEARN_SCORE_AND_RESULT_GATING", "type": "requires",
  "confidence": 0.7 },
      { "from": "LEARN_BULK_GRADE_ALL_ACTION", "to":
  "LEARN_REMOVE_PER_PROBLEM_SUBMIT", "type": "requires",
  "confidence": 0.72 },
      { "from": "LEARN_STRICT_JSON_OUTPUT_GUARD", "to":
  "LEARN_STORE_RESULT_SCHEMA_BULK", "type": "requires",
  "confidence": 0.74 }
    ],
    "remove_edges": [],
    "notes": [
      { "claim": "현재 LearnPage는 문제별 제출
  (submitProblem)로 단건 채점 후 submissions를 localStorage
  키(curriculum-viewer:learn:lastResult:${nodeId})에 merge
  저장한다.", "reason": "LearnPage.tsx에서
  StoredResult{submissions} 타입 정의와
  setItem(JSON.stringify(payload)) 흐름이 확인된다.",
  "confidence": 0.86 },
      { "claim": "disabled 판정은 normalizeNumericInput과 동
  일 기준으로 정의해야 한다.", "reason":
  "normalizeNumericInput이 공백/콤마 제거를 수행하므로 원문
  기준 disabled는 채점과 불일치해 UX가 붕괴한다.",
  "confidence": 0.82 },
      { "claim": "R3 Transfer 산출물은 본 티켓(UX/FE)에서는
  problem templates/triplets 대신 상태 전이(입력→활성화→채점
  →저장→복원→초기화) 전이 예시로 대체하거나 N/A를 명시하는
  방식이 적합하다.", "reason": "reviewer도 FE/UX 티켓에서
  Transfer 항목을 N/A 처리 또는 도메인 맞춤 예시로 대체하라
  고 권고했다.", "confidence": 0.74 },
      { "claim": "legacy partial(부분 제출) 데이터는 bulk 전
  환 시 필연적으로 존재할 수 있어 복원 단계에서 감지/정책화
  가 필요하다.", "reason": "기존 per-problem 저장은 전체 문
  제 수보다 적은 submissions를 남기는 것이 정상 동작이었
  다.", "confidence": 0.74 },
      { "claim": "Graph Patch JSON은 문자열 내부 줄바꿈이 있
  으면 파서가 실패하므로 strict JSON으로 재출력되어야 한
  다.", "reason": "reviewer 지적처럼 JSON 파싱 실패는 결합
  패치 검증/병합 파이프라인을 중단시킨다.", "confidence":
  0.84 }
    ]
  }

  ## Standards Tags (내부 태그)

  - 추가된 태그: LEARN_MAP_CURRENT_SUBMIT_FLOW,
    LEARN_DOCUMENT_STORED_RESULT_SCHEMA,
    LEARN_REMOVE_PER_PROBLEM_SUBMIT,
    LEARN_ADD_BULK_GRADE_BUTTON,
    LEARN_DISABLED_USES_NORMALIZE_NUMERIC_INPUT,
    LEARN_ALL_ANSWERED_NORMALIZED,
    LEARN_DISABLED_EDGECASES_12,
    LEARN_BULK_GRADE_ALL_ACTION, LEARN_BUILD_RESULT_MAP,
    LEARN_GRADED_STATE_FLAG, LEARN_SCORE_SUMMARY_CALC,
    LEARN_SCORE_AND_RESULT_GATING,
    LEARN_SHOW_PER_PROBLEM_RESULT,
    LEARN_STORE_RESULT_SCHEMA_BULK,
    LEARN_LOCALSTORAGE_VALIDATE_SHAPE,
    LEARN_LOCALSTORAGE_SAVE_BULK,
    LEARN_LOCALSTORAGE_RESTORE_BULK,
    LEARN_LOCALSTORAGE_MIGRATION_LEGACY_PARTIAL,
    LEARN_RESET_CLEAR_STORAGE, LEARN_RESET_UI_STATE,
    LEARN_AFTER_GRADE_EDIT_POLICY,
    LEARN_STRICT_JSON_OUTPUT_GUARD
  - 수정된 태그: (없음)

  [/R1 Coverage Report]

  ###DONE:f0805f8d87###


› Explain this codebase

  37% context left · ? for shortcuts


============================================================
[2026-01-08 11:55:56] RESEARCH1 (req_id: 6ca9c9bcbc)
============================================================
  으로 점프하면 의미(자리 채우기)와 표기(감소곱/팩토리얼)가 분리되어 공식
  암기화 | PERM_AS_FILLING_SLOTS + PERM_PRODUCT_FORM + FACTORIAL_EXPANSION
  + STEP_PERM_DERIVE |
  | 2 | PERM_BASIC → COMB_BASIC | 순열에서 조합으로 넘어갈 때 “순서 무시/
  중복 제거”가 비면 nPr/nCr 혼동이 고착 | COMB_ORDER_IGNORED_REASON +
  COMB_FROM_PERM_DIVIDE + STEP_COMB_DERIVE |
  | 3 | ORDER_SENSITIVE_CHECK → COMB_BASIC | 순서 게이트만 있고 “선택=부분
  집합/ r개 선택 입력”이 비면 조합 해석이 불안정 | COMB_AS_SUBSET +
  COMB_AS_CHOOSE_R |
  | 4 | SYSTEMATIC_LISTING_BASIC → STEP_PROB_SETUP | 나열에서 바로 확률 설
  정으로 가면 “전체(분모) 고정”이 약해 분모 오류 반복 |
  STEP_SAMPLE_SPACE_BUILD |
  | 5 | SAMPLE_SPACE_AS_SET → STEP_PROB_SETUP | 표본공간을 알아도 등확률
  전제/유리-전체 카운팅 절차가 비면 A/S 오적용 |
  CLASSICAL_PROB_EQUIPROBABLE_CHECK + EQUIPROBABLE_DECISION +
  COUNT_FAVORABLE_TOTAL + PROB_AS_RATIO |
  | 6 | SET_NOTATION_BASICS → STEP_INCL_EXCL_2SET | 집합 기호를 알아도 문
  장→집합식→겹침 판정이 없으면 포함배제가 공식 점프로 됨 |
  EVENT_OPERATION_EXPRESSION + DISJOINT_OR_OVERLAP_DECISION +
  STEP_EVENT_OPS_INCL_EXCL |
  | 7 | INCL_EXCL_2SET_MEANING → STEP_INCL_EXCL_2SET | 의미에서 단계 완성
  으로 바로 가면 항 매핑/대입/계산 실행이 비어 실수 증가 |
  APPLY_INCL_EXCL_2SET |
  | 8 | COMPLEMENT_EVENT → PROB_BASIC | 개념에서 곧바로 1-p로 점프하면 규
  칙 남용(문맥 없는 뒤집기) 위험 | COMPLEMENT_RULE (필요 시
  TOTAL_MINUS_STRATEGY 권장) |

  ## Graph Patch JSON

  {
    "researcher": "R1",
    "scope": "TS_COMB_PROB",
    "add_nodes": [
      { "id": "COUNT_MUL_RULE_MEANING", "type": "micro", "name_ko": "곱셈
  원리 의미(단계 곱)", "domain": "DA", "rep": "C", "confidence": 0.83 },
      { "id": "COUNT_ADD_RULE_MEANING", "type": "micro", "name_ko": "덧셈
  원리 의미(서로소 합)", "domain": "DA", "rep": "C", "confidence": 0.8 },
      { "id": "ORDER_SENSITIVE_CHECK", "type": "micro", "name_ko": "순서
  민감 판단(순열/조합 분기)", "domain": "DA", "rep": "C", "confidence":
  0.76 },
      { "id": "PERM_AS_FILLING_SLOTS", "type": "micro", "name_ko": "순열
  의미(자리 채우기)", "domain": "DA", "rep": "C", "confidence": 0.78 },
      { "id": "PERM_PRODUCT_FORM", "type": "micro", "name_ko": "nPr을 감소
  곱(곱 형태)로 표현", "domain": "DA", "rep": "P", "confidence": 0.74 },
      { "id": "FACTORIAL_EXPANSION", "type": "micro", "name_ko": "팩토리얼
  전개 n!=n*(n-1)*...", "domain": "DA", "rep": "P", "confidence": 0.82 },
      { "id": "FACTORIAL_ZERO_MEANING", "type": "micro", "name_ko": "0! 의
  미 해석(경계 사례)", "domain": "DA", "rep": "A", "confidence": 0.74 },
      { "id": "FACTORIAL_CANCELLATION", "type": "micro", "name_ko": "팩토
  리얼 약분", "domain": "DA", "rep": "P", "confidence": 0.78 },
      { "id": "STEP_PERM_DERIVE", "type": "step", "name_ko": "순열 공식 유
  도 단계", "domain": "DA", "rep": "C", "confidence": 0.74 },

      { "id": "COMB_AS_SUBSET", "type": "micro", "name_ko": "조합 의미(부
  분집합 선택)", "domain": "DA", "rep": "C", "confidence": 0.8 },
      { "id": "COMB_AS_CHOOSE_R", "type": "micro", "name_ko": "r개 선택 상
  황 해석", "domain": "DA", "rep": "C", "confidence": 0.75 },
      { "id": "COMB_ORDER_IGNORED_REASON", "type": "micro", "name_ko": "조
  합에서 순서 중복을 r!로 나누는 이유", "domain": "DA", "rep": "C",
  "confidence": 0.8 },
      { "id": "COMB_FROM_PERM_DIVIDE", "type": "micro", "name_ko": "nPr/r!
  로 nCr을 유도", "domain": "DA", "rep": "P", "confidence": 0.74 },
      { "id": "CHOOSE_THEN_ARRANGE", "type": "micro", "name_ko": "선택 후
  배열( nPr = nCr·r! ) 구조", "domain": "DA", "rep": "C", "confidence":
  0.72 },
      { "id": "STEP_COMB_DERIVE", "type": "step", "name_ko": "조합 공식 유
  도 단계", "domain": "DA", "rep": "C", "confidence": 0.74 },

      { "id": "SYSTEMATIC_LISTING_BASIC", "type": "micro", "name_ko": "체
  계적 나열 기초", "domain": "DA", "rep": "P", "confidence": 0.78 },
      { "id": "TREE_DIAGRAM_BASIC", "type": "micro", "name_ko": "트리 다이
  어그램으로 경우를 표현", "domain": "DA", "rep": "P", "confidence":
  0.7 },
      { "id": "STEP_SAMPLE_SPACE_BUILD", "type": "step", "name_ko": "표본
  공간 구성 단계(빠짐/중복 점검)", "domain": "DA", "rep": "C",
  "confidence": 0.75 },

      { "id": "SET_NOTATION_BASICS", "type": "micro", "name_ko": "집합 기
  초(원소/부분집합/기호)", "domain": "DA", "rep": "C", "confidence":
  0.78 },
      { "id": "SAMPLE_SPACE_AS_SET", "type": "micro", "name_ko": "표본공간
  =집합", "domain": "DA", "rep": "C", "confidence": 0.8 },
      { "id": "EVENT_AS_SUBSET", "type": "micro", "name_ko": "사건=부분집
  합", "domain": "DA", "rep": "C", "confidence": 0.8 },
      { "id": "PROB_AS_RATIO", "type": "micro", "name_ko": "확률=비율(A/
  S)", "domain": "DA", "rep": "A", "confidence": 0.76 },
      { "id": "CLASSICAL_PROB_EQUIPROBABLE_CHECK", "type": "micro",
  "name_ko": "고전확률 등확률 전제 확인", "domain": "DA", "rep": "C",
  "confidence": 0.77 },
      { "id": "EQUIPROBABLE_DECISION", "type": "micro", "name_ko": "등확률
  여부 게이트(Yes/No 분기)", "domain": "DA", "rep": "C", "confidence":
  0.74 },
      { "id": "COUNT_FAVORABLE_TOTAL", "type": "micro", "name_ko": "유리/
  전체 경우의 수 분리 카운팅(A/S)", "domain": "DA", "rep": "P",
  "confidence": 0.77 },
      { "id": "STEP_PROB_SETUP", "type": "step", "name_ko": "고전확률 설정
  단계(전체→사건→전제→A/S)", "domain": "DA", "rep": "C", "confidence":
  0.76 },

      { "id": "EVENT_OPERATION_EXPRESSION", "type": "micro", "name_ko":
  "사건 연산을 집합식으로 표현(문장→A∪B/A∩B/A^c)", "domain": "DA", "rep":
  "P", "confidence": 0.76 },
      { "id": "INTERSECTION_UNION_MEANING", "type": "micro", "name_ko":
  "교집합/합집합 의미(∩/∪)", "domain": "DA", "rep": "C", "confidence":
  0.76 },
      { "id": "CHECK_DOUBLE_COUNTING", "type": "micro", "name_ko": "중복계
  수(겹침) 점검", "domain": "DA", "rep": "C", "confidence": 0.74 },
      { "id": "DISJOINT_EVENTS", "type": "micro", "name_ko": "서로소 사건
  (겹치지 않음) 판별", "domain": "DA", "rep": "C", "confidence": 0.74 },
      { "id": "VENN_DIAGRAM_2SET", "type": "micro", "name_ko": "벤 다이어
  그램(2집합)으로 사건 연산 시각화", "domain": "DA", "rep": "P",
  "confidence": 0.74 },
      { "id": "DISJOINT_OR_OVERLAP_DECISION", "type": "micro", "name_ko":
  "서로소/겹침 판정 게이트", "domain": "DA", "rep": "C", "confidence":
  0.74 },
      { "id": "STEP_EVENT_OPS_INCL_EXCL", "type": "step", "name_ko": "문장
  →집합식→겹침 판정→중복 보정 단계", "domain": "DA", "rep": "C",
  "confidence": 0.74 },
      { "id": "INCL_EXCL_2SET_MEANING", "type": "micro", "name_ko": "2집합
  포함배제 의미(중복 보정)", "domain": "DA", "rep": "C", "confidence":
  0.78 },
      { "id": "APPLY_INCL_EXCL_2SET", "type": "micro", "name_ko": "2집합
  포함배제 식 적용 실행(항 매핑→대입→계산)", "domain": "DA", "rep": "P",
  "confidence": 0.75 },
      { "id": "STEP_INCL_EXCL_2SET", "type": "step", "name_ko": "2집합 포
  함배제 단계", "domain": "DA", "rep": "C", "confidence": 0.73 },

      { "id": "COMPLEMENT_EVENT", "type": "micro", "name_ko": "여사건(보
  완) 개념", "domain": "DA", "rep": "C", "confidence": 0.74 },
      { "id": "COMPLEMENT_RULE", "type": "micro", "name_ko": "여사건 규칙
  (1-p)", "domain": "DA", "rep": "A", "confidence": 0.74 },
      { "id": "TOTAL_MINUS_STRATEGY", "type": "micro", "name_ko": "전체-부
  분(보완) 전략(전체에서 빼기)", "domain": "DA", "rep": "C", "confidence":
  0.68 }
    ],
    "merge_aliases": [
      { "alias": "COUNT_MUL_RULE", "keep": "COUNT_MUL_RULE_MEANING" },
      { "alias": "COUNT_ADD_RULE", "keep": "COUNT_ADD_RULE_MEANING" },
      { "alias": "PERM_MEANING_SLOT", "keep": "PERM_AS_FILLING_SLOTS" },
      { "alias": "FACTORIAL_CONCEPT", "keep": "FACTORIAL_EXPANSION" },
      { "alias": "FACTORIAL_ZERO", "keep": "FACTORIAL_ZERO_MEANING" },
      { "alias": "COMB_MEANING_SUBSET", "keep": "COMB_AS_SUBSET" },
      { "alias": "COMB_DERIVE_FROM_PERM_DIVIDE", "keep":
  "COMB_FROM_PERM_DIVIDE" },
      { "alias": "SAMPLE_SPACE_DEFINE", "keep": "SAMPLE_SPACE_AS_SET" },
      { "alias": "EVENT_DEFINE", "keep": "EVENT_AS_SUBSET" },
      { "alias": "SET_INTERSECTION_UNION", "keep":
  "INTERSECTION_UNION_MEANING" },
      { "alias": "INCLUSION_EXCLUSION_2SET_MEANING", "keep":
  "INCL_EXCL_2SET_MEANING" }
    ],
    "add_edges": [
      { "from": "COUNT_MUL_RULE_MEANING", "to": "PERM_AS_FILLING_SLOTS",
  "type": "requires", "confidence": 0.83 },
      { "from": "PERM_AS_FILLING_SLOTS", "to": "PERM_PRODUCT_FORM",
  "type": "requires", "confidence": 0.74 },
      { "from": "PERM_PRODUCT_FORM", "to": "FACTORIAL_EXPANSION", "type":
  "requires", "confidence": 0.72 },
      { "from": "FACTORIAL_EXPANSION", "to": "STEP_PERM_DERIVE", "type":
  "requires", "confidence": 0.74 },
      { "from": "FACTORIAL_ZERO_MEANING", "to": "STEP_PERM_DERIVE",
  "type": "requires", "confidence": 0.66 },
      { "from": "STEP_PERM_DERIVE", "to": "PERM_BASIC", "type":
  "requires", "confidence": 0.74 },

      { "from": "ORDER_SENSITIVE_CHECK", "to": "STEP_COMB_DERIVE", "type":
  "requires", "confidence": 0.73 },
      { "from": "COMB_AS_SUBSET", "to": "COMB_AS_CHOOSE_R", "type":
  "requires", "confidence": 0.75 },
      { "from": "COMB_AS_CHOOSE_R", "to": "STEP_COMB_DERIVE", "type":
  "requires", "confidence": 0.74 },
      { "from": "COMB_AS_SUBSET", "to": "COMB_ORDER_IGNORED_REASON",
  "type": "requires", "confidence": 0.74 },
      { "from": "COMB_ORDER_IGNORED_REASON", "to":
  "COMB_FROM_PERM_DIVIDE", "type": "requires", "confidence": 0.82 },
      { "from": "PERM_PRODUCT_FORM", "to": "COMB_FROM_PERM_DIVIDE",
  "type": "requires", "confidence": 0.8 },
      { "from": "FACTORIAL_CANCELLATION", "to": "STEP_COMB_DERIVE",
  "type": "requires", "confidence": 0.74 },
      { "from": "COMB_FROM_PERM_DIVIDE", "to": "STEP_COMB_DERIVE", "type":
  "requires", "confidence": 0.74 },
      { "from": "STEP_COMB_DERIVE", "to": "COMB_BASIC", "type":
  "requires", "confidence": 0.74 },

      { "from": "SET_NOTATION_BASICS", "to": "SAMPLE_SPACE_AS_SET",
  "type": "requires", "confidence": 0.74 },
      { "from": "SET_NOTATION_BASICS", "to": "EVENT_AS_SUBSET", "type":
  "requires", "confidence": 0.74 },
      { "from": "SYSTEMATIC_LISTING_BASIC", "to":
  "STEP_SAMPLE_SPACE_BUILD", "type": "requires", "confidence": 0.76 },
      { "from": "SAMPLE_SPACE_AS_SET", "to": "STEP_SAMPLE_SPACE_BUILD",
  "type": "requires", "confidence": 0.75 },
      { "from": "STEP_SAMPLE_SPACE_BUILD", "to": "STEP_PROB_SETUP",
  "type": "requires", "confidence": 0.76 },
      { "from": "EVENT_AS_SUBSET", "to": "STEP_PROB_SETUP", "type":
  "requires", "confidence": 0.78 },
      { "from": "PROB_AS_RATIO", "to": "STEP_PROB_SETUP", "type":
  "requires", "confidence": 0.76 },
      { "from": "CLASSICAL_PROB_EQUIPROBABLE_CHECK", "to":
  "EQUIPROBABLE_DECISION", "type": "requires", "confidence": 0.77 },
      { "from": "EQUIPROBABLE_DECISION", "to": "STEP_PROB_SETUP", "type":
  "requires", "confidence": 0.74 },
      { "from": "COUNT_FAVORABLE_TOTAL", "to": "STEP_PROB_SETUP", "type":
  "requires", "confidence": 0.77 },
      { "from": "STEP_PROB_SETUP", "to": "PROB_BASIC", "type": "requires",
  "confidence": 0.72 },

      { "from": "INTERSECTION_UNION_MEANING", "to":
  "INCL_EXCL_2SET_MEANING", "type": "requires", "confidence": 0.76 },
      { "from": "CHECK_DOUBLE_COUNTING", "to": "INCL_EXCL_2SET_MEANING",
  "type": "requires", "confidence": 0.75 },
      { "from": "DISJOINT_EVENTS", "to": "DISJOINT_OR_OVERLAP_DECISION",
  "type": "requires", "confidence": 0.74 },
      { "from": "DISJOINT_OR_OVERLAP_DECISION", "to":
  "STEP_EVENT_OPS_INCL_EXCL", "type": "requires", "confidence": 0.72 },
      { "from": "EVENT_OPERATION_EXPRESSION", "to":
  "STEP_EVENT_OPS_INCL_EXCL", "type": "requires", "confidence": 0.7 },
      { "from": "STEP_EVENT_OPS_INCL_EXCL", "to": "STEP_INCL_EXCL_2SET",
  "type": "requires", "confidence": 0.73 },
      { "from": "INCL_EXCL_2SET_MEANING", "to": "APPLY_INCL_EXCL_2SET",
  "type": "requires", "confidence": 0.78 },
      { "from": "APPLY_INCL_EXCL_2SET", "to": "STEP_INCL_EXCL_2SET",
  "type": "requires", "confidence": 0.75 },
      { "from": "STEP_INCL_EXCL_2SET", "to": "PROB_BASIC", "type":
  "requires", "confidence": 0.69 },

      { "from": "COMPLEMENT_EVENT", "to": "COMPLEMENT_RULE", "type":
  "requires", "confidence": 0.72 },
      { "from": "COMPLEMENT_RULE", "to": "PROB_BASIC", "type": "requires",
  "confidence": 0.74 }
    ],
    "remove_edges": [],
    "notes": [
      { "claim": "R3 전이 산출물에서 참조되는 핵심 ID(예:
  COMB_AS_CHOOSE_R, FACTORIAL_ZERO_MEANING, STEP_* 등)는 본 파일의
  add_nodes/merge_aliases로 존재/정의가 확인되어야 한다.", "reason":
  "dev_handoff 단일 파일만으로도 병합·DAG 검증·충돌 해결을 진행할 수 있어
  야 한다.", "confidence": 0.74 },
      { "claim": "COMPLEMENT_EVENT(개념)과 COMPLEMENT_RULE(1-p 규칙)은
  alias 병합 없이 단계적으로 연결하는 편이 안전하다.", "reason": "개념과
  계산 규칙은 추상 수준/사용처가 달라 동일시하면 규칙 남용이 생길 수 있
  다.", "confidence": 0.78 },
      { "claim": "메타 수준 동형(예: 경계 케이스 패턴, 표현 전환 패턴)은
  requires(잠금)로 강제하지 않는 편이 안전하다.", "reason": "대체 경로가
  많아 잠금으로 강제하면 과잉 선행/혼동을 만들 수 있다.", "confidence":
  0.7 },
      { "claim": "STEP_SAMPLE_SPACE_BUILD→STEP_PROB_SETUP 경로를 두면 확률
  의 분모/분자 설정 오류가 감소한다.", "reason": "전체(표본공간) 고정→사건
  정의→전제(등확률) 확인→A/S 카운팅 순서가 흔들릴 때 분모가 바뀌거나 사건
  을 전체로 착각한다.", "confidence": 0.76 },
      { "claim": "EVENT_OPERATION_EXPRESSION과
  DISJOINT_OR_OVERLAP_DECISION을 포함배제 앞에 두면 부호·항 누락이 줄어든
  다.", "reason": "문장 조건을 집합식으로 고정하고 겹침 여부를 먼저 분기하
  면 -교집합이 공식 암기가 아니라 중복 보정으로 연결된다.", "confidence":
  0.75 }
    ]
  }

  ## Standards Tags (내부 태그)

  - 추가된 태그: COUNT_MUL_RULE_MEANING, COUNT_ADD_RULE_MEANING,
    ORDER_SENSITIVE_CHECK, PERM_AS_FILLING_SLOTS, PERM_PRODUCT_FORM,
    FACTORIAL_EXPANSION, FACTORIAL_ZERO_MEANING, FACTORIAL_CANCELLATION,
    STEP_PERM_DERIVE, COMB_AS_SUBSET, COMB_AS_CHOOSE_R,
    COMB_ORDER_IGNORED_REASON, COMB_FROM_PERM_DIVIDE, CHOOSE_THEN_ARRANGE,
    STEP_COMB_DERIVE, SYSTEMATIC_LISTING_BASIC, TREE_DIAGRAM_BASIC,
    STEP_SAMPLE_SPACE_BUILD, SET_NOTATION_BASICS, SAMPLE_SPACE_AS_SET,
    EVENT_AS_SUBSET, PROB_AS_RATIO, CLASSICAL_PROB_EQUIPROBABLE_CHECK,
    EQUIPROBABLE_DECISION, COUNT_FAVORABLE_TOTAL, STEP_PROB_SETUP,
    EVENT_OPERATION_EXPRESSION, INTERSECTION_UNION_MEANING,
    CHECK_DOUBLE_COUNTING, DISJOINT_EVENTS, VENN_DIAGRAM_2SET,
    DISJOINT_OR_OVERLAP_DECISION, STEP_EVENT_OPS_INCL_EXCL,
    INCL_EXCL_2SET_MEANING, APPLY_INCL_EXCL_2SET, STEP_INCL_EXCL_2SET,
    COMPLEMENT_EVENT, COMPLEMENT_RULE, TOTAL_MINUS_STRATEGY
  - 수정된 태그: COUNT_MUL_RULE(→COUNT_MUL_RULE_MEANING),
    COUNT_ADD_RULE(→COUNT_ADD_RULE_MEANING),
    PERM_MEANING_SLOT(→PERM_AS_FILLING_SLOTS),
    FACTORIAL_CONCEPT(→FACTORIAL_EXPANSION),
    FACTORIAL_ZERO(→FACTORIAL_ZERO_MEANING),
    COMB_MEANING_SUBSET(→COMB_AS_SUBSET),
    COMB_DERIVE_FROM_PERM_DIVIDE(→COMB_FROM_PERM_DIVIDE),
    SAMPLE_SPACE_DEFINE(→SAMPLE_SPACE_AS_SET),
    EVENT_DEFINE(→EVENT_AS_SUBSET),
    SET_INTERSECTION_UNION(→INTERSECTION_UNION_MEANING),
    INCLUSION_EXCLUSION_2SET_MEANING(→INCL_EXCL_2SET_MEANING)

  [/R1 Coverage Report]

  ###DONE:18f9bff97c###


› -> /mnt/c/Users/irron/Desktop/my/web_service_new/
  calculate_math/.agents/inbox/research_216a78baad.md


  49% context left



› Request 216a78baad: 아래 파일(티켓 지시)을 읽고 결과를 이
  터미널에 Output Format대로 그대로 출력해줘. 가능하면 repo
  파일을 생성/수정하지 말고, 마지막에 마커를 그대로 출력해.
  -> /mnt/c/Users/irron/Desktop/my/web_service_new/
  calculate_math/.agents/inbox/research_216a78baad.md



• Explored
  └ Read research_216a78baad.md, T1.md
                                                  

• Ran jq
  │ '.task_id, .plan.target_scope? // .plan.scope? // .pla
                            

─                                                           
                
    … +144 lines
                        
      "max_attempts_before_pm_patch"    


• ###BEGIN:216a78baad###

  ## Coverage Gap Report

  ### 1. 누락된 기초 개념 (최소 10개)

  | # | 개념명 | 누락 이유 | 심각도 |
  |---|--------|----------|--------|
  | 1 | 단일 버튼 UX(페이지 하단 채점하기/전체 제출) | 현재
  는 문제 카드별 제출만 존재해 “모든 문제 후 일괄 채점” 요구
  를 충족하지 못함 | 높음 |
  | 2 | 문제 카드별 제출 버튼 제거 | 요구사항 1)에서 제거가
  핵심인데 현재 UI는 per-problem 제출 흐름에 고정되어 있음 |
  높음 |
  | 3 | 채점하기 disabled 조건 정의(정규화 일관성) | 버튼
  disabled 기준이 normalizeNumericInput()과 일관되게 정의되
  어야 하나 현재는 해당 UX 자체가 없음 | 높음 |
  | 4 | “모든 문제 미입력” 판정 로직(allAnswered) |
  problems[] 전체를 기준으로 answerByProblemId가 모두 채워졌
  는지 판단하는 상태/계산이 필요(문제 수 변화/로딩 타이밍 포
  함) | 높음 |
  | 5 | 입력 엣지케이스(10개+) 목록/정의 | AC 요구(10개+)가
  문서/설계로 존재해야 하는데 현재 정의가 없음(예: "", "
  ", \"\\t\\n\", \",\", " , , ", "1,234", " 1 234 ", "0",
  "-0", "+", ".", "Infinity" 등) | 중 |
  | 6 | 일괄 채점 동작(전체 순회→채점→결과 맵 생성) | 현재는
  submitProblem(problem)로 단건 채점만 가능하며, 전체 문제를
  한 번에 채점해 결과를 고정하는 액션이 없음 | 높음 |
  | 7 | 채점 이후 UI 상태 정의(채점 전/후) | 현재는 결과가
  하나라도 있으면 점수 0/N이 항상 표시될 수 있고, “채점 전/
  후” 상태(예: hasGraded/isSubmitted) 기준이 없음 | 중 |
  | 8 | “채점 후 재입력” UX 정책 | bulk 채점 후 입력을 수정
  할 때 결과/점수의 일관성(자동 결과 초기화 vs “다시 채점”
  버튼) 정책이 필요하나 정의 없음 | 중 |
  | 9 | localStorage 저장 시점 변경(개별→일괄) | 현재는 개별
  제출 시 submissions를 merge 저장; 요구는 일괄 채점 후 답안
  +결과를 한 번에 저장 | 높음 |
  |10| 저장/복원 스키마 호환/마이그레이션 | 기존 키
  (curriculum-viewer:learn:lastResult:${nodeId})에 부분 제출
  데이터가 남아있을 수 있어 bulk 전환 시 호환 규칙이 필요 |
  높음 |
  |11| 초기화/다시 풀기(키 삭제 + 상태 리셋) | 요구사항 4)
  다시 풀기 버튼 및 저장된 결과/답안 삭제가 필요하나 현재 없
  음 | 높음 |
  |12| Out of Scope 가드레일 명시(무엇을 안 바꿀지) | 구현
  중 문제 타입 확장/서버 연동/커리큘럼 구조 변경으로 범위가
  새는 것을 막는 체크리스트가 필요 | 중 |

  ### 2. 과잉 난이도/불필요 선행 (최소 5개)

  | # | 개념명 | 과잉 이유 | 조치 제안 |
  |---|--------|----------|----------|
  | 1 | 서버 연동/DB 저장 | Out of Scope 위반이며
  localStorage 기반 요구를 흐림 | 금지(요구 범위 밖) |
  | 2 | 문제 타입 확장(서술형/객관식 등) | 이번 변경의 핵심
  은 “제출 UX/저장/복원”이며 타입 확장은 범위 밖 | 금지(향후
  별도 티켓) |
  | 3 | 문제은행 JSON 스키마 변경 | 현재는 problems_v1.json
  로딩으로 충분하며 스키마 변경은 회귀 위험만 큼 | 기존 스키
  마 유지 |
  | 4 | grading 로직 대개편(분수/근삿값/허용오차 등) | 요구
  는 제출 UX이며 채점 확장은 별도 사양 필요 |
  gradeNumericAnswer() 유지, 필요 시 후속 티켓 |
  | 5 | 대형 상태관리 도입(Redux/Zustand 등) | LearnPage 단
  일 화면 상태로 해결 가능, 도입은 과잉 | React state/
  useMemo로 해결 |
  | 6 | “입력 중 실시간 저장(autosave)” | 요구는 “채점 후 한
  번에 저장”이며 autosave는 UX/스키마를 복잡하게 함 | 이번
  범위에서 제외(필요 시 옵션) |

  ### 3. 학습 순서상 위험한 점프 (최소 5개)

  | # | From → To | 점프 이유 | 브릿지 제안 |
  |---|-----------|----------|------------|
  | 1 | 문제별 제출 제거 → bulk UX 미구현 | 제거만 하면 채점
  경로가 사라져 기능 공백 발생 | 단일 채점하기 버튼 +
  gradeAll 액션 먼저 추가 후 제거 |
  | 2 | disabled 판정(원문 입력 기준) → 실제 채점(정규화 기
  준) | " , " 같은 입력이 disabled 해제되거나 반대로 0이 미
  입력 처리되는 불일치 위험 | disabled는
  normalizeNumericInput(answer).length>0로 고정 |
  | 3 | 저장 시점 변경(개별→일괄) → 기존 localStorage 데이터
  무시 | 기존 submissions가 부분만 존재할 수 있어 복원/버튼
  상태가 꼬일 수 있음 | “legacy partial” 감지(개수/키) 후 초
  기화 또는 안내/정책 적용 |
  | 4 | 점수 표시(항상 0/N) → 채점 UX | 채점 전부터 점수가
  보이면 사용자가 이미 채점된 것으로 오해 | hasGraded 도입
  후 채점 후에만 점수/정답 표시 |
  | 5 | 채점 후 입력 수정 → 결과/점수 유지 | 입력과 결과가
  불일치(스테일) 상태가 생김 | 입력 변경 시 결과 초기화 또는
  버튼을 다시 채점으로 전환 |
  | 6 | 초기화(다시 풀기) 없음 → 상태 복원 유지 | 사용자가
  저장된 결과를 지울 방법이 없어 UX 막힘 | 다시 풀기(키 삭제
  +상태 리셋) 추가 |

  ## Graph Patch JSON

  {
    "researcher": "R1",
    "scope": "curriculum_viewer_learning_bulk_submit_v1",
    "add_nodes": [
      { "id": "LEARN_REMOVE_PER_PROBLEM_SUBMIT", "type":
  "micro", "name_ko": "문제 카드별 제출 버튼 제거",
  "domain": "FE", "rep": "P", "confidence": 0.85 },
      { "id": "LEARN_ADD_BULK_GRADE_BUTTON", "type":
  "micro", "name_ko": "페이지 하단 단일 버튼(채점하기/전체
  제출) 추가", "domain": "FE", "rep": "P", "confidence":
  0.85 },
      { "id": "LEARN_DISABLED_USES_NORMALIZE_NUMERIC_INPUT",
  "type": "micro", "name_ko": "disabled 판정 기준을
  normalizeNumericInput과 일치", "domain": "FE", "rep": "C",
  "confidence": 0.82 },
      { "id": "LEARN_ALL_ANSWERED_NORMALIZED", "type":
  "micro", "name_ko": "모든 문제 미입력 판정(allAnswered, 정
  규화 기반)", "domain": "FE", "rep": "P", "confidence":
  0.82 },
      { "id": "LEARN_BULK_GRADE_ALL_ACTION", "type":
  "micro", "name_ko": "일괄 채점 액션(전체 순회
  →gradeNumericAnswer)", "domain": "FE", "rep": "P",
  "confidence": 0.84 },
      { "id": "LEARN_GRADED_STATE_FLAG", "type": "micro",
  "name_ko": "채점 전/후 상태 플래그(hasGraded/isSubmitted)
  정의", "domain": "FE", "rep": "C", "confidence": 0.78 },
      { "id": "LEARN_SCORE_AND_RESULT_GATING", "type":
  "micro", "name_ko": "채점 후에만 점수/정오/정답 표시(게이
  팅)", "domain": "FE", "rep": "P", "confidence": 0.76 },
      { "id": "LEARN_LOCALSTORAGE_SAVE_BULK", "type":
  "micro", "name_ko": "일괄 채점 후 답안+결과를 한 번에 저
  장", "domain": "FE", "rep": "P", "confidence": 0.8 },
      { "id": "LEARN_LOCALSTORAGE_MIGRATION_LEGACY_PARTIAL",
  "type": "micro", "name_ko": "기존 부분 제출(submissions 일
  부) 데이터 호환/마이그레이션 규칙", "domain": "FE", "rep":
  "C", "confidence": 0.74 },
      { "id": "LEARN_RESET_CLEAR_STORAGE", "type": "micro",
  "name_ko": "다시 풀기(초기화): 저장 키 삭제 + 상태 리셋",
  "domain": "FE", "rep": "P", "confidence": 0.82 },
      { "id": "LEARN_AFTER_GRADE_EDIT_POLICY", "type":
  "micro", "name_ko": "채점 후 재입력 정책(결과 초기화 또는
  다시 채점)", "domain": "UX", "rep": "C", "confidence":
  0.7 },
      { "id": "LEARN_DISABLED_EDGECASES_12", "type":
  "micro", "name_ko": "disabled 판정 입력 엣지케이스 12종(빈
  값/공백/콤마/0/부호/소수점 등)", "domain": "QA", "rep":
  "C", "confidence": 0.76 }
    ],
    "merge_aliases": [],
    "add_edges": [
      { "from":
  "LEARN_DISABLED_USES_NORMALIZE_NUMERIC_INPUT", "to":
  "LEARN_ALL_ANSWERED_NORMALIZED", "type": "requires",
  "confidence": 0.82 },
      { "from": "LEARN_ALL_ANSWERED_NORMALIZED", "to":
  "LEARN_ADD_BULK_GRADE_BUTTON", "type": "requires",
  "confidence": 0.78 },
      { "from": "LEARN_ADD_BULK_GRADE_BUTTON", "to":
  "LEARN_BULK_GRADE_ALL_ACTION", "type": "requires",
  "confidence": 0.8 },
      { "from": "LEARN_BULK_GRADE_ALL_ACTION", "to":
  "LEARN_LOCALSTORAGE_SAVE_BULK", "type": "requires",
  "confidence": 0.8 },
      { "from": "LEARN_GRADED_STATE_FLAG", "to":
  "LEARN_SCORE_AND_RESULT_GATING", "type": "requires",
  "confidence": 0.76 },
      { "from": "LEARN_BULK_GRADE_ALL_ACTION", "to":
  "LEARN_GRADED_STATE_FLAG", "type": "requires",
  "confidence": 0.74 },
      { "from":
  "LEARN_LOCALSTORAGE_MIGRATION_LEGACY_PARTIAL", "to":
  "LEARN_LOCALSTORAGE_SAVE_BULK", "type": "requires",
  "confidence": 0.74 },
      { "from": "LEARN_RESET_CLEAR_STORAGE", "to":
  "LEARN_LOCALSTORAGE_SAVE_BULK", "type": "requires",
  "confidence": 0.78 },
      { "from": "LEARN_AFTER_GRADE_EDIT_POLICY", "to":
  "LEARN_SCORE_AND_RESULT_GATING", "type": "requires",
  "confidence": 0.7 },
      { "from": "LEARN_DISABLED_EDGECASES_12", "to":
  "LEARN_ALL_ANSWERED_NORMALIZED", "type": "requires",
  "confidence": 0.76 },
      { "from": "LEARN_ADD_BULK_GRADE_BUTTON", "to":
  "LEARN_REMOVE_PER_PROBLEM_SUBMIT", "type": "requires",
  "confidence": 0.72 }
    ],
    "remove_edges": [],
    "notes": [
      { "claim": "현재 LearnPage는 문제 카드별 제출
  (submitProblem)로 단건 채점/단건 저장을 수행하며,
  StoredResult는 { nodeId, updatedAt, submissions:
  { [problemId]: { submitted, isCorrect } } } 형태이다.",
  "reason": "LearnPage.tsx에서 gradeNumericAnswer 호출 및
  localStorage merge 저장 로직과 StoredResult 타입 정의가 확
  인된다.", "confidence": 0.86 },
      { "claim": "bulk UX의 disabled 판정은
  normalizeNumericInput(answer).length>0 기준으로 모든
  problems가 채워졌는지 검사해야 grading과 일관된다.",
  "reason": "grading.ts의 normalizeNumericInput은 공백/콤마
  제거를 수행하므로, 동일 기준을 쓰지 않으면 '미입력/입력됨'
  판단이 채점 결과와 어긋난다.", "confidence": 0.82 },
      { "claim": "점수/정오/정답 표시는 채점 전/후 상태
  (hasGraded 등)로 게이팅하지 않으면 채점 전에도 0/N이 노출
  되는 혼란이 발생할 수 있다.", "reason": "현재 score 계산은
  problems.length만으로 0/N을 만들 수 있어 bulk 전환 시 '채
  점 전' 상태를 별도로 분리하는 것이 안전하다.",
  "confidence": 0.74 },
      { "claim": "기존 localStorage에 부분 제출(submissions
  일부) 데이터가 남아 있을 수 있으므로 bulk 전환 시 호환 규
  칙(초기화/마이그레이션/안내)이 필요하다.", "reason": "기존
  구현은 문제별 제출 시마다 submissions를 merge 저장하므로,
  저장된 문제 수가 전체 problems 수보다 적은 legacy 데이터가
  자연스럽게 생성된다.", "confidence": 0.78 },
      { "claim": "Out of Scope(문제 타입 확장/서버 연동/커리
  큘럼 구조 변경)를 피하고 LearnPage.tsx 중심으로 제출 UX/저
  장 시점만 바꾸는 것이 회귀 위험이 낮다.", "reason":
  "task.md가 수정 중심 파일과 비범위를 명시하며, 현재 문제
  로딩/채점 로직은 요구 충족에 충분한 기반을 제공한다.",
  "confidence": 0.76 }
    ]
  }

  ## Standards Tags (내부 태그)

  - 추가된 태그: LEARN_ADD_BULK_GRADE_BUTTON,
    LEARN_REMOVE_PER_PROBLEM_SUBMIT,
    LEARN_ALL_ANSWERED_NORMALIZED,
    LEARN_DISABLED_USES_NORMALIZE_NUMERIC_INPUT,
    LEARN_DISABLED_EDGECASES_12,
    LEARN_BULK_GRADE_ALL_ACTION, LEARN_GRADED_STATE_FLAG,
    LEARN_SCORE_AND_RESULT_GATING,
    LEARN_LOCALSTORAGE_SAVE_BULK,
    LEARN_LOCALSTORAGE_MIGRATION_LEGACY_PARTIAL,
    LEARN_RESET_CLEAR_STORAGE, LEARN_AFTER_GRADE_EDIT_POLICY
  - 수정된 태그:
    LEARN_SINGLE_SUBMIT_FLOW(→LEARN_BULK_SUBMIT_FLOW),
    LEARN_STORAGE_UPDATE_PER_PROBLEM(→LEARN_STORAGE_SAVE_AFT
    ER_BULK_GRADE)

  [/R1 Coverage Report]

  ###DONE:216a78baad###


› -> /mnt/c/Users/irron/Desktop/my/web_service_new/
  calculate_math/.agents/inbox/research_c49dfc24b0.md


  44% context left



› Request c49dfc24b0: 아래 파일(티켓 지시)을 읽고 결과를 이
  터미널에 Output Format대로 그대로 출력해줘. 가능하면 repo
  파일을 생성/수정하지 말고, 마지막에 마커를 그대로 출력해.
  -> /mnt/c/Users/irron/Desktop/my/web_service_new/
  calculate_math/.agents/inbox/research_c49dfc24b0.md


                  Ou
•         
                               

─                                                           
  45% context left · ? for shortcuts


• ###BEGIN:c49dfc24b0###

  ## Coverage Gap Report

  ### 1. 누락된 기초 개념 (최소 10개)

  | # | 개념명 | 누락 이유 | 심각도 |
  |---|--------|----------|--------|
  | 1 | 현재 동작 1페이지 요약(상태 흐름/데이터 스키마) |
  LearnPage는 문제별 제출→단건 채점→localStorage merge 저장
  흐름이며 StoredResult{submissions} 계약이 기준점인데, 이를
  명시 요약하지 않으면 변경 시 회귀가 발생 | 높음 |
  | 2 | 문제 카드별 제출 버튼 제거 | 요구사항 핵심(개별 제출
  제거)인데 현재 UI는 per-problem 제출에 고정 | 높음 |
  | 3 | 페이지 하단 단일 버튼 채점하기(전체 제출) | 일괄 채
  점 UX의 유일한 진입점이 필요하나 현재 없음 | 높음 |
  | 4 | 채점하기 disabled 기준(정규화 일관성) | disabled 판
  정이 normalizeNumericInput()과 불일치하면 " , " 같은 입력
  에서 버튼 활성/비활성이 채점과 엇갈림 | 높음 |
  | 5 | allAnswered 계산(정규화 기반) | “모든 문제 답 입력
  전까지 disabled”를 problems[] 기준으로 안정적으로 계산하는
  로직이 필요(로딩/문제수 변화 포함) | 높음 |
  | 6 | 입력 엣지케이스 10+ 정의 | AC 요구(10개+) 충족을 위
  해 최소 벡터가 필요: "", "   ", "\t\n", ",", " , , ",
  "1,234", " 1 234 ", "0", "-0", "+", ".", "Infinity" | 중 |
  | 7 | 일괄 채점 액션(전체 순회→gradeNumericAnswer) | 현재
  는 단건 submitProblem(problem)만 존재해 “한 번에 전체 채
  점” 동작이 없음 | 높음 |
  | 8 | 채점 전/후 상태 플래그(hasGraded/isSubmitted) | 채점
  전에도 점수/정답이 노출되거나(0/N) 저장/복원 시 상태가 꼬
  이는 것을 막기 위한 상태 기준이 필요 | 중 |
  | 9 | 문제별 결과 표시(정오/정답) 정책(일괄 채점 후) | 요
  구는 채점 후 각 문제 카드에 정오/정답 표시인데, 현재는 단
  건 제출 시에만 결과가 생김 | 높음 |
  |10| 총점 X/N 표시 정책(채점 후에만) | 상단 점수는 채점 후
  에만 의미가 있으나 현재 구조는 “결과 일부 존재”만으로 0/N
  노출 가능 | 중 |
  |11| 저장/복원 계약(답안+채점결과를 한 번에 저장/복원) |
  요구는 일괄 채점 후 저장/복원인데, 현재는 문제별 제출 시마
  다 submissions를 merge 저장 | 높음 |
  |12| legacy partial(기존 부분 제출 데이터) 호환/마이그레이
  션 | 기존 데이터가 일부 문제만 채점/저장된 형태로 남아 있
  을 수 있어 bulk 전환 시 복원/disabled/표시가 꼬임 | 높음 |
  |13| 다시 풀기(초기화): 키 삭제 + UI 상태 리셋 | 요구사항
  4)인데 현재는 사용자가 저장된 결과/답안을 삭제할 UX가 없음
  | 높음 |
  |14| 채점 후 재입력 정책(스테일 결과 처리) | 채점 후 입력
  변경 시 결과/점수와 입력이 불일치하는 스테일 상태가 발생할
  수 있어 정책이 필요 | 중 |

  ### 2. 과잉 난이도/불필요 선행 (최소 5개)

  | # | 개념명 | 과잉 이유 | 조치 제안 |
  |---|--------|----------|----------|
  | 1 | 서버 연동/DB 저장 | Out of Scope(서버 연동) 위반이며
  localStorage 요구를 흐림 | 금지(이번 범위 밖) |
  | 2 | 문제 타입 확장(서술형/객관식 등) | 이번 티켓은 제출
  UX/저장/복원이며 타입 확장은 별도 사양 필요 | 금지(후속 티
  켓) |
  | 3 | grading 대개편(허용오차/분수/근삿값) | 요구는 일괄
  제출 UX이며 채점 정책 변경은 회귀 위험만 증대 | 기존
  gradeNumericAnswer() 유지 |
  | 4 | 문제은행 JSON 스키마 변경 | 로딩/데이터 구조 변경은
  범위 밖이며 회귀 위험 큼 | 기존 problems_v1.json 유지 |
  | 5 | 전역 상태관리 도입(Redux/Zustand 등) | LearnPage 단
  일 화면 상태로 충분, 도입은 과잉 | React state/useMemo로
  해결 |
  | 6 | 입력 중 실시간 autosave | 요구는 “채점 후 한 번에 저
  장”이며 autosave는 정책/호환을 복잡화 | 이번 범위에서 제외
  |

  ### 3. 학습 순서상 위험한 점프 (최소 5개)

  | # | From → To | 점프 이유 | 브릿지 제안 |
  |---|-----------|----------|------------|
  | 1 | 문제별 제출 제거 → bulk 제출 미구현 | 제거만 하면 채
  점/저장 경로가 사라져 기능 공백 발생 | 단일 채점하기
  +gradeAll 구현 후 제거 |
  | 2 | disabled(원문 입력 기준) → 채점(정규화 기준) | " , "
  같은 케이스에서 버튼 활성/비활성과 채점 결과가 불일치 |
  disabled 판정은 normalizeNumericInput(answer).length>0로
  고정 |
  | 3 | 일괄 저장(한 번에 저장) → 기존 partial 데이터 복원 |
  legacy partial이 “채점됨”처럼 보이거나 allAnswered와 충돌
  | partial 감지 후 정책(초기화/답안만 복원/재채점 요구) 정
  의 |
  | 4 | 점수 표시(항상 0/N 가능) → 채점 UX | 채점 전 0/N 노
  출은 “이미 채점됨” 오해 유발 | hasGraded 도입 후 채점 후에
  만 점수/정답 표시 |
  | 5 | 채점 후 입력 수정 → 결과/점수 유지 | 입력과 결과가
  불일치(스테일) 상태가 발생 | 입력 변경 시 결과 초기화 또는
  버튼을 다시 채점으로 전환 |
  | 6 | 초기화(키 삭제만) → UI 상태 유지 | localStorage만 지
  우면 화면은 이전 결과/답안을 계속 표시 | 키 삭제 +
  answerByProblemId/resultByProblemId/hasGraded 리셋 |

  ## Graph Patch JSON

  {
    "researcher": "R1",
    "scope": "curriculum_viewer_learning_bulk_submit_v1",
    "add_nodes": [
      { "id": "LEARN_MAP_CURRENT_SUBMIT_FLOW", "type":
  "micro", "name_ko": "현재 per-problem 제출/저장 흐름 요
  약", "domain": "FE", "rep": "C", "confidence": 0.86 },
      { "id": "LEARN_REMOVE_PER_PROBLEM_SUBMIT", "type":
  "micro", "name_ko": "문제 카드별 제출 버튼 제거",
  "domain": "FE", "rep": "P", "confidence": 0.85 },
      { "id": "LEARN_ADD_BULK_GRADE_BUTTON", "type":
  "micro", "name_ko": "페이지 하단 단일 버튼(채점하기/전체
  제출) 추가", "domain": "FE", "rep": "P", "confidence":
  0.85 },
      { "id": "LEARN_DISABLED_USES_NORMALIZE_NUMERIC_INPUT",
  "type": "micro", "name_ko": "disabled 판정 기준을
  normalizeNumericInput과 일치", "domain": "FE", "rep": "C",
  "confidence": 0.82 },
      { "id": "LEARN_ALL_ANSWERED_NORMALIZED", "type":
  "micro", "name_ko": "allAnswered 계산(정규화 기반)",
  "domain": "FE", "rep": "P", "confidence": 0.82 },
      { "id": "LEARN_DISABLED_EDGECASES_12", "type":
  "micro", "name_ko": "disabled/정규화 입력 엣지케이스 12종
  정의", "domain": "QA", "rep": "C", "confidence": 0.76 },
      { "id": "LEARN_BULK_GRADE_ALL_ACTION", "type":
  "micro", "name_ko": "일괄 채점 액션(전체 순회
  →gradeNumericAnswer)", "domain": "FE", "rep": "P",
  "confidence": 0.84 },
      { "id": "LEARN_GRADED_STATE_FLAG", "type": "micro",
  "name_ko": "채점 전/후 상태 플래그(hasGraded/isSubmitted)
  정의", "domain": "FE", "rep": "C", "confidence": 0.78 },
      { "id": "LEARN_SHOW_PER_PROBLEM_RESULT", "type":
  "micro", "name_ko": "문제별 정오/정답 표시(일괄 채점 후)",
  "domain": "FE", "rep": "P", "confidence": 0.8 },
      { "id": "LEARN_SCORE_SUMMARY_CALC", "type": "micro",
  "name_ko": "총점 X/N 계산(결과 맵 기반)", "domain": "FE",
  "rep": "P", "confidence": 0.78 },
      { "id": "LEARN_SCORE_AND_RESULT_GATING", "type":
  "micro", "name_ko": "채점 후에만 점수/정오/정답 표시(게이
  팅)", "domain": "FE", "rep": "P", "confidence": 0.76 },
      { "id": "LEARN_STORE_RESULT_SCHEMA_BULK", "type":
  "micro", "name_ko": "bulk 저장 스키마(답안+결과) 계약 정
  의", "domain": "FE", "rep": "C", "confidence": 0.76 },
      { "id": "LEARN_LOCALSTORAGE_SAVE_BULK", "type":
  "micro", "name_ko": "일괄 채점 후 답안+결과를 한 번에 저
  장", "domain": "FE", "rep": "P", "confidence": 0.8 },
      { "id": "LEARN_LOCALSTORAGE_RESTORE_BULK", "type":
  "micro", "name_ko": "재진입/새로고침 시 결과/답안 복원",
  "domain": "FE", "rep": "P", "confidence": 0.78 },
      { "id": "LEARN_LOCALSTORAGE_MIGRATION_LEGACY_PARTIAL",
  "type": "micro", "name_ko": "기존 부분 제출 데이터 호환/마
  이그레이션 규칙", "domain": "FE", "rep": "C",
  "confidence": 0.74 },
      { "id": "LEARN_RESET_CLEAR_STORAGE", "type": "micro",
  "name_ko": "다시 풀기: localStorage 키 삭제", "domain":
  "FE", "rep": "P", "confidence": 0.82 },
      { "id": "LEARN_RESET_UI_STATE", "type": "micro",
  "name_ko": "다시 풀기: UI 상태 리셋(answerByProblemId/
  results/hasGraded)", "domain": "FE", "rep": "P",
  "confidence": 0.78 },
      { "id": "LEARN_AFTER_GRADE_EDIT_POLICY", "type":
  "micro", "name_ko": "채점 후 재입력 정책(결과 초기화 또는
  다시 채점)", "domain": "UX", "rep": "C", "confidence":
  0.7 }
    ],
    "merge_aliases": [],
    "add_edges": [
      { "from":
  "LEARN_DISABLED_USES_NORMALIZE_NUMERIC_INPUT", "to":
  "LEARN_ALL_ANSWERED_NORMALIZED", "type": "requires",
  "confidence": 0.82 },
      { "from": "LEARN_ALL_ANSWERED_NORMALIZED", "to":
  "LEARN_ADD_BULK_GRADE_BUTTON", "type": "requires",
  "confidence": 0.7 },
      { "from": "LEARN_ADD_BULK_GRADE_BUTTON", "to":
  "LEARN_BULK_GRADE_ALL_ACTION", "type": "requires",
  "confidence": 0.8 },
      { "from": "LEARN_BULK_GRADE_ALL_ACTION", "to":
  "LEARN_GRADED_STATE_FLAG", "type": "requires",
  "confidence": 0.74 },
      { "from": "LEARN_GRADED_STATE_FLAG", "to":
  "LEARN_SCORE_AND_RESULT_GATING", "type": "requires",
  "confidence": 0.76 },
      { "from": "LEARN_GRADED_STATE_FLAG", "to":
  "LEARN_SHOW_PER_PROBLEM_RESULT", "type": "requires",
  "confidence": 0.74 },
      { "from": "LEARN_BULK_GRADE_ALL_ACTION", "to":
  "LEARN_SCORE_SUMMARY_CALC", "type": "requires",
  "confidence": 0.78 },
      { "from": "LEARN_STORE_RESULT_SCHEMA_BULK", "to":
  "LEARN_LOCALSTORAGE_SAVE_BULK", "type": "requires",
  "confidence": 0.8 },
      { "from": "LEARN_STORE_RESULT_SCHEMA_BULK", "to":
  "LEARN_LOCALSTORAGE_RESTORE_BULK", "type": "requires",
  "confidence": 0.8 },
      { "from": "LEARN_BULK_GRADE_ALL_ACTION", "to":
  "LEARN_LOCALSTORAGE_SAVE_BULK", "type": "requires",
  "confidence": 0.8 },
      { "from":
  "LEARN_LOCALSTORAGE_MIGRATION_LEGACY_PARTIAL", "to":
  "LEARN_LOCALSTORAGE_RESTORE_BULK", "type": "requires",
  "confidence": 0.74 },
      { "from": "LEARN_LOCALSTORAGE_RESTORE_BULK", "to":
  "LEARN_GRADED_STATE_FLAG", "type": "requires",
  "confidence": 0.72 },
      { "from": "LEARN_LOCALSTORAGE_SAVE_BULK", "to":
  "LEARN_RESET_CLEAR_STORAGE", "type": "requires",
  "confidence": 0.74 },
      { "from": "LEARN_RESET_CLEAR_STORAGE", "to":
  "LEARN_RESET_UI_STATE", "type": "requires", "confidence":
  0.78 },
      { "from": "LEARN_AFTER_GRADE_EDIT_POLICY", "to":
  "LEARN_SCORE_AND_RESULT_GATING", "type": "requires",
  "confidence": 0.7 },
      { "from": "LEARN_BULK_GRADE_ALL_ACTION", "to":
  "LEARN_REMOVE_PER_PROBLEM_SUBMIT", "type": "requires",
  "confidence": 0.72 }
    ],
    "remove_edges": [],
    "notes": [
      { "claim": "현재 LearnPage는 문제 카드별 제출
  (submitProblem)로 단건 채점 후 submissions를 localStorage
  키(curriculum-viewer:learn:lastResult:${nodeId})에 merge
  저장한다.", "reason": "LearnPage.tsx에서
  StoredResult{submissions} 타입과 submitProblem의
  setItem(JSON.stringify(payload)) 흐름이 확인된다.",
  "confidence": 0.86 },
      { "claim": "disabled 판정은 normalizeNumericInput과 동
  일 기준으로 정의해야 한다.", "reason": "grading.ts의
  normalizeNumericInput은 공백/콤마 제거를 수행하므로,
  disabled가 원문 기준이면 '입력됨/미입력'이 채점과 불일치한
  다.", "confidence": 0.82 },
      { "claim": "bulk 전환 시 legacy partial(일부 문제만
  submissions에 존재) 데이터가 자연스럽게 존재하므로 호환/마
  이그레이션 정책이 필요하다.", "reason": "기존 구현은 문제
  별 제출 시마다 submissions를 누적 저장하므로 전체 문제 수
  보다 적은 저장 데이터가 생성된다.", "confidence": 0.78 },
      { "claim": "점수/정오/정답 표시는 hasGraded 같은 상태
  로 게이팅해야 한다.", "reason": "채점 전 0/N 노출 및 저장/
  복원 시 표시 기준 혼란을 막기 위해 채점 전/후를 분리해야
  한다.", "confidence": 0.74 },
      { "claim": "다시 풀기는 localStorage 키 삭제와 UI 상태
  리셋을 함께 수행해야 한다.", "reason": "키 삭제만으로는 화
  면에 남아있는 answer/result 상태가 즉시 초기화되지 않아 UX
  가 어긋난다.", "confidence": 0.78 }
    ]
  }

  ## Standards Tags (내부 태그)

  - 추가된 태그: LEARN_MAP_CURRENT_SUBMIT_FLOW,
    LEARN_REMOVE_PER_PROBLEM_SUBMIT,
    LEARN_ADD_BULK_GRADE_BUTTON,
    LEARN_DISABLED_USES_NORMALIZE_NUMERIC_INPUT,
    LEARN_ALL_ANSWERED_NORMALIZED,
    LEARN_DISABLED_EDGECASES_12,
    LEARN_BULK_GRADE_ALL_ACTION, LEARN_GRADED_STATE_FLAG,
    LEARN_SHOW_PER_PROBLEM_RESULT, LEARN_SCORE_SUMMARY_CALC,
    LEARN_SCORE_AND_RESULT_GATING,
    LEARN_STORE_RESULT_SCHEMA_BULK,
    LEARN_LOCALSTORAGE_SAVE_BULK,
    LEARN_LOCALSTORAGE_RESTORE_BULK,
    LEARN_LOCALSTORAGE_MIGRATION_LEGACY_PARTIAL,
    LEARN_RESET_CLEAR_STORAGE, LEARN_RESET_UI_STATE,
    LEARN_AFTER_GRADE_EDIT_POLICY
  - 수정된 태그: (없음)

  [/R1 Coverage Report]

  ###DONE:c49dfc24b0###


› -> /mnt/c/Users/irron/Desktop/my/web_service_new/
  calculate_math/.agents/inbox/research_cd88845efc.md


  40% context left



› Request cd88845efc: 아래 파일(티켓 지시)을 읽고 결과를 이
  터미널에 Output Format대로 그대로 출력해줘. 가능하면 repo
  파일을 생성/수정하지 말고, 마지막에 마커를 그대로 출력해.
  -> /mnt/c/Users/irron/Desktop/my/web_service_new/
  calculate_math/.agents/inbox/research_cd88845efc.md


    rki
•         
                               

─                                                           
  42% context left · ? for shortcuts


• ###BEGIN:cd88845efc###

  ## Coverage Gap Report

  ### 1. 누락된 기초 개념 (최소 10개)

  | # | 개념명 | 누락 이유 | 심각도 |
  |---|--------|----------|--------|
  | 1 | 현재 동작/상태 흐름 1페이지 요약 | LearnPage는 “문제
  별 제출→단건 채점→localStorage merge 저장” 구조인데, 이를
  기준선으로 요약하지 않으면 bulk 전환 시 회귀 원인을 추적하
  기 어려움 | 높음 |
  | 2 | StoredResult 스키마 명시(현재: submissions) | 저장/
  복원 계약이 { nodeId, updatedAt, submissions }인데 bulk 저
  장으로 바뀔 때 호환/마이그레이션 규칙이 필요 | 높음 |
  | 3 | 단일 버튼 채점하기 UX(하단 고정) | 요구사항은 “모든
  문제 입력 후 한 번에 제출”인데 현재 UI는 문제 카드별 제출
  만 존재 | 높음 |
  | 4 | 채점하기 disabled 기준(정규화 일치) | disabled 판정
  이 normalizeNumericInput()과 일관되지 않으면 " , " 같은 입
  력에서 활성/비활성이 채점과 불일치 | 높음 |
  | 5 | allAnswered 계산(정규화 기반) | problems[] 전체에 대
  해 정규화 후 빈 값 여부를 확인해야 “모든 문제 입력 전까지
  disabled”를 구현 가능 | 높음 |
  | 6 | 입력 엣지케이스 10+ 정의 | AC 요구(10개+) 충족을 위
  해 최소 벡터가 필요(빈값/공백/콤마/0/부호/소수점/Infinity
  등) | 중 |
  | 7 | 일괄 채점 액션(전체 순회→gradeNumericAnswer) | 현재
  는 단건 submitProblem만 있어 “한 번에 전체 채점” 동작이 없
  음 | 높음 |
  | 8 | 채점 전/후 상태 플래그(hasGraded/isSubmitted) | 채점
  전 0/N 노출, 복원 후 표시 기준 혼란을 막기 위해 채점 전/후
  상태를 분리해야 함 | 중 |
  | 9 | 점수/정오/정답 표시 게이팅 | 채점 후에만 결과를 노출
  해야 사용자 혼란(채점 전 점수 노출/legacy partial) 최소화
  | 중 |
  |10| bulk 저장(답안+결과를 한 번에 저장) | 요구사항 3) 저
  장 시점이 “개별 제출”이 아니라 “일괄 채점 후”로 바뀌어야
  함 | 높음 |
  |11| bulk 복원(재진입/새로고침) | 저장된 답안/결과를 한 번
  에 복원해 UI 상태를 재구성해야 함 | 높음 |
  |12| legacy partial 호환/마이그레이션 정책 | 기존 per-
  problem 저장은 submissions 일부만 남기는 데이터가 자연스럽
  게 생성되므로 bulk 전환 후 충돌 방지 정책이 필요 | 높음 |
  |13| 초기화(다시 풀기): localStorage 삭제 + UI 리셋 | 요구
  사항 4)인데 현재 사용자가 저장된 결과/답안을 지울 방법이
  없음 | 높음 |
  |14| strict JSON 출력 가드(줄바꿈 금지) | reviewer 지적처
  럼 문자열 내부 줄바꿈이 있으면 자동 파싱/병합이 실패하므로
  산출물 JSON은 strict JSON이어야 함 | 높음 |

  ### 2. 과잉 난이도/불필요 선행 (최소 5개)

  | # | 개념명 | 과잉 이유 | 조치 제안 |
  |---|--------|----------|----------|
  | 1 | 서버 연동/DB 저장 | Out of Scope 위반이며
  localStorage 요구를 흐림 | 금지 |
  | 2 | 문제 타입 확장(서술형/객관식) | 이번 티켓은 제출 UX/
  저장/복원이며 타입 확장은 별도 설계 필요 | 금지(후속 티켓)
  |
  | 3 | 채점 정책 확장(허용오차/분수/근사) | bulk 제출 UX와
  무관하며 회귀 위험만 증가 | gradeNumericAnswer() 유지 |
  | 4 | 문제은행 스키마 변경 | 데이터 구조 변경은 범위 밖이
  며 회귀 위험 큼 | problems_v1.json 유지 |
  | 5 | 전역 상태관리 도입(Redux/Zustand) | LearnPage 단일
  화면 상태로 충분 | 도입 금지 |
  | 6 | autosave(입력 즉시 저장) | 요구는 “채점 후 한 번에
  저장”이며 호환/정책을 복잡화 | 제외 |

  ### 3. 학습 순서상 위험한 점프 (최소 5개)

  | # | From → To | 점프 이유 | 브릿지 제안 |
  |---|-----------|----------|------------|
  | 1 | 문제별 제출 제거 → bulk 액션/버튼 미구현 | 제거만 하
  면 채점/저장 경로가 사라져 기능 공백 발생 | 채점하기
  +gradeAll 구현 후 제거 |
  | 2 | disabled(원문 기준) → 채점(정규화 기준) | " , " 등에
  서 활성/비활성과 채점이 불일치해 UX 붕괴 | disabled는
  normalizeNumericInput(answer).length>0로 통일 |
  | 3 | bulk 저장 도입 → legacy partial 복원 | 기존
  submissions 일부만 저장된 데이터가 bulk 상태/표시와 충돌 |
  legacy partial 감지 후 정책(초기화/답안만 복원/재채점 유
  도) |
  | 4 | 점수 표시(항상 0/N 가능) → 채점 UX | 채점 전 점수 노
  출은 “이미 채점됨” 오해 유발 | hasGraded 도입 후 채점 후에
  만 점수/정답 표시 |
  | 5 | 채점 후 입력 수정 → 결과 유지 | 입력과 결과가 불일치
  (스테일) 상태 발생 | 입력 변경 시 결과 초기화 또는 다시 채
  점 플로우 |
  | 6 | 초기화(키 삭제만) → UI 상태 유지 | 저장소만 지우면
  화면에 남아있는 answer/result/flags가 그대로 | 키 삭제 +
  UI 상태 리셋 동시 수행 |

  ## Graph Patch JSON

  {
    "researcher": "R1",
    "scope": "curriculum_viewer_learning_bulk_submit_v1",
    "add_nodes": [
      { "id": "LEARN_MAP_CURRENT_SUBMIT_FLOW", "type":
  "micro", "name_ko": "현재 per-problem 제출/저장 흐름 1페이
  지 요약", "domain": "FE", "rep": "C", "confidence":
  0.86 },
      { "id": "LEARN_DOCUMENT_STORED_RESULT_SCHEMA", "type":
  "micro", "name_ko": "StoredResult/ submisions 스키마 문서
  화", "domain": "FE", "rep": "C", "confidence": 0.82 },
      { "id": "LEARN_REMOVE_PER_PROBLEM_SUBMIT", "type":
  "micro", "name_ko": "문제 카드별 제출 버튼 제거",
  "domain": "FE", "rep": "P", "confidence": 0.85 },
      { "id": "LEARN_ADD_BULK_GRADE_BUTTON", "type":
  "micro", "name_ko": "페이지 하단 단일 버튼(채점하기/전체
  제출) 추가", "domain": "FE", "rep": "P", "confidence":
  0.85 },
      { "id": "LEARN_DISABLED_USES_NORMALIZE_NUMERIC_INPUT",
  "type": "micro", "name_ko": "disabled 판정 기준을
  normalizeNumericInput과 일치", "domain": "FE", "rep": "C",
  "confidence": 0.82 },
      { "id": "LEARN_ALL_ANSWERED_NORMALIZED", "type":
  "micro", "name_ko": "allAnswered 계산(정규화 기반)",
  "domain": "FE", "rep": "P", "confidence": 0.82 },
      { "id": "LEARN_DISABLED_EDGECASES_12", "type":
  "micro", "name_ko": "입력 엣지케이스 12종 정의(빈값/공백/
  콤마/0/부호/소수점 등)", "domain": "QA", "rep": "C",
  "confidence": 0.76 },
      { "id": "LEARN_BULK_GRADE_ALL_ACTION", "type":
  "micro", "name_ko": "일괄 채점 액션(전체 순회
  →gradeNumericAnswer)", "domain": "FE", "rep": "P",
  "confidence": 0.84 },
      { "id": "LEARN_GRADED_STATE_FLAG", "type": "micro",
  "name_ko": "채점 전/후 상태 플래그(hasGraded/isSubmitted)
  정의", "domain": "FE", "rep": "C", "confidence": 0.78 },
      { "id": "LEARN_SCORE_AND_RESULT_GATING", "type":
  "micro", "name_ko": "채점 후에만 점수/정오/정답 표시(게이
  팅)", "domain": "FE", "rep": "P", "confidence": 0.76 },
      { "id": "LEARN_STORE_RESULT_SCHEMA_BULK", "type":
  "micro", "name_ko": "bulk 저장 스키마(답안+결과) 계약 정
  의", "domain": "FE", "rep": "C", "confidence": 0.76 },
      { "id": "LEARN_LOCALSTORAGE_SAVE_BULK", "type":
  "micro", "name_ko": "일괄 채점 후 답안+결과를 한 번에 저
  장", "domain": "FE", "rep": "P", "confidence": 0.8 },
      { "id": "LEARN_LOCALSTORAGE_RESTORE_BULK", "type":
  "micro", "name_ko": "재진입/새로고침 시 결과/답안 복원",
  "domain": "FE", "rep": "P", "confidence": 0.78 },
      { "id": "LEARN_LOCALSTORAGE_MIGRATION_LEGACY_PARTIAL",
  "type": "micro", "name_ko": "legacy partial(부분 제출) 데
  이터 호환/정책", "domain": "FE", "rep": "C", "confidence":
  0.74 },
      { "id": "LEARN_RESET_CLEAR_STORAGE", "type": "micro",
  "name_ko": "다시 풀기: localStorage 키 삭제", "domain":
  "FE", "rep": "P", "confidence": 0.82 },
      { "id": "LEARN_RESET_UI_STATE", "type": "micro",
  "name_ko": "다시 풀기: UI 상태 리셋(answer/results/
  flags)", "domain": "FE", "rep": "P", "confidence": 0.78 },
      { "id": "LEARN_AFTER_GRADE_EDIT_POLICY", "type":
  "micro", "name_ko": "채점 후 재입력 정책(결과 초기화 또는
  다시 채점)", "domain": "UX", "rep": "C", "confidence":
  0.7 },
      { "id": "LEARN_STRICT_JSON_OUTPUT_GUARD", "type":
  "micro", "name_ko": "Graph Patch JSON strict JSON 보장(문
  자열 줄바꿈 금지)", "domain": "QA", "rep": "C",
  "confidence": 0.84 }
    ],
    "merge_aliases": [],
    "add_edges": [
      { "from": "LEARN_MAP_CURRENT_SUBMIT_FLOW", "to":
  "LEARN_DOCUMENT_STORED_RESULT_SCHEMA", "type": "requires",
  "confidence": 0.78 },
      { "from":
  "LEARN_DISABLED_USES_NORMALIZE_NUMERIC_INPUT", "to":
  "LEARN_ALL_ANSWERED_NORMALIZED", "type": "requires",
  "confidence": 0.82 },
      { "from": "LEARN_ALL_ANSWERED_NORMALIZED", "to":
  "LEARN_ADD_BULK_GRADE_BUTTON", "type": "requires",
  "confidence": 0.7 },
      { "from": "LEARN_ADD_BULK_GRADE_BUTTON", "to":
  "LEARN_BULK_GRADE_ALL_ACTION", "type": "requires",
  "confidence": 0.8 },
      { "from": "LEARN_BULK_GRADE_ALL_ACTION", "to":
  "LEARN_GRADED_STATE_FLAG", "type": "requires",
  "confidence": 0.74 },
      { "from": "LEARN_GRADED_STATE_FLAG", "to":
  "LEARN_SCORE_AND_RESULT_GATING", "type": "requires",
  "confidence": 0.76 },
      { "from": "LEARN_STORE_RESULT_SCHEMA_BULK", "to":
  "LEARN_LOCALSTORAGE_SAVE_BULK", "type": "requires",
  "confidence": 0.8 },
      { "from": "LEARN_STORE_RESULT_SCHEMA_BULK", "to":
  "LEARN_LOCALSTORAGE_RESTORE_BULK", "type": "requires",
  "confidence": 0.8 },
      { "from":
  "LEARN_LOCALSTORAGE_MIGRATION_LEGACY_PARTIAL", "to":
  "LEARN_LOCALSTORAGE_RESTORE_BULK", "type": "requires",
  "confidence": 0.74 },
      { "from": "LEARN_LOCALSTORAGE_RESTORE_BULK", "to":
  "LEARN_GRADED_STATE_FLAG", "type": "requires",
  "confidence": 0.72 },
      { "from": "LEARN_LOCALSTORAGE_SAVE_BULK", "to":
  "LEARN_RESET_CLEAR_STORAGE", "type": "requires",
  "confidence": 0.74 },
      { "from": "LEARN_RESET_CLEAR_STORAGE", "to":
  "LEARN_RESET_UI_STATE", "type": "requires", "confidence":
  0.78 },
      { "from": "LEARN_AFTER_GRADE_EDIT_POLICY", "to":
  "LEARN_SCORE_AND_RESULT_GATING", "type": "requires",
  "confidence": 0.7 },
      { "from": "LEARN_BULK_GRADE_ALL_ACTION", "to":
  "LEARN_REMOVE_PER_PROBLEM_SUBMIT", "type": "requires",
  "confidence": 0.72 },
      { "from": "LEARN_STRICT_JSON_OUTPUT_GUARD", "to":
  "LEARN_STORE_RESULT_SCHEMA_BULK", "type": "requires",
  "confidence": 0.74 }
    ],
    "remove_edges": [],
    "notes": [
      { "claim": "현재 LearnPage는 문제별 제출
  (submitProblem)로 단건 채점 후 submissions를 localStorage
  키(curriculum-viewer:learn:lastResult:${nodeId})에 merge
  저장한다.", "reason": "LearnPage.tsx에서
  StoredResult{submissions} 타입 정의와
  setItem(JSON.stringify(payload))가 확인된다.",
  "confidence": 0.86 },
      { "claim": "disabled 판정은 normalizeNumericInput과 동
  일 기준으로 정의해야 한다.", "reason":
  "normalizeNumericInput이 공백/콤마 제거를 수행하므로 원문
  기준 disabled는 채점과 불일치해 UX가 붕괴한다.",
  "confidence": 0.82 },
      { "claim": "legacy partial 데이터는 bulk 전환 시 필연
  적으로 존재할 수 있어 복원 단계에서 감지/정책화가 필요하
  다.", "reason": "기존 per-problem 저장은 전체 문제 수보다
  적은 submissions를 남기는 것이 정상 동작이었다.",
  "confidence": 0.74 },
      { "claim": "채점 전/후 게이팅(hasGraded)은 점수/정답
  조기 노출과 저장/복원 혼선을 줄인다.", "reason": "채점 전
  0/N 노출, 부분 저장 데이터 노출을 통제하려면 표시 기준이
  필요하다.", "confidence": 0.74 },
      { "claim": "Graph Patch JSON은 문자열 내부 줄바꿈이 있
  으면 파서가 실패하므로 strict JSON으로 재출력되어야 한
  다.", "reason": "reviewer 지적처럼 JSON 파싱 실패는 결합
  패치 검증/병합 파이프라인을 중단시킨다.", "confidence":
  0.84 }
    ]
  }

  ## Standards Tags (내부 태그)

  - 추가된 태그: LEARN_MAP_CURRENT_SUBMIT_FLOW,
    LEARN_DOCUMENT_STORED_RESULT_SCHEMA,
    LEARN_REMOVE_PER_PROBLEM_SUBMIT,
    LEARN_ADD_BULK_GRADE_BUTTON,
    LEARN_DISABLED_USES_NORMALIZE_NUMERIC_INPUT,
    LEARN_ALL_ANSWERED_NORMALIZED,
    LEARN_DISABLED_EDGECASES_12,
    LEARN_BULK_GRADE_ALL_ACTION, LEARN_GRADED_STATE_FLAG,
    LEARN_SCORE_AND_RESULT_GATING,
    LEARN_STORE_RESULT_SCHEMA_BULK,
    LEARN_LOCALSTORAGE_SAVE_BULK,
    LEARN_LOCALSTORAGE_RESTORE_BULK,
    LEARN_LOCALSTORAGE_MIGRATION_LEGACY_PARTIAL,
    LEARN_RESET_CLEAR_STORAGE, LEARN_RESET_UI_STATE,
    LEARN_AFTER_GRADE_EDIT_POLICY,
    LEARN_STRICT_JSON_OUTPUT_GUARD
  - 수정된 태그: (없음)

  [/R1 Coverage Report]

  ###DONE:cd88845efc###


› -> /mnt/c/Users/irron/Desktop/my/web_service_new/
  calculate_math/.agents/inbox/research_f0805f8d87.md


  40% context left



› Request f0805f8d87: 아래 파일(티켓 지시)을 읽고 결과를 이
  터미널에 Output Format대로 그대로 출력해줘. 가능하면 repo
  파일을 생성/수정하지 말고, 마지막에 마커를 그대로 출력해.
  -> /mnt/c/Users/irron/Desktop/my/web_service_new/
  calculate_math/.agents/inbox/research_f0805f8d87.md


   ork     10s • esc to inte rupt)
•         
                               

─                                                           
  39% context left · ? for shortcuts


• ###BEGIN:f0805f8d87###

  ## Coverage Gap Report

  ### 1. 누락된 기초 개념 (최소 10개)

  | # | 개념명 | 누락 이유 | 심각도 |
  |---|--------|----------|--------|
  | 1 | 현재 LearnPage 제출/저장 흐름 기준선 요약 | 현재는
  문제별 제출→단건 채점→submissions merge 저장 구조라, bulk
  전환 시 무엇이 바뀌는지 기준선이 필요 | 높음 |
  | 2 | StoredResult(submissions) 스키마 명시 | localStorage
  저장/복원 계약이 명시되지 않으면 bulk 저장으로 전환 시 호
  환/마이그레이션 규칙이 흔들림 | 높음 |
  | 3 | 문제 카드별 제출 버튼 제거 | 요구사항 1) 핵심인데 현
  재 UI는 per-problem 제출에 고정 | 높음 |
  | 4 | 하단 단일 채점하기(전체 제출) 버튼 | 요구 UX의 유일
  한 진입점이 필요하나 현재 없음 | 높음 |
  | 5 | 채점하기 disabled 기준(정규화 일관성) | disabled 판
  정이 normalizeNumericInput()과 불일치하면 " , " 같은 입력
  에서 활성/비활성이 채점과 엇갈림 | 높음 |
  | 6 | allAnswered 계산(정규화 기반) | problems[] 전체를 기
  준으로 “모두 입력됨”을 안정적으로 계산해야 함(로딩 타이밍/
  문제 수 변화 포함) | 높음 |
  | 7 | 입력 엣지케이스 10+ 정의 | AC 요구 충족을 위해 최소
  벡터가 필요(예: "", " ", ",", " , ", "0", "-0", "1,234", "
  1 234 ", "+", ".", "Infinity" 등) | 중 |
  | 8 | 일괄 채점 액션(전체 순회→gradeNumericAnswer) | 현재
  는 submitProblem(problem)로 단건 채점만 가능해 bulk 채점
  동작이 없음 | 높음 |
  | 9 | 채점 전/후 상태 플래그(hasGraded/isSubmitted) | 채점
  전 점수/정답 노출(0/N) 및 복원 후 표시 기준 혼란을 막기 위
  해 필요 | 중 |
  |10| 점수/정오/정답 표시 게이팅 | 채점 후에만 결과를 노출
  해야 UX가 일관되고 legacy partial 데이터 혼선을 줄임 | 중
  |
  |11| bulk 저장(답안+결과를 한 번에 저장) | 요구사항 3) 저
  장 시점이 개별 제출이 아니라 일괄 채점 후로 바뀌어야 함 |
  높음 |
  |12| bulk 복원(재진입/새로고침) | 저장된 답안/결과를 복원
  해 상태를 재구성해야 함 | 높음 |
  |13| legacy partial 호환/정책 | 기존 per-problem 저장은
  submissions 일부만 남기는 데이터가 정상으로 생성되므로,
  bulk 전환 후 충돌 방지 정책이 필요 | 높음 |
  |14| 다시 풀기(초기화): 키 삭제 + UI 리셋 | 요구사항 4)이
  며 키 삭제만으로는 화면이 즉시 초기화되지 않음 | 높음 |
  |15| strict JSON 산출 가드 | reviewer 지적처럼 문자열 내부
  줄바꿈이 있으면 파싱/병합이 실패하므로 산출물 JSON은
  strict JSON이어야 함 | 높음 |

  ### 2. 과잉 난이도/불필요 선행 (최소 5개)

  | # | 개념명 | 과잉 이유 | 조치 제안 |
  |---|--------|----------|----------|
  | 1 | R3 Transfer 템플릿/트리플릿 강제 | 본 티켓은 FE/UX
  개선이며 problem templates/triplets은 도메인 부적합(또는
  N/A 처리 필요) | N/A 명시 또는 최소 전이(상태 전이) 예시로
  대체 |
  | 2 | 서버 연동/DB 저장 | Out of Scope 위반, localStorage
  요구를 흐림 | 금지 |
  | 3 | 문제 타입 확장(서술형/객관식) | 이번 티켓 범위를 벗
  어남 | 금지(후속 티켓) |
  | 4 | grading 정책 확장(허용오차/분수/근사) | bulk 제출 UX
  와 무관하며 회귀 위험 증가 | 기존 gradeNumericAnswer 유지
  |
  | 5 | 문제은행 JSON 스키마 변경 | 데이터 구조 변경은 범위
  밖, 회귀 위험 큼 | 기존 스키마 유지 |
  | 6 | 전역 상태관리 도입(Redux/Zustand) | LearnPage 단일
  화면 상태로 충분 | 도입 금지 |

  ### 3. 학습 순서상 위험한 점프 (최소 5개)

  | # | From → To | 점프 이유 | 브릿지 제안 |
  |---|-----------|----------|------------|
  | 1 | 문제별 제출 제거 → bulk 버튼/액션 미구현 | 제거만 하
  면 채점/저장 경로가 사라져 기능 공백 발생 | 채점하기
  +gradeAll 구현 후 제거 |
  | 2 | disabled(원문 기준) → 채점(정규화 기준) | " , " 등에
  서 활성/비활성과 채점이 불일치해 UX 붕괴 | disabled는
  normalizeNumericInput(answer).length>0로 통일 |
  | 3 | bulk 저장 도입 → legacy partial 복원 | 기존
  submissions 일부만 저장된 데이터가 bulk 표시/disabled와 충
  돌 | partial 감지 후 정책(초기화/답안만 복원/재채점 유도)
  |
  | 4 | 점수 표시 → 채점 UX | 채점 전 0/N 노출은 “이미 채점
  됨” 오해 유발 | hasGraded 도입 후 채점 후에만 점수/정답 표
  시 |
  | 5 | 채점 후 입력 수정 → 결과 유지 | 입력과 결과가 불일치
  (스테일) 상태 발생 | 입력 변경 시 결과 초기화 또는 다시 채
  점 플로우 |
  | 6 | 초기화(키 삭제만) → UI 상태 유지 | 저장소만 지우면
  화면에 남은 answer/result/flags가 그대로 | 키 삭제 + UI 리
  셋 동시 수행 |

  ## Graph Patch JSON

  {
    "researcher": "R1",
    "scope": "curriculum_viewer_learning_bulk_submit_v1",
    "add_nodes": [
      { "id": "LEARN_MAP_CURRENT_SUBMIT_FLOW", "type":
  "micro", "name_ko": "현재 per-problem 제출/저장 흐름 1페이
  지 요약", "domain": "FE", "rep": "C", "confidence":
  0.86 },
      { "id": "LEARN_DOCUMENT_STORED_RESULT_SCHEMA", "type":
  "micro", "name_ko": "StoredResult/submissions 스키마 문서
  화", "domain": "FE", "rep": "C", "confidence": 0.82 },
      { "id": "LEARN_REMOVE_PER_PROBLEM_SUBMIT", "type":
  "micro", "name_ko": "문제 카드별 제출 버튼 제거",
  "domain": "FE", "rep": "P", "confidence": 0.85 },
      { "id": "LEARN_ADD_BULK_GRADE_BUTTON", "type":
  "micro", "name_ko": "페이지 하단 단일 버튼(채점하기/전체
  제출) 추가", "domain": "FE", "rep": "P", "confidence":
  0.85 },
      { "id": "LEARN_DISABLED_USES_NORMALIZE_NUMERIC_INPUT",
  "type": "micro", "name_ko": "disabled 판정 기준을
  normalizeNumericInput과 일치", "domain": "FE", "rep": "C",
  "confidence": 0.82 },
      { "id": "LEARN_ALL_ANSWERED_NORMALIZED", "type":
  "micro", "name_ko": "allAnswered 계산(정규화 기반)",
  "domain": "FE", "rep": "P", "confidence": 0.82 },
      { "id": "LEARN_DISABLED_EDGECASES_12", "type":
  "micro", "name_ko": "입력 엣지케이스 12종 정의(빈값/공백/
  콤마/0/부호/소수점 등)", "domain": "QA", "rep": "C",
  "confidence": 0.76 },
      { "id": "LEARN_BULK_GRADE_ALL_ACTION", "type":
  "micro", "name_ko": "일괄 채점 액션(전체 순회
  →gradeNumericAnswer)", "domain": "FE", "rep": "P",
  "confidence": 0.84 },
      { "id": "LEARN_BUILD_RESULT_MAP", "type": "micro",
  "name_ko": "문제별 결과 맵(resultByProblemId) 생성",
  "domain": "FE", "rep": "P", "confidence": 0.78 },
      { "id": "LEARN_GRADED_STATE_FLAG", "type": "micro",
  "name_ko": "채점 전/후 상태 플래그(hasGraded 등) 정의",
  "domain": "FE", "rep": "C", "confidence": 0.78 },
      { "id": "LEARN_SCORE_SUMMARY_CALC", "type": "micro",
  "name_ko": "총점 X/N 계산(결과 맵 기반)", "domain": "FE",
  "rep": "P", "confidence": 0.76 },
      { "id": "LEARN_SCORE_AND_RESULT_GATING", "type":
  "micro", "name_ko": "채점 후에만 점수/정오/정답 표시(게이
  팅)", "domain": "FE", "rep": "P", "confidence": 0.76 },
      { "id": "LEARN_SHOW_PER_PROBLEM_RESULT", "type":
  "micro", "name_ko": "문제별 정오/정답 표시(일괄 채점 후)",
  "domain": "FE", "rep": "P", "confidence": 0.78 },
      { "id": "LEARN_STORE_RESULT_SCHEMA_BULK", "type":
  "micro", "name_ko": "bulk 저장 스키마(답안+결과) 계약 정
  의", "domain": "FE", "rep": "C", "confidence": 0.76 },
      { "id": "LEARN_LOCALSTORAGE_VALIDATE_SHAPE", "type":
  "micro", "name_ko": "복원 데이터 파싱/검증 규칙(JSON shape
  validate)", "domain": "FE", "rep": "C", "confidence":
  0.78 },
      { "id": "LEARN_LOCALSTORAGE_SAVE_BULK", "type":
  "micro", "name_ko": "일괄 채점 후 답안+결과를 한 번에 저
  장", "domain": "FE", "rep": "P", "confidence": 0.8 },
      { "id": "LEARN_LOCALSTORAGE_RESTORE_BULK", "type":
  "micro", "name_ko": "재진입/새로고침 시 결과/답안 복원",
  "domain": "FE", "rep": "P", "confidence": 0.78 },
      { "id": "LEARN_LOCALSTORAGE_MIGRATION_LEGACY_PARTIAL",
  "type": "micro", "name_ko": "legacy partial(부분 제출) 호
  환/정책", "domain": "FE", "rep": "C", "confidence":
  0.74 },
      { "id": "LEARN_RESET_CLEAR_STORAGE", "type": "micro",
  "name_ko": "다시 풀기: localStorage 키 삭제", "domain":
  "FE", "rep": "P", "confidence": 0.82 },
      { "id": "LEARN_RESET_UI_STATE", "type": "micro",
  "name_ko": "다시 풀기: UI 상태 리셋(answer/results/
  flags)", "domain": "FE", "rep": "P", "confidence": 0.78 },
      { "id": "LEARN_AFTER_GRADE_EDIT_POLICY", "type":
  "micro", "name_ko": "채점 후 재입력 정책(결과 초기화 또는
  다시 채점)", "domain": "UX", "rep": "C", "confidence":
  0.7 },
      { "id": "LEARN_STRICT_JSON_OUTPUT_GUARD", "type":
  "micro", "name_ko": "Graph Patch JSON strict JSON 보장(문
  자열 줄바꿈 금지)", "domain": "QA", "rep": "C",
  "confidence": 0.84 }
    ],
    "merge_aliases": [],
    "add_edges": [
      { "from": "LEARN_MAP_CURRENT_SUBMIT_FLOW", "to":
  "LEARN_DOCUMENT_STORED_RESULT_SCHEMA", "type": "requires",
  "confidence": 0.78 },
      { "from":
  "LEARN_DISABLED_USES_NORMALIZE_NUMERIC_INPUT", "to":
  "LEARN_ALL_ANSWERED_NORMALIZED", "type": "requires",
  "confidence": 0.82 },
      { "from": "LEARN_ALL_ANSWERED_NORMALIZED", "to":
  "LEARN_ADD_BULK_GRADE_BUTTON", "type": "requires",
  "confidence": 0.7 },
      { "from": "LEARN_ADD_BULK_GRADE_BUTTON", "to":
  "LEARN_BULK_GRADE_ALL_ACTION", "type": "requires",
  "confidence": 0.8 },
      { "from": "LEARN_BULK_GRADE_ALL_ACTION", "to":
  "LEARN_BUILD_RESULT_MAP", "type": "requires",
  "confidence": 0.78 },
      { "from": "LEARN_BUILD_RESULT_MAP", "to":
  "LEARN_SCORE_SUMMARY_CALC", "type": "requires",
  "confidence": 0.76 },
      { "from": "LEARN_BUILD_RESULT_MAP", "to":
  "LEARN_SHOW_PER_PROBLEM_RESULT", "type": "requires",
  "confidence": 0.78 },
      { "from": "LEARN_BULK_GRADE_ALL_ACTION", "to":
  "LEARN_GRADED_STATE_FLAG", "type": "requires",
  "confidence": 0.74 },
      { "from": "LEARN_GRADED_STATE_FLAG", "to":
  "LEARN_SCORE_AND_RESULT_GATING", "type": "requires",
  "confidence": 0.76 },
      { "from": "LEARN_STORE_RESULT_SCHEMA_BULK", "to":
  "LEARN_LOCALSTORAGE_SAVE_BULK", "type": "requires",
  "confidence": 0.8 },
      { "from": "LEARN_STORE_RESULT_SCHEMA_BULK", "to":
  "LEARN_LOCALSTORAGE_RESTORE_BULK", "type": "requires",
  "confidence": 0.8 },
      { "from": "LEARN_LOCALSTORAGE_VALIDATE_SHAPE", "to":
  "LEARN_LOCALSTORAGE_RESTORE_BULK", "type": "requires",
  "confidence": 0.78 },
      { "from":
  "LEARN_LOCALSTORAGE_MIGRATION_LEGACY_PARTIAL", "to":
  "LEARN_LOCALSTORAGE_RESTORE_BULK", "type": "requires",
  "confidence": 0.74 },
      { "from": "LEARN_LOCALSTORAGE_RESTORE_BULK", "to":
  "LEARN_GRADED_STATE_FLAG", "type": "requires",
  "confidence": 0.7 },
      { "from": "LEARN_LOCALSTORAGE_SAVE_BULK", "to":
  "LEARN_RESET_CLEAR_STORAGE", "type": "requires",
  "confidence": 0.74 },
      { "from": "LEARN_RESET_CLEAR_STORAGE", "to":
  "LEARN_RESET_UI_STATE", "type": "requires", "confidence":
  0.78 },
      { "from": "LEARN_AFTER_GRADE_EDIT_POLICY", "to":
  "LEARN_SCORE_AND_RESULT_GATING", "type": "requires",
  "confidence": 0.7 },
      { "from": "LEARN_BULK_GRADE_ALL_ACTION", "to":
  "LEARN_REMOVE_PER_PROBLEM_SUBMIT", "type": "requires",
  "confidence": 0.72 },
      { "from": "LEARN_STRICT_JSON_OUTPUT_GUARD", "to":
  "LEARN_STORE_RESULT_SCHEMA_BULK", "type": "requires",
  "confidence": 0.74 }
    ],
    "remove_edges": [],
    "notes": [
      { "claim": "현재 LearnPage는 문제별 제출
  (submitProblem)로 단건 채점 후 submissions를 localStorage
  키(curriculum-viewer:learn:lastResult:${nodeId})에 merge
  저장한다.", "reason": "LearnPage.tsx에서
  StoredResult{submissions} 타입 정의와
  setItem(JSON.stringify(payload)) 흐름이 확인된다.",
  "confidence": 0.86 },
      { "claim": "disabled 판정은 normalizeNumericInput과 동
  일 기준으로 정의해야 한다.", "reason":
  "normalizeNumericInput이 공백/콤마 제거를 수행하므로 원문
  기준 disabled는 채점과 불일치해 UX가 붕괴한다.",
  "confidence": 0.82 },
      { "claim": "R3 Transfer 산출물은 본 티켓(UX/FE)에서는
  problem templates/triplets 대신 상태 전이(입력→활성화→채점
  →저장→복원→초기화) 전이 예시로 대체하거나 N/A를 명시하는
  방식이 적합하다.", "reason": "reviewer도 FE/UX 티켓에서
  Transfer 항목을 N/A 처리 또는 도메인 맞춤 예시로 대체하라
  고 권고했다.", "confidence": 0.74 },
      { "claim": "legacy partial(부분 제출) 데이터는 bulk 전
  환 시 필연적으로 존재할 수 있어 복원 단계에서 감지/정책화
  가 필요하다.", "reason": "기존 per-problem 저장은 전체 문
  제 수보다 적은 submissions를 남기는 것이 정상 동작이었
  다.", "confidence": 0.74 },
      { "claim": "Graph Patch JSON은 문자열 내부 줄바꿈이 있
  으면 파서가 실패하므로 strict JSON으로 재출력되어야 한
  다.", "reason": "reviewer 지적처럼 JSON 파싱 실패는 결합
  패치 검증/병합 파이프라인을 중단시킨다.", "confidence":
  0.84 }
    ]
  }

  ## Standards Tags (내부 태그)

  - 추가된 태그: LEARN_MAP_CURRENT_SUBMIT_FLOW,
    LEARN_DOCUMENT_STORED_RESULT_SCHEMA,
    LEARN_REMOVE_PER_PROBLEM_SUBMIT,
    LEARN_ADD_BULK_GRADE_BUTTON,
    LEARN_DISABLED_USES_NORMALIZE_NUMERIC_INPUT,
    LEARN_ALL_ANSWERED_NORMALIZED,
    LEARN_DISABLED_EDGECASES_12,
    LEARN_BULK_GRADE_ALL_ACTION, LEARN_BUILD_RESULT_MAP,
    LEARN_GRADED_STATE_FLAG, LEARN_SCORE_SUMMARY_CALC,
    LEARN_SCORE_AND_RESULT_GATING,
    LEARN_SHOW_PER_PROBLEM_RESULT,
    LEARN_STORE_RESULT_SCHEMA_BULK,
    LEARN_LOCALSTORAGE_VALIDATE_SHAPE,
    LEARN_LOCALSTORAGE_SAVE_BULK,
    LEARN_LOCALSTORAGE_RESTORE_BULK,
    LEARN_LOCALSTORAGE_MIGRATION_LEGACY_PARTIAL,
    LEARN_RESET_CLEAR_STORAGE, LEARN_RESET_UI_STATE,
    LEARN_AFTER_GRADE_EDIT_POLICY,
    LEARN_STRICT_JSON_OUTPUT_GUARD
  - 수정된 태그: (없음)

  [/R1 Coverage Report]

  ###DONE:f0805f8d87###


› -> /mnt/c/Users/irron/Desktop/my/web_service_new/
  calculate_math/.agents/inbox/research_6ca9c9bcbc.md


  37% context left



› Request 6ca9c9bcbc: 아래 파일(티켓 지시)을 읽고 결과를 이
  터미널에 Output Format대로 그대로 출력해줘. 가능하면 repo
  파일을 생성/수정하지 말고, 마지막에 마커를 그대로 출력해.
  -> /mnt/c/Users/irron/Desktop/my/web_service_new/
  calculate_math/.agents/inbox/research_6ca9c9bcbc.md




• Explored
  └ List inbox
    Read research_6ca9c9bcbc.md
    Read T1.md, task.md
    Search Output Format|BEGIN:|DONE: in
r                     

• Ran for id in 059d0e7c0f fcd0127204 565ca07687 a4203a6ab9
  │ f0d1a42bd6 f5780da068 be14a78ffd 2c231c5c59 3c42956bde
                                                          

•         
  └evearcnglastResult|submitProblem|StoredResult|
                                                    
                                             
    Read grading.ts, Le           

─ Worked for 8m 11s ────────────────                        


• ###BEGIN:6ca9c9bcbc###

  ## Coverage Gap Report

  ### 1. 누락된 기초 개념 (최소 10개)

  | # | 개념명 | 누락 이유 | 심각도 |
  |---|--------|----------|--------|
  | 1 | 현재 LearnPage 단건 제출/저장 흐름 기준선 | per-
  problem submitProblem/저장 로직을 알아야 bulk 전환 시 회귀
  를 줄임 | 높음 |
  | 2 | localStorage 키 계약 식별 | 저장/복원/초기화가 동일
  키(curriculum-viewer:learn:lastResult:${nodeId})에 의존 |
  높음 |
  | 3 | StoredResult{submissions} 스키마/partial 의미 | 기존
  은 submissions merge로 부분 데이터가 정상 생성되어 bulk UX
  와 충돌 가능 | 높음 |
  | 4 | 문제 카드별 제출 버튼 제거 범위 | 요구사항 1) 핵심
  변경인데 현재 UI는 per-problem 제출 경로가 존재 | 높음 |
  | 5 | 하단 단일 버튼(채점하기) UX/상태 정의 | bulk UX의 단
  일 진입점이 필요(라벨/disabled/재채점 포함) | 높음 |
  | 6 | 미입력 판정 기준 정합화 | disabled 판정이
  normalizeNumericInput()과 불일치하면 채점과 UX가 엇갈림 |
  높음 |
  | 7 | allAnswered 계산(정규화+problems[] 기준) | “모든 문
  제 답 입력 전까지 disabled”를 로딩/빈 배열 포함 안정적으로
  계산해야 함 | 높음 |
  | 8 | 입력 엣지케이스 테스트 벡터(12종+) | 공백/콤마/0/부
  호/소수점/Infinity 등에서 기대값이 흔들려 회귀가 잦음 | 중
  |
  | 9 | 일괄 채점 gradeAll 동작 정의 | 현재는 단건 채점만 가
  능하므로 문제 전체 순회 채점 액션이 필요 | 높음 |
  |10| resultByProblemId 생성 및 결과 표시 규칙 | 문제별 정
  오/정답 표시와 점수 집계를 problemId 기준으로 정렬해야 함
  | 중 |
  |11| hasGraded 게이팅(채점 후 표시) | 채점 전 0/N 및
  partial 결과 노출 혼선을 막기 위한 표시 시점 규칙 필요 |
  중 |
  |12| 일괄 저장(전체 submissions 1회 저장) | 요구사항 3) 저
  장 시점을 “일괄 채점 후 setItem 1회”로 전환해야 함 | 높음
  |
  |13| 복원 파이프라인(파싱/검증/legacy 정책) | 잘못된/
  legacy 데이터로 인한 런타임 오류 및 UX 꼬임을 방지해야 함
  | 중 |
  |14| 다시 풀기: storage 삭제 + UI state 리셋 | 키 삭제만으
  로는 화면이 즉시 초기화되지 않아 state(answer/result/
  flags) 리셋이 필요 | 높음 |
  |15| 채점 후 답 변경 처리 정책 | 입력 변경 시 결과가 스테
  일해지므로 결과 초기화 또는 재채점 플로우를 고정해야 함 |
  중 |

  ### 2. 과잉 난이도/불필요 선행 (최소 5개)

  | # | 개념명 | 과잉 이유 | 조치 제안 |
  |---|--------|----------|----------|
  | 1 | 서버 연동/DB 저장 | Out of Scope이며 localStorage 요
  구를 흐림 | 금지(후속 티켓 분리) |
  | 2 | 문제 타입 확장(객관식/서술형) | 범위 외이며 UI/채점/
  저장 설계가 폭증 | 금지(후속 티켓) |
  | 3 | grading 로직 확장(허용오차/분수/근사) | bulk 제출 UX
  와 무관하고 회귀 위험 증가 | gradeNumericAnswer 유지 |
  | 4 | 문제은행/커리큘럼 JSON 스키마 변경 | 데이터 구조 변
  경은 범위 밖, 회귀 위험 큼 | 기존 스키마 유지 |
  | 5 | 전역 상태관리 도입(Redux/Zustand) | LearnPage 단일
  화면 상태로 충분 | 도입 금지 |
  | 6 | UI 대규모 리디자인/애니메이션 | 요구사항 충족과 무관
  하고 일정 리스크만 증가 | 최소 UI 변경 |

  ### 3. 학습 순서상 위험한 점프 (최소 5개)

  | # | From → To | 점프 이유 | 브릿지 제안 |
  |---|-----------|----------|------------|
  | 1 | LEARN_REMOVE_PER_PROBLEM_SUBMIT →
  LEARN_BULK_GRADE_ALL_ACTION | 제거가 먼저면 채점/저장 경로
  가 사라져 기능 공백 발생 | bulk 버튼+gradeAll+저장 구현 후
  제거 |
  | 2 | LEARN_ADD_BULK_GRADE_BUTTON →
  LEARN_ALL_ANSWERED_NORMALIZED | disabled 계산이 없으면 버
  튼 활성/비활성 기준이 흔들림 | normalize 기반 allAnswered
  를 먼저 고정 |
  | 3 | 원문 disabled 판정 → gradeNumericAnswer(정규화) |
  " , " 같은 입력에서 활성/채점 결과가 불일치해 UX 붕괴 |
  normalizeNumericInput(answer).length>0로 통일 |
  | 4 | LEARN_LOCALSTORAGE_SAVE_BULK →
  LEARN_LOCALSTORAGE_RESTORE_BULK | 스키마/검증 없이 복원하
  면 파싱 실패·필드 누락이 런타임 문제로 이어짐 | schema 정
  의 + shape validate + 예외 처리 |
  | 5 | LEARN_LOCALSTORAGE_RESTORE_BULK →
  LEARN_SCORE_AND_RESULT_GATING | restored partial에서 점수/
  결과 노출 기준이 불명확 | hasGraded 세팅 규칙(완전 제출만
  true 등) 정의 |
  | 6 | LEARN_RESET_CLEAR_STORAGE → (UI state 유지) |
  storage만 지우면 화면에 남은 answer/result/flags가 그대로
  | 키 삭제 + state 리셋 동시 수행 |
  | 7 | LEARN_AFTER_GRADE_EDIT_POLICY 미정 → 결과 표시 유지
  | 답 변경 후 스테일 결과(입력≠결과) 상태가 발생 | 입력 변
  경 시 결과 초기화 또는 “다시 채점” 플로우 |

  ## Graph Patch JSON

  {
    "researcher": "R1",
    "scope": "curriculum_viewer_learning_bulk_submit_v1",
    "add_nodes": [
      { "id": "LEARN_MAP_CURRENT_SUBMIT_FLOW", "type":
  "micro", "name_ko": "현재 per-problem 제출/저장 흐름 요
  약", "domain": "FE", "rep": "C" },
      { "id": "LEARN_DOCUMENT_STORED_RESULT_SCHEMA", "type":
  "micro", "name_ko": "StoredResult/submissions 스키마 확
  인", "domain": "FE", "rep": "C" },
      { "id": "LEARN_IDENTIFY_STORAGE_KEY", "type": "micro",
  "name_ko": "localStorage 키 포맷 식별", "domain": "FE",
  "rep": "C" },
      { "id": "LEARN_REMOVE_PER_PROBLEM_SUBMIT", "type":
  "micro", "name_ko": "문제 카드별 제출 버튼 제거",
  "domain": "FE", "rep": "P" },
      { "id": "LEARN_ADD_BULK_GRADE_BUTTON", "type":
  "micro", "name_ko": "하단 단일 채점하기 버튼 추가",
  "domain": "FE", "rep": "P" },
      { "id": "LEARN_DISABLED_USES_NORMALIZE_NUMERIC_INPUT",
  "type": "micro", "name_ko": "disabled 판정 기준을
  normalizeNumericInput과 일치", "domain": "FE", "rep":
  "C" },
      { "id": "LEARN_HANDLE_EMPTY_PROBLEMS", "type":
  "micro", "name_ko": "문제 0개/로딩 상태 UI 규칙",
  "domain": "UX", "rep": "C" },
      { "id": "LEARN_ALL_ANSWERED_NORMALIZED", "type":
  "micro", "name_ko": "allAnswered 계산(정규화 기반)",
  "domain": "FE", "rep": "P" },
      { "id": "LEARN_DISABLED_EDGECASES_12", "type":
  "micro", "name_ko": "입력 엣지케이스 12종 테스트 벡터",
  "domain": "QA", "rep": "C" },
      { "id": "LEARN_BULK_GRADE_ALL_ACTION", "type":
  "micro", "name_ko": "일괄 채점 액션(전체 순회)", "domain":
  "FE", "rep": "P" },
      { "id": "LEARN_BUILD_RESULT_MAP", "type": "micro",
  "name_ko": "문제별 결과 맵(resultByProblemId) 생성",
  "domain": "FE", "rep": "P" },
      { "id": "LEARN_SCORE_SUMMARY_CALC", "type": "micro",
  "name_ko": "총점 X/N 집계 로직", "domain": "FE", "rep":
  "P" },
      { "id": "LEARN_GRADED_STATE_FLAG", "type": "micro",
  "name_ko": "채점 전/후 상태 플래그(hasGraded) 정의",
  "domain": "FE", "rep": "C" },
      { "id": "LEARN_SCORE_AND_RESULT_GATING", "type":
  "micro", "name_ko": "채점 후에만 점수/결과 표시(게이팅)",
  "domain": "FE", "rep": "P" },
      { "id": "LEARN_SHOW_PER_PROBLEM_RESULT", "type":
  "micro", "name_ko": "문제별 정오/정답 표시(일괄 채점 후)",
  "domain": "FE", "rep": "P" },
      { "id": "LEARN_STORE_RESULT_SCHEMA_BULK", "type":
  "micro", "name_ko": "bulk 저장 시점/계약 정의(전체
  submissions 저장)", "domain": "FE", "rep": "C" },
      { "id": "LEARN_LOCALSTORAGE_VALIDATE_SHAPE", "type":
  "micro", "name_ko": "복원 데이터 파싱/shape validate",
  "domain": "FE", "rep": "C" },
      { "id": "LEARN_LOCALSTORAGE_SAVE_BULK", "type":
  "micro", "name_ko": "일괄 채점 후 submissions를 1회 저장",
  "domain": "FE", "rep": "P" },
      { "id": "LEARN_LOCALSTORAGE_RESTORE_BULK", "type":
  "micro", "name_ko": "재진입/새로고침 시 답안/결과 복원",
  "domain": "FE", "rep": "P" },
      { "id": "LEARN_LOCALSTORAGE_MIGRATION_LEGACY_PARTIAL",
  "type": "micro", "name_ko": "legacy partial(submissions 일
  부) 처리 정책", "domain": "FE", "rep": "C" },
      { "id": "LEARN_RESET_CLEAR_STORAGE", "type": "micro",
  "name_ko": "다시 풀기: localStorage 키 삭제", "domain":
  "FE", "rep": "P" },
      { "id": "LEARN_RESET_UI_STATE", "type": "micro",
  "name_ko": "다시 풀기: UI state 리셋", "domain": "FE",
  "rep": "P" },
      { "id": "LEARN_AFTER_GRADE_EDIT_POLICY", "type":
  "micro", "name_ko": "채점 후 답 수정 정책(결과 초기화/재채
  점)", "domain": "UX", "rep": "C" }
    ],
    "merge_aliases": [],
    "add_edges": [
      { "from": "LEARN_MAP_CURRENT_SUBMIT_FLOW", "to":
  "LEARN_REMOVE_PER_PROBLEM_SUBMIT", "type": "requires" },
      { "from": "LEARN_DOCUMENT_STORED_RESULT_SCHEMA", "to":
  "LEARN_STORE_RESULT_SCHEMA_BULK", "type": "requires" },
      { "from": "LEARN_IDENTIFY_STORAGE_KEY", "to":
  "LEARN_LOCALSTORAGE_SAVE_BULK", "type": "requires" },
      { "from": "LEARN_IDENTIFY_STORAGE_KEY", "to":
  "LEARN_LOCALSTORAGE_RESTORE_BULK", "type": "requires" },
      { "from": "LEARN_IDENTIFY_STORAGE_KEY", "to":
  "LEARN_RESET_CLEAR_STORAGE", "type": "requires" },
      { "from": "LEARN_HANDLE_EMPTY_PROBLEMS", "to":
  "LEARN_ALL_ANSWERED_NORMALIZED", "type": "requires" },
      { "from":
  "LEARN_DISABLED_USES_NORMALIZE_NUMERIC_INPUT", "to":
  "LEARN_ALL_ANSWERED_NORMALIZED", "type": "requires" },
      { "from": "LEARN_ALL_ANSWERED_NORMALIZED", "to":
  "LEARN_ADD_BULK_GRADE_BUTTON", "type": "requires" },
      { "from": "LEARN_ADD_BULK_GRADE_BUTTON", "to":
  "LEARN_BULK_GRADE_ALL_ACTION", "type": "requires" },
      { "from": "LEARN_BULK_GRADE_ALL_ACTION", "to":
  "LEARN_BUILD_RESULT_MAP", "type": "requires" },
      { "from": "LEARN_BULK_GRADE_ALL_ACTION", "to":
  "LEARN_GRADED_STATE_FLAG", "type": "requires" },
      { "from": "LEARN_BUILD_RESULT_MAP", "to":
  "LEARN_SCORE_SUMMARY_CALC", "type": "requires" },
      { "from": "LEARN_BUILD_RESULT_MAP", "to":
  "LEARN_SHOW_PER_PROBLEM_RESULT", "type": "requires" },
      { "from": "LEARN_GRADED_STATE_FLAG", "to":
  "LEARN_SCORE_AND_RESULT_GATING", "type": "requires" },
      { "from": "LEARN_SCORE_AND_RESULT_GATING", "to":
  "LEARN_SCORE_SUMMARY_CALC", "type": "requires" },
      { "from": "LEARN_SCORE_AND_RESULT_GATING", "to":
  "LEARN_SHOW_PER_PROBLEM_RESULT", "type": "requires" },
      { "from": "LEARN_STORE_RESULT_SCHEMA_BULK", "to":
  "LEARN_LOCALSTORAGE_SAVE_BULK", "type": "requires" },
      { "from": "LEARN_STORE_RESULT_SCHEMA_BULK", "to":
  "LEARN_LOCALSTORAGE_RESTORE_BULK", "type": "requires" },
      { "from": "LEARN_LOCALSTORAGE_VALIDATE_SHAPE", "to":
  "LEARN_LOCALSTORAGE_RESTORE_BULK", "type": "requires" },
      { "from":
  "LEARN_LOCALSTORAGE_MIGRATION_LEGACY_PARTIAL", "to":
  "LEARN_LOCALSTORAGE_RESTORE_BULK", "type": "requires" },
      { "from": "LEARN_LOCALSTORAGE_RESTORE_BULK", "to":
  "LEARN_GRADED_STATE_FLAG", "type": "requires" },
      { "from": "LEARN_RESET_CLEAR_STORAGE", "to":
  "LEARN_RESET_UI_STATE", "type": "requires" },
      { "from": "LEARN_AFTER_GRADE_EDIT_POLICY", "to":
  "LEARN_SCORE_AND_RESULT_GATING", "type": "requires" },
      { "from": "LEARN_BULK_GRADE_ALL_ACTION", "to":
  "LEARN_REMOVE_PER_PROBLEM_SUBMIT", "type": "requires" }
    ],
    "remove_edges": [],
    "notes": [
      { "claim": "LearnPage는 submitProblem으로 문제별 채점
  후 submissions를 localStorage에 merge 저장한다.",
  "reason": "LearnPage.tsx의 submitProblem과
  StoredResult{submissions} setItem 흐름을 확인.",
  "confidence": 0.86 },
      { "claim": "disabled 판정은
  normalizeNumericInput(answer).length>0 기준으로만 '입력
  됨'을 판정해야 한다.", "reason": "grading이
  normalizeNumericInput을 사용하므로 원문 기준 disabled는 활
  성/채점 불일치를 만든다.", "confidence": 0.82 },
      { "claim": "현재 score는 problems가 있으면 채점 전에도
  0/N이 노출될 수 있어 hasGraded 게이팅이 필요하다.",
  "reason": "score 계산은 resultByProblemId가 비어도
  {correct:0,total:N}을 반환한다.", "confidence": 0.74 },
      { "claim": "legacy partial(submissions 일부) 데이터는
  bulk UX에서 복원/점수/표시와 충돌하므로 정책이 필요하다.",
  "reason": "기존 per-problem 저장은 submissions를 merge하여
  부분 데이터가 정상적으로 생성된다.", "confidence": 0.74 },
      { "claim": "다시 풀기는 localStorage 키 삭제만으로는
  충분하지 않고 UI state(answer/result/flags) 리셋이 필요하
  다.", "reason": "LearnPage는 answerByProblemId/
  resultByProblemId를 state로 유지하므로 화면이 남을 수 있
  다.", "confidence": 0.78 },
      { "claim": "일괄 제출은 setItem 1회로 전체 submissions
  를 저장해야 저장/복원/초기화 계약이 단순해진다.",
  "reason": "요구사항은 일괄 채점 후 한 번에 저장이며, merge
  저장은 partial을 필연적으로 만든다.", "confidence": 0.8 }
    ]
  }

  ## Standards Tags (내부 태그)

  - 추가된 태그: LEARN_MAP_CURRENT_SUBMIT_FLOW,
    LEARN_DOCUMENT_STORED_RESULT_SCHEMA,
    LEARN_IDENTIFY_STORAGE_KEY,
    LEARN_REMOVE_PER_PROBLEM_SUBMIT,
    LEARN_ADD_BULK_GRADE_BUTTON,
    LEARN_DISABLED_USES_NORMALIZE_NUMERIC_INPUT,
    LEARN_HANDLE_EMPTY_PROBLEMS,
    LEARN_ALL_ANSWERED_NORMALIZED,
    LEARN_DISABLED_EDGECASES_12,
    LEARN_BULK_GRADE_ALL_ACTION, LEARN_BUILD_RESULT_MAP,
    LEARN_SCORE_SUMMARY_CALC, LEARN_GRADED_STATE_FLAG,
    LEARN_SCORE_AND_RESULT_GATING,
    LEARN_SHOW_PER_PROBLEM_RESULT,
    LEARN_STORE_RESULT_SCHEMA_BULK,
    LEARN_LOCALSTORAGE_VALIDATE_SHAPE,
    LEARN_LOCALSTORAGE_SAVE_BULK,
    LEARN_LOCALSTORAGE_RESTORE_BULK,
    LEARN_LOCALSTORAGE_MIGRATION_LEGACY_PARTIAL,
    LEARN_RESET_CLEAR_STORAGE, LEARN_RESET_UI_STATE,
    LEARN_AFTER_GRADE_EDIT_POLICY
  - 수정된 태그: (없음)

  [/R1 Coverage Report]

  ###DONE:6ca9c9bcbc###


› Explain this codebase

  81% context left · ? for shortcuts


============================================================
[2026-01-08 12:28:36] RESEARCH1 (req_id: f92068ab1b)
============================================================
"confidence":
  0.75 }
    ]
  }

  ## Standards Tags (내부 태그)

  - 추가된 태그: COUNT_MUL_RULE_MEANING, COUNT_ADD_RULE_MEANING,
    ORDER_SENSITIVE_CHECK, PERM_AS_FILLING_SLOTS, PERM_PRODUCT_FORM,
    FACTORIAL_EXPANSION, FACTORIAL_ZERO_MEANING, FACTORIAL_CANCELLATION,
    STEP_PERM_DERIVE, COMB_AS_SUBSET, COMB_AS_CHOOSE_R,
    COMB_ORDER_IGNORED_REASON, COMB_FROM_PERM_DIVIDE, CHOOSE_THEN_ARRANGE,
    STEP_COMB_DERIVE, SYSTEMATIC_LISTING_BASIC, TREE_DIAGRAM_BASIC,
    STEP_SAMPLE_SPACE_BUILD, SET_NOTATION_BASICS, SAMPLE_SPACE_AS_SET,
    EVENT_AS_SUBSET, PROB_AS_RATIO, CLASSICAL_PROB_EQUIPROBABLE_CHECK,
    EQUIPROBABLE_DECISION, COUNT_FAVORABLE_TOTAL, STEP_PROB_SETUP,
    EVENT_OPERATION_EXPRESSION, INTERSECTION_UNION_MEANING,
    CHECK_DOUBLE_COUNTING, DISJOINT_EVENTS, VENN_DIAGRAM_2SET,
    DISJOINT_OR_OVERLAP_DECISION, STEP_EVENT_OPS_INCL_EXCL,
    INCL_EXCL_2SET_MEANING, APPLY_INCL_EXCL_2SET, STEP_INCL_EXCL_2SET,
    COMPLEMENT_EVENT, COMPLEMENT_RULE, TOTAL_MINUS_STRATEGY
  - 수정된 태그: COUNT_MUL_RULE(→COUNT_MUL_RULE_MEANING),
    COUNT_ADD_RULE(→COUNT_ADD_RULE_MEANING),
    PERM_MEANING_SLOT(→PERM_AS_FILLING_SLOTS),
    FACTORIAL_CONCEPT(→FACTORIAL_EXPANSION),
    FACTORIAL_ZERO(→FACTORIAL_ZERO_MEANING),
    COMB_MEANING_SUBSET(→COMB_AS_SUBSET),
    COMB_DERIVE_FROM_PERM_DIVIDE(→COMB_FROM_PERM_DIVIDE),
    SAMPLE_SPACE_DEFINE(→SAMPLE_SPACE_AS_SET),
    EVENT_DEFINE(→EVENT_AS_SUBSET),
    SET_INTERSECTION_UNION(→INTERSECTION_UNION_MEANING),
    INCLUSION_EXCLUSION_2SET_MEANING(→INCL_EXCL_2SET_MEANING)

  [/R1 Coverage Report]

  ###DONE:18f9bff97c###


› -> /mnt/c/Users/irron/Desktop/my/web_service_new/
  calculate_math/.agents/inbox/research_216a78baad.md


  49% context left



› Request 216a78baad: 아래 파일(티켓 지시)을 읽고 결과를 이
  터미널에 Output Format대로 그대로 출력해줘. 가능하면 repo
  파일을 생성/수정하지 말고, 마지막에 마커를 그대로 출력해.
  -> /mnt/c/Users/irron/Desktop/my/web_service_new/
  calculate_math/.agents/inbox/research_216a78baad.md



• Explored
  └ Read research_216a78baad.md, T1.md
                                                  

• Ran jq
  │ '.task_id, .plan.target_scope? // .plan.scope? // .pla
                            

─                                                           
                
    … +144 lines
                        
      "max_attempts_before_pm_patch"    


• ###BEGIN:216a78baad###

  ## Coverage Gap Report

  ### 1. 누락된 기초 개념 (최소 10개)

  | # | 개념명 | 누락 이유 | 심각도 |
  |---|--------|----------|--------|
  | 1 | 단일 버튼 UX(페이지 하단 채점하기/전체 제출) | 현재
  는 문제 카드별 제출만 존재해 “모든 문제 후 일괄 채점” 요구
  를 충족하지 못함 | 높음 |
  | 2 | 문제 카드별 제출 버튼 제거 | 요구사항 1)에서 제거가
  핵심인데 현재 UI는 per-problem 제출 흐름에 고정되어 있음 |
  높음 |
  | 3 | 채점하기 disabled 조건 정의(정규화 일관성) | 버튼
  disabled 기준이 normalizeNumericInput()과 일관되게 정의되
  어야 하나 현재는 해당 UX 자체가 없음 | 높음 |
  | 4 | “모든 문제 미입력” 판정 로직(allAnswered) |
  problems[] 전체를 기준으로 answerByProblemId가 모두 채워졌
  는지 판단하는 상태/계산이 필요(문제 수 변화/로딩 타이밍 포
  함) | 높음 |
  | 5 | 입력 엣지케이스(10개+) 목록/정의 | AC 요구(10개+)가
  문서/설계로 존재해야 하는데 현재 정의가 없음(예: "", "
  ", \"\\t\\n\", \",\", " , , ", "1,234", " 1 234 ", "0",
  "-0", "+", ".", "Infinity" 등) | 중 |
  | 6 | 일괄 채점 동작(전체 순회→채점→결과 맵 생성) | 현재는
  submitProblem(problem)로 단건 채점만 가능하며, 전체 문제를
  한 번에 채점해 결과를 고정하는 액션이 없음 | 높음 |
  | 7 | 채점 이후 UI 상태 정의(채점 전/후) | 현재는 결과가
  하나라도 있으면 점수 0/N이 항상 표시될 수 있고, “채점 전/
  후” 상태(예: hasGraded/isSubmitted) 기준이 없음 | 중 |
  | 8 | “채점 후 재입력” UX 정책 | bulk 채점 후 입력을 수정
  할 때 결과/점수의 일관성(자동 결과 초기화 vs “다시 채점”
  버튼) 정책이 필요하나 정의 없음 | 중 |
  | 9 | localStorage 저장 시점 변경(개별→일괄) | 현재는 개별
  제출 시 submissions를 merge 저장; 요구는 일괄 채점 후 답안
  +결과를 한 번에 저장 | 높음 |
  |10| 저장/복원 스키마 호환/마이그레이션 | 기존 키
  (curriculum-viewer:learn:lastResult:${nodeId})에 부분 제출
  데이터가 남아있을 수 있어 bulk 전환 시 호환 규칙이 필요 |
  높음 |
  |11| 초기화/다시 풀기(키 삭제 + 상태 리셋) | 요구사항 4)
  다시 풀기 버튼 및 저장된 결과/답안 삭제가 필요하나 현재 없
  음 | 높음 |
  |12| Out of Scope 가드레일 명시(무엇을 안 바꿀지) | 구현
  중 문제 타입 확장/서버 연동/커리큘럼 구조 변경으로 범위가
  새는 것을 막는 체크리스트가 필요 | 중 |

  ### 2. 과잉 난이도/불필요 선행 (최소 5개)

  | # | 개념명 | 과잉 이유 | 조치 제안 |
  |---|--------|----------|----------|
  | 1 | 서버 연동/DB 저장 | Out of Scope 위반이며
  localStorage 기반 요구를 흐림 | 금지(요구 범위 밖) |
  | 2 | 문제 타입 확장(서술형/객관식 등) | 이번 변경의 핵심
  은 “제출 UX/저장/복원”이며 타입 확장은 범위 밖 | 금지(향후
  별도 티켓) |
  | 3 | 문제은행 JSON 스키마 변경 | 현재는 problems_v1.json
  로딩으로 충분하며 스키마 변경은 회귀 위험만 큼 | 기존 스키
  마 유지 |
  | 4 | grading 로직 대개편(분수/근삿값/허용오차 등) | 요구
  는 제출 UX이며 채점 확장은 별도 사양 필요 |
  gradeNumericAnswer() 유지, 필요 시 후속 티켓 |
  | 5 | 대형 상태관리 도입(Redux/Zustand 등) | LearnPage 단
  일 화면 상태로 해결 가능, 도입은 과잉 | React state/
  useMemo로 해결 |
  | 6 | “입력 중 실시간 저장(autosave)” | 요구는 “채점 후 한
  번에 저장”이며 autosave는 UX/스키마를 복잡하게 함 | 이번
  범위에서 제외(필요 시 옵션) |

  ### 3. 학습 순서상 위험한 점프 (최소 5개)

  | # | From → To | 점프 이유 | 브릿지 제안 |
  |---|-----------|----------|------------|
  | 1 | 문제별 제출 제거 → bulk UX 미구현 | 제거만 하면 채점
  경로가 사라져 기능 공백 발생 | 단일 채점하기 버튼 +
  gradeAll 액션 먼저 추가 후 제거 |
  | 2 | disabled 판정(원문 입력 기준) → 실제 채점(정규화 기
  준) | " , " 같은 입력이 disabled 해제되거나 반대로 0이 미
  입력 처리되는 불일치 위험 | disabled는
  normalizeNumericInput(answer).length>0로 고정 |
  | 3 | 저장 시점 변경(개별→일괄) → 기존 localStorage 데이터
  무시 | 기존 submissions가 부분만 존재할 수 있어 복원/버튼
  상태가 꼬일 수 있음 | “legacy partial” 감지(개수/키) 후 초
  기화 또는 안내/정책 적용 |
  | 4 | 점수 표시(항상 0/N) → 채점 UX | 채점 전부터 점수가
  보이면 사용자가 이미 채점된 것으로 오해 | hasGraded 도입
  후 채점 후에만 점수/정답 표시 |
  | 5 | 채점 후 입력 수정 → 결과/점수 유지 | 입력과 결과가
  불일치(스테일) 상태가 생김 | 입력 변경 시 결과 초기화 또는
  버튼을 다시 채점으로 전환 |
  | 6 | 초기화(다시 풀기) 없음 → 상태 복원 유지 | 사용자가
  저장된 결과를 지울 방법이 없어 UX 막힘 | 다시 풀기(키 삭제
  +상태 리셋) 추가 |

  ## Graph Patch JSON

  {
    "researcher": "R1",
    "scope": "curriculum_viewer_learning_bulk_submit_v1",
    "add_nodes": [
      { "id": "LEARN_REMOVE_PER_PROBLEM_SUBMIT", "type":
  "micro", "name_ko": "문제 카드별 제출 버튼 제거",
  "domain": "FE", "rep": "P", "confidence": 0.85 },
      { "id": "LEARN_ADD_BULK_GRADE_BUTTON", "type":
  "micro", "name_ko": "페이지 하단 단일 버튼(채점하기/전체
  제출) 추가", "domain": "FE", "rep": "P", "confidence":
  0.85 },
      { "id": "LEARN_DISABLED_USES_NORMALIZE_NUMERIC_INPUT",
  "type": "micro", "name_ko": "disabled 판정 기준을
  normalizeNumericInput과 일치", "domain": "FE", "rep": "C",
  "confidence": 0.82 },
      { "id": "LEARN_ALL_ANSWERED_NORMALIZED", "type":
  "micro", "name_ko": "모든 문제 미입력 판정(allAnswered, 정
  규화 기반)", "domain": "FE", "rep": "P", "confidence":
  0.82 },
      { "id": "LEARN_BULK_GRADE_ALL_ACTION", "type":
  "micro", "name_ko": "일괄 채점 액션(전체 순회
  →gradeNumericAnswer)", "domain": "FE", "rep": "P",
  "confidence": 0.84 },
      { "id": "LEARN_GRADED_STATE_FLAG", "type": "micro",
  "name_ko": "채점 전/후 상태 플래그(hasGraded/isSubmitted)
  정의", "domain": "FE", "rep": "C", "confidence": 0.78 },
      { "id": "LEARN_SCORE_AND_RESULT_GATING", "type":
  "micro", "name_ko": "채점 후에만 점수/정오/정답 표시(게이
  팅)", "domain": "FE", "rep": "P", "confidence": 0.76 },
      { "id": "LEARN_LOCALSTORAGE_SAVE_BULK", "type":
  "micro", "name_ko": "일괄 채점 후 답안+결과를 한 번에 저
  장", "domain": "FE", "rep": "P", "confidence": 0.8 },
      { "id": "LEARN_LOCALSTORAGE_MIGRATION_LEGACY_PARTIAL",
  "type": "micro", "name_ko": "기존 부분 제출(submissions 일
  부) 데이터 호환/마이그레이션 규칙", "domain": "FE", "rep":
  "C", "confidence": 0.74 },
      { "id": "LEARN_RESET_CLEAR_STORAGE", "type": "micro",
  "name_ko": "다시 풀기(초기화): 저장 키 삭제 + 상태 리셋",
  "domain": "FE", "rep": "P", "confidence": 0.82 },
      { "id": "LEARN_AFTER_GRADE_EDIT_POLICY", "type":
  "micro", "name_ko": "채점 후 재입력 정책(결과 초기화 또는
  다시 채점)", "domain": "UX", "rep": "C", "confidence":
  0.7 },
      { "id": "LEARN_DISABLED_EDGECASES_12", "type":
  "micro", "name_ko": "disabled 판정 입력 엣지케이스 12종(빈
  값/공백/콤마/0/부호/소수점 등)", "domain": "QA", "rep":
  "C", "confidence": 0.76 }
    ],
    "merge_aliases": [],
    "add_edges": [
      { "from":
  "LEARN_DISABLED_USES_NORMALIZE_NUMERIC_INPUT", "to":
  "LEARN_ALL_ANSWERED_NORMALIZED", "type": "requires",
  "confidence": 0.82 },
      { "from": "LEARN_ALL_ANSWERED_NORMALIZED", "to":
  "LEARN_ADD_BULK_GRADE_BUTTON", "type": "requires",
  "confidence": 0.78 },
      { "from": "LEARN_ADD_BULK_GRADE_BUTTON", "to":
  "LEARN_BULK_GRADE_ALL_ACTION", "type": "requires",
  "confidence": 0.8 },
      { "from": "LEARN_BULK_GRADE_ALL_ACTION", "to":
  "LEARN_LOCALSTORAGE_SAVE_BULK", "type": "requires",
  "confidence": 0.8 },
      { "from": "LEARN_GRADED_STATE_FLAG", "to":
  "LEARN_SCORE_AND_RESULT_GATING", "type": "requires",
  "confidence": 0.76 },
      { "from": "LEARN_BULK_GRADE_ALL_ACTION", "to":
  "LEARN_GRADED_STATE_FLAG", "type": "requires",
  "confidence": 0.74 },
      { "from":
  "LEARN_LOCALSTORAGE_MIGRATION_LEGACY_PARTIAL", "to":
  "LEARN_LOCALSTORAGE_SAVE_BULK", "type": "requires",
  "confidence": 0.74 },
      { "from": "LEARN_RESET_CLEAR_STORAGE", "to":
  "LEARN_LOCALSTORAGE_SAVE_BULK", "type": "requires",
  "confidence": 0.78 },
      { "from": "LEARN_AFTER_GRADE_EDIT_POLICY", "to":
  "LEARN_SCORE_AND_RESULT_GATING", "type": "requires",
  "confidence": 0.7 },
      { "from": "LEARN_DISABLED_EDGECASES_12", "to":
  "LEARN_ALL_ANSWERED_NORMALIZED", "type": "requires",
  "confidence": 0.76 },
      { "from": "LEARN_ADD_BULK_GRADE_BUTTON", "to":
  "LEARN_REMOVE_PER_PROBLEM_SUBMIT", "type": "requires",
  "confidence": 0.72 }
    ],
    "remove_edges": [],
    "notes": [
      { "claim": "현재 LearnPage는 문제 카드별 제출
  (submitProblem)로 단건 채점/단건 저장을 수행하며,
  StoredResult는 { nodeId, updatedAt, submissions:
  { [problemId]: { submitted, isCorrect } } } 형태이다.",
  "reason": "LearnPage.tsx에서 gradeNumericAnswer 호출 및
  localStorage merge 저장 로직과 StoredResult 타입 정의가 확
  인된다.", "confidence": 0.86 },
      { "claim": "bulk UX의 disabled 판정은
  normalizeNumericInput(answer).length>0 기준으로 모든
  problems가 채워졌는지 검사해야 grading과 일관된다.",
  "reason": "grading.ts의 normalizeNumericInput은 공백/콤마
  제거를 수행하므로, 동일 기준을 쓰지 않으면 '미입력/입력됨'
  판단이 채점 결과와 어긋난다.", "confidence": 0.82 },
      { "claim": "점수/정오/정답 표시는 채점 전/후 상태
  (hasGraded 등)로 게이팅하지 않으면 채점 전에도 0/N이 노출
  되는 혼란이 발생할 수 있다.", "reason": "현재 score 계산은
  problems.length만으로 0/N을 만들 수 있어 bulk 전환 시 '채
  점 전' 상태를 별도로 분리하는 것이 안전하다.",
  "confidence": 0.74 },
      { "claim": "기존 localStorage에 부분 제출(submissions
  일부) 데이터가 남아 있을 수 있으므로 bulk 전환 시 호환 규
  칙(초기화/마이그레이션/안내)이 필요하다.", "reason": "기존
  구현은 문제별 제출 시마다 submissions를 merge 저장하므로,
  저장된 문제 수가 전체 problems 수보다 적은 legacy 데이터가
  자연스럽게 생성된다.", "confidence": 0.78 },
      { "claim": "Out of Scope(문제 타입 확장/서버 연동/커리
  큘럼 구조 변경)를 피하고 LearnPage.tsx 중심으로 제출 UX/저
  장 시점만 바꾸는 것이 회귀 위험이 낮다.", "reason":
  "task.md가 수정 중심 파일과 비범위를 명시하며, 현재 문제
  로딩/채점 로직은 요구 충족에 충분한 기반을 제공한다.",
  "confidence": 0.76 }
    ]
  }

  ## Standards Tags (내부 태그)

  - 추가된 태그: LEARN_ADD_BULK_GRADE_BUTTON,
    LEARN_REMOVE_PER_PROBLEM_SUBMIT,
    LEARN_ALL_ANSWERED_NORMALIZED,
    LEARN_DISABLED_USES_NORMALIZE_NUMERIC_INPUT,
    LEARN_DISABLED_EDGECASES_12,
    LEARN_BULK_GRADE_ALL_ACTION, LEARN_GRADED_STATE_FLAG,
    LEARN_SCORE_AND_RESULT_GATING,
    LEARN_LOCALSTORAGE_SAVE_BULK,
    LEARN_LOCALSTORAGE_MIGRATION_LEGACY_PARTIAL,
    LEARN_RESET_CLEAR_STORAGE, LEARN_AFTER_GRADE_EDIT_POLICY
  - 수정된 태그:
    LEARN_SINGLE_SUBMIT_FLOW(→LEARN_BULK_SUBMIT_FLOW),
    LEARN_STORAGE_UPDATE_PER_PROBLEM(→LEARN_STORAGE_SAVE_AFT
    ER_BULK_GRADE)

  [/R1 Coverage Report]

  ###DONE:216a78baad###


› -> /mnt/c/Users/irron/Desktop/my/web_service_new/
  calculate_math/.agents/inbox/research_c49dfc24b0.md


  44% context left



› Request c49dfc24b0: 아래 파일(티켓 지시)을 읽고 결과를 이
  터미널에 Output Format대로 그대로 출력해줘. 가능하면 repo
  파일을 생성/수정하지 말고, 마지막에 마커를 그대로 출력해.
  -> /mnt/c/Users/irron/Desktop/my/web_service_new/
  calculate_math/.agents/inbox/research_c49dfc24b0.md


                  Ou
•         
                               

─                                                           
  45% context left · ? for shortcuts


• ###BEGIN:c49dfc24b0###

  ## Coverage Gap Report

  ### 1. 누락된 기초 개념 (최소 10개)

  | # | 개념명 | 누락 이유 | 심각도 |
  |---|--------|----------|--------|
  | 1 | 현재 동작 1페이지 요약(상태 흐름/데이터 스키마) |
  LearnPage는 문제별 제출→단건 채점→localStorage merge 저장
  흐름이며 StoredResult{submissions} 계약이 기준점인데, 이를
  명시 요약하지 않으면 변경 시 회귀가 발생 | 높음 |
  | 2 | 문제 카드별 제출 버튼 제거 | 요구사항 핵심(개별 제출
  제거)인데 현재 UI는 per-problem 제출에 고정 | 높음 |
  | 3 | 페이지 하단 단일 버튼 채점하기(전체 제출) | 일괄 채
  점 UX의 유일한 진입점이 필요하나 현재 없음 | 높음 |
  | 4 | 채점하기 disabled 기준(정규화 일관성) | disabled 판
  정이 normalizeNumericInput()과 불일치하면 " , " 같은 입력
  에서 버튼 활성/비활성이 채점과 엇갈림 | 높음 |
  | 5 | allAnswered 계산(정규화 기반) | “모든 문제 답 입력
  전까지 disabled”를 problems[] 기준으로 안정적으로 계산하는
  로직이 필요(로딩/문제수 변화 포함) | 높음 |
  | 6 | 입력 엣지케이스 10+ 정의 | AC 요구(10개+) 충족을 위
  해 최소 벡터가 필요: "", "   ", "\t\n", ",", " , , ",
  "1,234", " 1 234 ", "0", "-0", "+", ".", "Infinity" | 중 |
  | 7 | 일괄 채점 액션(전체 순회→gradeNumericAnswer) | 현재
  는 단건 submitProblem(problem)만 존재해 “한 번에 전체 채
  점” 동작이 없음 | 높음 |
  | 8 | 채점 전/후 상태 플래그(hasGraded/isSubmitted) | 채점
  전에도 점수/정답이 노출되거나(0/N) 저장/복원 시 상태가 꼬
  이는 것을 막기 위한 상태 기준이 필요 | 중 |
  | 9 | 문제별 결과 표시(정오/정답) 정책(일괄 채점 후) | 요
  구는 채점 후 각 문제 카드에 정오/정답 표시인데, 현재는 단
  건 제출 시에만 결과가 생김 | 높음 |
  |10| 총점 X/N 표시 정책(채점 후에만) | 상단 점수는 채점 후
  에만 의미가 있으나 현재 구조는 “결과 일부 존재”만으로 0/N
  노출 가능 | 중 |
  |11| 저장/복원 계약(답안+채점결과를 한 번에 저장/복원) |
  요구는 일괄 채점 후 저장/복원인데, 현재는 문제별 제출 시마
  다 submissions를 merge 저장 | 높음 |
  |12| legacy partial(기존 부분 제출 데이터) 호환/마이그레이
  션 | 기존 데이터가 일부 문제만 채점/저장된 형태로 남아 있
  을 수 있어 bulk 전환 시 복원/disabled/표시가 꼬임 | 높음 |
  |13| 다시 풀기(초기화): 키 삭제 + UI 상태 리셋 | 요구사항
  4)인데 현재는 사용자가 저장된 결과/답안을 삭제할 UX가 없음
  | 높음 |
  |14| 채점 후 재입력 정책(스테일 결과 처리) | 채점 후 입력
  변경 시 결과/점수와 입력이 불일치하는 스테일 상태가 발생할
  수 있어 정책이 필요 | 중 |

  ### 2. 과잉 난이도/불필요 선행 (최소 5개)

  | # | 개념명 | 과잉 이유 | 조치 제안 |
  |---|--------|----------|----------|
  | 1 | 서버 연동/DB 저장 | Out of Scope(서버 연동) 위반이며
  localStorage 요구를 흐림 | 금지(이번 범위 밖) |
  | 2 | 문제 타입 확장(서술형/객관식 등) | 이번 티켓은 제출
  UX/저장/복원이며 타입 확장은 별도 사양 필요 | 금지(후속 티
  켓) |
  | 3 | grading 대개편(허용오차/분수/근삿값) | 요구는 일괄
  제출 UX이며 채점 정책 변경은 회귀 위험만 증대 | 기존
  gradeNumericAnswer() 유지 |
  | 4 | 문제은행 JSON 스키마 변경 | 로딩/데이터 구조 변경은
  범위 밖이며 회귀 위험 큼 | 기존 problems_v1.json 유지 |
  | 5 | 전역 상태관리 도입(Redux/Zustand 등) | LearnPage 단
  일 화면 상태로 충분, 도입은 과잉 | React state/useMemo로
  해결 |
  | 6 | 입력 중 실시간 autosave | 요구는 “채점 후 한 번에 저
  장”이며 autosave는 정책/호환을 복잡화 | 이번 범위에서 제외
  |

  ### 3. 학습 순서상 위험한 점프 (최소 5개)

  | # | From → To | 점프 이유 | 브릿지 제안 |
  |---|-----------|----------|------------|
  | 1 | 문제별 제출 제거 → bulk 제출 미구현 | 제거만 하면 채
  점/저장 경로가 사라져 기능 공백 발생 | 단일 채점하기
  +gradeAll 구현 후 제거 |
  | 2 | disabled(원문 입력 기준) → 채점(정규화 기준) | " , "
  같은 케이스에서 버튼 활성/비활성과 채점 결과가 불일치 |
  disabled 판정은 normalizeNumericInput(answer).length>0로
  고정 |
  | 3 | 일괄 저장(한 번에 저장) → 기존 partial 데이터 복원 |
  legacy partial이 “채점됨”처럼 보이거나 allAnswered와 충돌
  | partial 감지 후 정책(초기화/답안만 복원/재채점 요구) 정
  의 |
  | 4 | 점수 표시(항상 0/N 가능) → 채점 UX | 채점 전 0/N 노
  출은 “이미 채점됨” 오해 유발 | hasGraded 도입 후 채점 후에
  만 점수/정답 표시 |
  | 5 | 채점 후 입력 수정 → 결과/점수 유지 | 입력과 결과가
  불일치(스테일) 상태가 발생 | 입력 변경 시 결과 초기화 또는
  버튼을 다시 채점으로 전환 |
  | 6 | 초기화(키 삭제만) → UI 상태 유지 | localStorage만 지
  우면 화면은 이전 결과/답안을 계속 표시 | 키 삭제 +
  answerByProblemId/resultByProblemId/hasGraded 리셋 |

  ## Graph Patch JSON

  {
    "researcher": "R1",
    "scope": "curriculum_viewer_learning_bulk_submit_v1",
    "add_nodes": [
      { "id": "LEARN_MAP_CURRENT_SUBMIT_FLOW", "type":
  "micro", "name_ko": "현재 per-problem 제출/저장 흐름 요
  약", "domain": "FE", "rep": "C", "confidence": 0.86 },
      { "id": "LEARN_REMOVE_PER_PROBLEM_SUBMIT", "type":
  "micro", "name_ko": "문제 카드별 제출 버튼 제거",
  "domain": "FE", "rep": "P", "confidence": 0.85 },
      { "id": "LEARN_ADD_BULK_GRADE_BUTTON", "type":
  "micro", "name_ko": "페이지 하단 단일 버튼(채점하기/전체
  제출) 추가", "domain": "FE", "rep": "P", "confidence":
  0.85 },
      { "id": "LEARN_DISABLED_USES_NORMALIZE_NUMERIC_INPUT",
  "type": "micro", "name_ko": "disabled 판정 기준을
  normalizeNumericInput과 일치", "domain": "FE", "rep": "C",
  "confidence": 0.82 },
      { "id": "LEARN_ALL_ANSWERED_NORMALIZED", "type":
  "micro", "name_ko": "allAnswered 계산(정규화 기반)",
  "domain": "FE", "rep": "P", "confidence": 0.82 },
      { "id": "LEARN_DISABLED_EDGECASES_12", "type":
  "micro", "name_ko": "disabled/정규화 입력 엣지케이스 12종
  정의", "domain": "QA", "rep": "C", "confidence": 0.76 },
      { "id": "LEARN_BULK_GRADE_ALL_ACTION", "type":
  "micro", "name_ko": "일괄 채점 액션(전체 순회
  →gradeNumericAnswer)", "domain": "FE", "rep": "P",
  "confidence": 0.84 },
      { "id": "LEARN_GRADED_STATE_FLAG", "type": "micro",
  "name_ko": "채점 전/후 상태 플래그(hasGraded/isSubmitted)
  정의", "domain": "FE", "rep": "C", "confidence": 0.78 },
      { "id": "LEARN_SHOW_PER_PROBLEM_RESULT", "type":
  "micro", "name_ko": "문제별 정오/정답 표시(일괄 채점 후)",
  "domain": "FE", "rep": "P", "confidence": 0.8 },
      { "id": "LEARN_SCORE_SUMMARY_CALC", "type": "micro",
  "name_ko": "총점 X/N 계산(결과 맵 기반)", "domain": "FE",
  "rep": "P", "confidence": 0.78 },
      { "id": "LEARN_SCORE_AND_RESULT_GATING", "type":
  "micro", "name_ko": "채점 후에만 점수/정오/정답 표시(게이
  팅)", "domain": "FE", "rep": "P", "confidence": 0.76 },
      { "id": "LEARN_STORE_RESULT_SCHEMA_BULK", "type":
  "micro", "name_ko": "bulk 저장 스키마(답안+결과) 계약 정
  의", "domain": "FE", "rep": "C", "confidence": 0.76 },
      { "id": "LEARN_LOCALSTORAGE_SAVE_BULK", "type":
  "micro", "name_ko": "일괄 채점 후 답안+결과를 한 번에 저
  장", "domain": "FE", "rep": "P", "confidence": 0.8 },
      { "id": "LEARN_LOCALSTORAGE_RESTORE_BULK", "type":
  "micro", "name_ko": "재진입/새로고침 시 결과/답안 복원",
  "domain": "FE", "rep": "P", "confidence": 0.78 },
      { "id": "LEARN_LOCALSTORAGE_MIGRATION_LEGACY_PARTIAL",
  "type": "micro", "name_ko": "기존 부분 제출 데이터 호환/마
  이그레이션 규칙", "domain": "FE", "rep": "C",
  "confidence": 0.74 },
      { "id": "LEARN_RESET_CLEAR_STORAGE", "type": "micro",
  "name_ko": "다시 풀기: localStorage 키 삭제", "domain":
  "FE", "rep": "P", "confidence": 0.82 },
      { "id": "LEARN_RESET_UI_STATE", "type": "micro",
  "name_ko": "다시 풀기: UI 상태 리셋(answerByProblemId/
  results/hasGraded)", "domain": "FE", "rep": "P",
  "confidence": 0.78 },
      { "id": "LEARN_AFTER_GRADE_EDIT_POLICY", "type":
  "micro", "name_ko": "채점 후 재입력 정책(결과 초기화 또는
  다시 채점)", "domain": "UX", "rep": "C", "confidence":
  0.7 }
    ],
    "merge_aliases": [],
    "add_edges": [
      { "from":
  "LEARN_DISABLED_USES_NORMALIZE_NUMERIC_INPUT", "to":
  "LEARN_ALL_ANSWERED_NORMALIZED", "type": "requires",
  "confidence": 0.82 },
      { "from": "LEARN_ALL_ANSWERED_NORMALIZED", "to":
  "LEARN_ADD_BULK_GRADE_BUTTON", "type": "requires",
  "confidence": 0.7 },
      { "from": "LEARN_ADD_BULK_GRADE_BUTTON", "to":
  "LEARN_BULK_GRADE_ALL_ACTION", "type": "requires",
  "confidence": 0.8 },
      { "from": "LEARN_BULK_GRADE_ALL_ACTION", "to":
  "LEARN_GRADED_STATE_FLAG", "type": "requires",
  "confidence": 0.74 },
      { "from": "LEARN_GRADED_STATE_FLAG", "to":
  "LEARN_SCORE_AND_RESULT_GATING", "type": "requires",
  "confidence": 0.76 },
      { "from": "LEARN_GRADED_STATE_FLAG", "to":
  "LEARN_SHOW_PER_PROBLEM_RESULT", "type": "requires",
  "confidence": 0.74 },
      { "from": "LEARN_BULK_GRADE_ALL_ACTION", "to":
  "LEARN_SCORE_SUMMARY_CALC", "type": "requires",
  "confidence": 0.78 },
      { "from": "LEARN_STORE_RESULT_SCHEMA_BULK", "to":
  "LEARN_LOCALSTORAGE_SAVE_BULK", "type": "requires",
  "confidence": 0.8 },
      { "from": "LEARN_STORE_RESULT_SCHEMA_BULK", "to":
  "LEARN_LOCALSTORAGE_RESTORE_BULK", "type": "requires",
  "confidence": 0.8 },
      { "from": "LEARN_BULK_GRADE_ALL_ACTION", "to":
  "LEARN_LOCALSTORAGE_SAVE_BULK", "type": "requires",
  "confidence": 0.8 },
      { "from":
  "LEARN_LOCALSTORAGE_MIGRATION_LEGACY_PARTIAL", "to":
  "LEARN_LOCALSTORAGE_RESTORE_BULK", "type": "requires",
  "confidence": 0.74 },
      { "from": "LEARN_LOCALSTORAGE_RESTORE_BULK", "to":
  "LEARN_GRADED_STATE_FLAG", "type": "requires",
  "confidence": 0.72 },
      { "from": "LEARN_LOCALSTORAGE_SAVE_BULK", "to":
  "LEARN_RESET_CLEAR_STORAGE", "type": "requires",
  "confidence": 0.74 },
      { "from": "LEARN_RESET_CLEAR_STORAGE", "to":
  "LEARN_RESET_UI_STATE", "type": "requires", "confidence":
  0.78 },
      { "from": "LEARN_AFTER_GRADE_EDIT_POLICY", "to":
  "LEARN_SCORE_AND_RESULT_GATING", "type": "requires",
  "confidence": 0.7 },
      { "from": "LEARN_BULK_GRADE_ALL_ACTION", "to":
  "LEARN_REMOVE_PER_PROBLEM_SUBMIT", "type": "requires",
  "confidence": 0.72 }
    ],
    "remove_edges": [],
    "notes": [
      { "claim": "현재 LearnPage는 문제 카드별 제출
  (submitProblem)로 단건 채점 후 submissions를 localStorage
  키(curriculum-viewer:learn:lastResult:${nodeId})에 merge
  저장한다.", "reason": "LearnPage.tsx에서
  StoredResult{submissions} 타입과 submitProblem의
  setItem(JSON.stringify(payload)) 흐름이 확인된다.",
  "confidence": 0.86 },
      { "claim": "disabled 판정은 normalizeNumericInput과 동
  일 기준으로 정의해야 한다.", "reason": "grading.ts의
  normalizeNumericInput은 공백/콤마 제거를 수행하므로,
  disabled가 원문 기준이면 '입력됨/미입력'이 채점과 불일치한
  다.", "confidence": 0.82 },
      { "claim": "bulk 전환 시 legacy partial(일부 문제만
  submissions에 존재) 데이터가 자연스럽게 존재하므로 호환/마
  이그레이션 정책이 필요하다.", "reason": "기존 구현은 문제
  별 제출 시마다 submissions를 누적 저장하므로 전체 문제 수
  보다 적은 저장 데이터가 생성된다.", "confidence": 0.78 },
      { "claim": "점수/정오/정답 표시는 hasGraded 같은 상태
  로 게이팅해야 한다.", "reason": "채점 전 0/N 노출 및 저장/
  복원 시 표시 기준 혼란을 막기 위해 채점 전/후를 분리해야
  한다.", "confidence": 0.74 },
      { "claim": "다시 풀기는 localStorage 키 삭제와 UI 상태
  리셋을 함께 수행해야 한다.", "reason": "키 삭제만으로는 화
  면에 남아있는 answer/result 상태가 즉시 초기화되지 않아 UX
  가 어긋난다.", "confidence": 0.78 }
    ]
  }

  ## Standards Tags (내부 태그)

  - 추가된 태그: LEARN_MAP_CURRENT_SUBMIT_FLOW,
    LEARN_REMOVE_PER_PROBLEM_SUBMIT,
    LEARN_ADD_BULK_GRADE_BUTTON,
    LEARN_DISABLED_USES_NORMALIZE_NUMERIC_INPUT,
    LEARN_ALL_ANSWERED_NORMALIZED,
    LEARN_DISABLED_EDGECASES_12,
    LEARN_BULK_GRADE_ALL_ACTION, LEARN_GRADED_STATE_FLAG,
    LEARN_SHOW_PER_PROBLEM_RESULT, LEARN_SCORE_SUMMARY_CALC,
    LEARN_SCORE_AND_RESULT_GATING,
    LEARN_STORE_RESULT_SCHEMA_BULK,
    LEARN_LOCALSTORAGE_SAVE_BULK,
    LEARN_LOCALSTORAGE_RESTORE_BULK,
    LEARN_LOCALSTORAGE_MIGRATION_LEGACY_PARTIAL,
    LEARN_RESET_CLEAR_STORAGE, LEARN_RESET_UI_STATE,
    LEARN_AFTER_GRADE_EDIT_POLICY
  - 수정된 태그: (없음)

  [/R1 Coverage Report]

  ###DONE:c49dfc24b0###


› -> /mnt/c/Users/irron/Desktop/my/web_service_new/
  calculate_math/.agents/inbox/research_cd88845efc.md


  40% context left



› Request cd88845efc: 아래 파일(티켓 지시)을 읽고 결과를 이
  터미널에 Output Format대로 그대로 출력해줘. 가능하면 repo
  파일을 생성/수정하지 말고, 마지막에 마커를 그대로 출력해.
  -> /mnt/c/Users/irron/Desktop/my/web_service_new/
  calculate_math/.agents/inbox/research_cd88845efc.md


    rki
•         
                               

─                                                           
  42% context left · ? for shortcuts


• ###BEGIN:cd88845efc###

  ## Coverage Gap Report

  ### 1. 누락된 기초 개념 (최소 10개)

  | # | 개념명 | 누락 이유 | 심각도 |
  |---|--------|----------|--------|
  | 1 | 현재 동작/상태 흐름 1페이지 요약 | LearnPage는 “문제
  별 제출→단건 채점→localStorage merge 저장” 구조인데, 이를
  기준선으로 요약하지 않으면 bulk 전환 시 회귀 원인을 추적하
  기 어려움 | 높음 |
  | 2 | StoredResult 스키마 명시(현재: submissions) | 저장/
  복원 계약이 { nodeId, updatedAt, submissions }인데 bulk 저
  장으로 바뀔 때 호환/마이그레이션 규칙이 필요 | 높음 |
  | 3 | 단일 버튼 채점하기 UX(하단 고정) | 요구사항은 “모든
  문제 입력 후 한 번에 제출”인데 현재 UI는 문제 카드별 제출
  만 존재 | 높음 |
  | 4 | 채점하기 disabled 기준(정규화 일치) | disabled 판정
  이 normalizeNumericInput()과 일관되지 않으면 " , " 같은 입
  력에서 활성/비활성이 채점과 불일치 | 높음 |
  | 5 | allAnswered 계산(정규화 기반) | problems[] 전체에 대
  해 정규화 후 빈 값 여부를 확인해야 “모든 문제 입력 전까지
  disabled”를 구현 가능 | 높음 |
  | 6 | 입력 엣지케이스 10+ 정의 | AC 요구(10개+) 충족을 위
  해 최소 벡터가 필요(빈값/공백/콤마/0/부호/소수점/Infinity
  등) | 중 |
  | 7 | 일괄 채점 액션(전체 순회→gradeNumericAnswer) | 현재
  는 단건 submitProblem만 있어 “한 번에 전체 채점” 동작이 없
  음 | 높음 |
  | 8 | 채점 전/후 상태 플래그(hasGraded/isSubmitted) | 채점
  전 0/N 노출, 복원 후 표시 기준 혼란을 막기 위해 채점 전/후
  상태를 분리해야 함 | 중 |
  | 9 | 점수/정오/정답 표시 게이팅 | 채점 후에만 결과를 노출
  해야 사용자 혼란(채점 전 점수 노출/legacy partial) 최소화
  | 중 |
  |10| bulk 저장(답안+결과를 한 번에 저장) | 요구사항 3) 저
  장 시점이 “개별 제출”이 아니라 “일괄 채점 후”로 바뀌어야
  함 | 높음 |
  |11| bulk 복원(재진입/새로고침) | 저장된 답안/결과를 한 번
  에 복원해 UI 상태를 재구성해야 함 | 높음 |
  |12| legacy partial 호환/마이그레이션 정책 | 기존 per-
  problem 저장은 submissions 일부만 남기는 데이터가 자연스럽
  게 생성되므로 bulk 전환 후 충돌 방지 정책이 필요 | 높음 |
  |13| 초기화(다시 풀기): localStorage 삭제 + UI 리셋 | 요구
  사항 4)인데 현재 사용자가 저장된 결과/답안을 지울 방법이
  없음 | 높음 |
  |14| strict JSON 출력 가드(줄바꿈 금지) | reviewer 지적처
  럼 문자열 내부 줄바꿈이 있으면 자동 파싱/병합이 실패하므로
  산출물 JSON은 strict JSON이어야 함 | 높음 |

  ### 2. 과잉 난이도/불필요 선행 (최소 5개)

  | # | 개념명 | 과잉 이유 | 조치 제안 |
  |---|--------|----------|----------|
  | 1 | 서버 연동/DB 저장 | Out of Scope 위반이며
  localStorage 요구를 흐림 | 금지 |
  | 2 | 문제 타입 확장(서술형/객관식) | 이번 티켓은 제출 UX/
  저장/복원이며 타입 확장은 별도 설계 필요 | 금지(후속 티켓)
  |
  | 3 | 채점 정책 확장(허용오차/분수/근사) | bulk 제출 UX와
  무관하며 회귀 위험만 증가 | gradeNumericAnswer() 유지 |
  | 4 | 문제은행 스키마 변경 | 데이터 구조 변경은 범위 밖이
  며 회귀 위험 큼 | problems_v1.json 유지 |
  | 5 | 전역 상태관리 도입(Redux/Zustand) | LearnPage 단일
  화면 상태로 충분 | 도입 금지 |
  | 6 | autosave(입력 즉시 저장) | 요구는 “채점 후 한 번에
  저장”이며 호환/정책을 복잡화 | 제외 |

  ### 3. 학습 순서상 위험한 점프 (최소 5개)

  | # | From → To | 점프 이유 | 브릿지 제안 |
  |---|-----------|----------|------------|
  | 1 | 문제별 제출 제거 → bulk 액션/버튼 미구현 | 제거만 하
  면 채점/저장 경로가 사라져 기능 공백 발생 | 채점하기
  +gradeAll 구현 후 제거 |
  | 2 | disabled(원문 기준) → 채점(정규화 기준) | " , " 등에
  서 활성/비활성과 채점이 불일치해 UX 붕괴 | disabled는
  normalizeNumericInput(answer).length>0로 통일 |
  | 3 | bulk 저장 도입 → legacy partial 복원 | 기존
  submissions 일부만 저장된 데이터가 bulk 상태/표시와 충돌 |
  legacy partial 감지 후 정책(초기화/답안만 복원/재채점 유
  도) |
  | 4 | 점수 표시(항상 0/N 가능) → 채점 UX | 채점 전 점수 노
  출은 “이미 채점됨” 오해 유발 | hasGraded 도입 후 채점 후에
  만 점수/정답 표시 |
  | 5 | 채점 후 입력 수정 → 결과 유지 | 입력과 결과가 불일치
  (스테일) 상태 발생 | 입력 변경 시 결과 초기화 또는 다시 채
  점 플로우 |
  | 6 | 초기화(키 삭제만) → UI 상태 유지 | 저장소만 지우면
  화면에 남아있는 answer/result/flags가 그대로 | 키 삭제 +
  UI 상태 리셋 동시 수행 |

  ## Graph Patch JSON

  {
    "researcher": "R1",
    "scope": "curriculum_viewer_learning_bulk_submit_v1",
    "add_nodes": [
      { "id": "LEARN_MAP_CURRENT_SUBMIT_FLOW", "type":
  "micro", "name_ko": "현재 per-problem 제출/저장 흐름 1페이
  지 요약", "domain": "FE", "rep": "C", "confidence":
  0.86 },
      { "id": "LEARN_DOCUMENT_STORED_RESULT_SCHEMA", "type":
  "micro", "name_ko": "StoredResult/ submisions 스키마 문서
  화", "domain": "FE", "rep": "C", "confidence": 0.82 },
      { "id": "LEARN_REMOVE_PER_PROBLEM_SUBMIT", "type":
  "micro", "name_ko": "문제 카드별 제출 버튼 제거",
  "domain": "FE", "rep": "P", "confidence": 0.85 },
      { "id": "LEARN_ADD_BULK_GRADE_BUTTON", "type":
  "micro", "name_ko": "페이지 하단 단일 버튼(채점하기/전체
  제출) 추가", "domain": "FE", "rep": "P", "confidence":
  0.85 },
      { "id": "LEARN_DISABLED_USES_NORMALIZE_NUMERIC_INPUT",
  "type": "micro", "name_ko": "disabled 판정 기준을
  normalizeNumericInput과 일치", "domain": "FE", "rep": "C",
  "confidence": 0.82 },
      { "id": "LEARN_ALL_ANSWERED_NORMALIZED", "type":
  "micro", "name_ko": "allAnswered 계산(정규화 기반)",
  "domain": "FE", "rep": "P", "confidence": 0.82 },
      { "id": "LEARN_DISABLED_EDGECASES_12", "type":
  "micro", "name_ko": "입력 엣지케이스 12종 정의(빈값/공백/
  콤마/0/부호/소수점 등)", "domain": "QA", "rep": "C",
  "confidence": 0.76 },
      { "id": "LEARN_BULK_GRADE_ALL_ACTION", "type":
  "micro", "name_ko": "일괄 채점 액션(전체 순회
  →gradeNumericAnswer)", "domain": "FE", "rep": "P",
  "confidence": 0.84 },
      { "id": "LEARN_GRADED_STATE_FLAG", "type": "micro",
  "name_ko": "채점 전/후 상태 플래그(hasGraded/isSubmitted)
  정의", "domain": "FE", "rep": "C", "confidence": 0.78 },
      { "id": "LEARN_SCORE_AND_RESULT_GATING", "type":
  "micro", "name_ko": "채점 후에만 점수/정오/정답 표시(게이
  팅)", "domain": "FE", "rep": "P", "confidence": 0.76 },
      { "id": "LEARN_STORE_RESULT_SCHEMA_BULK", "type":
  "micro", "name_ko": "bulk 저장 스키마(답안+결과) 계약 정
  의", "domain": "FE", "rep": "C", "confidence": 0.76 },
      { "id": "LEARN_LOCALSTORAGE_SAVE_BULK", "type":
  "micro", "name_ko": "일괄 채점 후 답안+결과를 한 번에 저
  장", "domain": "FE", "rep": "P", "confidence": 0.8 },
      { "id": "LEARN_LOCALSTORAGE_RESTORE_BULK", "type":
  "micro", "name_ko": "재진입/새로고침 시 결과/답안 복원",
  "domain": "FE", "rep": "P", "confidence": 0.78 },
      { "id": "LEARN_LOCALSTORAGE_MIGRATION_LEGACY_PARTIAL",
  "type": "micro", "name_ko": "legacy partial(부분 제출) 데
  이터 호환/정책", "domain": "FE", "rep": "C", "confidence":
  0.74 },
      { "id": "LEARN_RESET_CLEAR_STORAGE", "type": "micro",
  "name_ko": "다시 풀기: localStorage 키 삭제", "domain":
  "FE", "rep": "P", "confidence": 0.82 },
      { "id": "LEARN_RESET_UI_STATE", "type": "micro",
  "name_ko": "다시 풀기: UI 상태 리셋(answer/results/
  flags)", "domain": "FE", "rep": "P", "confidence": 0.78 },
      { "id": "LEARN_AFTER_GRADE_EDIT_POLICY", "type":
  "micro", "name_ko": "채점 후 재입력 정책(결과 초기화 또는
  다시 채점)", "domain": "UX", "rep": "C", "confidence":
  0.7 },
      { "id": "LEARN_STRICT_JSON_OUTPUT_GUARD", "type":
  "micro", "name_ko": "Graph Patch JSON strict JSON 보장(문
  자열 줄바꿈 금지)", "domain": "QA", "rep": "C",
  "confidence": 0.84 }
    ],
    "merge_aliases": [],
    "add_edges": [
      { "from": "LEARN_MAP_CURRENT_SUBMIT_FLOW", "to":
  "LEARN_DOCUMENT_STORED_RESULT_SCHEMA", "type": "requires",
  "confidence": 0.78 },
      { "from":
  "LEARN_DISABLED_USES_NORMALIZE_NUMERIC_INPUT", "to":
  "LEARN_ALL_ANSWERED_NORMALIZED", "type": "requires",
  "confidence": 0.82 },
      { "from": "LEARN_ALL_ANSWERED_NORMALIZED", "to":
  "LEARN_ADD_BULK_GRADE_BUTTON", "type": "requires",
  "confidence": 0.7 },
      { "from": "LEARN_ADD_BULK_GRADE_BUTTON", "to":
  "LEARN_BULK_GRADE_ALL_ACTION", "type": "requires",
  "confidence": 0.8 },
      { "from": "LEARN_BULK_GRADE_ALL_ACTION", "to":
  "LEARN_GRADED_STATE_FLAG", "type": "requires",
  "confidence": 0.74 },
      { "from": "LEARN_GRADED_STATE_FLAG", "to":
  "LEARN_SCORE_AND_RESULT_GATING", "type": "requires",
  "confidence": 0.76 },
      { "from": "LEARN_STORE_RESULT_SCHEMA_BULK", "to":
  "LEARN_LOCALSTORAGE_SAVE_BULK", "type": "requires",
  "confidence": 0.8 },
      { "from": "LEARN_STORE_RESULT_SCHEMA_BULK", "to":
  "LEARN_LOCALSTORAGE_RESTORE_BULK", "type": "requires",
  "confidence": 0.8 },
      { "from":
  "LEARN_LOCALSTORAGE_MIGRATION_LEGACY_PARTIAL", "to":
  "LEARN_LOCALSTORAGE_RESTORE_BULK", "type": "requires",
  "confidence": 0.74 },
      { "from": "LEARN_LOCALSTORAGE_RESTORE_BULK", "to":
  "LEARN_GRADED_STATE_FLAG", "type": "requires",
  "confidence": 0.72 },
      { "from": "LEARN_LOCALSTORAGE_SAVE_BULK", "to":
  "LEARN_RESET_CLEAR_STORAGE", "type": "requires",
  "confidence": 0.74 },
      { "from": "LEARN_RESET_CLEAR_STORAGE", "to":
  "LEARN_RESET_UI_STATE", "type": "requires", "confidence":
  0.78 },
      { "from": "LEARN_AFTER_GRADE_EDIT_POLICY", "to":
  "LEARN_SCORE_AND_RESULT_GATING", "type": "requires",
  "confidence": 0.7 },
      { "from": "LEARN_BULK_GRADE_ALL_ACTION", "to":
  "LEARN_REMOVE_PER_PROBLEM_SUBMIT", "type": "requires",
  "confidence": 0.72 },
      { "from": "LEARN_STRICT_JSON_OUTPUT_GUARD", "to":
  "LEARN_STORE_RESULT_SCHEMA_BULK", "type": "requires",
  "confidence": 0.74 }
    ],
    "remove_edges": [],
    "notes": [
      { "claim": "현재 LearnPage는 문제별 제출
  (submitProblem)로 단건 채점 후 submissions를 localStorage
  키(curriculum-viewer:learn:lastResult:${nodeId})에 merge
  저장한다.", "reason": "LearnPage.tsx에서
  StoredResult{submissions} 타입 정의와
  setItem(JSON.stringify(payload))가 확인된다.",
  "confidence": 0.86 },
      { "claim": "disabled 판정은 normalizeNumericInput과 동
  일 기준으로 정의해야 한다.", "reason":
  "normalizeNumericInput이 공백/콤마 제거를 수행하므로 원문
  기준 disabled는 채점과 불일치해 UX가 붕괴한다.",
  "confidence": 0.82 },
      { "claim": "legacy partial 데이터는 bulk 전환 시 필연
  적으로 존재할 수 있어 복원 단계에서 감지/정책화가 필요하
  다.", "reason": "기존 per-problem 저장은 전체 문제 수보다
  적은 submissions를 남기는 것이 정상 동작이었다.",
  "confidence": 0.74 },
      { "claim": "채점 전/후 게이팅(hasGraded)은 점수/정답
  조기 노출과 저장/복원 혼선을 줄인다.", "reason": "채점 전
  0/N 노출, 부분 저장 데이터 노출을 통제하려면 표시 기준이
  필요하다.", "confidence": 0.74 },
      { "claim": "Graph Patch JSON은 문자열 내부 줄바꿈이 있
  으면 파서가 실패하므로 strict JSON으로 재출력되어야 한
  다.", "reason": "reviewer 지적처럼 JSON 파싱 실패는 결합
  패치 검증/병합 파이프라인을 중단시킨다.", "confidence":
  0.84 }
    ]
  }

  ## Standards Tags (내부 태그)

  - 추가된 태그: LEARN_MAP_CURRENT_SUBMIT_FLOW,
    LEARN_DOCUMENT_STORED_RESULT_SCHEMA,
    LEARN_REMOVE_PER_PROBLEM_SUBMIT,
    LEARN_ADD_BULK_GRADE_BUTTON,
    LEARN_DISABLED_USES_NORMALIZE_NUMERIC_INPUT,
    LEARN_ALL_ANSWERED_NORMALIZED,
    LEARN_DISABLED_EDGECASES_12,
    LEARN_BULK_GRADE_ALL_ACTION, LEARN_GRADED_STATE_FLAG,
    LEARN_SCORE_AND_RESULT_GATING,
    LEARN_STORE_RESULT_SCHEMA_BULK,
    LEARN_LOCALSTORAGE_SAVE_BULK,
    LEARN_LOCALSTORAGE_RESTORE_BULK,
    LEARN_LOCALSTORAGE_MIGRATION_LEGACY_PARTIAL,
    LEARN_RESET_CLEAR_STORAGE, LEARN_RESET_UI_STATE,
    LEARN_AFTER_GRADE_EDIT_POLICY,
    LEARN_STRICT_JSON_OUTPUT_GUARD
  - 수정된 태그: (없음)

  [/R1 Coverage Report]

  ###DONE:cd88845efc###


› -> /mnt/c/Users/irron/Desktop/my/web_service_new/
  calculate_math/.agents/inbox/research_f0805f8d87.md


  40% context left



› Request f0805f8d87: 아래 파일(티켓 지시)을 읽고 결과를 이
  터미널에 Output Format대로 그대로 출력해줘. 가능하면 repo
  파일을 생성/수정하지 말고, 마지막에 마커를 그대로 출력해.
  -> /mnt/c/Users/irron/Desktop/my/web_service_new/
  calculate_math/.agents/inbox/research_f0805f8d87.md


   ork     10s • esc to inte rupt)
•         
                               

─                                                           
  39% context left · ? for shortcuts


• ###BEGIN:f0805f8d87###

  ## Coverage Gap Report

  ### 1. 누락된 기초 개념 (최소 10개)

  | # | 개념명 | 누락 이유 | 심각도 |
  |---|--------|----------|--------|
  | 1 | 현재 LearnPage 제출/저장 흐름 기준선 요약 | 현재는
  문제별 제출→단건 채점→submissions merge 저장 구조라, bulk
  전환 시 무엇이 바뀌는지 기준선이 필요 | 높음 |
  | 2 | StoredResult(submissions) 스키마 명시 | localStorage
  저장/복원 계약이 명시되지 않으면 bulk 저장으로 전환 시 호
  환/마이그레이션 규칙이 흔들림 | 높음 |
  | 3 | 문제 카드별 제출 버튼 제거 | 요구사항 1) 핵심인데 현
  재 UI는 per-problem 제출에 고정 | 높음 |
  | 4 | 하단 단일 채점하기(전체 제출) 버튼 | 요구 UX의 유일
  한 진입점이 필요하나 현재 없음 | 높음 |
  | 5 | 채점하기 disabled 기준(정규화 일관성) | disabled 판
  정이 normalizeNumericInput()과 불일치하면 " , " 같은 입력
  에서 활성/비활성이 채점과 엇갈림 | 높음 |
  | 6 | allAnswered 계산(정규화 기반) | problems[] 전체를 기
  준으로 “모두 입력됨”을 안정적으로 계산해야 함(로딩 타이밍/
  문제 수 변화 포함) | 높음 |
  | 7 | 입력 엣지케이스 10+ 정의 | AC 요구 충족을 위해 최소
  벡터가 필요(예: "", " ", ",", " , ", "0", "-0", "1,234", "
  1 234 ", "+", ".", "Infinity" 등) | 중 |
  | 8 | 일괄 채점 액션(전체 순회→gradeNumericAnswer) | 현재
  는 submitProblem(problem)로 단건 채점만 가능해 bulk 채점
  동작이 없음 | 높음 |
  | 9 | 채점 전/후 상태 플래그(hasGraded/isSubmitted) | 채점
  전 점수/정답 노출(0/N) 및 복원 후 표시 기준 혼란을 막기 위
  해 필요 | 중 |
  |10| 점수/정오/정답 표시 게이팅 | 채점 후에만 결과를 노출
  해야 UX가 일관되고 legacy partial 데이터 혼선을 줄임 | 중
  |
  |11| bulk 저장(답안+결과를 한 번에 저장) | 요구사항 3) 저
  장 시점이 개별 제출이 아니라 일괄 채점 후로 바뀌어야 함 |
  높음 |
  |12| bulk 복원(재진입/새로고침) | 저장된 답안/결과를 복원
  해 상태를 재구성해야 함 | 높음 |
  |13| legacy partial 호환/정책 | 기존 per-problem 저장은
  submissions 일부만 남기는 데이터가 정상으로 생성되므로,
  bulk 전환 후 충돌 방지 정책이 필요 | 높음 |
  |14| 다시 풀기(초기화): 키 삭제 + UI 리셋 | 요구사항 4)이
  며 키 삭제만으로는 화면이 즉시 초기화되지 않음 | 높음 |
  |15| strict JSON 산출 가드 | reviewer 지적처럼 문자열 내부
  줄바꿈이 있으면 파싱/병합이 실패하므로 산출물 JSON은
  strict JSON이어야 함 | 높음 |

  ### 2. 과잉 난이도/불필요 선행 (최소 5개)

  | # | 개념명 | 과잉 이유 | 조치 제안 |
  |---|--------|----------|----------|
  | 1 | R3 Transfer 템플릿/트리플릿 강제 | 본 티켓은 FE/UX
  개선이며 problem templates/triplets은 도메인 부적합(또는
  N/A 처리 필요) | N/A 명시 또는 최소 전이(상태 전이) 예시로
  대체 |
  | 2 | 서버 연동/DB 저장 | Out of Scope 위반, localStorage
  요구를 흐림 | 금지 |
  | 3 | 문제 타입 확장(서술형/객관식) | 이번 티켓 범위를 벗
  어남 | 금지(후속 티켓) |
  | 4 | grading 정책 확장(허용오차/분수/근사) | bulk 제출 UX
  와 무관하며 회귀 위험 증가 | 기존 gradeNumericAnswer 유지
  |
  | 5 | 문제은행 JSON 스키마 변경 | 데이터 구조 변경은 범위
  밖, 회귀 위험 큼 | 기존 스키마 유지 |
  | 6 | 전역 상태관리 도입(Redux/Zustand) | LearnPage 단일
  화면 상태로 충분 | 도입 금지 |

  ### 3. 학습 순서상 위험한 점프 (최소 5개)

  | # | From → To | 점프 이유 | 브릿지 제안 |
  |---|-----------|----------|------------|
  | 1 | 문제별 제출 제거 → bulk 버튼/액션 미구현 | 제거만 하
  면 채점/저장 경로가 사라져 기능 공백 발생 | 채점하기
  +gradeAll 구현 후 제거 |
  | 2 | disabled(원문 기준) → 채점(정규화 기준) | " , " 등에
  서 활성/비활성과 채점이 불일치해 UX 붕괴 | disabled는
  normalizeNumericInput(answer).length>0로 통일 |
  | 3 | bulk 저장 도입 → legacy partial 복원 | 기존
  submissions 일부만 저장된 데이터가 bulk 표시/disabled와 충
  돌 | partial 감지 후 정책(초기화/답안만 복원/재채점 유도)
  |
  | 4 | 점수 표시 → 채점 UX | 채점 전 0/N 노출은 “이미 채점
  됨” 오해 유발 | hasGraded 도입 후 채점 후에만 점수/정답 표
  시 |
  | 5 | 채점 후 입력 수정 → 결과 유지 | 입력과 결과가 불일치
  (스테일) 상태 발생 | 입력 변경 시 결과 초기화 또는 다시 채
  점 플로우 |
  | 6 | 초기화(키 삭제만) → UI 상태 유지 | 저장소만 지우면
  화면에 남은 answer/result/flags가 그대로 | 키 삭제 + UI 리
  셋 동시 수행 |

  ## Graph Patch JSON

  {
    "researcher": "R1",
    "scope": "curriculum_viewer_learning_bulk_submit_v1",
    "add_nodes": [
      { "id": "LEARN_MAP_CURRENT_SUBMIT_FLOW", "type":
  "micro", "name_ko": "현재 per-problem 제출/저장 흐름 1페이
  지 요약", "domain": "FE", "rep": "C", "confidence":
  0.86 },
      { "id": "LEARN_DOCUMENT_STORED_RESULT_SCHEMA", "type":
  "micro", "name_ko": "StoredResult/submissions 스키마 문서
  화", "domain": "FE", "rep": "C", "confidence": 0.82 },
      { "id": "LEARN_REMOVE_PER_PROBLEM_SUBMIT", "type":
  "micro", "name_ko": "문제 카드별 제출 버튼 제거",
  "domain": "FE", "rep": "P", "confidence": 0.85 },
      { "id": "LEARN_ADD_BULK_GRADE_BUTTON", "type":
  "micro", "name_ko": "페이지 하단 단일 버튼(채점하기/전체
  제출) 추가", "domain": "FE", "rep": "P", "confidence":
  0.85 },
      { "id": "LEARN_DISABLED_USES_NORMALIZE_NUMERIC_INPUT",
  "type": "micro", "name_ko": "disabled 판정 기준을
  normalizeNumericInput과 일치", "domain": "FE", "rep": "C",
  "confidence": 0.82 },
      { "id": "LEARN_ALL_ANSWERED_NORMALIZED", "type":
  "micro", "name_ko": "allAnswered 계산(정규화 기반)",
  "domain": "FE", "rep": "P", "confidence": 0.82 },
      { "id": "LEARN_DISABLED_EDGECASES_12", "type":
  "micro", "name_ko": "입력 엣지케이스 12종 정의(빈값/공백/
  콤마/0/부호/소수점 등)", "domain": "QA", "rep": "C",
  "confidence": 0.76 },
      { "id": "LEARN_BULK_GRADE_ALL_ACTION", "type":
  "micro", "name_ko": "일괄 채점 액션(전체 순회
  →gradeNumericAnswer)", "domain": "FE", "rep": "P",
  "confidence": 0.84 },
      { "id": "LEARN_BUILD_RESULT_MAP", "type": "micro",
  "name_ko": "문제별 결과 맵(resultByProblemId) 생성",
  "domain": "FE", "rep": "P", "confidence": 0.78 },
      { "id": "LEARN_GRADED_STATE_FLAG", "type": "micro",
  "name_ko": "채점 전/후 상태 플래그(hasGraded 등) 정의",
  "domain": "FE", "rep": "C", "confidence": 0.78 },
      { "id": "LEARN_SCORE_SUMMARY_CALC", "type": "micro",
  "name_ko": "총점 X/N 계산(결과 맵 기반)", "domain": "FE",
  "rep": "P", "confidence": 0.76 },
      { "id": "LEARN_SCORE_AND_RESULT_GATING", "type":
  "micro", "name_ko": "채점 후에만 점수/정오/정답 표시(게이
  팅)", "domain": "FE", "rep": "P", "confidence": 0.76 },
      { "id": "LEARN_SHOW_PER_PROBLEM_RESULT", "type":
  "micro", "name_ko": "문제별 정오/정답 표시(일괄 채점 후)",
  "domain": "FE", "rep": "P", "confidence": 0.78 },
      { "id": "LEARN_STORE_RESULT_SCHEMA_BULK", "type":
  "micro", "name_ko": "bulk 저장 스키마(답안+결과) 계약 정
  의", "domain": "FE", "rep": "C", "confidence": 0.76 },
      { "id": "LEARN_LOCALSTORAGE_VALIDATE_SHAPE", "type":
  "micro", "name_ko": "복원 데이터 파싱/검증 규칙(JSON shape
  validate)", "domain": "FE", "rep": "C", "confidence":
  0.78 },
      { "id": "LEARN_LOCALSTORAGE_SAVE_BULK", "type":
  "micro", "name_ko": "일괄 채점 후 답안+결과를 한 번에 저
  장", "domain": "FE", "rep": "P", "confidence": 0.8 },
      { "id": "LEARN_LOCALSTORAGE_RESTORE_BULK", "type":
  "micro", "name_ko": "재진입/새로고침 시 결과/답안 복원",
  "domain": "FE", "rep": "P", "confidence": 0.78 },
      { "id": "LEARN_LOCALSTORAGE_MIGRATION_LEGACY_PARTIAL",
  "type": "micro", "name_ko": "legacy partial(부분 제출) 호
  환/정책", "domain": "FE", "rep": "C", "confidence":
  0.74 },
      { "id": "LEARN_RESET_CLEAR_STORAGE", "type": "micro",
  "name_ko": "다시 풀기: localStorage 키 삭제", "domain":
  "FE", "rep": "P", "confidence": 0.82 },
      { "id": "LEARN_RESET_UI_STATE", "type": "micro",
  "name_ko": "다시 풀기: UI 상태 리셋(answer/results/
  flags)", "domain": "FE", "rep": "P", "confidence": 0.78 },
      { "id": "LEARN_AFTER_GRADE_EDIT_POLICY", "type":
  "micro", "name_ko": "채점 후 재입력 정책(결과 초기화 또는
  다시 채점)", "domain": "UX", "rep": "C", "confidence":
  0.7 },
      { "id": "LEARN_STRICT_JSON_OUTPUT_GUARD", "type":
  "micro", "name_ko": "Graph Patch JSON strict JSON 보장(문
  자열 줄바꿈 금지)", "domain": "QA", "rep": "C",
  "confidence": 0.84 }
    ],
    "merge_aliases": [],
    "add_edges": [
      { "from": "LEARN_MAP_CURRENT_SUBMIT_FLOW", "to":
  "LEARN_DOCUMENT_STORED_RESULT_SCHEMA", "type": "requires",
  "confidence": 0.78 },
      { "from":
  "LEARN_DISABLED_USES_NORMALIZE_NUMERIC_INPUT", "to":
  "LEARN_ALL_ANSWERED_NORMALIZED", "type": "requires",
  "confidence": 0.82 },
      { "from": "LEARN_ALL_ANSWERED_NORMALIZED", "to":
  "LEARN_ADD_BULK_GRADE_BUTTON", "type": "requires",
  "confidence": 0.7 },
      { "from": "LEARN_ADD_BULK_GRADE_BUTTON", "to":
  "LEARN_BULK_GRADE_ALL_ACTION", "type": "requires",
  "confidence": 0.8 },
      { "from": "LEARN_BULK_GRADE_ALL_ACTION", "to":
  "LEARN_BUILD_RESULT_MAP", "type": "requires",
  "confidence": 0.78 },
      { "from": "LEARN_BUILD_RESULT_MAP", "to":
  "LEARN_SCORE_SUMMARY_CALC", "type": "requires",
  "confidence": 0.76 },
      { "from": "LEARN_BUILD_RESULT_MAP", "to":
  "LEARN_SHOW_PER_PROBLEM_RESULT", "type": "requires",
  "confidence": 0.78 },
      { "from": "LEARN_BULK_GRADE_ALL_ACTION", "to":
  "LEARN_GRADED_STATE_FLAG", "type": "requires",
  "confidence": 0.74 },
      { "from": "LEARN_GRADED_STATE_FLAG", "to":
  "LEARN_SCORE_AND_RESULT_GATING", "type": "requires",
  "confidence": 0.76 },
      { "from": "LEARN_STORE_RESULT_SCHEMA_BULK", "to":
  "LEARN_LOCALSTORAGE_SAVE_BULK", "type": "requires",
  "confidence": 0.8 },
      { "from": "LEARN_STORE_RESULT_SCHEMA_BULK", "to":
  "LEARN_LOCALSTORAGE_RESTORE_BULK", "type": "requires",
  "confidence": 0.8 },
      { "from": "LEARN_LOCALSTORAGE_VALIDATE_SHAPE", "to":
  "LEARN_LOCALSTORAGE_RESTORE_BULK", "type": "requires",
  "confidence": 0.78 },
      { "from":
  "LEARN_LOCALSTORAGE_MIGRATION_LEGACY_PARTIAL", "to":
  "LEARN_LOCALSTORAGE_RESTORE_BULK", "type": "requires",
  "confidence": 0.74 },
      { "from": "LEARN_LOCALSTORAGE_RESTORE_BULK", "to":
  "LEARN_GRADED_STATE_FLAG", "type": "requires",
  "confidence": 0.7 },
      { "from": "LEARN_LOCALSTORAGE_SAVE_BULK", "to":
  "LEARN_RESET_CLEAR_STORAGE", "type": "requires",
  "confidence": 0.74 },
      { "from": "LEARN_RESET_CLEAR_STORAGE", "to":
  "LEARN_RESET_UI_STATE", "type": "requires", "confidence":
  0.78 },
      { "from": "LEARN_AFTER_GRADE_EDIT_POLICY", "to":
  "LEARN_SCORE_AND_RESULT_GATING", "type": "requires",
  "confidence": 0.7 },
      { "from": "LEARN_BULK_GRADE_ALL_ACTION", "to":
  "LEARN_REMOVE_PER_PROBLEM_SUBMIT", "type": "requires",
  "confidence": 0.72 },
      { "from": "LEARN_STRICT_JSON_OUTPUT_GUARD", "to":
  "LEARN_STORE_RESULT_SCHEMA_BULK", "type": "requires",
  "confidence": 0.74 }
    ],
    "remove_edges": [],
    "notes": [
      { "claim": "현재 LearnPage는 문제별 제출
  (submitProblem)로 단건 채점 후 submissions를 localStorage
  키(curriculum-viewer:learn:lastResult:${nodeId})에 merge
  저장한다.", "reason": "LearnPage.tsx에서
  StoredResult{submissions} 타입 정의와
  setItem(JSON.stringify(payload)) 흐름이 확인된다.",
  "confidence": 0.86 },
      { "claim": "disabled 판정은 normalizeNumericInput과 동
  일 기준으로 정의해야 한다.", "reason":
  "normalizeNumericInput이 공백/콤마 제거를 수행하므로 원문
  기준 disabled는 채점과 불일치해 UX가 붕괴한다.",
  "confidence": 0.82 },
      { "claim": "R3 Transfer 산출물은 본 티켓(UX/FE)에서는
  problem templates/triplets 대신 상태 전이(입력→활성화→채점
  →저장→복원→초기화) 전이 예시로 대체하거나 N/A를 명시하는
  방식이 적합하다.", "reason": "reviewer도 FE/UX 티켓에서
  Transfer 항목을 N/A 처리 또는 도메인 맞춤 예시로 대체하라
  고 권고했다.", "confidence": 0.74 },
      { "claim": "legacy partial(부분 제출) 데이터는 bulk 전
  환 시 필연적으로 존재할 수 있어 복원 단계에서 감지/정책화
  가 필요하다.", "reason": "기존 per-problem 저장은 전체 문
  제 수보다 적은 submissions를 남기는 것이 정상 동작이었
  다.", "confidence": 0.74 },
      { "claim": "Graph Patch JSON은 문자열 내부 줄바꿈이 있
  으면 파서가 실패하므로 strict JSON으로 재출력되어야 한
  다.", "reason": "reviewer 지적처럼 JSON 파싱 실패는 결합
  패치 검증/병합 파이프라인을 중단시킨다.", "confidence":
  0.84 }
    ]
  }

  ## Standards Tags (내부 태그)

  - 추가된 태그: LEARN_MAP_CURRENT_SUBMIT_FLOW,
    LEARN_DOCUMENT_STORED_RESULT_SCHEMA,
    LEARN_REMOVE_PER_PROBLEM_SUBMIT,
    LEARN_ADD_BULK_GRADE_BUTTON,
    LEARN_DISABLED_USES_NORMALIZE_NUMERIC_INPUT,
    LEARN_ALL_ANSWERED_NORMALIZED,
    LEARN_DISABLED_EDGECASES_12,
    LEARN_BULK_GRADE_ALL_ACTION, LEARN_BUILD_RESULT_MAP,
    LEARN_GRADED_STATE_FLAG, LEARN_SCORE_SUMMARY_CALC,
    LEARN_SCORE_AND_RESULT_GATING,
    LEARN_SHOW_PER_PROBLEM_RESULT,
    LEARN_STORE_RESULT_SCHEMA_BULK,
    LEARN_LOCALSTORAGE_VALIDATE_SHAPE,
    LEARN_LOCALSTORAGE_SAVE_BULK,
    LEARN_LOCALSTORAGE_RESTORE_BULK,
    LEARN_LOCALSTORAGE_MIGRATION_LEGACY_PARTIAL,
    LEARN_RESET_CLEAR_STORAGE, LEARN_RESET_UI_STATE,
    LEARN_AFTER_GRADE_EDIT_POLICY,
    LEARN_STRICT_JSON_OUTPUT_GUARD
  - 수정된 태그: (없음)

  [/R1 Coverage Report]

  ###DONE:f0805f8d87###


› -> /mnt/c/Users/irron/Desktop/my/web_service_new/
  calculate_math/.agents/inbox/research_6ca9c9bcbc.md


  37% context left



› Request 6ca9c9bcbc: 아래 파일(티켓 지시)을 읽고 결과를 이
  터미널에 Output Format대로 그대로 출력해줘. 가능하면 repo
  파일을 생성/수정하지 말고, 마지막에 마커를 그대로 출력해.
  -> /mnt/c/Users/irron/Desktop/my/web_service_new/
  calculate_math/.agents/inbox/research_6ca9c9bcbc.md




• Explored
  └ List inbox
    Read research_6ca9c9bcbc.md
    Read T1.md, task.md
    Search Output Format|BEGIN:|DONE: in
r                     

• Ran for id in 059d0e7c0f fcd0127204 565ca07687 a4203a6ab9
  │ f0d1a42bd6 f5780da068 be14a78ffd 2c231c5c59 3c42956bde
                                                          

•         
  └evearcnglastResult|submitProblem|StoredResult|
                                                    
                                             
    Read grading.ts, Le           

─ Worked for 8m 11s ────────────────                        


• ###BEGIN:6ca9c9bcbc###

  ## Coverage Gap Report

  ### 1. 누락된 기초 개념 (최소 10개)

  | # | 개념명 | 누락 이유 | 심각도 |
  |---|--------|----------|--------|
  | 1 | 현재 LearnPage 단건 제출/저장 흐름 기준선 | per-
  problem submitProblem/저장 로직을 알아야 bulk 전환 시 회귀
  를 줄임 | 높음 |
  | 2 | localStorage 키 계약 식별 | 저장/복원/초기화가 동일
  키(curriculum-viewer:learn:lastResult:${nodeId})에 의존 |
  높음 |
  | 3 | StoredResult{submissions} 스키마/partial 의미 | 기존
  은 submissions merge로 부분 데이터가 정상 생성되어 bulk UX
  와 충돌 가능 | 높음 |
  | 4 | 문제 카드별 제출 버튼 제거 범위 | 요구사항 1) 핵심
  변경인데 현재 UI는 per-problem 제출 경로가 존재 | 높음 |
  | 5 | 하단 단일 버튼(채점하기) UX/상태 정의 | bulk UX의 단
  일 진입점이 필요(라벨/disabled/재채점 포함) | 높음 |
  | 6 | 미입력 판정 기준 정합화 | disabled 판정이
  normalizeNumericInput()과 불일치하면 채점과 UX가 엇갈림 |
  높음 |
  | 7 | allAnswered 계산(정규화+problems[] 기준) | “모든 문
  제 답 입력 전까지 disabled”를 로딩/빈 배열 포함 안정적으로
  계산해야 함 | 높음 |
  | 8 | 입력 엣지케이스 테스트 벡터(12종+) | 공백/콤마/0/부
  호/소수점/Infinity 등에서 기대값이 흔들려 회귀가 잦음 | 중
  |
  | 9 | 일괄 채점 gradeAll 동작 정의 | 현재는 단건 채점만 가
  능하므로 문제 전체 순회 채점 액션이 필요 | 높음 |
  |10| resultByProblemId 생성 및 결과 표시 규칙 | 문제별 정
  오/정답 표시와 점수 집계를 problemId 기준으로 정렬해야 함
  | 중 |
  |11| hasGraded 게이팅(채점 후 표시) | 채점 전 0/N 및
  partial 결과 노출 혼선을 막기 위한 표시 시점 규칙 필요 |
  중 |
  |12| 일괄 저장(전체 submissions 1회 저장) | 요구사항 3) 저
  장 시점을 “일괄 채점 후 setItem 1회”로 전환해야 함 | 높음
  |
  |13| 복원 파이프라인(파싱/검증/legacy 정책) | 잘못된/
  legacy 데이터로 인한 런타임 오류 및 UX 꼬임을 방지해야 함
  | 중 |
  |14| 다시 풀기: storage 삭제 + UI state 리셋 | 키 삭제만으
  로는 화면이 즉시 초기화되지 않아 state(answer/result/
  flags) 리셋이 필요 | 높음 |
  |15| 채점 후 답 변경 처리 정책 | 입력 변경 시 결과가 스테
  일해지므로 결과 초기화 또는 재채점 플로우를 고정해야 함 |
  중 |

  ### 2. 과잉 난이도/불필요 선행 (최소 5개)

  | # | 개념명 | 과잉 이유 | 조치 제안 |
  |---|--------|----------|----------|
  | 1 | 서버 연동/DB 저장 | Out of Scope이며 localStorage 요
  구를 흐림 | 금지(후속 티켓 분리) |
  | 2 | 문제 타입 확장(객관식/서술형) | 범위 외이며 UI/채점/
  저장 설계가 폭증 | 금지(후속 티켓) |
  | 3 | grading 로직 확장(허용오차/분수/근사) | bulk 제출 UX
  와 무관하고 회귀 위험 증가 | gradeNumericAnswer 유지 |
  | 4 | 문제은행/커리큘럼 JSON 스키마 변경 | 데이터 구조 변
  경은 범위 밖, 회귀 위험 큼 | 기존 스키마 유지 |
  | 5 | 전역 상태관리 도입(Redux/Zustand) | LearnPage 단일
  화면 상태로 충분 | 도입 금지 |
  | 6 | UI 대규모 리디자인/애니메이션 | 요구사항 충족과 무관
  하고 일정 리스크만 증가 | 최소 UI 변경 |

  ### 3. 학습 순서상 위험한 점프 (최소 5개)

  | # | From → To | 점프 이유 | 브릿지 제안 |
  |---|-----------|----------|------------|
  | 1 | LEARN_REMOVE_PER_PROBLEM_SUBMIT →
  LEARN_BULK_GRADE_ALL_ACTION | 제거가 먼저면 채점/저장 경로
  가 사라져 기능 공백 발생 | bulk 버튼+gradeAll+저장 구현 후
  제거 |
  | 2 | LEARN_ADD_BULK_GRADE_BUTTON →
  LEARN_ALL_ANSWERED_NORMALIZED | disabled 계산이 없으면 버
  튼 활성/비활성 기준이 흔들림 | normalize 기반 allAnswered
  를 먼저 고정 |
  | 3 | 원문 disabled 판정 → gradeNumericAnswer(정규화) |
  " , " 같은 입력에서 활성/채점 결과가 불일치해 UX 붕괴 |
  normalizeNumericInput(answer).length>0로 통일 |
  | 4 | LEARN_LOCALSTORAGE_SAVE_BULK →
  LEARN_LOCALSTORAGE_RESTORE_BULK | 스키마/검증 없이 복원하
  면 파싱 실패·필드 누락이 런타임 문제로 이어짐 | schema 정
  의 + shape validate + 예외 처리 |
  | 5 | LEARN_LOCALSTORAGE_RESTORE_BULK →
  LEARN_SCORE_AND_RESULT_GATING | restored partial에서 점수/
  결과 노출 기준이 불명확 | hasGraded 세팅 규칙(완전 제출만
  true 등) 정의 |
  | 6 | LEARN_RESET_CLEAR_STORAGE → (UI state 유지) |
  storage만 지우면 화면에 남은 answer/result/flags가 그대로
  | 키 삭제 + state 리셋 동시 수행 |
  | 7 | LEARN_AFTER_GRADE_EDIT_POLICY 미정 → 결과 표시 유지
  | 답 변경 후 스테일 결과(입력≠결과) 상태가 발생 | 입력 변
  경 시 결과 초기화 또는 “다시 채점” 플로우 |

  ## Graph Patch JSON

  {
    "researcher": "R1",
    "scope": "curriculum_viewer_learning_bulk_submit_v1",
    "add_nodes": [
      { "id": "LEARN_MAP_CURRENT_SUBMIT_FLOW", "type":
  "micro", "name_ko": "현재 per-problem 제출/저장 흐름 요
  약", "domain": "FE", "rep": "C" },
      { "id": "LEARN_DOCUMENT_STORED_RESULT_SCHEMA", "type":
  "micro", "name_ko": "StoredResult/submissions 스키마 확
  인", "domain": "FE", "rep": "C" },
      { "id": "LEARN_IDENTIFY_STORAGE_KEY", "type": "micro",
  "name_ko": "localStorage 키 포맷 식별", "domain": "FE",
  "rep": "C" },
      { "id": "LEARN_REMOVE_PER_PROBLEM_SUBMIT", "type":
  "micro", "name_ko": "문제 카드별 제출 버튼 제거",
  "domain": "FE", "rep": "P" },
      { "id": "LEARN_ADD_BULK_GRADE_BUTTON", "type":
  "micro", "name_ko": "하단 단일 채점하기 버튼 추가",
  "domain": "FE", "rep": "P" },
      { "id": "LEARN_DISABLED_USES_NORMALIZE_NUMERIC_INPUT",
  "type": "micro", "name_ko": "disabled 판정 기준을
  normalizeNumericInput과 일치", "domain": "FE", "rep":
  "C" },
      { "id": "LEARN_HANDLE_EMPTY_PROBLEMS", "type":
  "micro", "name_ko": "문제 0개/로딩 상태 UI 규칙",
  "domain": "UX", "rep": "C" },
      { "id": "LEARN_ALL_ANSWERED_NORMALIZED", "type":
  "micro", "name_ko": "allAnswered 계산(정규화 기반)",
  "domain": "FE", "rep": "P" },
      { "id": "LEARN_DISABLED_EDGECASES_12", "type":
  "micro", "name_ko": "입력 엣지케이스 12종 테스트 벡터",
  "domain": "QA", "rep": "C" },
      { "id": "LEARN_BULK_GRADE_ALL_ACTION", "type":
  "micro", "name_ko": "일괄 채점 액션(전체 순회)", "domain":
  "FE", "rep": "P" },
      { "id": "LEARN_BUILD_RESULT_MAP", "type": "micro",
  "name_ko": "문제별 결과 맵(resultByProblemId) 생성",
  "domain": "FE", "rep": "P" },
      { "id": "LEARN_SCORE_SUMMARY_CALC", "type": "micro",
  "name_ko": "총점 X/N 집계 로직", "domain": "FE", "rep":
  "P" },
      { "id": "LEARN_GRADED_STATE_FLAG", "type": "micro",
  "name_ko": "채점 전/후 상태 플래그(hasGraded) 정의",
  "domain": "FE", "rep": "C" },
      { "id": "LEARN_SCORE_AND_RESULT_GATING", "type":
  "micro", "name_ko": "채점 후에만 점수/결과 표시(게이팅)",
  "domain": "FE", "rep": "P" },
      { "id": "LEARN_SHOW_PER_PROBLEM_RESULT", "type":
  "micro", "name_ko": "문제별 정오/정답 표시(일괄 채점 후)",
  "domain": "FE", "rep": "P" },
      { "id": "LEARN_STORE_RESULT_SCHEMA_BULK", "type":
  "micro", "name_ko": "bulk 저장 시점/계약 정의(전체
  submissions 저장)", "domain": "FE", "rep": "C" },
      { "id": "LEARN_LOCALSTORAGE_VALIDATE_SHAPE", "type":
  "micro", "name_ko": "복원 데이터 파싱/shape validate",
  "domain": "FE", "rep": "C" },
      { "id": "LEARN_LOCALSTORAGE_SAVE_BULK", "type":
  "micro", "name_ko": "일괄 채점 후 submissions를 1회 저장",
  "domain": "FE", "rep": "P" },
      { "id": "LEARN_LOCALSTORAGE_RESTORE_BULK", "type":
  "micro", "name_ko": "재진입/새로고침 시 답안/결과 복원",
  "domain": "FE", "rep": "P" },
      { "id": "LEARN_LOCALSTORAGE_MIGRATION_LEGACY_PARTIAL",
  "type": "micro", "name_ko": "legacy partial(submissions 일
  부) 처리 정책", "domain": "FE", "rep": "C" },
      { "id": "LEARN_RESET_CLEAR_STORAGE", "type": "micro",
  "name_ko": "다시 풀기: localStorage 키 삭제", "domain":
  "FE", "rep": "P" },
      { "id": "LEARN_RESET_UI_STATE", "type": "micro",
  "name_ko": "다시 풀기: UI state 리셋", "domain": "FE",
  "rep": "P" },
      { "id": "LEARN_AFTER_GRADE_EDIT_POLICY", "type":
  "micro", "name_ko": "채점 후 답 수정 정책(결과 초기화/재채
  점)", "domain": "UX", "rep": "C" }
    ],
    "merge_aliases": [],
    "add_edges": [
      { "from": "LEARN_MAP_CURRENT_SUBMIT_FLOW", "to":
  "LEARN_REMOVE_PER_PROBLEM_SUBMIT", "type": "requires" },
      { "from": "LEARN_DOCUMENT_STORED_RESULT_SCHEMA", "to":
  "LEARN_STORE_RESULT_SCHEMA_BULK", "type": "requires" },
      { "from": "LEARN_IDENTIFY_STORAGE_KEY", "to":
  "LEARN_LOCALSTORAGE_SAVE_BULK", "type": "requires" },
      { "from": "LEARN_IDENTIFY_STORAGE_KEY", "to":
  "LEARN_LOCALSTORAGE_RESTORE_BULK", "type": "requires" },
      { "from": "LEARN_IDENTIFY_STORAGE_KEY", "to":
  "LEARN_RESET_CLEAR_STORAGE", "type": "requires" },
      { "from": "LEARN_HANDLE_EMPTY_PROBLEMS", "to":
  "LEARN_ALL_ANSWERED_NORMALIZED", "type": "requires" },
      { "from":
  "LEARN_DISABLED_USES_NORMALIZE_NUMERIC_INPUT", "to":
  "LEARN_ALL_ANSWERED_NORMALIZED", "type": "requires" },
      { "from": "LEARN_ALL_ANSWERED_NORMALIZED", "to":
  "LEARN_ADD_BULK_GRADE_BUTTON", "type": "requires" },
      { "from": "LEARN_ADD_BULK_GRADE_BUTTON", "to":
  "LEARN_BULK_GRADE_ALL_ACTION", "type": "requires" },
      { "from": "LEARN_BULK_GRADE_ALL_ACTION", "to":
  "LEARN_BUILD_RESULT_MAP", "type": "requires" },
      { "from": "LEARN_BULK_GRADE_ALL_ACTION", "to":
  "LEARN_GRADED_STATE_FLAG", "type": "requires" },
      { "from": "LEARN_BUILD_RESULT_MAP", "to":
  "LEARN_SCORE_SUMMARY_CALC", "type": "requires" },
      { "from": "LEARN_BUILD_RESULT_MAP", "to":
  "LEARN_SHOW_PER_PROBLEM_RESULT", "type": "requires" },
      { "from": "LEARN_GRADED_STATE_FLAG", "to":
  "LEARN_SCORE_AND_RESULT_GATING", "type": "requires" },
      { "from": "LEARN_SCORE_AND_RESULT_GATING", "to":
  "LEARN_SCORE_SUMMARY_CALC", "type": "requires" },
      { "from": "LEARN_SCORE_AND_RESULT_GATING", "to":
  "LEARN_SHOW_PER_PROBLEM_RESULT", "type": "requires" },
      { "from": "LEARN_STORE_RESULT_SCHEMA_BULK", "to":
  "LEARN_LOCALSTORAGE_SAVE_BULK", "type": "requires" },
      { "from": "LEARN_STORE_RESULT_SCHEMA_BULK", "to":
  "LEARN_LOCALSTORAGE_RESTORE_BULK", "type": "requires" },
      { "from": "LEARN_LOCALSTORAGE_VALIDATE_SHAPE", "to":
  "LEARN_LOCALSTORAGE_RESTORE_BULK", "type": "requires" },
      { "from":
  "LEARN_LOCALSTORAGE_MIGRATION_LEGACY_PARTIAL", "to":
  "LEARN_LOCALSTORAGE_RESTORE_BULK", "type": "requires" },
      { "from": "LEARN_LOCALSTORAGE_RESTORE_BULK", "to":
  "LEARN_GRADED_STATE_FLAG", "type": "requires" },
      { "from": "LEARN_RESET_CLEAR_STORAGE", "to":
  "LEARN_RESET_UI_STATE", "type": "requires" },
      { "from": "LEARN_AFTER_GRADE_EDIT_POLICY", "to":
  "LEARN_SCORE_AND_RESULT_GATING", "type": "requires" },
      { "from": "LEARN_BULK_GRADE_ALL_ACTION", "to":
  "LEARN_REMOVE_PER_PROBLEM_SUBMIT", "type": "requires" }
    ],
    "remove_edges": [],
    "notes": [
      { "claim": "LearnPage는 submitProblem으로 문제별 채점
  후 submissions를 localStorage에 merge 저장한다.",
  "reason": "LearnPage.tsx의 submitProblem과
  StoredResult{submissions} setItem 흐름을 확인.",
  "confidence": 0.86 },
      { "claim": "disabled 판정은
  normalizeNumericInput(answer).length>0 기준으로만 '입력
  됨'을 판정해야 한다.", "reason": "grading이
  normalizeNumericInput을 사용하므로 원문 기준 disabled는 활
  성/채점 불일치를 만든다.", "confidence": 0.82 },
      { "claim": "현재 score는 problems가 있으면 채점 전에도
  0/N이 노출될 수 있어 hasGraded 게이팅이 필요하다.",
  "reason": "score 계산은 resultByProblemId가 비어도
  {correct:0,total:N}을 반환한다.", "confidence": 0.74 },
      { "claim": "legacy partial(submissions 일부) 데이터는
  bulk UX에서 복원/점수/표시와 충돌하므로 정책이 필요하다.",
  "reason": "기존 per-problem 저장은 submissions를 merge하여
  부분 데이터가 정상적으로 생성된다.", "confidence": 0.74 },
      { "claim": "다시 풀기는 localStorage 키 삭제만으로는
  충분하지 않고 UI state(answer/result/flags) 리셋이 필요하
  다.", "reason": "LearnPage는 answerByProblemId/
  resultByProblemId를 state로 유지하므로 화면이 남을 수 있
  다.", "confidence": 0.78 },
      { "claim": "일괄 제출은 setItem 1회로 전체 submissions
  를 저장해야 저장/복원/초기화 계약이 단순해진다.",
  "reason": "요구사항은 일괄 채점 후 한 번에 저장이며, merge
  저장은 partial을 필연적으로 만든다.", "confidence": 0.8 }
    ]
  }

  ## Standards Tags (내부 태그)

  - 추가된 태그: LEARN_MAP_CURRENT_SUBMIT_FLOW,
    LEARN_DOCUMENT_STORED_RESULT_SCHEMA,
    LEARN_IDENTIFY_STORAGE_KEY,
    LEARN_REMOVE_PER_PROBLEM_SUBMIT,
    LEARN_ADD_BULK_GRADE_BUTTON,
    LEARN_DISABLED_USES_NORMALIZE_NUMERIC_INPUT,
    LEARN_HANDLE_EMPTY_PROBLEMS,
    LEARN_ALL_ANSWERED_NORMALIZED,
    LEARN_DISABLED_EDGECASES_12,
    LEARN_BULK_GRADE_ALL_ACTION, LEARN_BUILD_RESULT_MAP,
    LEARN_SCORE_SUMMARY_CALC, LEARN_GRADED_STATE_FLAG,
    LEARN_SCORE_AND_RESULT_GATING,
    LEARN_SHOW_PER_PROBLEM_RESULT,
    LEARN_STORE_RESULT_SCHEMA_BULK,
    LEARN_LOCALSTORAGE_VALIDATE_SHAPE,
    LEARN_LOCALSTORAGE_SAVE_BULK,
    LEARN_LOCALSTORAGE_RESTORE_BULK,
    LEARN_LOCALSTORAGE_MIGRATION_LEGACY_PARTIAL,
    LEARN_RESET_CLEAR_STORAGE, LEARN_RESET_UI_STATE,
    LEARN_AFTER_GRADE_EDIT_POLICY
  - 수정된 태그: (없음)

  [/R1 Coverage Report]

  ###DONE:6ca9c9bcbc###




•         
  └ Read research_li2068on1b.md
                                                 
                                 
    Read research_f9206        

─ Worked for 2m 30s ────────────────                        


• ###BEGIN:f92068ab1b###

  ## Coverage Gap Report

  ### 1. 누락된 기초 개념 (최소 10개)

  | # | 개념명 | 누락 이유 | 심각도 |
  |---|--------|----------|--------|
  | 1 | 현재 LearnPage 단건 제출/저장 흐름 기준선 | 기존
  submitProblem/저장 merge 동작을 알아야 bulk 전환 시 기능
  공백/회귀를 줄임 | 높음 |
  | 2 | localStorage 키 계약 식별 | 저장/복원/초기화가 동일
  키(curriculum-viewer:learn:lastResult:${nodeId})에 의존 |
  높음 |
  | 3 | StoredResult{submissions} 스키마 및 partial 의미 |
  기존 per-problem 저장은 submissions 일부만 남기는 데이터가
  정상 생성되어 bulk UX와 충돌 가능 | 높음 |
  | 4 | 문제 카드별 제출 버튼 제거 범위 | 요구사항 1) 핵심
  변경인데 현재 UI는 per-problem 제출 경로가 존재 | 높음 |
  | 5 | 하단 단일 버튼(채점하기) UX/상태 정의 | bulk UX의 단
  일 진입점(라벨/disabled/재채점)을 정의해야 동작/표시가 일
  관됨 | 높음 |
  | 6 | 미입력 판정 기준 정합화(normalize) | disabled 판정이
  normalizeNumericInput과 불일치하면 " , " 등에서 UX가 붕괴
  | 높음 |
  | 7 | allAnswered 계산(정규화+problems[] 기준) | “모든 문
  제 답 입력 전까지 disabled”를 로딩/문제 수 변화 포함 안정
  적으로 계산해야 함 | 높음 |
  | 8 | 입력 엣지케이스 벡터(12종+) | "", " ", ",", " , ",
  "0", "-0", "1,234", "+", ".", "Infinity" 등에서 기대값이
  흔들림 | 중 |
  | 9 | 일괄 채점 gradeAll 동작 정의 | 현재는 단건 채점만 가
  능하므로 problems 전체 순회 채점 액션이 필요 | 높음 |
  |10| resultByProblemId 생성/집계 기준 | 점수/결과 표시/저
  장을 problemId로 정렬하는 중간 표현이 필요 | 중 |
  |11| hasGraded(채점 전/후) 플래그 | 채점 전 0/N 노출 및
  legacy partial 결과 노출 혼선을 막을 표시 기준이 필요 | 중
  |
  |12| 결과/점수 표시 게이팅 규칙 | 채점 후에만 점수/정오/정
  답을 표시해야 UX가 일관되고 partial 혼선을 줄임 | 중 |
  |13| 일괄 저장(채점 후 1회 snapshot) | 요구사항 3) “일괄
  채점 후 한 번에 저장”으로 시점을 전환해야 함 | 높음 |
  |14| 복원 파이프라인(shape validate+정책) | 잘못된/legacy
  데이터로 인한 런타임 오류 및 UX 꼬임을 방지해야 함 | 중 |
  |15| 다시 풀기(키 삭제+UI state 리셋) | storage 삭제만으로
  는 화면이 즉시 초기화되지 않아 answer/result/flags 리셋이
  필요 | 높음 |

  ### 2. 과잉 난이도/불필요 선행 (최소 5개)

  | # | 개념명 | 과잉 이유 | 조치 제안 |
  |---|--------|----------|----------|
  | 1 | 서버 연동/DB 저장 | Out of Scope이며 localStorage 요
  구를 흐림 | 금지(후속 티켓) |
  | 2 | 문제 타입 확장(객관식/서술형) | 범위 외이며 UI/채점/
  저장 설계가 폭증 | 금지(후속 티켓) |
  | 3 | grading 정책 확장(허용오차/분수/근사) | bulk 제출 UX
  와 무관하고 회귀 위험 증가 | 기존 gradeNumericAnswer 유지
  |
  | 4 | 문제은행/커리큘럼 JSON 스키마 변경 | 데이터 구조 변
  경은 범위 밖, 회귀 위험 큼 | 기존 스키마 유지 |
  | 5 | 전역 상태관리 도입(Redux/Zustand) | LearnPage 단일
  화면 상태로 충분 | 도입 금지 |
  | 6 | UI 대규모 리디자인/애니메이션 | 요구사항 충족과 무관
  하고 일정 리스크만 증가 | 최소 UI 변경 |

  ### 3. 학습 순서상 위험한 점프 (최소 5개)

  | # | From → To | 점프 이유 | 브릿지 제안 |
  |---|-----------|----------|------------|
  | 1 | per-problem 제출 제거 → bulk 채점 미구현 | 제거만 하
  면 채점/저장 경로가 사라져 기능 공백 발생 | bulk 버튼
  +gradeAll+저장 구현 후 제거 |
  | 2 | 원문 disabled → 정규화 채점 | " , " 등에서 활성/비활
  성과 채점 기준이 엇갈려 UX 붕괴 | normalizeNumericInput 기
  반으로 미입력 판정 통일 |
  | 3 | bulk 버튼 추가 → allAnswered 부재 | disabled 조건이
  불명확해 조기 활성/비활성이 흔들림 | problems[] 기반
  allAnswered(정규화) 먼저 고정 |
  | 4 | 저장 구현 → 복원/검증 미정 | 파싱 실패/필드 누락 시
  런타임 오류 및 상태 꼬임 | schema+shape validate+예외 처리
  추가 |
  | 5 | legacy partial 복원 → 결과 노출 | 부분 submissions가
  “채점됨”처럼 보이면 오해/혼선 발생 | partial 감지 시
  hasGraded=false 및 재채점 유도 |
  | 6 | 점수 표시 → hasGraded 미도입 | 채점 전 0/N 노출은
  “이미 채점됨” 오해 유발 | hasGraded 게이팅 후 채점 후에만
  노출 |
  | 7 | 초기화(키 삭제만) → UI 잔상 | storage만 지우면
  answer/result/flags가 화면에 남음 | 키 삭제 + UI state 리
  셋 동시 수행 |

  ## Graph Patch JSON

  {
    "researcher": "R1",
    "scope": "curriculum_viewer_learning_bulk_submit_v1",
    "add_nodes": [
      { "id": "LEARN_MAP_CURRENT_SUBMIT_FLOW", "type":
  "micro", "name_ko": "현재 per-problem 제출/저장 흐름 요
  약", "domain": "FE", "rep": "C" },
      { "id": "LEARN_IDENTIFY_STORAGE_KEY", "type": "micro",
  "name_ko": "localStorage 키 포맷 식별", "domain": "FE",
  "rep": "C" },
      { "id": "LEARN_DOCUMENT_STORED_RESULT_SCHEMA", "type":
  "micro", "name_ko": "StoredResult/submissions 스키마 확
  인", "domain": "FE", "rep": "C" },
      { "id": "LEARN_REMOVE_PER_PROBLEM_SUBMIT", "type":
  "micro", "name_ko": "문제 카드별 제출 버튼 제거",
  "domain": "FE", "rep": "P" },
      { "id": "LEARN_ADD_BULK_GRADE_BUTTON", "type":
  "micro", "name_ko": "하단 단일 채점하기 버튼 추가",
  "domain": "FE", "rep": "P" },
      { "id": "LEARN_DISABLED_USES_NORMALIZE_NUMERIC_INPUT",
  "type": "micro", "name_ko": "미입력 판정 기준을
  normalizeNumericInput과 일치", "domain": "FE", "rep":
  "C" },
      { "id": "LEARN_ALL_ANSWERED_NORMALIZED", "type":
  "micro", "name_ko": "allAnswered 계산(정규화 기반)",
  "domain": "FE", "rep": "P" },
      { "id": "LEARN_DISABLED_EDGECASES_12", "type":
  "micro", "name_ko": "입력 엣지케이스 12종 테스트 벡터",
  "domain": "QA", "rep": "C" },
      { "id": "LEARN_BULK_GRADE_ALL_ACTION", "type":
  "micro", "name_ko": "일괄 채점 액션(전체 순회)", "domain":
  "FE", "rep": "P" },
      { "id": "LEARN_BUILD_RESULT_MAP", "type": "micro",
  "name_ko": "문제별 결과 맵(resultByProblemId) 생성",
  "domain": "FE", "rep": "P" },
      { "id": "LEARN_SCORE_SUMMARY_CALC", "type": "micro",
  "name_ko": "총점 X/N 집계 로직", "domain": "FE", "rep":
  "P" },
      { "id": "LEARN_GRADED_STATE_FLAG", "type": "micro",
  "name_ko": "채점 전/후 상태 플래그(hasGraded) 정의",
  "domain": "FE", "rep": "C" },
      { "id": "LEARN_SCORE_AND_RESULT_GATING", "type":
  "micro", "name_ko": "채점 후에만 점수/결과 표시(게이팅)",
  "domain": "FE", "rep": "P" },
      { "id": "LEARN_SHOW_PER_PROBLEM_RESULT", "type":
  "micro", "name_ko": "문제별 정오/정답 표시(일괄 채점 후)",
  "domain": "FE", "rep": "P" },
      { "id": "LEARN_STORE_RESULT_SCHEMA_BULK", "type":
  "micro", "name_ko": "bulk 저장 시점/계약 정의(전체
  submissions 저장)", "domain": "FE", "rep": "C" },
      { "id": "LEARN_LOCALSTORAGE_SAVE_BULK", "type":
  "micro", "name_ko": "일괄 채점 후 submissions를 1회 저장",
  "domain": "FE", "rep": "P" },
      { "id": "LEARN_LOCALSTORAGE_VALIDATE_SHAPE", "type":
  "micro", "name_ko": "복원 데이터 파싱/shape validate",
  "domain": "FE", "rep": "C" },
      { "id": "LEARN_LOCALSTORAGE_RESTORE_BULK", "type":
  "micro", "name_ko": "재진입/새로고침 시 답안/결과 복원",
  "domain": "FE", "rep": "P" },
      { "id": "LEARN_LOCALSTORAGE_MIGRATION_LEGACY_PARTIAL",
  "type": "micro", "name_ko": "legacy partial(submissions 일
  부) 처리 정책", "domain": "FE", "rep": "C" },
      { "id": "LEARN_RESET_CLEAR_STORAGE", "type": "micro",
  "name_ko": "다시 풀기: localStorage 키 삭제", "domain":
  "FE", "rep": "P" },
      { "id": "LEARN_RESET_UI_STATE", "type": "micro",
  "name_ko": "다시 풀기: UI state 리셋", "domain": "FE",
  "rep": "P" },
      { "id": "LEARN_AFTER_GRADE_EDIT_POLICY", "type":
  "micro", "name_ko": "채점 후 답 수정 정책(결과 초기화/재채
  점)", "domain": "UX", "rep": "C" }
    ],
    "merge_aliases": [],
    "add_edges": [
      { "from":
  "LEARN_DISABLED_USES_NORMALIZE_NUMERIC_INPUT", "to":
  "LEARN_ALL_ANSWERED_NORMALIZED", "type": "requires" },
      { "from": "LEARN_ALL_ANSWERED_NORMALIZED", "to":
  "LEARN_ADD_BULK_GRADE_BUTTON", "type": "requires" },
      { "from": "LEARN_ADD_BULK_GRADE_BUTTON", "to":
  "LEARN_BULK_GRADE_ALL_ACTION", "type": "requires" },
      { "from": "LEARN_BULK_GRADE_ALL_ACTION", "to":
  "LEARN_BUILD_RESULT_MAP", "type": "requires" },
      { "from": "LEARN_BULK_GRADE_ALL_ACTION", "to":
  "LEARN_GRADED_STATE_FLAG", "type": "requires" },
      { "from": "LEARN_BUILD_RESULT_MAP", "to":
  "LEARN_SCORE_SUMMARY_CALC", "type": "requires" },
      { "from": "LEARN_BUILD_RESULT_MAP", "to":
  "LEARN_SHOW_PER_PROBLEM_RESULT", "type": "requires" },
      { "from": "LEARN_GRADED_STATE_FLAG", "to":
  "LEARN_SCORE_AND_RESULT_GATING", "type": "requires" },
      { "from": "LEARN_SCORE_AND_RESULT_GATING", "to":
  "LEARN_SCORE_SUMMARY_CALC", "type": "requires" },
      { "from": "LEARN_SCORE_AND_RESULT_GATING", "to":
  "LEARN_SHOW_PER_PROBLEM_RESULT", "type": "requires" },
      { "from": "LEARN_IDENTIFY_STORAGE_KEY", "to":
  "LEARN_LOCALSTORAGE_SAVE_BULK", "type": "requires" },
      { "from": "LEARN_IDENTIFY_STORAGE_KEY", "to":
  "LEARN_LOCALSTORAGE_RESTORE_BULK", "type": "requires" },
      { "from": "LEARN_IDENTIFY_STORAGE_KEY", "to":
  "LEARN_RESET_CLEAR_STORAGE", "type": "requires" },
      { "from": "LEARN_STORE_RESULT_SCHEMA_BULK", "to":
  "LEARN_LOCALSTORAGE_SAVE_BULK", "type": "requires" },
      { "from": "LEARN_STORE_RESULT_SCHEMA_BULK", "to":
  "LEARN_LOCALSTORAGE_RESTORE_BULK", "type": "requires" },
      { "from": "LEARN_LOCALSTORAGE_VALIDATE_SHAPE", "to":
  "LEARN_LOCALSTORAGE_RESTORE_BULK", "type": "requires" },
      { "from": "LEARN_RESET_CLEAR_STORAGE", "to":
  "LEARN_RESET_UI_STATE", "type": "requires" }
    ],
    "remove_edges": [],
    "notes": [
      { "claim": "LearnPage는 submitProblem으로 문제별 채점
  후 submissions를 localStorage에 merge 저장한다.",
  "reason": "LearnPage.tsx에서 submitProblem과
  StoredResult{submissions} setItem 흐름이 확인된다.",
  "confidence": 0.86 },
      { "claim": "disabled의 '입력됨' 판정은
  normalizeNumericInput(answer).length>0 기준으로 통일해야
  한다.", "reason": "grading이 normalizeNumericInput을 사용
  하므로 원문 기준 disabled는 채점과 불일치해 UX를 망친다.",
  "confidence": 0.84 },
      { "claim": "점수/정오/정답 표시는 hasGraded로 게이트해
  야 채점 전 0/N 및 partial 노출 혼선을 줄인다.", "reason":
  "현재 score는 problems가 있으면 result가 비어도 0/N을 표시
  할 수 있어 오해를 유발한다.", "confidence": 0.74 },
      { "claim": "legacy partial(submissions 일부) 처리는 조
  건부 정책이며 restore를 migration에 과잉 잠금(requires)하
  지 않는 편이 안전하다.", "reason": "migration은 legacy가
  존재할 때만 필요하고 reviewer도 requires 과잉 잠금을 지적
  했다.", "confidence": 0.72 },
      { "claim": "per-problem 제출 제거는 권장 순서이며,
  bulk 경로(버튼/gradeAll/저장)가 준비된 뒤 제거해야 기능 공
  백을 피한다.", "reason": "제거가 먼저면 채점/저장 경로가
  사라져 사용자가 진행 불가 상태가 된다.", "confidence":
  0.72 },
      { "claim": "다시 풀기는 localStorage 삭제와 UI
  state(answer/result/flags) 리셋을 함께 수행해야 한다.",
  "reason": "저장소만 지우면 화면에 남은 상태 때문에 초기화
  가 즉시 반영되지 않는다.", "confidence": 0.8 },
      { "claim": "Graph Patch JSON은 strict JSON(json.loads
  통과)으로 문자열 내부 줄바꿈 없이 출력되어야 한다.",
  "reason": "문자열 줄바꿈은 파싱 실패를 유발해 결합 패치 검
  증/병합 파이프라인을 중단시킨다.", "confidence": 0.9 }
    ]
  }

  ## Standards Tags (내부 태그)

  - 추가된 태그: LEARN_MAP_CURRENT_SUBMIT_FLOW,
    LEARN_IDENTIFY_STORAGE_KEY,
    LEARN_DOCUMENT_STORED_RESULT_SCHEMA,
    LEARN_REMOVE_PER_PROBLEM_SUBMIT,
    LEARN_ADD_BULK_GRADE_BUTTON,
    LEARN_DISABLED_USES_NORMALIZE_NUMERIC_INPUT,
    LEARN_ALL_ANSWERED_NORMALIZED,
    LEARN_DISABLED_EDGECASES_12,
    LEARN_BULK_GRADE_ALL_ACTION, LEARN_BUILD_RESULT_MAP,
    LEARN_SCORE_SUMMARY_CALC, LEARN_GRADED_STATE_FLAG,
    LEARN_SCORE_AND_RESULT_GATING,
    LEARN_SHOW_PER_PROBLEM_RESULT,
    LEARN_STORE_RESULT_SCHEMA_BULK,
    LEARN_LOCALSTORAGE_SAVE_BULK,
    LEARN_LOCALSTORAGE_VALIDATE_SHAPE,
    LEARN_LOCALSTORAGE_RESTORE_BULK,
    LEARN_LOCALSTORAGE_MIGRATION_LEGACY_PARTIAL,
    LEARN_RESET_CLEAR_STORAGE, LEARN_RESET_UI_STATE,
    LEARN_AFTER_GRADE_EDIT_POLICY
  - 수정된 태그: (없음)

  [/R1 Coverage Report]

  ###DONE:f92068ab1b###


› Explain this codebase

  84% context left · ? for shortcuts


============================================================
[2026-01-08 13:04:06] RESEARCH1 (req_id: 12f4bbe5cf)
============================================================
      { "id": "LEARN_GRADED_STATE_FLAG", "type": "micro",
  "name_ko": "채점 전/후 상태 플래그(hasGraded/isSubmitted)
  정의", "domain": "FE", "rep": "C", "confidence": 0.78 },
      { "id": "LEARN_SCORE_AND_RESULT_GATING", "type":
  "micro", "name_ko": "채점 후에만 점수/정오/정답 표시(게이
  팅)", "domain": "FE", "rep": "P", "confidence": 0.76 },
      { "id": "LEARN_LOCALSTORAGE_SAVE_BULK", "type":
  "micro", "name_ko": "일괄 채점 후 답안+결과를 한 번에 저
  장", "domain": "FE", "rep": "P", "confidence": 0.8 },
      { "id": "LEARN_LOCALSTORAGE_MIGRATION_LEGACY_PARTIAL",
  "type": "micro", "name_ko": "기존 부분 제출(submissions 일
  부) 데이터 호환/마이그레이션 규칙", "domain": "FE", "rep":
  "C", "confidence": 0.74 },
      { "id": "LEARN_RESET_CLEAR_STORAGE", "type": "micro",
  "name_ko": "다시 풀기(초기화): 저장 키 삭제 + 상태 리셋",
  "domain": "FE", "rep": "P", "confidence": 0.82 },
      { "id": "LEARN_AFTER_GRADE_EDIT_POLICY", "type":
  "micro", "name_ko": "채점 후 재입력 정책(결과 초기화 또는
  다시 채점)", "domain": "UX", "rep": "C", "confidence":
  0.7 },
      { "id": "LEARN_DISABLED_EDGECASES_12", "type":
  "micro", "name_ko": "disabled 판정 입력 엣지케이스 12종(빈
  값/공백/콤마/0/부호/소수점 등)", "domain": "QA", "rep":
  "C", "confidence": 0.76 }
    ],
    "merge_aliases": [],
    "add_edges": [
      { "from":
  "LEARN_DISABLED_USES_NORMALIZE_NUMERIC_INPUT", "to":
  "LEARN_ALL_ANSWERED_NORMALIZED", "type": "requires",
  "confidence": 0.82 },
      { "from": "LEARN_ALL_ANSWERED_NORMALIZED", "to":
  "LEARN_ADD_BULK_GRADE_BUTTON", "type": "requires",
  "confidence": 0.78 },
      { "from": "LEARN_ADD_BULK_GRADE_BUTTON", "to":
  "LEARN_BULK_GRADE_ALL_ACTION", "type": "requires",
  "confidence": 0.8 },
      { "from": "LEARN_BULK_GRADE_ALL_ACTION", "to":
  "LEARN_LOCALSTORAGE_SAVE_BULK", "type": "requires",
  "confidence": 0.8 },
      { "from": "LEARN_GRADED_STATE_FLAG", "to":
  "LEARN_SCORE_AND_RESULT_GATING", "type": "requires",
  "confidence": 0.76 },
      { "from": "LEARN_BULK_GRADE_ALL_ACTION", "to":
  "LEARN_GRADED_STATE_FLAG", "type": "requires",
  "confidence": 0.74 },
      { "from":
  "LEARN_LOCALSTORAGE_MIGRATION_LEGACY_PARTIAL", "to":
  "LEARN_LOCALSTORAGE_SAVE_BULK", "type": "requires",
  "confidence": 0.74 },
      { "from": "LEARN_RESET_CLEAR_STORAGE", "to":
  "LEARN_LOCALSTORAGE_SAVE_BULK", "type": "requires",
  "confidence": 0.78 },
      { "from": "LEARN_AFTER_GRADE_EDIT_POLICY", "to":
  "LEARN_SCORE_AND_RESULT_GATING", "type": "requires",
  "confidence": 0.7 },
      { "from": "LEARN_DISABLED_EDGECASES_12", "to":
  "LEARN_ALL_ANSWERED_NORMALIZED", "type": "requires",
  "confidence": 0.76 },
      { "from": "LEARN_ADD_BULK_GRADE_BUTTON", "to":
  "LEARN_REMOVE_PER_PROBLEM_SUBMIT", "type": "requires",
  "confidence": 0.72 }
    ],
    "remove_edges": [],
    "notes": [
      { "claim": "현재 LearnPage는 문제 카드별 제출
  (submitProblem)로 단건 채점/단건 저장을 수행하며,
  StoredResult는 { nodeId, updatedAt, submissions:
  { [problemId]: { submitted, isCorrect } } } 형태이다.",
  "reason": "LearnPage.tsx에서 gradeNumericAnswer 호출 및
  localStorage merge 저장 로직과 StoredResult 타입 정의가 확
  인된다.", "confidence": 0.86 },
      { "claim": "bulk UX의 disabled 판정은
  normalizeNumericInput(answer).length>0 기준으로 모든
  problems가 채워졌는지 검사해야 grading과 일관된다.",
  "reason": "grading.ts의 normalizeNumericInput은 공백/콤마
  제거를 수행하므로, 동일 기준을 쓰지 않으면 '미입력/입력됨'
  판단이 채점 결과와 어긋난다.", "confidence": 0.82 },
      { "claim": "점수/정오/정답 표시는 채점 전/후 상태
  (hasGraded 등)로 게이팅하지 않으면 채점 전에도 0/N이 노출
  되는 혼란이 발생할 수 있다.", "reason": "현재 score 계산은
  problems.length만으로 0/N을 만들 수 있어 bulk 전환 시 '채
  점 전' 상태를 별도로 분리하는 것이 안전하다.",
  "confidence": 0.74 },
      { "claim": "기존 localStorage에 부분 제출(submissions
  일부) 데이터가 남아 있을 수 있으므로 bulk 전환 시 호환 규
  칙(초기화/마이그레이션/안내)이 필요하다.", "reason": "기존
  구현은 문제별 제출 시마다 submissions를 merge 저장하므로,
  저장된 문제 수가 전체 problems 수보다 적은 legacy 데이터가
  자연스럽게 생성된다.", "confidence": 0.78 },
      { "claim": "Out of Scope(문제 타입 확장/서버 연동/커리
  큘럼 구조 변경)를 피하고 LearnPage.tsx 중심으로 제출 UX/저
  장 시점만 바꾸는 것이 회귀 위험이 낮다.", "reason":
  "task.md가 수정 중심 파일과 비범위를 명시하며, 현재 문제
  로딩/채점 로직은 요구 충족에 충분한 기반을 제공한다.",
  "confidence": 0.76 }
    ]
  }

  ## Standards Tags (내부 태그)

  - 추가된 태그: LEARN_ADD_BULK_GRADE_BUTTON,
    LEARN_REMOVE_PER_PROBLEM_SUBMIT,
    LEARN_ALL_ANSWERED_NORMALIZED,
    LEARN_DISABLED_USES_NORMALIZE_NUMERIC_INPUT,
    LEARN_DISABLED_EDGECASES_12,
    LEARN_BULK_GRADE_ALL_ACTION, LEARN_GRADED_STATE_FLAG,
    LEARN_SCORE_AND_RESULT_GATING,
    LEARN_LOCALSTORAGE_SAVE_BULK,
    LEARN_LOCALSTORAGE_MIGRATION_LEGACY_PARTIAL,
    LEARN_RESET_CLEAR_STORAGE, LEARN_AFTER_GRADE_EDIT_POLICY
  - 수정된 태그:
    LEARN_SINGLE_SUBMIT_FLOW(→LEARN_BULK_SUBMIT_FLOW),
    LEARN_STORAGE_UPDATE_PER_PROBLEM(→LEARN_STORAGE_SAVE_AFT
    ER_BULK_GRADE)

  [/R1 Coverage Report]

  ###DONE:216a78baad###


› -> /mnt/c/Users/irron/Desktop/my/web_service_new/
  calculate_math/.agents/inbox/research_c49dfc24b0.md


  44% context left



› Request c49dfc24b0: 아래 파일(티켓 지시)을 읽고 결과를 이
  터미널에 Output Format대로 그대로 출력해줘. 가능하면 repo
  파일을 생성/수정하지 말고, 마지막에 마커를 그대로 출력해.
  -> /mnt/c/Users/irron/Desktop/my/web_service_new/
  calculate_math/.agents/inbox/research_c49dfc24b0.md


                  Ou
•         
                               

─                                                           
  45% context left · ? for shortcuts


• ###BEGIN:c49dfc24b0###

  ## Coverage Gap Report

  ### 1. 누락된 기초 개념 (최소 10개)

  | # | 개념명 | 누락 이유 | 심각도 |
  |---|--------|----------|--------|
  | 1 | 현재 동작 1페이지 요약(상태 흐름/데이터 스키마) |
  LearnPage는 문제별 제출→단건 채점→localStorage merge 저장
  흐름이며 StoredResult{submissions} 계약이 기준점인데, 이를
  명시 요약하지 않으면 변경 시 회귀가 발생 | 높음 |
  | 2 | 문제 카드별 제출 버튼 제거 | 요구사항 핵심(개별 제출
  제거)인데 현재 UI는 per-problem 제출에 고정 | 높음 |
  | 3 | 페이지 하단 단일 버튼 채점하기(전체 제출) | 일괄 채
  점 UX의 유일한 진입점이 필요하나 현재 없음 | 높음 |
  | 4 | 채점하기 disabled 기준(정규화 일관성) | disabled 판
  정이 normalizeNumericInput()과 불일치하면 " , " 같은 입력
  에서 버튼 활성/비활성이 채점과 엇갈림 | 높음 |
  | 5 | allAnswered 계산(정규화 기반) | “모든 문제 답 입력
  전까지 disabled”를 problems[] 기준으로 안정적으로 계산하는
  로직이 필요(로딩/문제수 변화 포함) | 높음 |
  | 6 | 입력 엣지케이스 10+ 정의 | AC 요구(10개+) 충족을 위
  해 최소 벡터가 필요: "", "   ", "\t\n", ",", " , , ",
  "1,234", " 1 234 ", "0", "-0", "+", ".", "Infinity" | 중 |
  | 7 | 일괄 채점 액션(전체 순회→gradeNumericAnswer) | 현재
  는 단건 submitProblem(problem)만 존재해 “한 번에 전체 채
  점” 동작이 없음 | 높음 |
  | 8 | 채점 전/후 상태 플래그(hasGraded/isSubmitted) | 채점
  전에도 점수/정답이 노출되거나(0/N) 저장/복원 시 상태가 꼬
  이는 것을 막기 위한 상태 기준이 필요 | 중 |
  | 9 | 문제별 결과 표시(정오/정답) 정책(일괄 채점 후) | 요
  구는 채점 후 각 문제 카드에 정오/정답 표시인데, 현재는 단
  건 제출 시에만 결과가 생김 | 높음 |
  |10| 총점 X/N 표시 정책(채점 후에만) | 상단 점수는 채점 후
  에만 의미가 있으나 현재 구조는 “결과 일부 존재”만으로 0/N
  노출 가능 | 중 |
  |11| 저장/복원 계약(답안+채점결과를 한 번에 저장/복원) |
  요구는 일괄 채점 후 저장/복원인데, 현재는 문제별 제출 시마
  다 submissions를 merge 저장 | 높음 |
  |12| legacy partial(기존 부분 제출 데이터) 호환/마이그레이
  션 | 기존 데이터가 일부 문제만 채점/저장된 형태로 남아 있
  을 수 있어 bulk 전환 시 복원/disabled/표시가 꼬임 | 높음 |
  |13| 다시 풀기(초기화): 키 삭제 + UI 상태 리셋 | 요구사항
  4)인데 현재는 사용자가 저장된 결과/답안을 삭제할 UX가 없음
  | 높음 |
  |14| 채점 후 재입력 정책(스테일 결과 처리) | 채점 후 입력
  변경 시 결과/점수와 입력이 불일치하는 스테일 상태가 발생할
  수 있어 정책이 필요 | 중 |

  ### 2. 과잉 난이도/불필요 선행 (최소 5개)

  | # | 개념명 | 과잉 이유 | 조치 제안 |
  |---|--------|----------|----------|
  | 1 | 서버 연동/DB 저장 | Out of Scope(서버 연동) 위반이며
  localStorage 요구를 흐림 | 금지(이번 범위 밖) |
  | 2 | 문제 타입 확장(서술형/객관식 등) | 이번 티켓은 제출
  UX/저장/복원이며 타입 확장은 별도 사양 필요 | 금지(후속 티
  켓) |
  | 3 | grading 대개편(허용오차/분수/근삿값) | 요구는 일괄
  제출 UX이며 채점 정책 변경은 회귀 위험만 증대 | 기존
  gradeNumericAnswer() 유지 |
  | 4 | 문제은행 JSON 스키마 변경 | 로딩/데이터 구조 변경은
  범위 밖이며 회귀 위험 큼 | 기존 problems_v1.json 유지 |
  | 5 | 전역 상태관리 도입(Redux/Zustand 등) | LearnPage 단
  일 화면 상태로 충분, 도입은 과잉 | React state/useMemo로
  해결 |
  | 6 | 입력 중 실시간 autosave | 요구는 “채점 후 한 번에 저
  장”이며 autosave는 정책/호환을 복잡화 | 이번 범위에서 제외
  |

  ### 3. 학습 순서상 위험한 점프 (최소 5개)

  | # | From → To | 점프 이유 | 브릿지 제안 |
  |---|-----------|----------|------------|
  | 1 | 문제별 제출 제거 → bulk 제출 미구현 | 제거만 하면 채
  점/저장 경로가 사라져 기능 공백 발생 | 단일 채점하기
  +gradeAll 구현 후 제거 |
  | 2 | disabled(원문 입력 기준) → 채점(정규화 기준) | " , "
  같은 케이스에서 버튼 활성/비활성과 채점 결과가 불일치 |
  disabled 판정은 normalizeNumericInput(answer).length>0로
  고정 |
  | 3 | 일괄 저장(한 번에 저장) → 기존 partial 데이터 복원 |
  legacy partial이 “채점됨”처럼 보이거나 allAnswered와 충돌
  | partial 감지 후 정책(초기화/답안만 복원/재채점 요구) 정
  의 |
  | 4 | 점수 표시(항상 0/N 가능) → 채점 UX | 채점 전 0/N 노
  출은 “이미 채점됨” 오해 유발 | hasGraded 도입 후 채점 후에
  만 점수/정답 표시 |
  | 5 | 채점 후 입력 수정 → 결과/점수 유지 | 입력과 결과가
  불일치(스테일) 상태가 발생 | 입력 변경 시 결과 초기화 또는
  버튼을 다시 채점으로 전환 |
  | 6 | 초기화(키 삭제만) → UI 상태 유지 | localStorage만 지
  우면 화면은 이전 결과/답안을 계속 표시 | 키 삭제 +
  answerByProblemId/resultByProblemId/hasGraded 리셋 |

  ## Graph Patch JSON

  {
    "researcher": "R1",
    "scope": "curriculum_viewer_learning_bulk_submit_v1",
    "add_nodes": [
      { "id": "LEARN_MAP_CURRENT_SUBMIT_FLOW", "type":
  "micro", "name_ko": "현재 per-problem 제출/저장 흐름 요
  약", "domain": "FE", "rep": "C", "confidence": 0.86 },
      { "id": "LEARN_REMOVE_PER_PROBLEM_SUBMIT", "type":
  "micro", "name_ko": "문제 카드별 제출 버튼 제거",
  "domain": "FE", "rep": "P", "confidence": 0.85 },
      { "id": "LEARN_ADD_BULK_GRADE_BUTTON", "type":
  "micro", "name_ko": "페이지 하단 단일 버튼(채점하기/전체
  제출) 추가", "domain": "FE", "rep": "P", "confidence":
  0.85 },
      { "id": "LEARN_DISABLED_USES_NORMALIZE_NUMERIC_INPUT",
  "type": "micro", "name_ko": "disabled 판정 기준을
  normalizeNumericInput과 일치", "domain": "FE", "rep": "C",
  "confidence": 0.82 },
      { "id": "LEARN_ALL_ANSWERED_NORMALIZED", "type":
  "micro", "name_ko": "allAnswered 계산(정규화 기반)",
  "domain": "FE", "rep": "P", "confidence": 0.82 },
      { "id": "LEARN_DISABLED_EDGECASES_12", "type":
  "micro", "name_ko": "disabled/정규화 입력 엣지케이스 12종
  정의", "domain": "QA", "rep": "C", "confidence": 0.76 },
      { "id": "LEARN_BULK_GRADE_ALL_ACTION", "type":
  "micro", "name_ko": "일괄 채점 액션(전체 순회
  →gradeNumericAnswer)", "domain": "FE", "rep": "P",
  "confidence": 0.84 },
      { "id": "LEARN_GRADED_STATE_FLAG", "type": "micro",
  "name_ko": "채점 전/후 상태 플래그(hasGraded/isSubmitted)
  정의", "domain": "FE", "rep": "C", "confidence": 0.78 },
      { "id": "LEARN_SHOW_PER_PROBLEM_RESULT", "type":
  "micro", "name_ko": "문제별 정오/정답 표시(일괄 채점 후)",
  "domain": "FE", "rep": "P", "confidence": 0.8 },
      { "id": "LEARN_SCORE_SUMMARY_CALC", "type": "micro",
  "name_ko": "총점 X/N 계산(결과 맵 기반)", "domain": "FE",
  "rep": "P", "confidence": 0.78 },
      { "id": "LEARN_SCORE_AND_RESULT_GATING", "type":
  "micro", "name_ko": "채점 후에만 점수/정오/정답 표시(게이
  팅)", "domain": "FE", "rep": "P", "confidence": 0.76 },
      { "id": "LEARN_STORE_RESULT_SCHEMA_BULK", "type":
  "micro", "name_ko": "bulk 저장 스키마(답안+결과) 계약 정
  의", "domain": "FE", "rep": "C", "confidence": 0.76 },
      { "id": "LEARN_LOCALSTORAGE_SAVE_BULK", "type":
  "micro", "name_ko": "일괄 채점 후 답안+결과를 한 번에 저
  장", "domain": "FE", "rep": "P", "confidence": 0.8 },
      { "id": "LEARN_LOCALSTORAGE_RESTORE_BULK", "type":
  "micro", "name_ko": "재진입/새로고침 시 결과/답안 복원",
  "domain": "FE", "rep": "P", "confidence": 0.78 },
      { "id": "LEARN_LOCALSTORAGE_MIGRATION_LEGACY_PARTIAL",
  "type": "micro", "name_ko": "기존 부분 제출 데이터 호환/마
  이그레이션 규칙", "domain": "FE", "rep": "C",
  "confidence": 0.74 },
      { "id": "LEARN_RESET_CLEAR_STORAGE", "type": "micro",
  "name_ko": "다시 풀기: localStorage 키 삭제", "domain":
  "FE", "rep": "P", "confidence": 0.82 },
      { "id": "LEARN_RESET_UI_STATE", "type": "micro",
  "name_ko": "다시 풀기: UI 상태 리셋(answerByProblemId/
  results/hasGraded)", "domain": "FE", "rep": "P",
  "confidence": 0.78 },
      { "id": "LEARN_AFTER_GRADE_EDIT_POLICY", "type":
  "micro", "name_ko": "채점 후 재입력 정책(결과 초기화 또는
  다시 채점)", "domain": "UX", "rep": "C", "confidence":
  0.7 }
    ],
    "merge_aliases": [],
    "add_edges": [
      { "from":
  "LEARN_DISABLED_USES_NORMALIZE_NUMERIC_INPUT", "to":
  "LEARN_ALL_ANSWERED_NORMALIZED", "type": "requires",
  "confidence": 0.82 },
      { "from": "LEARN_ALL_ANSWERED_NORMALIZED", "to":
  "LEARN_ADD_BULK_GRADE_BUTTON", "type": "requires",
  "confidence": 0.7 },
      { "from": "LEARN_ADD_BULK_GRADE_BUTTON", "to":
  "LEARN_BULK_GRADE_ALL_ACTION", "type": "requires",
  "confidence": 0.8 },
      { "from": "LEARN_BULK_GRADE_ALL_ACTION", "to":
  "LEARN_GRADED_STATE_FLAG", "type": "requires",
  "confidence": 0.74 },
      { "from": "LEARN_GRADED_STATE_FLAG", "to":
  "LEARN_SCORE_AND_RESULT_GATING", "type": "requires",
  "confidence": 0.76 },
      { "from": "LEARN_GRADED_STATE_FLAG", "to":
  "LEARN_SHOW_PER_PROBLEM_RESULT", "type": "requires",
  "confidence": 0.74 },
      { "from": "LEARN_BULK_GRADE_ALL_ACTION", "to":
  "LEARN_SCORE_SUMMARY_CALC", "type": "requires",
  "confidence": 0.78 },
      { "from": "LEARN_STORE_RESULT_SCHEMA_BULK", "to":
  "LEARN_LOCALSTORAGE_SAVE_BULK", "type": "requires",
  "confidence": 0.8 },
      { "from": "LEARN_STORE_RESULT_SCHEMA_BULK", "to":
  "LEARN_LOCALSTORAGE_RESTORE_BULK", "type": "requires",
  "confidence": 0.8 },
      { "from": "LEARN_BULK_GRADE_ALL_ACTION", "to":
  "LEARN_LOCALSTORAGE_SAVE_BULK", "type": "requires",
  "confidence": 0.8 },
      { "from":
  "LEARN_LOCALSTORAGE_MIGRATION_LEGACY_PARTIAL", "to":
  "LEARN_LOCALSTORAGE_RESTORE_BULK", "type": "requires",
  "confidence": 0.74 },
      { "from": "LEARN_LOCALSTORAGE_RESTORE_BULK", "to":
  "LEARN_GRADED_STATE_FLAG", "type": "requires",
  "confidence": 0.72 },
      { "from": "LEARN_LOCALSTORAGE_SAVE_BULK", "to":
  "LEARN_RESET_CLEAR_STORAGE", "type": "requires",
  "confidence": 0.74 },
      { "from": "LEARN_RESET_CLEAR_STORAGE", "to":
  "LEARN_RESET_UI_STATE", "type": "requires", "confidence":
  0.78 },
      { "from": "LEARN_AFTER_GRADE_EDIT_POLICY", "to":
  "LEARN_SCORE_AND_RESULT_GATING", "type": "requires",
  "confidence": 0.7 },
      { "from": "LEARN_BULK_GRADE_ALL_ACTION", "to":
  "LEARN_REMOVE_PER_PROBLEM_SUBMIT", "type": "requires",
  "confidence": 0.72 }
    ],
    "remove_edges": [],
    "notes": [
      { "claim": "현재 LearnPage는 문제 카드별 제출
  (submitProblem)로 단건 채점 후 submissions를 localStorage
  키(curriculum-viewer:learn:lastResult:${nodeId})에 merge
  저장한다.", "reason": "LearnPage.tsx에서
  StoredResult{submissions} 타입과 submitProblem의
  setItem(JSON.stringify(payload)) 흐름이 확인된다.",
  "confidence": 0.86 },
      { "claim": "disabled 판정은 normalizeNumericInput과 동
  일 기준으로 정의해야 한다.", "reason": "grading.ts의
  normalizeNumericInput은 공백/콤마 제거를 수행하므로,
  disabled가 원문 기준이면 '입력됨/미입력'이 채점과 불일치한
  다.", "confidence": 0.82 },
      { "claim": "bulk 전환 시 legacy partial(일부 문제만
  submissions에 존재) 데이터가 자연스럽게 존재하므로 호환/마
  이그레이션 정책이 필요하다.", "reason": "기존 구현은 문제
  별 제출 시마다 submissions를 누적 저장하므로 전체 문제 수
  보다 적은 저장 데이터가 생성된다.", "confidence": 0.78 },
      { "claim": "점수/정오/정답 표시는 hasGraded 같은 상태
  로 게이팅해야 한다.", "reason": "채점 전 0/N 노출 및 저장/
  복원 시 표시 기준 혼란을 막기 위해 채점 전/후를 분리해야
  한다.", "confidence": 0.74 },
      { "claim": "다시 풀기는 localStorage 키 삭제와 UI 상태
  리셋을 함께 수행해야 한다.", "reason": "키 삭제만으로는 화
  면에 남아있는 answer/result 상태가 즉시 초기화되지 않아 UX
  가 어긋난다.", "confidence": 0.78 }
    ]
  }

  ## Standards Tags (내부 태그)

  - 추가된 태그: LEARN_MAP_CURRENT_SUBMIT_FLOW,
    LEARN_REMOVE_PER_PROBLEM_SUBMIT,
    LEARN_ADD_BULK_GRADE_BUTTON,
    LEARN_DISABLED_USES_NORMALIZE_NUMERIC_INPUT,
    LEARN_ALL_ANSWERED_NORMALIZED,
    LEARN_DISABLED_EDGECASES_12,
    LEARN_BULK_GRADE_ALL_ACTION, LEARN_GRADED_STATE_FLAG,
    LEARN_SHOW_PER_PROBLEM_RESULT, LEARN_SCORE_SUMMARY_CALC,
    LEARN_SCORE_AND_RESULT_GATING,
    LEARN_STORE_RESULT_SCHEMA_BULK,
    LEARN_LOCALSTORAGE_SAVE_BULK,
    LEARN_LOCALSTORAGE_RESTORE_BULK,
    LEARN_LOCALSTORAGE_MIGRATION_LEGACY_PARTIAL,
    LEARN_RESET_CLEAR_STORAGE, LEARN_RESET_UI_STATE,
    LEARN_AFTER_GRADE_EDIT_POLICY
  - 수정된 태그: (없음)

  [/R1 Coverage Report]

  ###DONE:c49dfc24b0###


› -> /mnt/c/Users/irron/Desktop/my/web_service_new/
  calculate_math/.agents/inbox/research_cd88845efc.md


  40% context left



› Request cd88845efc: 아래 파일(티켓 지시)을 읽고 결과를 이
  터미널에 Output Format대로 그대로 출력해줘. 가능하면 repo
  파일을 생성/수정하지 말고, 마지막에 마커를 그대로 출력해.
  -> /mnt/c/Users/irron/Desktop/my/web_service_new/
  calculate_math/.agents/inbox/research_cd88845efc.md


    rki
•         
                               

─                                                           
  42% context left · ? for shortcuts


• ###BEGIN:cd88845efc###

  ## Coverage Gap Report

  ### 1. 누락된 기초 개념 (최소 10개)

  | # | 개념명 | 누락 이유 | 심각도 |
  |---|--------|----------|--------|
  | 1 | 현재 동작/상태 흐름 1페이지 요약 | LearnPage는 “문제
  별 제출→단건 채점→localStorage merge 저장” 구조인데, 이를
  기준선으로 요약하지 않으면 bulk 전환 시 회귀 원인을 추적하
  기 어려움 | 높음 |
  | 2 | StoredResult 스키마 명시(현재: submissions) | 저장/
  복원 계약이 { nodeId, updatedAt, submissions }인데 bulk 저
  장으로 바뀔 때 호환/마이그레이션 규칙이 필요 | 높음 |
  | 3 | 단일 버튼 채점하기 UX(하단 고정) | 요구사항은 “모든
  문제 입력 후 한 번에 제출”인데 현재 UI는 문제 카드별 제출
  만 존재 | 높음 |
  | 4 | 채점하기 disabled 기준(정규화 일치) | disabled 판정
  이 normalizeNumericInput()과 일관되지 않으면 " , " 같은 입
  력에서 활성/비활성이 채점과 불일치 | 높음 |
  | 5 | allAnswered 계산(정규화 기반) | problems[] 전체에 대
  해 정규화 후 빈 값 여부를 확인해야 “모든 문제 입력 전까지
  disabled”를 구현 가능 | 높음 |
  | 6 | 입력 엣지케이스 10+ 정의 | AC 요구(10개+) 충족을 위
  해 최소 벡터가 필요(빈값/공백/콤마/0/부호/소수점/Infinity
  등) | 중 |
  | 7 | 일괄 채점 액션(전체 순회→gradeNumericAnswer) | 현재
  는 단건 submitProblem만 있어 “한 번에 전체 채점” 동작이 없
  음 | 높음 |
  | 8 | 채점 전/후 상태 플래그(hasGraded/isSubmitted) | 채점
  전 0/N 노출, 복원 후 표시 기준 혼란을 막기 위해 채점 전/후
  상태를 분리해야 함 | 중 |
  | 9 | 점수/정오/정답 표시 게이팅 | 채점 후에만 결과를 노출
  해야 사용자 혼란(채점 전 점수 노출/legacy partial) 최소화
  | 중 |
  |10| bulk 저장(답안+결과를 한 번에 저장) | 요구사항 3) 저
  장 시점이 “개별 제출”이 아니라 “일괄 채점 후”로 바뀌어야
  함 | 높음 |
  |11| bulk 복원(재진입/새로고침) | 저장된 답안/결과를 한 번
  에 복원해 UI 상태를 재구성해야 함 | 높음 |
  |12| legacy partial 호환/마이그레이션 정책 | 기존 per-
  problem 저장은 submissions 일부만 남기는 데이터가 자연스럽
  게 생성되므로 bulk 전환 후 충돌 방지 정책이 필요 | 높음 |
  |13| 초기화(다시 풀기): localStorage 삭제 + UI 리셋 | 요구
  사항 4)인데 현재 사용자가 저장된 결과/답안을 지울 방법이
  없음 | 높음 |
  |14| strict JSON 출력 가드(줄바꿈 금지) | reviewer 지적처
  럼 문자열 내부 줄바꿈이 있으면 자동 파싱/병합이 실패하므로
  산출물 JSON은 strict JSON이어야 함 | 높음 |

  ### 2. 과잉 난이도/불필요 선행 (최소 5개)

  | # | 개념명 | 과잉 이유 | 조치 제안 |
  |---|--------|----------|----------|
  | 1 | 서버 연동/DB 저장 | Out of Scope 위반이며
  localStorage 요구를 흐림 | 금지 |
  | 2 | 문제 타입 확장(서술형/객관식) | 이번 티켓은 제출 UX/
  저장/복원이며 타입 확장은 별도 설계 필요 | 금지(후속 티켓)
  |
  | 3 | 채점 정책 확장(허용오차/분수/근사) | bulk 제출 UX와
  무관하며 회귀 위험만 증가 | gradeNumericAnswer() 유지 |
  | 4 | 문제은행 스키마 변경 | 데이터 구조 변경은 범위 밖이
  며 회귀 위험 큼 | problems_v1.json 유지 |
  | 5 | 전역 상태관리 도입(Redux/Zustand) | LearnPage 단일
  화면 상태로 충분 | 도입 금지 |
  | 6 | autosave(입력 즉시 저장) | 요구는 “채점 후 한 번에
  저장”이며 호환/정책을 복잡화 | 제외 |

  ### 3. 학습 순서상 위험한 점프 (최소 5개)

  | # | From → To | 점프 이유 | 브릿지 제안 |
  |---|-----------|----------|------------|
  | 1 | 문제별 제출 제거 → bulk 액션/버튼 미구현 | 제거만 하
  면 채점/저장 경로가 사라져 기능 공백 발생 | 채점하기
  +gradeAll 구현 후 제거 |
  | 2 | disabled(원문 기준) → 채점(정규화 기준) | " , " 등에
  서 활성/비활성과 채점이 불일치해 UX 붕괴 | disabled는
  normalizeNumericInput(answer).length>0로 통일 |
  | 3 | bulk 저장 도입 → legacy partial 복원 | 기존
  submissions 일부만 저장된 데이터가 bulk 상태/표시와 충돌 |
  legacy partial 감지 후 정책(초기화/답안만 복원/재채점 유
  도) |
  | 4 | 점수 표시(항상 0/N 가능) → 채점 UX | 채점 전 점수 노
  출은 “이미 채점됨” 오해 유발 | hasGraded 도입 후 채점 후에
  만 점수/정답 표시 |
  | 5 | 채점 후 입력 수정 → 결과 유지 | 입력과 결과가 불일치
  (스테일) 상태 발생 | 입력 변경 시 결과 초기화 또는 다시 채
  점 플로우 |
  | 6 | 초기화(키 삭제만) → UI 상태 유지 | 저장소만 지우면
  화면에 남아있는 answer/result/flags가 그대로 | 키 삭제 +
  UI 상태 리셋 동시 수행 |

  ## Graph Patch JSON

  {
    "researcher": "R1",
    "scope": "curriculum_viewer_learning_bulk_submit_v1",
    "add_nodes": [
      { "id": "LEARN_MAP_CURRENT_SUBMIT_FLOW", "type":
  "micro", "name_ko": "현재 per-problem 제출/저장 흐름 1페이
  지 요약", "domain": "FE", "rep": "C", "confidence":
  0.86 },
      { "id": "LEARN_DOCUMENT_STORED_RESULT_SCHEMA", "type":
  "micro", "name_ko": "StoredResult/ submisions 스키마 문서
  화", "domain": "FE", "rep": "C", "confidence": 0.82 },
      { "id": "LEARN_REMOVE_PER_PROBLEM_SUBMIT", "type":
  "micro", "name_ko": "문제 카드별 제출 버튼 제거",
  "domain": "FE", "rep": "P", "confidence": 0.85 },
      { "id": "LEARN_ADD_BULK_GRADE_BUTTON", "type":
  "micro", "name_ko": "페이지 하단 단일 버튼(채점하기/전체
  제출) 추가", "domain": "FE", "rep": "P", "confidence":
  0.85 },
      { "id": "LEARN_DISABLED_USES_NORMALIZE_NUMERIC_INPUT",
  "type": "micro", "name_ko": "disabled 판정 기준을
  normalizeNumericInput과 일치", "domain": "FE", "rep": "C",
  "confidence": 0.82 },
      { "id": "LEARN_ALL_ANSWERED_NORMALIZED", "type":
  "micro", "name_ko": "allAnswered 계산(정규화 기반)",
  "domain": "FE", "rep": "P", "confidence": 0.82 },
      { "id": "LEARN_DISABLED_EDGECASES_12", "type":
  "micro", "name_ko": "입력 엣지케이스 12종 정의(빈값/공백/
  콤마/0/부호/소수점 등)", "domain": "QA", "rep": "C",
  "confidence": 0.76 },
      { "id": "LEARN_BULK_GRADE_ALL_ACTION", "type":
  "micro", "name_ko": "일괄 채점 액션(전체 순회
  →gradeNumericAnswer)", "domain": "FE", "rep": "P",
  "confidence": 0.84 },
      { "id": "LEARN_GRADED_STATE_FLAG", "type": "micro",
  "name_ko": "채점 전/후 상태 플래그(hasGraded/isSubmitted)
  정의", "domain": "FE", "rep": "C", "confidence": 0.78 },
      { "id": "LEARN_SCORE_AND_RESULT_GATING", "type":
  "micro", "name_ko": "채점 후에만 점수/정오/정답 표시(게이
  팅)", "domain": "FE", "rep": "P", "confidence": 0.76 },
      { "id": "LEARN_STORE_RESULT_SCHEMA_BULK", "type":
  "micro", "name_ko": "bulk 저장 스키마(답안+결과) 계약 정
  의", "domain": "FE", "rep": "C", "confidence": 0.76 },
      { "id": "LEARN_LOCALSTORAGE_SAVE_BULK", "type":
  "micro", "name_ko": "일괄 채점 후 답안+결과를 한 번에 저
  장", "domain": "FE", "rep": "P", "confidence": 0.8 },
      { "id": "LEARN_LOCALSTORAGE_RESTORE_BULK", "type":
  "micro", "name_ko": "재진입/새로고침 시 결과/답안 복원",
  "domain": "FE", "rep": "P", "confidence": 0.78 },
      { "id": "LEARN_LOCALSTORAGE_MIGRATION_LEGACY_PARTIAL",
  "type": "micro", "name_ko": "legacy partial(부분 제출) 데
  이터 호환/정책", "domain": "FE", "rep": "C", "confidence":
  0.74 },
      { "id": "LEARN_RESET_CLEAR_STORAGE", "type": "micro",
  "name_ko": "다시 풀기: localStorage 키 삭제", "domain":
  "FE", "rep": "P", "confidence": 0.82 },
      { "id": "LEARN_RESET_UI_STATE", "type": "micro",
  "name_ko": "다시 풀기: UI 상태 리셋(answer/results/
  flags)", "domain": "FE", "rep": "P", "confidence": 0.78 },
      { "id": "LEARN_AFTER_GRADE_EDIT_POLICY", "type":
  "micro", "name_ko": "채점 후 재입력 정책(결과 초기화 또는
  다시 채점)", "domain": "UX", "rep": "C", "confidence":
  0.7 },
      { "id": "LEARN_STRICT_JSON_OUTPUT_GUARD", "type":
  "micro", "name_ko": "Graph Patch JSON strict JSON 보장(문
  자열 줄바꿈 금지)", "domain": "QA", "rep": "C",
  "confidence": 0.84 }
    ],
    "merge_aliases": [],
    "add_edges": [
      { "from": "LEARN_MAP_CURRENT_SUBMIT_FLOW", "to":
  "LEARN_DOCUMENT_STORED_RESULT_SCHEMA", "type": "requires",
  "confidence": 0.78 },
      { "from":
  "LEARN_DISABLED_USES_NORMALIZE_NUMERIC_INPUT", "to":
  "LEARN_ALL_ANSWERED_NORMALIZED", "type": "requires",
  "confidence": 0.82 },
      { "from": "LEARN_ALL_ANSWERED_NORMALIZED", "to":
  "LEARN_ADD_BULK_GRADE_BUTTON", "type": "requires",
  "confidence": 0.7 },
      { "from": "LEARN_ADD_BULK_GRADE_BUTTON", "to":
  "LEARN_BULK_GRADE_ALL_ACTION", "type": "requires",
  "confidence": 0.8 },
      { "from": "LEARN_BULK_GRADE_ALL_ACTION", "to":
  "LEARN_GRADED_STATE_FLAG", "type": "requires",
  "confidence": 0.74 },
      { "from": "LEARN_GRADED_STATE_FLAG", "to":
  "LEARN_SCORE_AND_RESULT_GATING", "type": "requires",
  "confidence": 0.76 },
      { "from": "LEARN_STORE_RESULT_SCHEMA_BULK", "to":
  "LEARN_LOCALSTORAGE_SAVE_BULK", "type": "requires",
  "confidence": 0.8 },
      { "from": "LEARN_STORE_RESULT_SCHEMA_BULK", "to":
  "LEARN_LOCALSTORAGE_RESTORE_BULK", "type": "requires",
  "confidence": 0.8 },
      { "from":
  "LEARN_LOCALSTORAGE_MIGRATION_LEGACY_PARTIAL", "to":
  "LEARN_LOCALSTORAGE_RESTORE_BULK", "type": "requires",
  "confidence": 0.74 },
      { "from": "LEARN_LOCALSTORAGE_RESTORE_BULK", "to":
  "LEARN_GRADED_STATE_FLAG", "type": "requires",
  "confidence": 0.72 },
      { "from": "LEARN_LOCALSTORAGE_SAVE_BULK", "to":
  "LEARN_RESET_CLEAR_STORAGE", "type": "requires",
  "confidence": 0.74 },
      { "from": "LEARN_RESET_CLEAR_STORAGE", "to":
  "LEARN_RESET_UI_STATE", "type": "requires", "confidence":
  0.78 },
      { "from": "LEARN_AFTER_GRADE_EDIT_POLICY", "to":
  "LEARN_SCORE_AND_RESULT_GATING", "type": "requires",
  "confidence": 0.7 },
      { "from": "LEARN_BULK_GRADE_ALL_ACTION", "to":
  "LEARN_REMOVE_PER_PROBLEM_SUBMIT", "type": "requires",
  "confidence": 0.72 },
      { "from": "LEARN_STRICT_JSON_OUTPUT_GUARD", "to":
  "LEARN_STORE_RESULT_SCHEMA_BULK", "type": "requires",
  "confidence": 0.74 }
    ],
    "remove_edges": [],
    "notes": [
      { "claim": "현재 LearnPage는 문제별 제출
  (submitProblem)로 단건 채점 후 submissions를 localStorage
  키(curriculum-viewer:learn:lastResult:${nodeId})에 merge
  저장한다.", "reason": "LearnPage.tsx에서
  StoredResult{submissions} 타입 정의와
  setItem(JSON.stringify(payload))가 확인된다.",
  "confidence": 0.86 },
      { "claim": "disabled 판정은 normalizeNumericInput과 동
  일 기준으로 정의해야 한다.", "reason":
  "normalizeNumericInput이 공백/콤마 제거를 수행하므로 원문
  기준 disabled는 채점과 불일치해 UX가 붕괴한다.",
  "confidence": 0.82 },
      { "claim": "legacy partial 데이터는 bulk 전환 시 필연
  적으로 존재할 수 있어 복원 단계에서 감지/정책화가 필요하
  다.", "reason": "기존 per-problem 저장은 전체 문제 수보다
  적은 submissions를 남기는 것이 정상 동작이었다.",
  "confidence": 0.74 },
      { "claim": "채점 전/후 게이팅(hasGraded)은 점수/정답
  조기 노출과 저장/복원 혼선을 줄인다.", "reason": "채점 전
  0/N 노출, 부분 저장 데이터 노출을 통제하려면 표시 기준이
  필요하다.", "confidence": 0.74 },
      { "claim": "Graph Patch JSON은 문자열 내부 줄바꿈이 있
  으면 파서가 실패하므로 strict JSON으로 재출력되어야 한
  다.", "reason": "reviewer 지적처럼 JSON 파싱 실패는 결합
  패치 검증/병합 파이프라인을 중단시킨다.", "confidence":
  0.84 }
    ]
  }

  ## Standards Tags (내부 태그)

  - 추가된 태그: LEARN_MAP_CURRENT_SUBMIT_FLOW,
    LEARN_DOCUMENT_STORED_RESULT_SCHEMA,
    LEARN_REMOVE_PER_PROBLEM_SUBMIT,
    LEARN_ADD_BULK_GRADE_BUTTON,
    LEARN_DISABLED_USES_NORMALIZE_NUMERIC_INPUT,
    LEARN_ALL_ANSWERED_NORMALIZED,
    LEARN_DISABLED_EDGECASES_12,
    LEARN_BULK_GRADE_ALL_ACTION, LEARN_GRADED_STATE_FLAG,
    LEARN_SCORE_AND_RESULT_GATING,
    LEARN_STORE_RESULT_SCHEMA_BULK,
    LEARN_LOCALSTORAGE_SAVE_BULK,
    LEARN_LOCALSTORAGE_RESTORE_BULK,
    LEARN_LOCALSTORAGE_MIGRATION_LEGACY_PARTIAL,
    LEARN_RESET_CLEAR_STORAGE, LEARN_RESET_UI_STATE,
    LEARN_AFTER_GRADE_EDIT_POLICY,
    LEARN_STRICT_JSON_OUTPUT_GUARD
  - 수정된 태그: (없음)

  [/R1 Coverage Report]

  ###DONE:cd88845efc###


› -> /mnt/c/Users/irron/Desktop/my/web_service_new/
  calculate_math/.agents/inbox/research_f0805f8d87.md


  40% context left



› Request f0805f8d87: 아래 파일(티켓 지시)을 읽고 결과를 이
  터미널에 Output Format대로 그대로 출력해줘. 가능하면 repo
  파일을 생성/수정하지 말고, 마지막에 마커를 그대로 출력해.
  -> /mnt/c/Users/irron/Desktop/my/web_service_new/
  calculate_math/.agents/inbox/research_f0805f8d87.md


   ork     10s • esc to inte rupt)
•         
                               

─                                                           
  39% context left · ? for shortcuts


• ###BEGIN:f0805f8d87###

  ## Coverage Gap Report

  ### 1. 누락된 기초 개념 (최소 10개)

  | # | 개념명 | 누락 이유 | 심각도 |
  |---|--------|----------|--------|
  | 1 | 현재 LearnPage 제출/저장 흐름 기준선 요약 | 현재는
  문제별 제출→단건 채점→submissions merge 저장 구조라, bulk
  전환 시 무엇이 바뀌는지 기준선이 필요 | 높음 |
  | 2 | StoredResult(submissions) 스키마 명시 | localStorage
  저장/복원 계약이 명시되지 않으면 bulk 저장으로 전환 시 호
  환/마이그레이션 규칙이 흔들림 | 높음 |
  | 3 | 문제 카드별 제출 버튼 제거 | 요구사항 1) 핵심인데 현
  재 UI는 per-problem 제출에 고정 | 높음 |
  | 4 | 하단 단일 채점하기(전체 제출) 버튼 | 요구 UX의 유일
  한 진입점이 필요하나 현재 없음 | 높음 |
  | 5 | 채점하기 disabled 기준(정규화 일관성) | disabled 판
  정이 normalizeNumericInput()과 불일치하면 " , " 같은 입력
  에서 활성/비활성이 채점과 엇갈림 | 높음 |
  | 6 | allAnswered 계산(정규화 기반) | problems[] 전체를 기
  준으로 “모두 입력됨”을 안정적으로 계산해야 함(로딩 타이밍/
  문제 수 변화 포함) | 높음 |
  | 7 | 입력 엣지케이스 10+ 정의 | AC 요구 충족을 위해 최소
  벡터가 필요(예: "", " ", ",", " , ", "0", "-0", "1,234", "
  1 234 ", "+", ".", "Infinity" 등) | 중 |
  | 8 | 일괄 채점 액션(전체 순회→gradeNumericAnswer) | 현재
  는 submitProblem(problem)로 단건 채점만 가능해 bulk 채점
  동작이 없음 | 높음 |
  | 9 | 채점 전/후 상태 플래그(hasGraded/isSubmitted) | 채점
  전 점수/정답 노출(0/N) 및 복원 후 표시 기준 혼란을 막기 위
  해 필요 | 중 |
  |10| 점수/정오/정답 표시 게이팅 | 채점 후에만 결과를 노출
  해야 UX가 일관되고 legacy partial 데이터 혼선을 줄임 | 중
  |
  |11| bulk 저장(답안+결과를 한 번에 저장) | 요구사항 3) 저
  장 시점이 개별 제출이 아니라 일괄 채점 후로 바뀌어야 함 |
  높음 |
  |12| bulk 복원(재진입/새로고침) | 저장된 답안/결과를 복원
  해 상태를 재구성해야 함 | 높음 |
  |13| legacy partial 호환/정책 | 기존 per-problem 저장은
  submissions 일부만 남기는 데이터가 정상으로 생성되므로,
  bulk 전환 후 충돌 방지 정책이 필요 | 높음 |
  |14| 다시 풀기(초기화): 키 삭제 + UI 리셋 | 요구사항 4)이
  며 키 삭제만으로는 화면이 즉시 초기화되지 않음 | 높음 |
  |15| strict JSON 산출 가드 | reviewer 지적처럼 문자열 내부
  줄바꿈이 있으면 파싱/병합이 실패하므로 산출물 JSON은
  strict JSON이어야 함 | 높음 |

  ### 2. 과잉 난이도/불필요 선행 (최소 5개)

  | # | 개념명 | 과잉 이유 | 조치 제안 |
  |---|--------|----------|----------|
  | 1 | R3 Transfer 템플릿/트리플릿 강제 | 본 티켓은 FE/UX
  개선이며 problem templates/triplets은 도메인 부적합(또는
  N/A 처리 필요) | N/A 명시 또는 최소 전이(상태 전이) 예시로
  대체 |
  | 2 | 서버 연동/DB 저장 | Out of Scope 위반, localStorage
  요구를 흐림 | 금지 |
  | 3 | 문제 타입 확장(서술형/객관식) | 이번 티켓 범위를 벗
  어남 | 금지(후속 티켓) |
  | 4 | grading 정책 확장(허용오차/분수/근사) | bulk 제출 UX
  와 무관하며 회귀 위험 증가 | 기존 gradeNumericAnswer 유지
  |
  | 5 | 문제은행 JSON 스키마 변경 | 데이터 구조 변경은 범위
  밖, 회귀 위험 큼 | 기존 스키마 유지 |
  | 6 | 전역 상태관리 도입(Redux/Zustand) | LearnPage 단일
  화면 상태로 충분 | 도입 금지 |

  ### 3. 학습 순서상 위험한 점프 (최소 5개)

  | # | From → To | 점프 이유 | 브릿지 제안 |
  |---|-----------|----------|------------|
  | 1 | 문제별 제출 제거 → bulk 버튼/액션 미구현 | 제거만 하
  면 채점/저장 경로가 사라져 기능 공백 발생 | 채점하기
  +gradeAll 구현 후 제거 |
  | 2 | disabled(원문 기준) → 채점(정규화 기준) | " , " 등에
  서 활성/비활성과 채점이 불일치해 UX 붕괴 | disabled는
  normalizeNumericInput(answer).length>0로 통일 |
  | 3 | bulk 저장 도입 → legacy partial 복원 | 기존
  submissions 일부만 저장된 데이터가 bulk 표시/disabled와 충
  돌 | partial 감지 후 정책(초기화/답안만 복원/재채점 유도)
  |
  | 4 | 점수 표시 → 채점 UX | 채점 전 0/N 노출은 “이미 채점
  됨” 오해 유발 | hasGraded 도입 후 채점 후에만 점수/정답 표
  시 |
  | 5 | 채점 후 입력 수정 → 결과 유지 | 입력과 결과가 불일치
  (스테일) 상태 발생 | 입력 변경 시 결과 초기화 또는 다시 채
  점 플로우 |
  | 6 | 초기화(키 삭제만) → UI 상태 유지 | 저장소만 지우면
  화면에 남은 answer/result/flags가 그대로 | 키 삭제 + UI 리
  셋 동시 수행 |

  ## Graph Patch JSON

  {
    "researcher": "R1",
    "scope": "curriculum_viewer_learning_bulk_submit_v1",
    "add_nodes": [
      { "id": "LEARN_MAP_CURRENT_SUBMIT_FLOW", "type":
  "micro", "name_ko": "현재 per-problem 제출/저장 흐름 1페이
  지 요약", "domain": "FE", "rep": "C", "confidence":
  0.86 },
      { "id": "LEARN_DOCUMENT_STORED_RESULT_SCHEMA", "type":
  "micro", "name_ko": "StoredResult/submissions 스키마 문서
  화", "domain": "FE", "rep": "C", "confidence": 0.82 },
      { "id": "LEARN_REMOVE_PER_PROBLEM_SUBMIT", "type":
  "micro", "name_ko": "문제 카드별 제출 버튼 제거",
  "domain": "FE", "rep": "P", "confidence": 0.85 },
      { "id": "LEARN_ADD_BULK_GRADE_BUTTON", "type":
  "micro", "name_ko": "페이지 하단 단일 버튼(채점하기/전체
  제출) 추가", "domain": "FE", "rep": "P", "confidence":
  0.85 },
      { "id": "LEARN_DISABLED_USES_NORMALIZE_NUMERIC_INPUT",
  "type": "micro", "name_ko": "disabled 판정 기준을
  normalizeNumericInput과 일치", "domain": "FE", "rep": "C",
  "confidence": 0.82 },
      { "id": "LEARN_ALL_ANSWERED_NORMALIZED", "type":
  "micro", "name_ko": "allAnswered 계산(정규화 기반)",
  "domain": "FE", "rep": "P", "confidence": 0.82 },
      { "id": "LEARN_DISABLED_EDGECASES_12", "type":
  "micro", "name_ko": "입력 엣지케이스 12종 정의(빈값/공백/
  콤마/0/부호/소수점 등)", "domain": "QA", "rep": "C",
  "confidence": 0.76 },
      { "id": "LEARN_BULK_GRADE_ALL_ACTION", "type":
  "micro", "name_ko": "일괄 채점 액션(전체 순회
  →gradeNumericAnswer)", "domain": "FE", "rep": "P",
  "confidence": 0.84 },
      { "id": "LEARN_BUILD_RESULT_MAP", "type": "micro",
  "name_ko": "문제별 결과 맵(resultByProblemId) 생성",
  "domain": "FE", "rep": "P", "confidence": 0.78 },
      { "id": "LEARN_GRADED_STATE_FLAG", "type": "micro",
  "name_ko": "채점 전/후 상태 플래그(hasGraded 등) 정의",
  "domain": "FE", "rep": "C", "confidence": 0.78 },
      { "id": "LEARN_SCORE_SUMMARY_CALC", "type": "micro",
  "name_ko": "총점 X/N 계산(결과 맵 기반)", "domain": "FE",
  "rep": "P", "confidence": 0.76 },
      { "id": "LEARN_SCORE_AND_RESULT_GATING", "type":
  "micro", "name_ko": "채점 후에만 점수/정오/정답 표시(게이
  팅)", "domain": "FE", "rep": "P", "confidence": 0.76 },
      { "id": "LEARN_SHOW_PER_PROBLEM_RESULT", "type":
  "micro", "name_ko": "문제별 정오/정답 표시(일괄 채점 후)",
  "domain": "FE", "rep": "P", "confidence": 0.78 },
      { "id": "LEARN_STORE_RESULT_SCHEMA_BULK", "type":
  "micro", "name_ko": "bulk 저장 스키마(답안+결과) 계약 정
  의", "domain": "FE", "rep": "C", "confidence": 0.76 },
      { "id": "LEARN_LOCALSTORAGE_VALIDATE_SHAPE", "type":
  "micro", "name_ko": "복원 데이터 파싱/검증 규칙(JSON shape
  validate)", "domain": "FE", "rep": "C", "confidence":
  0.78 },
      { "id": "LEARN_LOCALSTORAGE_SAVE_BULK", "type":
  "micro", "name_ko": "일괄 채점 후 답안+결과를 한 번에 저
  장", "domain": "FE", "rep": "P", "confidence": 0.8 },
      { "id": "LEARN_LOCALSTORAGE_RESTORE_BULK", "type":
  "micro", "name_ko": "재진입/새로고침 시 결과/답안 복원",
  "domain": "FE", "rep": "P", "confidence": 0.78 },
      { "id": "LEARN_LOCALSTORAGE_MIGRATION_LEGACY_PARTIAL",
  "type": "micro", "name_ko": "legacy partial(부분 제출) 호
  환/정책", "domain": "FE", "rep": "C", "confidence":
  0.74 },
      { "id": "LEARN_RESET_CLEAR_STORAGE", "type": "micro",
  "name_ko": "다시 풀기: localStorage 키 삭제", "domain":
  "FE", "rep": "P", "confidence": 0.82 },
      { "id": "LEARN_RESET_UI_STATE", "type": "micro",
  "name_ko": "다시 풀기: UI 상태 리셋(answer/results/
  flags)", "domain": "FE", "rep": "P", "confidence": 0.78 },
      { "id": "LEARN_AFTER_GRADE_EDIT_POLICY", "type":
  "micro", "name_ko": "채점 후 재입력 정책(결과 초기화 또는
  다시 채점)", "domain": "UX", "rep": "C", "confidence":
  0.7 },
      { "id": "LEARN_STRICT_JSON_OUTPUT_GUARD", "type":
  "micro", "name_ko": "Graph Patch JSON strict JSON 보장(문
  자열 줄바꿈 금지)", "domain": "QA", "rep": "C",
  "confidence": 0.84 }
    ],
    "merge_aliases": [],
    "add_edges": [
      { "from": "LEARN_MAP_CURRENT_SUBMIT_FLOW", "to":
  "LEARN_DOCUMENT_STORED_RESULT_SCHEMA", "type": "requires",
  "confidence": 0.78 },
      { "from":
  "LEARN_DISABLED_USES_NORMALIZE_NUMERIC_INPUT", "to":
  "LEARN_ALL_ANSWERED_NORMALIZED", "type": "requires",
  "confidence": 0.82 },
      { "from": "LEARN_ALL_ANSWERED_NORMALIZED", "to":
  "LEARN_ADD_BULK_GRADE_BUTTON", "type": "requires",
  "confidence": 0.7 },
      { "from": "LEARN_ADD_BULK_GRADE_BUTTON", "to":
  "LEARN_BULK_GRADE_ALL_ACTION", "type": "requires",
  "confidence": 0.8 },
      { "from": "LEARN_BULK_GRADE_ALL_ACTION", "to":
  "LEARN_BUILD_RESULT_MAP", "type": "requires",
  "confidence": 0.78 },
      { "from": "LEARN_BUILD_RESULT_MAP", "to":
  "LEARN_SCORE_SUMMARY_CALC", "type": "requires",
  "confidence": 0.76 },
      { "from": "LEARN_BUILD_RESULT_MAP", "to":
  "LEARN_SHOW_PER_PROBLEM_RESULT", "type": "requires",
  "confidence": 0.78 },
      { "from": "LEARN_BULK_GRADE_ALL_ACTION", "to":
  "LEARN_GRADED_STATE_FLAG", "type": "requires",
  "confidence": 0.74 },
      { "from": "LEARN_GRADED_STATE_FLAG", "to":
  "LEARN_SCORE_AND_RESULT_GATING", "type": "requires",
  "confidence": 0.76 },
      { "from": "LEARN_STORE_RESULT_SCHEMA_BULK", "to":
  "LEARN_LOCALSTORAGE_SAVE_BULK", "type": "requires",
  "confidence": 0.8 },
      { "from": "LEARN_STORE_RESULT_SCHEMA_BULK", "to":
  "LEARN_LOCALSTORAGE_RESTORE_BULK", "type": "requires",
  "confidence": 0.8 },
      { "from": "LEARN_LOCALSTORAGE_VALIDATE_SHAPE", "to":
  "LEARN_LOCALSTORAGE_RESTORE_BULK", "type": "requires",
  "confidence": 0.78 },
      { "from":
  "LEARN_LOCALSTORAGE_MIGRATION_LEGACY_PARTIAL", "to":
  "LEARN_LOCALSTORAGE_RESTORE_BULK", "type": "requires",
  "confidence": 0.74 },
      { "from": "LEARN_LOCALSTORAGE_RESTORE_BULK", "to":
  "LEARN_GRADED_STATE_FLAG", "type": "requires",
  "confidence": 0.7 },
      { "from": "LEARN_LOCALSTORAGE_SAVE_BULK", "to":
  "LEARN_RESET_CLEAR_STORAGE", "type": "requires",
  "confidence": 0.74 },
      { "from": "LEARN_RESET_CLEAR_STORAGE", "to":
  "LEARN_RESET_UI_STATE", "type": "requires", "confidence":
  0.78 },
      { "from": "LEARN_AFTER_GRADE_EDIT_POLICY", "to":
  "LEARN_SCORE_AND_RESULT_GATING", "type": "requires",
  "confidence": 0.7 },
      { "from": "LEARN_BULK_GRADE_ALL_ACTION", "to":
  "LEARN_REMOVE_PER_PROBLEM_SUBMIT", "type": "requires",
  "confidence": 0.72 },
      { "from": "LEARN_STRICT_JSON_OUTPUT_GUARD", "to":
  "LEARN_STORE_RESULT_SCHEMA_BULK", "type": "requires",
  "confidence": 0.74 }
    ],
    "remove_edges": [],
    "notes": [
      { "claim": "현재 LearnPage는 문제별 제출
  (submitProblem)로 단건 채점 후 submissions를 localStorage
  키(curriculum-viewer:learn:lastResult:${nodeId})에 merge
  저장한다.", "reason": "LearnPage.tsx에서
  StoredResult{submissions} 타입 정의와
  setItem(JSON.stringify(payload)) 흐름이 확인된다.",
  "confidence": 0.86 },
      { "claim": "disabled 판정은 normalizeNumericInput과 동
  일 기준으로 정의해야 한다.", "reason":
  "normalizeNumericInput이 공백/콤마 제거를 수행하므로 원문
  기준 disabled는 채점과 불일치해 UX가 붕괴한다.",
  "confidence": 0.82 },
      { "claim": "R3 Transfer 산출물은 본 티켓(UX/FE)에서는
  problem templates/triplets 대신 상태 전이(입력→활성화→채점
  →저장→복원→초기화) 전이 예시로 대체하거나 N/A를 명시하는
  방식이 적합하다.", "reason": "reviewer도 FE/UX 티켓에서
  Transfer 항목을 N/A 처리 또는 도메인 맞춤 예시로 대체하라
  고 권고했다.", "confidence": 0.74 },
      { "claim": "legacy partial(부분 제출) 데이터는 bulk 전
  환 시 필연적으로 존재할 수 있어 복원 단계에서 감지/정책화
  가 필요하다.", "reason": "기존 per-problem 저장은 전체 문
  제 수보다 적은 submissions를 남기는 것이 정상 동작이었
  다.", "confidence": 0.74 },
      { "claim": "Graph Patch JSON은 문자열 내부 줄바꿈이 있
  으면 파서가 실패하므로 strict JSON으로 재출력되어야 한
  다.", "reason": "reviewer 지적처럼 JSON 파싱 실패는 결합
  패치 검증/병합 파이프라인을 중단시킨다.", "confidence":
  0.84 }
    ]
  }

  ## Standards Tags (내부 태그)

  - 추가된 태그: LEARN_MAP_CURRENT_SUBMIT_FLOW,
    LEARN_DOCUMENT_STORED_RESULT_SCHEMA,
    LEARN_REMOVE_PER_PROBLEM_SUBMIT,
    LEARN_ADD_BULK_GRADE_BUTTON,
    LEARN_DISABLED_USES_NORMALIZE_NUMERIC_INPUT,
    LEARN_ALL_ANSWERED_NORMALIZED,
    LEARN_DISABLED_EDGECASES_12,
    LEARN_BULK_GRADE_ALL_ACTION, LEARN_BUILD_RESULT_MAP,
    LEARN_GRADED_STATE_FLAG, LEARN_SCORE_SUMMARY_CALC,
    LEARN_SCORE_AND_RESULT_GATING,
    LEARN_SHOW_PER_PROBLEM_RESULT,
    LEARN_STORE_RESULT_SCHEMA_BULK,
    LEARN_LOCALSTORAGE_VALIDATE_SHAPE,
    LEARN_LOCALSTORAGE_SAVE_BULK,
    LEARN_LOCALSTORAGE_RESTORE_BULK,
    LEARN_LOCALSTORAGE_MIGRATION_LEGACY_PARTIAL,
    LEARN_RESET_CLEAR_STORAGE, LEARN_RESET_UI_STATE,
    LEARN_AFTER_GRADE_EDIT_POLICY,
    LEARN_STRICT_JSON_OUTPUT_GUARD
  - 수정된 태그: (없음)

  [/R1 Coverage Report]

  ###DONE:f0805f8d87###


› -> /mnt/c/Users/irron/Desktop/my/web_service_new/
  calculate_math/.agents/inbox/research_6ca9c9bcbc.md


  37% context left



› Request 6ca9c9bcbc: 아래 파일(티켓 지시)을 읽고 결과를 이
  터미널에 Output Format대로 그대로 출력해줘. 가능하면 repo
  파일을 생성/수정하지 말고, 마지막에 마커를 그대로 출력해.
  -> /mnt/c/Users/irron/Desktop/my/web_service_new/
  calculate_math/.agents/inbox/research_6ca9c9bcbc.md




• Explored
  └ List inbox
    Read research_6ca9c9bcbc.md
    Read T1.md, task.md
    Search Output Format|BEGIN:|DONE: in
r                     

• Ran for id in 059d0e7c0f fcd0127204 565ca07687 a4203a6ab9
  │ f0d1a42bd6 f5780da068 be14a78ffd 2c231c5c59 3c42956bde
                                                          

•         
  └evearcnglastResult|submitProblem|StoredResult|
                                                    
                                             
    Read grading.ts, Le           

─ Worked for 8m 11s ────────────────                        


• ###BEGIN:6ca9c9bcbc###

  ## Coverage Gap Report

  ### 1. 누락된 기초 개념 (최소 10개)

  | # | 개념명 | 누락 이유 | 심각도 |
  |---|--------|----------|--------|
  | 1 | 현재 LearnPage 단건 제출/저장 흐름 기준선 | per-
  problem submitProblem/저장 로직을 알아야 bulk 전환 시 회귀
  를 줄임 | 높음 |
  | 2 | localStorage 키 계약 식별 | 저장/복원/초기화가 동일
  키(curriculum-viewer:learn:lastResult:${nodeId})에 의존 |
  높음 |
  | 3 | StoredResult{submissions} 스키마/partial 의미 | 기존
  은 submissions merge로 부분 데이터가 정상 생성되어 bulk UX
  와 충돌 가능 | 높음 |
  | 4 | 문제 카드별 제출 버튼 제거 범위 | 요구사항 1) 핵심
  변경인데 현재 UI는 per-problem 제출 경로가 존재 | 높음 |
  | 5 | 하단 단일 버튼(채점하기) UX/상태 정의 | bulk UX의 단
  일 진입점이 필요(라벨/disabled/재채점 포함) | 높음 |
  | 6 | 미입력 판정 기준 정합화 | disabled 판정이
  normalizeNumericInput()과 불일치하면 채점과 UX가 엇갈림 |
  높음 |
  | 7 | allAnswered 계산(정규화+problems[] 기준) | “모든 문
  제 답 입력 전까지 disabled”를 로딩/빈 배열 포함 안정적으로
  계산해야 함 | 높음 |
  | 8 | 입력 엣지케이스 테스트 벡터(12종+) | 공백/콤마/0/부
  호/소수점/Infinity 등에서 기대값이 흔들려 회귀가 잦음 | 중
  |
  | 9 | 일괄 채점 gradeAll 동작 정의 | 현재는 단건 채점만 가
  능하므로 문제 전체 순회 채점 액션이 필요 | 높음 |
  |10| resultByProblemId 생성 및 결과 표시 규칙 | 문제별 정
  오/정답 표시와 점수 집계를 problemId 기준으로 정렬해야 함
  | 중 |
  |11| hasGraded 게이팅(채점 후 표시) | 채점 전 0/N 및
  partial 결과 노출 혼선을 막기 위한 표시 시점 규칙 필요 |
  중 |
  |12| 일괄 저장(전체 submissions 1회 저장) | 요구사항 3) 저
  장 시점을 “일괄 채점 후 setItem 1회”로 전환해야 함 | 높음
  |
  |13| 복원 파이프라인(파싱/검증/legacy 정책) | 잘못된/
  legacy 데이터로 인한 런타임 오류 및 UX 꼬임을 방지해야 함
  | 중 |
  |14| 다시 풀기: storage 삭제 + UI state 리셋 | 키 삭제만으
  로는 화면이 즉시 초기화되지 않아 state(answer/result/
  flags) 리셋이 필요 | 높음 |
  |15| 채점 후 답 변경 처리 정책 | 입력 변경 시 결과가 스테
  일해지므로 결과 초기화 또는 재채점 플로우를 고정해야 함 |
  중 |

  ### 2. 과잉 난이도/불필요 선행 (최소 5개)

  | # | 개념명 | 과잉 이유 | 조치 제안 |
  |---|--------|----------|----------|
  | 1 | 서버 연동/DB 저장 | Out of Scope이며 localStorage 요
  구를 흐림 | 금지(후속 티켓 분리) |
  | 2 | 문제 타입 확장(객관식/서술형) | 범위 외이며 UI/채점/
  저장 설계가 폭증 | 금지(후속 티켓) |
  | 3 | grading 로직 확장(허용오차/분수/근사) | bulk 제출 UX
  와 무관하고 회귀 위험 증가 | gradeNumericAnswer 유지 |
  | 4 | 문제은행/커리큘럼 JSON 스키마 변경 | 데이터 구조 변
  경은 범위 밖, 회귀 위험 큼 | 기존 스키마 유지 |
  | 5 | 전역 상태관리 도입(Redux/Zustand) | LearnPage 단일
  화면 상태로 충분 | 도입 금지 |
  | 6 | UI 대규모 리디자인/애니메이션 | 요구사항 충족과 무관
  하고 일정 리스크만 증가 | 최소 UI 변경 |

  ### 3. 학습 순서상 위험한 점프 (최소 5개)

  | # | From → To | 점프 이유 | 브릿지 제안 |
  |---|-----------|----------|------------|
  | 1 | LEARN_REMOVE_PER_PROBLEM_SUBMIT →
  LEARN_BULK_GRADE_ALL_ACTION | 제거가 먼저면 채점/저장 경로
  가 사라져 기능 공백 발생 | bulk 버튼+gradeAll+저장 구현 후
  제거 |
  | 2 | LEARN_ADD_BULK_GRADE_BUTTON →
  LEARN_ALL_ANSWERED_NORMALIZED | disabled 계산이 없으면 버
  튼 활성/비활성 기준이 흔들림 | normalize 기반 allAnswered
  를 먼저 고정 |
  | 3 | 원문 disabled 판정 → gradeNumericAnswer(정규화) |
  " , " 같은 입력에서 활성/채점 결과가 불일치해 UX 붕괴 |
  normalizeNumericInput(answer).length>0로 통일 |
  | 4 | LEARN_LOCALSTORAGE_SAVE_BULK →
  LEARN_LOCALSTORAGE_RESTORE_BULK | 스키마/검증 없이 복원하
  면 파싱 실패·필드 누락이 런타임 문제로 이어짐 | schema 정
  의 + shape validate + 예외 처리 |
  | 5 | LEARN_LOCALSTORAGE_RESTORE_BULK →
  LEARN_SCORE_AND_RESULT_GATING | restored partial에서 점수/
  결과 노출 기준이 불명확 | hasGraded 세팅 규칙(완전 제출만
  true 등) 정의 |
  | 6 | LEARN_RESET_CLEAR_STORAGE → (UI state 유지) |
  storage만 지우면 화면에 남은 answer/result/flags가 그대로
  | 키 삭제 + state 리셋 동시 수행 |
  | 7 | LEARN_AFTER_GRADE_EDIT_POLICY 미정 → 결과 표시 유지
  | 답 변경 후 스테일 결과(입력≠결과) 상태가 발생 | 입력 변
  경 시 결과 초기화 또는 “다시 채점” 플로우 |

  ## Graph Patch JSON

  {
    "researcher": "R1",
    "scope": "curriculum_viewer_learning_bulk_submit_v1",
    "add_nodes": [
      { "id": "LEARN_MAP_CURRENT_SUBMIT_FLOW", "type":
  "micro", "name_ko": "현재 per-problem 제출/저장 흐름 요
  약", "domain": "FE", "rep": "C" },
      { "id": "LEARN_DOCUMENT_STORED_RESULT_SCHEMA", "type":
  "micro", "name_ko": "StoredResult/submissions 스키마 확
  인", "domain": "FE", "rep": "C" },
      { "id": "LEARN_IDENTIFY_STORAGE_KEY", "type": "micro",
  "name_ko": "localStorage 키 포맷 식별", "domain": "FE",
  "rep": "C" },
      { "id": "LEARN_REMOVE_PER_PROBLEM_SUBMIT", "type":
  "micro", "name_ko": "문제 카드별 제출 버튼 제거",
  "domain": "FE", "rep": "P" },
      { "id": "LEARN_ADD_BULK_GRADE_BUTTON", "type":
  "micro", "name_ko": "하단 단일 채점하기 버튼 추가",
  "domain": "FE", "rep": "P" },
      { "id": "LEARN_DISABLED_USES_NORMALIZE_NUMERIC_INPUT",
  "type": "micro", "name_ko": "disabled 판정 기준을
  normalizeNumericInput과 일치", "domain": "FE", "rep":
  "C" },
      { "id": "LEARN_HANDLE_EMPTY_PROBLEMS", "type":
  "micro", "name_ko": "문제 0개/로딩 상태 UI 규칙",
  "domain": "UX", "rep": "C" },
      { "id": "LEARN_ALL_ANSWERED_NORMALIZED", "type":
  "micro", "name_ko": "allAnswered 계산(정규화 기반)",
  "domain": "FE", "rep": "P" },
      { "id": "LEARN_DISABLED_EDGECASES_12", "type":
  "micro", "name_ko": "입력 엣지케이스 12종 테스트 벡터",
  "domain": "QA", "rep": "C" },
      { "id": "LEARN_BULK_GRADE_ALL_ACTION", "type":
  "micro", "name_ko": "일괄 채점 액션(전체 순회)", "domain":
  "FE", "rep": "P" },
      { "id": "LEARN_BUILD_RESULT_MAP", "type": "micro",
  "name_ko": "문제별 결과 맵(resultByProblemId) 생성",
  "domain": "FE", "rep": "P" },
      { "id": "LEARN_SCORE_SUMMARY_CALC", "type": "micro",
  "name_ko": "총점 X/N 집계 로직", "domain": "FE", "rep":
  "P" },
      { "id": "LEARN_GRADED_STATE_FLAG", "type": "micro",
  "name_ko": "채점 전/후 상태 플래그(hasGraded) 정의",
  "domain": "FE", "rep": "C" },
      { "id": "LEARN_SCORE_AND_RESULT_GATING", "type":
  "micro", "name_ko": "채점 후에만 점수/결과 표시(게이팅)",
  "domain": "FE", "rep": "P" },
      { "id": "LEARN_SHOW_PER_PROBLEM_RESULT", "type":
  "micro", "name_ko": "문제별 정오/정답 표시(일괄 채점 후)",
  "domain": "FE", "rep": "P" },
      { "id": "LEARN_STORE_RESULT_SCHEMA_BULK", "type":
  "micro", "name_ko": "bulk 저장 시점/계약 정의(전체
  submissions 저장)", "domain": "FE", "rep": "C" },
      { "id": "LEARN_LOCALSTORAGE_VALIDATE_SHAPE", "type":
  "micro", "name_ko": "복원 데이터 파싱/shape validate",
  "domain": "FE", "rep": "C" },
      { "id": "LEARN_LOCALSTORAGE_SAVE_BULK", "type":
  "micro", "name_ko": "일괄 채점 후 submissions를 1회 저장",
  "domain": "FE", "rep": "P" },
      { "id": "LEARN_LOCALSTORAGE_RESTORE_BULK", "type":
  "micro", "name_ko": "재진입/새로고침 시 답안/결과 복원",
  "domain": "FE", "rep": "P" },
      { "id": "LEARN_LOCALSTORAGE_MIGRATION_LEGACY_PARTIAL",
  "type": "micro", "name_ko": "legacy partial(submissions 일
  부) 처리 정책", "domain": "FE", "rep": "C" },
      { "id": "LEARN_RESET_CLEAR_STORAGE", "type": "micro",
  "name_ko": "다시 풀기: localStorage 키 삭제", "domain":
  "FE", "rep": "P" },
      { "id": "LEARN_RESET_UI_STATE", "type": "micro",
  "name_ko": "다시 풀기: UI state 리셋", "domain": "FE",
  "rep": "P" },
      { "id": "LEARN_AFTER_GRADE_EDIT_POLICY", "type":
  "micro", "name_ko": "채점 후 답 수정 정책(결과 초기화/재채
  점)", "domain": "UX", "rep": "C" }
    ],
    "merge_aliases": [],
    "add_edges": [
      { "from": "LEARN_MAP_CURRENT_SUBMIT_FLOW", "to":
  "LEARN_REMOVE_PER_PROBLEM_SUBMIT", "type": "requires" },
      { "from": "LEARN_DOCUMENT_STORED_RESULT_SCHEMA", "to":
  "LEARN_STORE_RESULT_SCHEMA_BULK", "type": "requires" },
      { "from": "LEARN_IDENTIFY_STORAGE_KEY", "to":
  "LEARN_LOCALSTORAGE_SAVE_BULK", "type": "requires" },
      { "from": "LEARN_IDENTIFY_STORAGE_KEY", "to":
  "LEARN_LOCALSTORAGE_RESTORE_BULK", "type": "requires" },
      { "from": "LEARN_IDENTIFY_STORAGE_KEY", "to":
  "LEARN_RESET_CLEAR_STORAGE", "type": "requires" },
      { "from": "LEARN_HANDLE_EMPTY_PROBLEMS", "to":
  "LEARN_ALL_ANSWERED_NORMALIZED", "type": "requires" },
      { "from":
  "LEARN_DISABLED_USES_NORMALIZE_NUMERIC_INPUT", "to":
  "LEARN_ALL_ANSWERED_NORMALIZED", "type": "requires" },
      { "from": "LEARN_ALL_ANSWERED_NORMALIZED", "to":
  "LEARN_ADD_BULK_GRADE_BUTTON", "type": "requires" },
      { "from": "LEARN_ADD_BULK_GRADE_BUTTON", "to":
  "LEARN_BULK_GRADE_ALL_ACTION", "type": "requires" },
      { "from": "LEARN_BULK_GRADE_ALL_ACTION", "to":
  "LEARN_BUILD_RESULT_MAP", "type": "requires" },
      { "from": "LEARN_BULK_GRADE_ALL_ACTION", "to":
  "LEARN_GRADED_STATE_FLAG", "type": "requires" },
      { "from": "LEARN_BUILD_RESULT_MAP", "to":
  "LEARN_SCORE_SUMMARY_CALC", "type": "requires" },
      { "from": "LEARN_BUILD_RESULT_MAP", "to":
  "LEARN_SHOW_PER_PROBLEM_RESULT", "type": "requires" },
      { "from": "LEARN_GRADED_STATE_FLAG", "to":
  "LEARN_SCORE_AND_RESULT_GATING", "type": "requires" },
      { "from": "LEARN_SCORE_AND_RESULT_GATING", "to":
  "LEARN_SCORE_SUMMARY_CALC", "type": "requires" },
      { "from": "LEARN_SCORE_AND_RESULT_GATING", "to":
  "LEARN_SHOW_PER_PROBLEM_RESULT", "type": "requires" },
      { "from": "LEARN_STORE_RESULT_SCHEMA_BULK", "to":
  "LEARN_LOCALSTORAGE_SAVE_BULK", "type": "requires" },
      { "from": "LEARN_STORE_RESULT_SCHEMA_BULK", "to":
  "LEARN_LOCALSTORAGE_RESTORE_BULK", "type": "requires" },
      { "from": "LEARN_LOCALSTORAGE_VALIDATE_SHAPE", "to":
  "LEARN_LOCALSTORAGE_RESTORE_BULK", "type": "requires" },
      { "from":
  "LEARN_LOCALSTORAGE_MIGRATION_LEGACY_PARTIAL", "to":
  "LEARN_LOCALSTORAGE_RESTORE_BULK", "type": "requires" },
      { "from": "LEARN_LOCALSTORAGE_RESTORE_BULK", "to":
  "LEARN_GRADED_STATE_FLAG", "type": "requires" },
      { "from": "LEARN_RESET_CLEAR_STORAGE", "to":
  "LEARN_RESET_UI_STATE", "type": "requires" },
      { "from": "LEARN_AFTER_GRADE_EDIT_POLICY", "to":
  "LEARN_SCORE_AND_RESULT_GATING", "type": "requires" },
      { "from": "LEARN_BULK_GRADE_ALL_ACTION", "to":
  "LEARN_REMOVE_PER_PROBLEM_SUBMIT", "type": "requires" }
    ],
    "remove_edges": [],
    "notes": [
      { "claim": "LearnPage는 submitProblem으로 문제별 채점
  후 submissions를 localStorage에 merge 저장한다.",
  "reason": "LearnPage.tsx의 submitProblem과
  StoredResult{submissions} setItem 흐름을 확인.",
  "confidence": 0.86 },
      { "claim": "disabled 판정은
  normalizeNumericInput(answer).length>0 기준으로만 '입력
  됨'을 판정해야 한다.", "reason": "grading이
  normalizeNumericInput을 사용하므로 원문 기준 disabled는 활
  성/채점 불일치를 만든다.", "confidence": 0.82 },
      { "claim": "현재 score는 problems가 있으면 채점 전에도
  0/N이 노출될 수 있어 hasGraded 게이팅이 필요하다.",
  "reason": "score 계산은 resultByProblemId가 비어도
  {correct:0,total:N}을 반환한다.", "confidence": 0.74 },
      { "claim": "legacy partial(submissions 일부) 데이터는
  bulk UX에서 복원/점수/표시와 충돌하므로 정책이 필요하다.",
  "reason": "기존 per-problem 저장은 submissions를 merge하여
  부분 데이터가 정상적으로 생성된다.", "confidence": 0.74 },
      { "claim": "다시 풀기는 localStorage 키 삭제만으로는
  충분하지 않고 UI state(answer/result/flags) 리셋이 필요하
  다.", "reason": "LearnPage는 answerByProblemId/
  resultByProblemId를 state로 유지하므로 화면이 남을 수 있
  다.", "confidence": 0.78 },
      { "claim": "일괄 제출은 setItem 1회로 전체 submissions
  를 저장해야 저장/복원/초기화 계약이 단순해진다.",
  "reason": "요구사항은 일괄 채점 후 한 번에 저장이며, merge
  저장은 partial을 필연적으로 만든다.", "confidence": 0.8 }
    ]
  }

  ## Standards Tags (내부 태그)

  - 추가된 태그: LEARN_MAP_CURRENT_SUBMIT_FLOW,
    LEARN_DOCUMENT_STORED_RESULT_SCHEMA,
    LEARN_IDENTIFY_STORAGE_KEY,
    LEARN_REMOVE_PER_PROBLEM_SUBMIT,
    LEARN_ADD_BULK_GRADE_BUTTON,
    LEARN_DISABLED_USES_NORMALIZE_NUMERIC_INPUT,
    LEARN_HANDLE_EMPTY_PROBLEMS,
    LEARN_ALL_ANSWERED_NORMALIZED,
    LEARN_DISABLED_EDGECASES_12,
    LEARN_BULK_GRADE_ALL_ACTION, LEARN_BUILD_RESULT_MAP,
    LEARN_SCORE_SUMMARY_CALC, LEARN_GRADED_STATE_FLAG,
    LEARN_SCORE_AND_RESULT_GATING,
    LEARN_SHOW_PER_PROBLEM_RESULT,
    LEARN_STORE_RESULT_SCHEMA_BULK,
    LEARN_LOCALSTORAGE_VALIDATE_SHAPE,
    LEARN_LOCALSTORAGE_SAVE_BULK,
    LEARN_LOCALSTORAGE_RESTORE_BULK,
    LEARN_LOCALSTORAGE_MIGRATION_LEGACY_PARTIAL,
    LEARN_RESET_CLEAR_STORAGE, LEARN_RESET_UI_STATE,
    LEARN_AFTER_GRADE_EDIT_POLICY
  - 수정된 태그: (없음)

  [/R1 Coverage Report]

  ###DONE:6ca9c9bcbc###




•         
  └ Read research_li2068on1b.md
                                                 
                                 
    Read research_f9206        

─ Worked for 2m 30s ────────────────                        


• ###BEGIN:f92068ab1b###

  ## Coverage Gap Report

  ### 1. 누락된 기초 개념 (최소 10개)

  | # | 개념명 | 누락 이유 | 심각도 |
  |---|--------|----------|--------|
  | 1 | 현재 LearnPage 단건 제출/저장 흐름 기준선 | 기존
  submitProblem/저장 merge 동작을 알아야 bulk 전환 시 기능
  공백/회귀를 줄임 | 높음 |
  | 2 | localStorage 키 계약 식별 | 저장/복원/초기화가 동일
  키(curriculum-viewer:learn:lastResult:${nodeId})에 의존 |
  높음 |
  | 3 | StoredResult{submissions} 스키마 및 partial 의미 |
  기존 per-problem 저장은 submissions 일부만 남기는 데이터가
  정상 생성되어 bulk UX와 충돌 가능 | 높음 |
  | 4 | 문제 카드별 제출 버튼 제거 범위 | 요구사항 1) 핵심
  변경인데 현재 UI는 per-problem 제출 경로가 존재 | 높음 |
  | 5 | 하단 단일 버튼(채점하기) UX/상태 정의 | bulk UX의 단
  일 진입점(라벨/disabled/재채점)을 정의해야 동작/표시가 일
  관됨 | 높음 |
  | 6 | 미입력 판정 기준 정합화(normalize) | disabled 판정이
  normalizeNumericInput과 불일치하면 " , " 등에서 UX가 붕괴
  | 높음 |
  | 7 | allAnswered 계산(정규화+problems[] 기준) | “모든 문
  제 답 입력 전까지 disabled”를 로딩/문제 수 변화 포함 안정
  적으로 계산해야 함 | 높음 |
  | 8 | 입력 엣지케이스 벡터(12종+) | "", " ", ",", " , ",
  "0", "-0", "1,234", "+", ".", "Infinity" 등에서 기대값이
  흔들림 | 중 |
  | 9 | 일괄 채점 gradeAll 동작 정의 | 현재는 단건 채점만 가
  능하므로 problems 전체 순회 채점 액션이 필요 | 높음 |
  |10| resultByProblemId 생성/집계 기준 | 점수/결과 표시/저
  장을 problemId로 정렬하는 중간 표현이 필요 | 중 |
  |11| hasGraded(채점 전/후) 플래그 | 채점 전 0/N 노출 및
  legacy partial 결과 노출 혼선을 막을 표시 기준이 필요 | 중
  |
  |12| 결과/점수 표시 게이팅 규칙 | 채점 후에만 점수/정오/정
  답을 표시해야 UX가 일관되고 partial 혼선을 줄임 | 중 |
  |13| 일괄 저장(채점 후 1회 snapshot) | 요구사항 3) “일괄
  채점 후 한 번에 저장”으로 시점을 전환해야 함 | 높음 |
  |14| 복원 파이프라인(shape validate+정책) | 잘못된/legacy
  데이터로 인한 런타임 오류 및 UX 꼬임을 방지해야 함 | 중 |
  |15| 다시 풀기(키 삭제+UI state 리셋) | storage 삭제만으로
  는 화면이 즉시 초기화되지 않아 answer/result/flags 리셋이
  필요 | 높음 |

  ### 2. 과잉 난이도/불필요 선행 (최소 5개)

  | # | 개념명 | 과잉 이유 | 조치 제안 |
  |---|--------|----------|----------|
  | 1 | 서버 연동/DB 저장 | Out of Scope이며 localStorage 요
  구를 흐림 | 금지(후속 티켓) |
  | 2 | 문제 타입 확장(객관식/서술형) | 범위 외이며 UI/채점/
  저장 설계가 폭증 | 금지(후속 티켓) |
  | 3 | grading 정책 확장(허용오차/분수/근사) | bulk 제출 UX
  와 무관하고 회귀 위험 증가 | 기존 gradeNumericAnswer 유지
  |
  | 4 | 문제은행/커리큘럼 JSON 스키마 변경 | 데이터 구조 변
  경은 범위 밖, 회귀 위험 큼 | 기존 스키마 유지 |
  | 5 | 전역 상태관리 도입(Redux/Zustand) | LearnPage 단일
  화면 상태로 충분 | 도입 금지 |
  | 6 | UI 대규모 리디자인/애니메이션 | 요구사항 충족과 무관
  하고 일정 리스크만 증가 | 최소 UI 변경 |

  ### 3. 학습 순서상 위험한 점프 (최소 5개)

  | # | From → To | 점프 이유 | 브릿지 제안 |
  |---|-----------|----------|------------|
  | 1 | per-problem 제출 제거 → bulk 채점 미구현 | 제거만 하
  면 채점/저장 경로가 사라져 기능 공백 발생 | bulk 버튼
  +gradeAll+저장 구현 후 제거 |
  | 2 | 원문 disabled → 정규화 채점 | " , " 등에서 활성/비활
  성과 채점 기준이 엇갈려 UX 붕괴 | normalizeNumericInput 기
  반으로 미입력 판정 통일 |
  | 3 | bulk 버튼 추가 → allAnswered 부재 | disabled 조건이
  불명확해 조기 활성/비활성이 흔들림 | problems[] 기반
  allAnswered(정규화) 먼저 고정 |
  | 4 | 저장 구현 → 복원/검증 미정 | 파싱 실패/필드 누락 시
  런타임 오류 및 상태 꼬임 | schema+shape validate+예외 처리
  추가 |
  | 5 | legacy partial 복원 → 결과 노출 | 부분 submissions가
  “채점됨”처럼 보이면 오해/혼선 발생 | partial 감지 시
  hasGraded=false 및 재채점 유도 |
  | 6 | 점수 표시 → hasGraded 미도입 | 채점 전 0/N 노출은
  “이미 채점됨” 오해 유발 | hasGraded 게이팅 후 채점 후에만
  노출 |
  | 7 | 초기화(키 삭제만) → UI 잔상 | storage만 지우면
  answer/result/flags가 화면에 남음 | 키 삭제 + UI state 리
  셋 동시 수행 |

  ## Graph Patch JSON

  {
    "researcher": "R1",
    "scope": "curriculum_viewer_learning_bulk_submit_v1",
    "add_nodes": [
      { "id": "LEARN_MAP_CURRENT_SUBMIT_FLOW", "type":
  "micro", "name_ko": "현재 per-problem 제출/저장 흐름 요
  약", "domain": "FE", "rep": "C" },
      { "id": "LEARN_IDENTIFY_STORAGE_KEY", "type": "micro",
  "name_ko": "localStorage 키 포맷 식별", "domain": "FE",
  "rep": "C" },
      { "id": "LEARN_DOCUMENT_STORED_RESULT_SCHEMA", "type":
  "micro", "name_ko": "StoredResult/submissions 스키마 확
  인", "domain": "FE", "rep": "C" },
      { "id": "LEARN_REMOVE_PER_PROBLEM_SUBMIT", "type":
  "micro", "name_ko": "문제 카드별 제출 버튼 제거",
  "domain": "FE", "rep": "P" },
      { "id": "LEARN_ADD_BULK_GRADE_BUTTON", "type":
  "micro", "name_ko": "하단 단일 채점하기 버튼 추가",
  "domain": "FE", "rep": "P" },
      { "id": "LEARN_DISABLED_USES_NORMALIZE_NUMERIC_INPUT",
  "type": "micro", "name_ko": "미입력 판정 기준을
  normalizeNumericInput과 일치", "domain": "FE", "rep":
  "C" },
      { "id": "LEARN_ALL_ANSWERED_NORMALIZED", "type":
  "micro", "name_ko": "allAnswered 계산(정규화 기반)",
  "domain": "FE", "rep": "P" },
      { "id": "LEARN_DISABLED_EDGECASES_12", "type":
  "micro", "name_ko": "입력 엣지케이스 12종 테스트 벡터",
  "domain": "QA", "rep": "C" },
      { "id": "LEARN_BULK_GRADE_ALL_ACTION", "type":
  "micro", "name_ko": "일괄 채점 액션(전체 순회)", "domain":
  "FE", "rep": "P" },
      { "id": "LEARN_BUILD_RESULT_MAP", "type": "micro",
  "name_ko": "문제별 결과 맵(resultByProblemId) 생성",
  "domain": "FE", "rep": "P" },
      { "id": "LEARN_SCORE_SUMMARY_CALC", "type": "micro",
  "name_ko": "총점 X/N 집계 로직", "domain": "FE", "rep":
  "P" },
      { "id": "LEARN_GRADED_STATE_FLAG", "type": "micro",
  "name_ko": "채점 전/후 상태 플래그(hasGraded) 정의",
  "domain": "FE", "rep": "C" },
      { "id": "LEARN_SCORE_AND_RESULT_GATING", "type":
  "micro", "name_ko": "채점 후에만 점수/결과 표시(게이팅)",
  "domain": "FE", "rep": "P" },
      { "id": "LEARN_SHOW_PER_PROBLEM_RESULT", "type":
  "micro", "name_ko": "문제별 정오/정답 표시(일괄 채점 후)",
  "domain": "FE", "rep": "P" },
      { "id": "LEARN_STORE_RESULT_SCHEMA_BULK", "type":
  "micro", "name_ko": "bulk 저장 시점/계약 정의(전체
  submissions 저장)", "domain": "FE", "rep": "C" },
      { "id": "LEARN_LOCALSTORAGE_SAVE_BULK", "type":
  "micro", "name_ko": "일괄 채점 후 submissions를 1회 저장",
  "domain": "FE", "rep": "P" },
      { "id": "LEARN_LOCALSTORAGE_VALIDATE_SHAPE", "type":
  "micro", "name_ko": "복원 데이터 파싱/shape validate",
  "domain": "FE", "rep": "C" },
      { "id": "LEARN_LOCALSTORAGE_RESTORE_BULK", "type":
  "micro", "name_ko": "재진입/새로고침 시 답안/결과 복원",
  "domain": "FE", "rep": "P" },
      { "id": "LEARN_LOCALSTORAGE_MIGRATION_LEGACY_PARTIAL",
  "type": "micro", "name_ko": "legacy partial(submissions 일
  부) 처리 정책", "domain": "FE", "rep": "C" },
      { "id": "LEARN_RESET_CLEAR_STORAGE", "type": "micro",
  "name_ko": "다시 풀기: localStorage 키 삭제", "domain":
  "FE", "rep": "P" },
      { "id": "LEARN_RESET_UI_STATE", "type": "micro",
  "name_ko": "다시 풀기: UI state 리셋", "domain": "FE",
  "rep": "P" },
      { "id": "LEARN_AFTER_GRADE_EDIT_POLICY", "type":
  "micro", "name_ko": "채점 후 답 수정 정책(결과 초기화/재채
  점)", "domain": "UX", "rep": "C" }
    ],
    "merge_aliases": [],
    "add_edges": [
      { "from":
  "LEARN_DISABLED_USES_NORMALIZE_NUMERIC_INPUT", "to":
  "LEARN_ALL_ANSWERED_NORMALIZED", "type": "requires" },
      { "from": "LEARN_ALL_ANSWERED_NORMALIZED", "to":
  "LEARN_ADD_BULK_GRADE_BUTTON", "type": "requires" },
      { "from": "LEARN_ADD_BULK_GRADE_BUTTON", "to":
  "LEARN_BULK_GRADE_ALL_ACTION", "type": "requires" },
      { "from": "LEARN_BULK_GRADE_ALL_ACTION", "to":
  "LEARN_BUILD_RESULT_MAP", "type": "requires" },
      { "from": "LEARN_BULK_GRADE_ALL_ACTION", "to":
  "LEARN_GRADED_STATE_FLAG", "type": "requires" },
      { "from": "LEARN_BUILD_RESULT_MAP", "to":
  "LEARN_SCORE_SUMMARY_CALC", "type": "requires" },
      { "from": "LEARN_BUILD_RESULT_MAP", "to":
  "LEARN_SHOW_PER_PROBLEM_RESULT", "type": "requires" },
      { "from": "LEARN_GRADED_STATE_FLAG", "to":
  "LEARN_SCORE_AND_RESULT_GATING", "type": "requires" },
      { "from": "LEARN_SCORE_AND_RESULT_GATING", "to":
  "LEARN_SCORE_SUMMARY_CALC", "type": "requires" },
      { "from": "LEARN_SCORE_AND_RESULT_GATING", "to":
  "LEARN_SHOW_PER_PROBLEM_RESULT", "type": "requires" },
      { "from": "LEARN_IDENTIFY_STORAGE_KEY", "to":
  "LEARN_LOCALSTORAGE_SAVE_BULK", "type": "requires" },
      { "from": "LEARN_IDENTIFY_STORAGE_KEY", "to":
  "LEARN_LOCALSTORAGE_RESTORE_BULK", "type": "requires" },
      { "from": "LEARN_IDENTIFY_STORAGE_KEY", "to":
  "LEARN_RESET_CLEAR_STORAGE", "type": "requires" },
      { "from": "LEARN_STORE_RESULT_SCHEMA_BULK", "to":
  "LEARN_LOCALSTORAGE_SAVE_BULK", "type": "requires" },
      { "from": "LEARN_STORE_RESULT_SCHEMA_BULK", "to":
  "LEARN_LOCALSTORAGE_RESTORE_BULK", "type": "requires" },
      { "from": "LEARN_LOCALSTORAGE_VALIDATE_SHAPE", "to":
  "LEARN_LOCALSTORAGE_RESTORE_BULK", "type": "requires" },
      { "from": "LEARN_RESET_CLEAR_STORAGE", "to":
  "LEARN_RESET_UI_STATE", "type": "requires" }
    ],
    "remove_edges": [],
    "notes": [
      { "claim": "LearnPage는 submitProblem으로 문제별 채점
  후 submissions를 localStorage에 merge 저장한다.",
  "reason": "LearnPage.tsx에서 submitProblem과
  StoredResult{submissions} setItem 흐름이 확인된다.",
  "confidence": 0.86 },
      { "claim": "disabled의 '입력됨' 판정은
  normalizeNumericInput(answer).length>0 기준으로 통일해야
  한다.", "reason": "grading이 normalizeNumericInput을 사용
  하므로 원문 기준 disabled는 채점과 불일치해 UX를 망친다.",
  "confidence": 0.84 },
      { "claim": "점수/정오/정답 표시는 hasGraded로 게이트해
  야 채점 전 0/N 및 partial 노출 혼선을 줄인다.", "reason":
  "현재 score는 problems가 있으면 result가 비어도 0/N을 표시
  할 수 있어 오해를 유발한다.", "confidence": 0.74 },
      { "claim": "legacy partial(submissions 일부) 처리는 조
  건부 정책이며 restore를 migration에 과잉 잠금(requires)하
  지 않는 편이 안전하다.", "reason": "migration은 legacy가
  존재할 때만 필요하고 reviewer도 requires 과잉 잠금을 지적
  했다.", "confidence": 0.72 },
      { "claim": "per-problem 제출 제거는 권장 순서이며,
  bulk 경로(버튼/gradeAll/저장)가 준비된 뒤 제거해야 기능 공
  백을 피한다.", "reason": "제거가 먼저면 채점/저장 경로가
  사라져 사용자가 진행 불가 상태가 된다.", "confidence":
  0.72 },
      { "claim": "다시 풀기는 localStorage 삭제와 UI
  state(answer/result/flags) 리셋을 함께 수행해야 한다.",
  "reason": "저장소만 지우면 화면에 남은 상태 때문에 초기화
  가 즉시 반영되지 않는다.", "confidence": 0.8 },
      { "claim": "Graph Patch JSON은 strict JSON(json.loads
  통과)으로 문자열 내부 줄바꿈 없이 출력되어야 한다.",
  "reason": "문자열 줄바꿈은 파싱 실패를 유발해 결합 패치 검
  증/병합 파이프라인을 중단시킨다.", "confidence": 0.9 }
    ]
  }

  ## Standards Tags (내부 태그)

  - 추가된 태그: LEARN_MAP_CURRENT_SUBMIT_FLOW,
    LEARN_IDENTIFY_STORAGE_KEY,
    LEARN_DOCUMENT_STORED_RESULT_SCHEMA,
    LEARN_REMOVE_PER_PROBLEM_SUBMIT,
    LEARN_ADD_BULK_GRADE_BUTTON,
    LEARN_DISABLED_USES_NORMALIZE_NUMERIC_INPUT,
    LEARN_ALL_ANSWERED_NORMALIZED,
    LEARN_DISABLED_EDGECASES_12,
    LEARN_BULK_GRADE_ALL_ACTION, LEARN_BUILD_RESULT_MAP,
    LEARN_SCORE_SUMMARY_CALC, LEARN_GRADED_STATE_FLAG,
    LEARN_SCORE_AND_RESULT_GATING,
    LEARN_SHOW_PER_PROBLEM_RESULT,
    LEARN_STORE_RESULT_SCHEMA_BULK,
    LEARN_LOCALSTORAGE_SAVE_BULK,
    LEARN_LOCALSTORAGE_VALIDATE_SHAPE,
    LEARN_LOCALSTORAGE_RESTORE_BULK,
    LEARN_LOCALSTORAGE_MIGRATION_LEGACY_PARTIAL,
    LEARN_RESET_CLEAR_STORAGE, LEARN_RESET_UI_STATE,
    LEARN_AFTER_GRADE_EDIT_POLICY
  - 수정된 태그: (없음)

  [/R1 Coverage Report]

  ###DONE:f92068ab1b###


› -> /mnt/c/Users/irron/Desktop/my/web_service_new/
  calculate_math/.agents/inbox/research_12f4bbe5cf.md


  84% context left



› Request 12f4bbe5cf: 아래 파일(티켓 지시)을 읽고 결과를 이
  터미널에 Output Format대로 그대로 출력해줘. 가능하면 repo
  파일을 생성/수정하지 말고, 마지막에 마커를 그대로 출력해.
  -> /mnt/c/Users/irron/Desktop/my/web_service_new/
  calculate_math/.agents/inbox/research_12f4bbe5cf.md



•         
  └ Read research_12f4bbe5cf.md
                                                 
                                 
    Read research_12f4b        

─ Worked for 1m 41s ────────────────                        


• ###BEGIN:12f4bbe5cf###

  ## Coverage Gap Report

  ### 1. 누락된 기초 개념 (최소 10개)

  | # | 개념명 | 누락 이유 | 심각도 |
  |---|--------|----------|--------|
  | 1 | 현재 LearnPage 단건 제출/저장 흐름 기준선 | per-
  problem submitProblem/저장 merge를 이해해야 bulk 전환 회귀
  를 줄임 | 높음 |
  | 2 | localStorage 키 계약 식별 | 저장/복원/초기화가 동일
  키(curriculum-viewer:learn:lastResult:${nodeId})에 의존 |
  높음 |
  | 3 | StoredResult{submissions} 스키마 및 legacy partial
  의미 | 기존 merge 저장으로 부분 submissions가 정상 생성되
  어 bulk UX와 충돌 가능 | 높음 |
  | 4 | 문제 카드별 제출 버튼 제거 범위 | 요구사항 1) 핵심
  변경인데 현재 per-problem 제출 경로가 존재 | 높음 |
  | 5 | 하단 단일 버튼(채점하기) UX/상태 정의 | bulk UX의 단
  일 진입점(라벨/disabled/재채점)을 정의해야 함 | 높음 |
  | 6 | 미입력 판정 기준 정합화(normalize) | disabled 판정이
  normalizeNumericInput과 불일치하면 UX가 붕괴 | 높음 |
  | 7 | allAnswered 계산(정규화+problems[] 기준) | “모든 문
  제 입력 전까지 disabled”를 로딩/문제 수 변화 포함 안정화
  필요 | 높음 |
  | 8 | 입력 엣지케이스 벡터(12종+) | "", " ", ",", "0",
  "-0", "1,234", "+", ".", "Infinity" 등 기대값을 고정해야
  함 | 중 |
  | 9 | 일괄 채점 gradeAll 동작 정의 | 현재 단건 채점만 가능
  하므로 problems 전체 순회 채점 액션이 필요 | 높음 |
  |10| resultByProblemId 생성/단일 소스화 | 점수 집계/문제별
  결과 표시/저장을 동일 키(problemId)로 정렬해야 함 | 중 |
  |11| hasGraded(채점 전/후) 플래그 | 채점 전 0/N 노출 및
  partial 결과 노출 혼선을 막을 표시 기준이 필요 | 중 |
  |12| 점수/정오/정답 표시 게이팅 | 채점 후에만 결과를 표시
  해야 UX가 일관되고 legacy 혼선을 줄임 | 중 |
  |13| 일괄 저장(채점 후 1회 snapshot) | 요구사항 3) “한 번
  에 저장”으로 시점을 전환해야 함 | 높음 |
  |14| 복원 파이프라인(shape validate+정책) | 잘못된/legacy
  데이터로 인한 런타임 오류 및 상태 꼬임을 방지해야 함 | 중
  |
  |15| 다시 풀기(키 삭제+UI state 리셋) | storage 삭제만으로
  는 화면이 즉시 초기화되지 않아 state 리셋이 필요 | 높음 |

  ### 2. 과잉 난이도/불필요 선행 (최소 5개)

  | # | 개념명 | 과잉 이유 | 조치 제안 |
  |---|--------|----------|----------|
  | 1 | 서버 연동/DB 저장 | Out of Scope이며 localStorage 요
  구를 흐림 | 금지(후속 티켓) |
  | 2 | 문제 타입 확장(객관식/서술형) | 범위 외이며 UI/채점/
  저장 설계가 폭증 | 금지(후속 티켓) |
  | 3 | grading 정책 확장(허용오차/근사/분수) | bulk 제출 UX
  와 무관하고 회귀 위험 증가 | 기존 gradeNumericAnswer 유지
  |
  | 4 | 문제은행/커리큘럼 JSON 스키마 변경 | 데이터 구조 변
  경은 범위 밖, 회귀 위험 큼 | 기존 스키마 유지 |
  | 5 | 전역 상태관리 도입(Redux/Zustand) | LearnPage 단일
  화면 상태로 충분 | 도입 금지 |
  | 6 | UI 대규모 리디자인/애니메이션 | 요구사항 충족과 무관
  하고 일정 리스크만 증가 | 최소 변경 |

  ### 3. 학습 순서상 위험한 점프 (최소 5개)

  | # | From → To | 점프 이유 | 브릿지 제안 |
  |---|-----------|----------|------------|
  | 1 | LEARN_REMOVE_PER_PROBLEM_SUBMIT →
  LEARN_BULK_GRADE_ALL_ACTION | 제거가 먼저면 채점/저장 경로
  가 사라져 기능 공백 발생 | bulk 버튼+gradeAll+저장 준비 후
  제거 |
  | 2 | 원문 disabled 판정 → 정규화 채점 | " , " 등에서 활
  성/비활성과 채점 기준이 엇갈려 UX 붕괴 |
  normalizeNumericInput 기반으로 미입력 판정 통일 |
  | 3 | LEARN_ADD_BULK_GRADE_BUTTON →
  LEARN_ALL_ANSWERED_NORMALIZED | disabled 계산이 불명확하면
  조기 활성/비활성이 흔들림 | problems[] 기준 allAnswered(정
  규화) 먼저 고정 |
  | 4 | LEARN_LOCALSTORAGE_SAVE_BULK →
  LEARN_LOCALSTORAGE_RESTORE_BULK | 검증 없이 복원하면 파싱
  실패/필드 누락으로 런타임 오류 | schema+shape validate+예
  외 처리 추가 |
  | 5 | legacy partial 복원 → 결과/점수 노출 | 부분
  submissions가 “채점됨”처럼 보이면 오해/혼선 발생 | partial
  감지 시 hasGraded=false 및 재채점 유도 |
  | 6 | 점수 표시 → hasGraded 미도입 | 채점 전 0/N 노출은
  “이미 채점됨” 오해 유발 | hasGraded 게이팅 후 채점 후에만
  노출 |
  | 7 | LEARN_RESET_CLEAR_STORAGE → UI 잔상 유지 | storage만
  지우면 answer/result/flags가 화면에 남음 | 키 삭제 + UI
  state 리셋 동시 수행 |

  ## Graph Patch JSON

  {
    "researcher": "R1",
    "scope": "curriculum_viewer_learning_bulk_submit_v1",
    "add_nodes": [
      { "id": "LEARN_MAP_CURRENT_SUBMIT_FLOW", "type":
  "micro", "name_ko": "현재 per-problem 제출/저장 흐름 요
  약", "domain": "FE", "rep": "C", "confidence": 0.86 },
      { "id": "LEARN_IDENTIFY_STORAGE_KEY", "type": "micro",
  "name_ko": "localStorage 키 포맷 식별", "domain": "FE",
  "rep": "C", "confidence": 0.82 },
      { "id": "LEARN_DOCUMENT_STORED_RESULT_SCHEMA", "type":
  "micro", "name_ko": "StoredResult/submissions 스키마 확
  인", "domain": "FE", "rep": "C", "confidence": 0.8 },
      { "id": "LEARN_REMOVE_PER_PROBLEM_SUBMIT", "type":
  "micro", "name_ko": "문제 카드별 제출 버튼 제거",
  "domain": "FE", "rep": "P", "confidence": 0.85 },
      { "id": "LEARN_ADD_BULK_GRADE_BUTTON", "type":
  "micro", "name_ko": "하단 단일 채점하기 버튼 추가",
  "domain": "FE", "rep": "P", "confidence": 0.85 },
      { "id": "LEARN_DISABLED_USES_NORMALIZE_NUMERIC_INPUT",
  "type": "micro", "name_ko": "미입력 판정 기준을
  normalizeNumericInput과 일치", "domain": "FE", "rep": "C",
  "confidence": 0.84 },
      { "id": "LEARN_ALL_ANSWERED_NORMALIZED", "type":
  "micro", "name_ko": "allAnswered 계산(정규화 기반)",
  "domain": "FE", "rep": "P", "confidence": 0.82 },
      { "id": "LEARN_DISABLED_EDGECASES_12", "type":
  "micro", "name_ko": "입력 엣지케이스 12종 테스트 벡터",
  "domain": "QA", "rep": "C", "confidence": 0.78 },
      { "id": "LEARN_BULK_GRADE_ALL_ACTION", "type":
  "micro", "name_ko": "일괄 채점 액션(전체 순회)", "domain":
  "FE", "rep": "P", "confidence": 0.84 },
      { "id": "LEARN_BUILD_RESULT_MAP", "type": "micro",
  "name_ko": "문제별 결과 맵(resultByProblemId) 생성",
  "domain": "FE", "rep": "P", "confidence": 0.78 },
      { "id": "LEARN_GRADED_STATE_FLAG", "type": "micro",
  "name_ko": "채점 전/후 상태 플래그(hasGraded) 정의",
  "domain": "FE", "rep": "C", "confidence": 0.76 },
      { "id": "LEARN_SCORE_SUMMARY_CALC", "type": "micro",
  "name_ko": "총점 X/N 집계 로직", "domain": "FE", "rep":
  "P", "confidence": 0.75 },
      { "id": "LEARN_SCORE_AND_RESULT_GATING", "type":
  "micro", "name_ko": "채점 후에만 점수/결과 표시(게이팅)",
  "domain": "FE", "rep": "P", "confidence": 0.74 },
      { "id": "LEARN_SHOW_PER_PROBLEM_RESULT", "type":
  "micro", "name_ko": "문제별 정오/정답 표시(일괄 채점 후)",
  "domain": "FE", "rep": "P", "confidence": 0.78 },
      { "id": "LEARN_STORE_RESULT_SCHEMA_BULK", "type":
  "micro", "name_ko": "bulk 저장 시점/계약 정의(전체 저장)",
  "domain": "FE", "rep": "C", "confidence": 0.76 },
      { "id": "LEARN_LOCALSTORAGE_SAVE_BULK", "type":
  "micro", "name_ko": "일괄 채점 후 submissions를 1회 저장",
  "domain": "FE", "rep": "P", "confidence": 0.8 },
      { "id": "LEARN_LOCALSTORAGE_VALIDATE_SHAPE", "type":
  "micro", "name_ko": "복원 데이터 파싱/shape validate",
  "domain": "FE", "rep": "C", "confidence": 0.78 },
      { "id": "LEARN_LOCALSTORAGE_RESTORE_BULK", "type":
  "micro", "name_ko": "재진입/새로고침 시 답안/결과 복원",
  "domain": "FE", "rep": "P", "confidence": 0.78 },
      { "id": "LEARN_LOCALSTORAGE_MIGRATION_LEGACY_PARTIAL",
  "type": "micro", "name_ko": "legacy partial(submissions 일
  부) 처리 정책", "domain": "FE", "rep": "C", "confidence":
  0.72 },
      { "id": "LEARN_RESET_CLEAR_STORAGE", "type": "micro",
  "name_ko": "다시 풀기: localStorage 키 삭제", "domain":
  "FE", "rep": "P", "confidence": 0.82 },
      { "id": "LEARN_RESET_UI_STATE", "type": "micro",
  "name_ko": "다시 풀기: UI state 리셋", "domain": "FE",
  "rep": "P", "confidence": 0.78 },
      { "id": "LEARN_AFTER_GRADE_EDIT_POLICY", "type":
  "micro", "name_ko": "채점 후 답 수정 정책(결과 초기화/재채
  점)", "domain": "UX", "rep": "C", "confidence": 0.74 }
    ],
    "merge_aliases": [],
    "add_edges": [
      { "from":
  "LEARN_DISABLED_USES_NORMALIZE_NUMERIC_INPUT", "to":
  "LEARN_ALL_ANSWERED_NORMALIZED", "type": "requires",
  "confidence": 0.84 },
      { "from": "LEARN_ALL_ANSWERED_NORMALIZED", "to":
  "LEARN_ADD_BULK_GRADE_BUTTON", "type": "requires",
  "confidence": 0.7 },
      { "from": "LEARN_ADD_BULK_GRADE_BUTTON", "to":
  "LEARN_BULK_GRADE_ALL_ACTION", "type": "requires",
  "confidence": 0.78 },
      { "from": "LEARN_BULK_GRADE_ALL_ACTION", "to":
  "LEARN_BUILD_RESULT_MAP", "type": "requires",
  "confidence": 0.78 },
      { "from": "LEARN_BULK_GRADE_ALL_ACTION", "to":
  "LEARN_GRADED_STATE_FLAG", "type": "requires",
  "confidence": 0.72 },
      { "from": "LEARN_BUILD_RESULT_MAP", "to":
  "LEARN_SCORE_SUMMARY_CALC", "type": "requires",
  "confidence": 0.75 },
      { "from": "LEARN_BUILD_RESULT_MAP", "to":
  "LEARN_SHOW_PER_PROBLEM_RESULT", "type": "requires",
  "confidence": 0.78 },
      { "from": "LEARN_GRADED_STATE_FLAG", "to":
  "LEARN_SCORE_AND_RESULT_GATING", "type": "requires",
  "confidence": 0.76 },
      { "from": "LEARN_STORE_RESULT_SCHEMA_BULK", "to":
  "LEARN_LOCALSTORAGE_SAVE_BULK", "type": "requires",
  "confidence": 0.8 },
      { "from": "LEARN_STORE_RESULT_SCHEMA_BULK", "to":
  "LEARN_LOCALSTORAGE_RESTORE_BULK", "type": "requires",
  "confidence": 0.8 },
      { "from": "LEARN_IDENTIFY_STORAGE_KEY", "to":
  "LEARN_LOCALSTORAGE_SAVE_BULK", "type": "requires",
  "confidence": 0.82 },
      { "from": "LEARN_IDENTIFY_STORAGE_KEY", "to":
  "LEARN_LOCALSTORAGE_RESTORE_BULK", "type": "requires",
  "confidence": 0.82 },
      { "from": "LEARN_IDENTIFY_STORAGE_KEY", "to":
  "LEARN_RESET_CLEAR_STORAGE", "type": "requires",
  "confidence": 0.82 },
      { "from": "LEARN_LOCALSTORAGE_VALIDATE_SHAPE", "to":
  "LEARN_LOCALSTORAGE_RESTORE_BULK", "type": "requires",
  "confidence": 0.78 },
      { "from": "LEARN_RESET_CLEAR_STORAGE", "to":
  "LEARN_RESET_UI_STATE", "type": "requires", "confidence":
  0.78 }
    ],
    "remove_edges": [],
    "notes": [
      { "claim": "LearnPage는 submitProblem으로 문제별 채점
  후 submissions를 localStorage에 merge 저장한다.",
  "reason": "LearnPage.tsx에서 submissions를 기존 값과 병합
  해 setItem하는 흐름이 확인된다.", "confidence": 0.86 },
      { "claim": "미입력 판정(disabled)은
  normalizeNumericInput(answer).length>0 기준으로 통일해야
  한다.", "reason": "grading.ts가 normalizeNumericInput을 사
  용하므로 원문 기준 판정은 활성/채점 불일치를 만든다.",
  "confidence": 0.84 },
      { "claim": "현재 점수 표시는 채점 전에도 0/N이 노출될
  수 있어 hasGraded 게이팅이 필요하다.", "reason": "score는
  problems가 있으면 result가 비어도 correct=0,total=N을 표시
  할 수 있다.", "confidence": 0.74 },
      { "claim": "legacy partial 처리는 조건부 정책이며
  restore에 과잉 잠금(requires)으로 고정하지 않는 편이 안전
  하다.", "reason": "partial은 legacy 데이터가 존재할 때만
  발생하고 reviewer도 requires 과잉 잠금을 지적했다.",
  "confidence": 0.72 },
      { "claim": "다시 풀기는 localStorage 키 삭제와 UI
  state(answer/result/flags) 리셋을 함께 수행해야 한다.",
  "reason": "저장소만 지우면 화면에 남은 상태로 인해 초기화
  가 즉시 반영되지 않는다.", "confidence": 0.8 },
      { "claim": "Graph Patch JSON은 strict JSON(json.loads
  통과)으로 문자열 내부 줄바꿈 없이 출력되어야 한다.",
  "reason": "문자열 줄바꿈은 파싱 실패를 유발해 결합 검증/병
  합을 중단시킨다.", "confidence": 0.9 }
    ]
  }

  ## Standards Tags (내부 태그)

  - 추가된 태그: LEARN_MAP_CURRENT_SUBMIT_FLOW,
    LEARN_IDENTIFY_STORAGE_KEY,
    LEARN_DOCUMENT_STORED_RESULT_SCHEMA,
    LEARN_REMOVE_PER_PROBLEM_SUBMIT,
    LEARN_ADD_BULK_GRADE_BUTTON,
    LEARN_DISABLED_USES_NORMALIZE_NUMERIC_INPUT,
    LEARN_ALL_ANSWERED_NORMALIZED,
    LEARN_DISABLED_EDGECASES_12,
    LEARN_BULK_GRADE_ALL_ACTION, LEARN_BUILD_RESULT_MAP,
    LEARN_GRADED_STATE_FLAG, LEARN_SCORE_SUMMARY_CALC,
    LEARN_SCORE_AND_RESULT_GATING,
    LEARN_SHOW_PER_PROBLEM_RESULT,
    LEARN_STORE_RESULT_SCHEMA_BULK,
    LEARN_LOCALSTORAGE_SAVE_BULK,
    LEARN_LOCALSTORAGE_VALIDATE_SHAPE,
    LEARN_LOCALSTORAGE_RESTORE_BULK,
    LEARN_LOCALSTORAGE_MIGRATION_LEGACY_PARTIAL,
    LEARN_RESET_CLEAR_STORAGE, LEARN_RESET_UI_STATE,
    LEARN_AFTER_GRADE_EDIT_POLICY
  - 수정된 태그: (없음)

  [/R1 Coverage Report]

  ###DONE:12f4bbe5cf###


› Explain this codebase

  82% context left · ? for shortcuts


============================================================
[2026-01-08 13:24:55] RESEARCH1 (req_id: ff7d0358ad)
============================================================
    LEARN_SCORE_AND_RESULT_GATING,
    LEARN_STORE_RESULT_SCHEMA_BULK,
    LEARN_LOCALSTORAGE_SAVE_BULK,
    LEARN_LOCALSTORAGE_RESTORE_BULK,
    LEARN_LOCALSTORAGE_MIGRATION_LEGACY_PARTIAL,
    LEARN_RESET_CLEAR_STORAGE, LEARN_RESET_UI_STATE,
    LEARN_AFTER_GRADE_EDIT_POLICY
  - 수정된 태그: (없음)

  [/R1 Coverage Report]

  ###DONE:c49dfc24b0###


› -> /mnt/c/Users/irron/Desktop/my/web_service_new/
  calculate_math/.agents/inbox/research_cd88845efc.md


  40% context left



› Request cd88845efc: 아래 파일(티켓 지시)을 읽고 결과를 이
  터미널에 Output Format대로 그대로 출력해줘. 가능하면 repo
  파일을 생성/수정하지 말고, 마지막에 마커를 그대로 출력해.
  -> /mnt/c/Users/irron/Desktop/my/web_service_new/
  calculate_math/.agents/inbox/research_cd88845efc.md


    rki
•         
                               

─                                                           
  42% context left · ? for shortcuts


• ###BEGIN:cd88845efc###

  ## Coverage Gap Report

  ### 1. 누락된 기초 개념 (최소 10개)

  | # | 개념명 | 누락 이유 | 심각도 |
  |---|--------|----------|--------|
  | 1 | 현재 동작/상태 흐름 1페이지 요약 | LearnPage는 “문제
  별 제출→단건 채점→localStorage merge 저장” 구조인데, 이를
  기준선으로 요약하지 않으면 bulk 전환 시 회귀 원인을 추적하
  기 어려움 | 높음 |
  | 2 | StoredResult 스키마 명시(현재: submissions) | 저장/
  복원 계약이 { nodeId, updatedAt, submissions }인데 bulk 저
  장으로 바뀔 때 호환/마이그레이션 규칙이 필요 | 높음 |
  | 3 | 단일 버튼 채점하기 UX(하단 고정) | 요구사항은 “모든
  문제 입력 후 한 번에 제출”인데 현재 UI는 문제 카드별 제출
  만 존재 | 높음 |
  | 4 | 채점하기 disabled 기준(정규화 일치) | disabled 판정
  이 normalizeNumericInput()과 일관되지 않으면 " , " 같은 입
  력에서 활성/비활성이 채점과 불일치 | 높음 |
  | 5 | allAnswered 계산(정규화 기반) | problems[] 전체에 대
  해 정규화 후 빈 값 여부를 확인해야 “모든 문제 입력 전까지
  disabled”를 구현 가능 | 높음 |
  | 6 | 입력 엣지케이스 10+ 정의 | AC 요구(10개+) 충족을 위
  해 최소 벡터가 필요(빈값/공백/콤마/0/부호/소수점/Infinity
  등) | 중 |
  | 7 | 일괄 채점 액션(전체 순회→gradeNumericAnswer) | 현재
  는 단건 submitProblem만 있어 “한 번에 전체 채점” 동작이 없
  음 | 높음 |
  | 8 | 채점 전/후 상태 플래그(hasGraded/isSubmitted) | 채점
  전 0/N 노출, 복원 후 표시 기준 혼란을 막기 위해 채점 전/후
  상태를 분리해야 함 | 중 |
  | 9 | 점수/정오/정답 표시 게이팅 | 채점 후에만 결과를 노출
  해야 사용자 혼란(채점 전 점수 노출/legacy partial) 최소화
  | 중 |
  |10| bulk 저장(답안+결과를 한 번에 저장) | 요구사항 3) 저
  장 시점이 “개별 제출”이 아니라 “일괄 채점 후”로 바뀌어야
  함 | 높음 |
  |11| bulk 복원(재진입/새로고침) | 저장된 답안/결과를 한 번
  에 복원해 UI 상태를 재구성해야 함 | 높음 |
  |12| legacy partial 호환/마이그레이션 정책 | 기존 per-
  problem 저장은 submissions 일부만 남기는 데이터가 자연스럽
  게 생성되므로 bulk 전환 후 충돌 방지 정책이 필요 | 높음 |
  |13| 초기화(다시 풀기): localStorage 삭제 + UI 리셋 | 요구
  사항 4)인데 현재 사용자가 저장된 결과/답안을 지울 방법이
  없음 | 높음 |
  |14| strict JSON 출력 가드(줄바꿈 금지) | reviewer 지적처
  럼 문자열 내부 줄바꿈이 있으면 자동 파싱/병합이 실패하므로
  산출물 JSON은 strict JSON이어야 함 | 높음 |

  ### 2. 과잉 난이도/불필요 선행 (최소 5개)

  | # | 개념명 | 과잉 이유 | 조치 제안 |
  |---|--------|----------|----------|
  | 1 | 서버 연동/DB 저장 | Out of Scope 위반이며
  localStorage 요구를 흐림 | 금지 |
  | 2 | 문제 타입 확장(서술형/객관식) | 이번 티켓은 제출 UX/
  저장/복원이며 타입 확장은 별도 설계 필요 | 금지(후속 티켓)
  |
  | 3 | 채점 정책 확장(허용오차/분수/근사) | bulk 제출 UX와
  무관하며 회귀 위험만 증가 | gradeNumericAnswer() 유지 |
  | 4 | 문제은행 스키마 변경 | 데이터 구조 변경은 범위 밖이
  며 회귀 위험 큼 | problems_v1.json 유지 |
  | 5 | 전역 상태관리 도입(Redux/Zustand) | LearnPage 단일
  화면 상태로 충분 | 도입 금지 |
  | 6 | autosave(입력 즉시 저장) | 요구는 “채점 후 한 번에
  저장”이며 호환/정책을 복잡화 | 제외 |

  ### 3. 학습 순서상 위험한 점프 (최소 5개)

  | # | From → To | 점프 이유 | 브릿지 제안 |
  |---|-----------|----------|------------|
  | 1 | 문제별 제출 제거 → bulk 액션/버튼 미구현 | 제거만 하
  면 채점/저장 경로가 사라져 기능 공백 발생 | 채점하기
  +gradeAll 구현 후 제거 |
  | 2 | disabled(원문 기준) → 채점(정규화 기준) | " , " 등에
  서 활성/비활성과 채점이 불일치해 UX 붕괴 | disabled는
  normalizeNumericInput(answer).length>0로 통일 |
  | 3 | bulk 저장 도입 → legacy partial 복원 | 기존
  submissions 일부만 저장된 데이터가 bulk 상태/표시와 충돌 |
  legacy partial 감지 후 정책(초기화/답안만 복원/재채점 유
  도) |
  | 4 | 점수 표시(항상 0/N 가능) → 채점 UX | 채점 전 점수 노
  출은 “이미 채점됨” 오해 유발 | hasGraded 도입 후 채점 후에
  만 점수/정답 표시 |
  | 5 | 채점 후 입력 수정 → 결과 유지 | 입력과 결과가 불일치
  (스테일) 상태 발생 | 입력 변경 시 결과 초기화 또는 다시 채
  점 플로우 |
  | 6 | 초기화(키 삭제만) → UI 상태 유지 | 저장소만 지우면
  화면에 남아있는 answer/result/flags가 그대로 | 키 삭제 +
  UI 상태 리셋 동시 수행 |

  ## Graph Patch JSON

  {
    "researcher": "R1",
    "scope": "curriculum_viewer_learning_bulk_submit_v1",
    "add_nodes": [
      { "id": "LEARN_MAP_CURRENT_SUBMIT_FLOW", "type":
  "micro", "name_ko": "현재 per-problem 제출/저장 흐름 1페이
  지 요약", "domain": "FE", "rep": "C", "confidence":
  0.86 },
      { "id": "LEARN_DOCUMENT_STORED_RESULT_SCHEMA", "type":
  "micro", "name_ko": "StoredResult/ submisions 스키마 문서
  화", "domain": "FE", "rep": "C", "confidence": 0.82 },
      { "id": "LEARN_REMOVE_PER_PROBLEM_SUBMIT", "type":
  "micro", "name_ko": "문제 카드별 제출 버튼 제거",
  "domain": "FE", "rep": "P", "confidence": 0.85 },
      { "id": "LEARN_ADD_BULK_GRADE_BUTTON", "type":
  "micro", "name_ko": "페이지 하단 단일 버튼(채점하기/전체
  제출) 추가", "domain": "FE", "rep": "P", "confidence":
  0.85 },
      { "id": "LEARN_DISABLED_USES_NORMALIZE_NUMERIC_INPUT",
  "type": "micro", "name_ko": "disabled 판정 기준을
  normalizeNumericInput과 일치", "domain": "FE", "rep": "C",
  "confidence": 0.82 },
      { "id": "LEARN_ALL_ANSWERED_NORMALIZED", "type":
  "micro", "name_ko": "allAnswered 계산(정규화 기반)",
  "domain": "FE", "rep": "P", "confidence": 0.82 },
      { "id": "LEARN_DISABLED_EDGECASES_12", "type":
  "micro", "name_ko": "입력 엣지케이스 12종 정의(빈값/공백/
  콤마/0/부호/소수점 등)", "domain": "QA", "rep": "C",
  "confidence": 0.76 },
      { "id": "LEARN_BULK_GRADE_ALL_ACTION", "type":
  "micro", "name_ko": "일괄 채점 액션(전체 순회
  →gradeNumericAnswer)", "domain": "FE", "rep": "P",
  "confidence": 0.84 },
      { "id": "LEARN_GRADED_STATE_FLAG", "type": "micro",
  "name_ko": "채점 전/후 상태 플래그(hasGraded/isSubmitted)
  정의", "domain": "FE", "rep": "C", "confidence": 0.78 },
      { "id": "LEARN_SCORE_AND_RESULT_GATING", "type":
  "micro", "name_ko": "채점 후에만 점수/정오/정답 표시(게이
  팅)", "domain": "FE", "rep": "P", "confidence": 0.76 },
      { "id": "LEARN_STORE_RESULT_SCHEMA_BULK", "type":
  "micro", "name_ko": "bulk 저장 스키마(답안+결과) 계약 정
  의", "domain": "FE", "rep": "C", "confidence": 0.76 },
      { "id": "LEARN_LOCALSTORAGE_SAVE_BULK", "type":
  "micro", "name_ko": "일괄 채점 후 답안+결과를 한 번에 저
  장", "domain": "FE", "rep": "P", "confidence": 0.8 },
      { "id": "LEARN_LOCALSTORAGE_RESTORE_BULK", "type":
  "micro", "name_ko": "재진입/새로고침 시 결과/답안 복원",
  "domain": "FE", "rep": "P", "confidence": 0.78 },
      { "id": "LEARN_LOCALSTORAGE_MIGRATION_LEGACY_PARTIAL",
  "type": "micro", "name_ko": "legacy partial(부분 제출) 데
  이터 호환/정책", "domain": "FE", "rep": "C", "confidence":
  0.74 },
      { "id": "LEARN_RESET_CLEAR_STORAGE", "type": "micro",
  "name_ko": "다시 풀기: localStorage 키 삭제", "domain":
  "FE", "rep": "P", "confidence": 0.82 },
      { "id": "LEARN_RESET_UI_STATE", "type": "micro",
  "name_ko": "다시 풀기: UI 상태 리셋(answer/results/
  flags)", "domain": "FE", "rep": "P", "confidence": 0.78 },
      { "id": "LEARN_AFTER_GRADE_EDIT_POLICY", "type":
  "micro", "name_ko": "채점 후 재입력 정책(결과 초기화 또는
  다시 채점)", "domain": "UX", "rep": "C", "confidence":
  0.7 },
      { "id": "LEARN_STRICT_JSON_OUTPUT_GUARD", "type":
  "micro", "name_ko": "Graph Patch JSON strict JSON 보장(문
  자열 줄바꿈 금지)", "domain": "QA", "rep": "C",
  "confidence": 0.84 }
    ],
    "merge_aliases": [],
    "add_edges": [
      { "from": "LEARN_MAP_CURRENT_SUBMIT_FLOW", "to":
  "LEARN_DOCUMENT_STORED_RESULT_SCHEMA", "type": "requires",
  "confidence": 0.78 },
      { "from":
  "LEARN_DISABLED_USES_NORMALIZE_NUMERIC_INPUT", "to":
  "LEARN_ALL_ANSWERED_NORMALIZED", "type": "requires",
  "confidence": 0.82 },
      { "from": "LEARN_ALL_ANSWERED_NORMALIZED", "to":
  "LEARN_ADD_BULK_GRADE_BUTTON", "type": "requires",
  "confidence": 0.7 },
      { "from": "LEARN_ADD_BULK_GRADE_BUTTON", "to":
  "LEARN_BULK_GRADE_ALL_ACTION", "type": "requires",
  "confidence": 0.8 },
      { "from": "LEARN_BULK_GRADE_ALL_ACTION", "to":
  "LEARN_GRADED_STATE_FLAG", "type": "requires",
  "confidence": 0.74 },
      { "from": "LEARN_GRADED_STATE_FLAG", "to":
  "LEARN_SCORE_AND_RESULT_GATING", "type": "requires",
  "confidence": 0.76 },
      { "from": "LEARN_STORE_RESULT_SCHEMA_BULK", "to":
  "LEARN_LOCALSTORAGE_SAVE_BULK", "type": "requires",
  "confidence": 0.8 },
      { "from": "LEARN_STORE_RESULT_SCHEMA_BULK", "to":
  "LEARN_LOCALSTORAGE_RESTORE_BULK", "type": "requires",
  "confidence": 0.8 },
      { "from":
  "LEARN_LOCALSTORAGE_MIGRATION_LEGACY_PARTIAL", "to":
  "LEARN_LOCALSTORAGE_RESTORE_BULK", "type": "requires",
  "confidence": 0.74 },
      { "from": "LEARN_LOCALSTORAGE_RESTORE_BULK", "to":
  "LEARN_GRADED_STATE_FLAG", "type": "requires",
  "confidence": 0.72 },
      { "from": "LEARN_LOCALSTORAGE_SAVE_BULK", "to":
  "LEARN_RESET_CLEAR_STORAGE", "type": "requires",
  "confidence": 0.74 },
      { "from": "LEARN_RESET_CLEAR_STORAGE", "to":
  "LEARN_RESET_UI_STATE", "type": "requires", "confidence":
  0.78 },
      { "from": "LEARN_AFTER_GRADE_EDIT_POLICY", "to":
  "LEARN_SCORE_AND_RESULT_GATING", "type": "requires",
  "confidence": 0.7 },
      { "from": "LEARN_BULK_GRADE_ALL_ACTION", "to":
  "LEARN_REMOVE_PER_PROBLEM_SUBMIT", "type": "requires",
  "confidence": 0.72 },
      { "from": "LEARN_STRICT_JSON_OUTPUT_GUARD", "to":
  "LEARN_STORE_RESULT_SCHEMA_BULK", "type": "requires",
  "confidence": 0.74 }
    ],
    "remove_edges": [],
    "notes": [
      { "claim": "현재 LearnPage는 문제별 제출
  (submitProblem)로 단건 채점 후 submissions를 localStorage
  키(curriculum-viewer:learn:lastResult:${nodeId})에 merge
  저장한다.", "reason": "LearnPage.tsx에서
  StoredResult{submissions} 타입 정의와
  setItem(JSON.stringify(payload))가 확인된다.",
  "confidence": 0.86 },
      { "claim": "disabled 판정은 normalizeNumericInput과 동
  일 기준으로 정의해야 한다.", "reason":
  "normalizeNumericInput이 공백/콤마 제거를 수행하므로 원문
  기준 disabled는 채점과 불일치해 UX가 붕괴한다.",
  "confidence": 0.82 },
      { "claim": "legacy partial 데이터는 bulk 전환 시 필연
  적으로 존재할 수 있어 복원 단계에서 감지/정책화가 필요하
  다.", "reason": "기존 per-problem 저장은 전체 문제 수보다
  적은 submissions를 남기는 것이 정상 동작이었다.",
  "confidence": 0.74 },
      { "claim": "채점 전/후 게이팅(hasGraded)은 점수/정답
  조기 노출과 저장/복원 혼선을 줄인다.", "reason": "채점 전
  0/N 노출, 부분 저장 데이터 노출을 통제하려면 표시 기준이
  필요하다.", "confidence": 0.74 },
      { "claim": "Graph Patch JSON은 문자열 내부 줄바꿈이 있
  으면 파서가 실패하므로 strict JSON으로 재출력되어야 한
  다.", "reason": "reviewer 지적처럼 JSON 파싱 실패는 결합
  패치 검증/병합 파이프라인을 중단시킨다.", "confidence":
  0.84 }
    ]
  }

  ## Standards Tags (내부 태그)

  - 추가된 태그: LEARN_MAP_CURRENT_SUBMIT_FLOW,
    LEARN_DOCUMENT_STORED_RESULT_SCHEMA,
    LEARN_REMOVE_PER_PROBLEM_SUBMIT,
    LEARN_ADD_BULK_GRADE_BUTTON,
    LEARN_DISABLED_USES_NORMALIZE_NUMERIC_INPUT,
    LEARN_ALL_ANSWERED_NORMALIZED,
    LEARN_DISABLED_EDGECASES_12,
    LEARN_BULK_GRADE_ALL_ACTION, LEARN_GRADED_STATE_FLAG,
    LEARN_SCORE_AND_RESULT_GATING,
    LEARN_STORE_RESULT_SCHEMA_BULK,
    LEARN_LOCALSTORAGE_SAVE_BULK,
    LEARN_LOCALSTORAGE_RESTORE_BULK,
    LEARN_LOCALSTORAGE_MIGRATION_LEGACY_PARTIAL,
    LEARN_RESET_CLEAR_STORAGE, LEARN_RESET_UI_STATE,
    LEARN_AFTER_GRADE_EDIT_POLICY,
    LEARN_STRICT_JSON_OUTPUT_GUARD
  - 수정된 태그: (없음)

  [/R1 Coverage Report]

  ###DONE:cd88845efc###


› -> /mnt/c/Users/irron/Desktop/my/web_service_new/
  calculate_math/.agents/inbox/research_f0805f8d87.md


  40% context left



› Request f0805f8d87: 아래 파일(티켓 지시)을 읽고 결과를 이
  터미널에 Output Format대로 그대로 출력해줘. 가능하면 repo
  파일을 생성/수정하지 말고, 마지막에 마커를 그대로 출력해.
  -> /mnt/c/Users/irron/Desktop/my/web_service_new/
  calculate_math/.agents/inbox/research_f0805f8d87.md


   ork     10s • esc to inte rupt)
•         
                               

─                                                           
  39% context left · ? for shortcuts


• ###BEGIN:f0805f8d87###

  ## Coverage Gap Report

  ### 1. 누락된 기초 개념 (최소 10개)

  | # | 개념명 | 누락 이유 | 심각도 |
  |---|--------|----------|--------|
  | 1 | 현재 LearnPage 제출/저장 흐름 기준선 요약 | 현재는
  문제별 제출→단건 채점→submissions merge 저장 구조라, bulk
  전환 시 무엇이 바뀌는지 기준선이 필요 | 높음 |
  | 2 | StoredResult(submissions) 스키마 명시 | localStorage
  저장/복원 계약이 명시되지 않으면 bulk 저장으로 전환 시 호
  환/마이그레이션 규칙이 흔들림 | 높음 |
  | 3 | 문제 카드별 제출 버튼 제거 | 요구사항 1) 핵심인데 현
  재 UI는 per-problem 제출에 고정 | 높음 |
  | 4 | 하단 단일 채점하기(전체 제출) 버튼 | 요구 UX의 유일
  한 진입점이 필요하나 현재 없음 | 높음 |
  | 5 | 채점하기 disabled 기준(정규화 일관성) | disabled 판
  정이 normalizeNumericInput()과 불일치하면 " , " 같은 입력
  에서 활성/비활성이 채점과 엇갈림 | 높음 |
  | 6 | allAnswered 계산(정규화 기반) | problems[] 전체를 기
  준으로 “모두 입력됨”을 안정적으로 계산해야 함(로딩 타이밍/
  문제 수 변화 포함) | 높음 |
  | 7 | 입력 엣지케이스 10+ 정의 | AC 요구 충족을 위해 최소
  벡터가 필요(예: "", " ", ",", " , ", "0", "-0", "1,234", "
  1 234 ", "+", ".", "Infinity" 등) | 중 |
  | 8 | 일괄 채점 액션(전체 순회→gradeNumericAnswer) | 현재
  는 submitProblem(problem)로 단건 채점만 가능해 bulk 채점
  동작이 없음 | 높음 |
  | 9 | 채점 전/후 상태 플래그(hasGraded/isSubmitted) | 채점
  전 점수/정답 노출(0/N) 및 복원 후 표시 기준 혼란을 막기 위
  해 필요 | 중 |
  |10| 점수/정오/정답 표시 게이팅 | 채점 후에만 결과를 노출
  해야 UX가 일관되고 legacy partial 데이터 혼선을 줄임 | 중
  |
  |11| bulk 저장(답안+결과를 한 번에 저장) | 요구사항 3) 저
  장 시점이 개별 제출이 아니라 일괄 채점 후로 바뀌어야 함 |
  높음 |
  |12| bulk 복원(재진입/새로고침) | 저장된 답안/결과를 복원
  해 상태를 재구성해야 함 | 높음 |
  |13| legacy partial 호환/정책 | 기존 per-problem 저장은
  submissions 일부만 남기는 데이터가 정상으로 생성되므로,
  bulk 전환 후 충돌 방지 정책이 필요 | 높음 |
  |14| 다시 풀기(초기화): 키 삭제 + UI 리셋 | 요구사항 4)이
  며 키 삭제만으로는 화면이 즉시 초기화되지 않음 | 높음 |
  |15| strict JSON 산출 가드 | reviewer 지적처럼 문자열 내부
  줄바꿈이 있으면 파싱/병합이 실패하므로 산출물 JSON은
  strict JSON이어야 함 | 높음 |

  ### 2. 과잉 난이도/불필요 선행 (최소 5개)

  | # | 개념명 | 과잉 이유 | 조치 제안 |
  |---|--------|----------|----------|
  | 1 | R3 Transfer 템플릿/트리플릿 강제 | 본 티켓은 FE/UX
  개선이며 problem templates/triplets은 도메인 부적합(또는
  N/A 처리 필요) | N/A 명시 또는 최소 전이(상태 전이) 예시로
  대체 |
  | 2 | 서버 연동/DB 저장 | Out of Scope 위반, localStorage
  요구를 흐림 | 금지 |
  | 3 | 문제 타입 확장(서술형/객관식) | 이번 티켓 범위를 벗
  어남 | 금지(후속 티켓) |
  | 4 | grading 정책 확장(허용오차/분수/근사) | bulk 제출 UX
  와 무관하며 회귀 위험 증가 | 기존 gradeNumericAnswer 유지
  |
  | 5 | 문제은행 JSON 스키마 변경 | 데이터 구조 변경은 범위
  밖, 회귀 위험 큼 | 기존 스키마 유지 |
  | 6 | 전역 상태관리 도입(Redux/Zustand) | LearnPage 단일
  화면 상태로 충분 | 도입 금지 |

  ### 3. 학습 순서상 위험한 점프 (최소 5개)

  | # | From → To | 점프 이유 | 브릿지 제안 |
  |---|-----------|----------|------------|
  | 1 | 문제별 제출 제거 → bulk 버튼/액션 미구현 | 제거만 하
  면 채점/저장 경로가 사라져 기능 공백 발생 | 채점하기
  +gradeAll 구현 후 제거 |
  | 2 | disabled(원문 기준) → 채점(정규화 기준) | " , " 등에
  서 활성/비활성과 채점이 불일치해 UX 붕괴 | disabled는
  normalizeNumericInput(answer).length>0로 통일 |
  | 3 | bulk 저장 도입 → legacy partial 복원 | 기존
  submissions 일부만 저장된 데이터가 bulk 표시/disabled와 충
  돌 | partial 감지 후 정책(초기화/답안만 복원/재채점 유도)
  |
  | 4 | 점수 표시 → 채점 UX | 채점 전 0/N 노출은 “이미 채점
  됨” 오해 유발 | hasGraded 도입 후 채점 후에만 점수/정답 표
  시 |
  | 5 | 채점 후 입력 수정 → 결과 유지 | 입력과 결과가 불일치
  (스테일) 상태 발생 | 입력 변경 시 결과 초기화 또는 다시 채
  점 플로우 |
  | 6 | 초기화(키 삭제만) → UI 상태 유지 | 저장소만 지우면
  화면에 남은 answer/result/flags가 그대로 | 키 삭제 + UI 리
  셋 동시 수행 |

  ## Graph Patch JSON

  {
    "researcher": "R1",
    "scope": "curriculum_viewer_learning_bulk_submit_v1",
    "add_nodes": [
      { "id": "LEARN_MAP_CURRENT_SUBMIT_FLOW", "type":
  "micro", "name_ko": "현재 per-problem 제출/저장 흐름 1페이
  지 요약", "domain": "FE", "rep": "C", "confidence":
  0.86 },
      { "id": "LEARN_DOCUMENT_STORED_RESULT_SCHEMA", "type":
  "micro", "name_ko": "StoredResult/submissions 스키마 문서
  화", "domain": "FE", "rep": "C", "confidence": 0.82 },
      { "id": "LEARN_REMOVE_PER_PROBLEM_SUBMIT", "type":
  "micro", "name_ko": "문제 카드별 제출 버튼 제거",
  "domain": "FE", "rep": "P", "confidence": 0.85 },
      { "id": "LEARN_ADD_BULK_GRADE_BUTTON", "type":
  "micro", "name_ko": "페이지 하단 단일 버튼(채점하기/전체
  제출) 추가", "domain": "FE", "rep": "P", "confidence":
  0.85 },
      { "id": "LEARN_DISABLED_USES_NORMALIZE_NUMERIC_INPUT",
  "type": "micro", "name_ko": "disabled 판정 기준을
  normalizeNumericInput과 일치", "domain": "FE", "rep": "C",
  "confidence": 0.82 },
      { "id": "LEARN_ALL_ANSWERED_NORMALIZED", "type":
  "micro", "name_ko": "allAnswered 계산(정규화 기반)",
  "domain": "FE", "rep": "P", "confidence": 0.82 },
      { "id": "LEARN_DISABLED_EDGECASES_12", "type":
  "micro", "name_ko": "입력 엣지케이스 12종 정의(빈값/공백/
  콤마/0/부호/소수점 등)", "domain": "QA", "rep": "C",
  "confidence": 0.76 },
      { "id": "LEARN_BULK_GRADE_ALL_ACTION", "type":
  "micro", "name_ko": "일괄 채점 액션(전체 순회
  →gradeNumericAnswer)", "domain": "FE", "rep": "P",
  "confidence": 0.84 },
      { "id": "LEARN_BUILD_RESULT_MAP", "type": "micro",
  "name_ko": "문제별 결과 맵(resultByProblemId) 생성",
  "domain": "FE", "rep": "P", "confidence": 0.78 },
      { "id": "LEARN_GRADED_STATE_FLAG", "type": "micro",
  "name_ko": "채점 전/후 상태 플래그(hasGraded 등) 정의",
  "domain": "FE", "rep": "C", "confidence": 0.78 },
      { "id": "LEARN_SCORE_SUMMARY_CALC", "type": "micro",
  "name_ko": "총점 X/N 계산(결과 맵 기반)", "domain": "FE",
  "rep": "P", "confidence": 0.76 },
      { "id": "LEARN_SCORE_AND_RESULT_GATING", "type":
  "micro", "name_ko": "채점 후에만 점수/정오/정답 표시(게이
  팅)", "domain": "FE", "rep": "P", "confidence": 0.76 },
      { "id": "LEARN_SHOW_PER_PROBLEM_RESULT", "type":
  "micro", "name_ko": "문제별 정오/정답 표시(일괄 채점 후)",
  "domain": "FE", "rep": "P", "confidence": 0.78 },
      { "id": "LEARN_STORE_RESULT_SCHEMA_BULK", "type":
  "micro", "name_ko": "bulk 저장 스키마(답안+결과) 계약 정
  의", "domain": "FE", "rep": "C", "confidence": 0.76 },
      { "id": "LEARN_LOCALSTORAGE_VALIDATE_SHAPE", "type":
  "micro", "name_ko": "복원 데이터 파싱/검증 규칙(JSON shape
  validate)", "domain": "FE", "rep": "C", "confidence":
  0.78 },
      { "id": "LEARN_LOCALSTORAGE_SAVE_BULK", "type":
  "micro", "name_ko": "일괄 채점 후 답안+결과를 한 번에 저
  장", "domain": "FE", "rep": "P", "confidence": 0.8 },
      { "id": "LEARN_LOCALSTORAGE_RESTORE_BULK", "type":
  "micro", "name_ko": "재진입/새로고침 시 결과/답안 복원",
  "domain": "FE", "rep": "P", "confidence": 0.78 },
      { "id": "LEARN_LOCALSTORAGE_MIGRATION_LEGACY_PARTIAL",
  "type": "micro", "name_ko": "legacy partial(부분 제출) 호
  환/정책", "domain": "FE", "rep": "C", "confidence":
  0.74 },
      { "id": "LEARN_RESET_CLEAR_STORAGE", "type": "micro",
  "name_ko": "다시 풀기: localStorage 키 삭제", "domain":
  "FE", "rep": "P", "confidence": 0.82 },
      { "id": "LEARN_RESET_UI_STATE", "type": "micro",
  "name_ko": "다시 풀기: UI 상태 리셋(answer/results/
  flags)", "domain": "FE", "rep": "P", "confidence": 0.78 },
      { "id": "LEARN_AFTER_GRADE_EDIT_POLICY", "type":
  "micro", "name_ko": "채점 후 재입력 정책(결과 초기화 또는
  다시 채점)", "domain": "UX", "rep": "C", "confidence":
  0.7 },
      { "id": "LEARN_STRICT_JSON_OUTPUT_GUARD", "type":
  "micro", "name_ko": "Graph Patch JSON strict JSON 보장(문
  자열 줄바꿈 금지)", "domain": "QA", "rep": "C",
  "confidence": 0.84 }
    ],
    "merge_aliases": [],
    "add_edges": [
      { "from": "LEARN_MAP_CURRENT_SUBMIT_FLOW", "to":
  "LEARN_DOCUMENT_STORED_RESULT_SCHEMA", "type": "requires",
  "confidence": 0.78 },
      { "from":
  "LEARN_DISABLED_USES_NORMALIZE_NUMERIC_INPUT", "to":
  "LEARN_ALL_ANSWERED_NORMALIZED", "type": "requires",
  "confidence": 0.82 },
      { "from": "LEARN_ALL_ANSWERED_NORMALIZED", "to":
  "LEARN_ADD_BULK_GRADE_BUTTON", "type": "requires",
  "confidence": 0.7 },
      { "from": "LEARN_ADD_BULK_GRADE_BUTTON", "to":
  "LEARN_BULK_GRADE_ALL_ACTION", "type": "requires",
  "confidence": 0.8 },
      { "from": "LEARN_BULK_GRADE_ALL_ACTION", "to":
  "LEARN_BUILD_RESULT_MAP", "type": "requires",
  "confidence": 0.78 },
      { "from": "LEARN_BUILD_RESULT_MAP", "to":
  "LEARN_SCORE_SUMMARY_CALC", "type": "requires",
  "confidence": 0.76 },
      { "from": "LEARN_BUILD_RESULT_MAP", "to":
  "LEARN_SHOW_PER_PROBLEM_RESULT", "type": "requires",
  "confidence": 0.78 },
      { "from": "LEARN_BULK_GRADE_ALL_ACTION", "to":
  "LEARN_GRADED_STATE_FLAG", "type": "requires",
  "confidence": 0.74 },
      { "from": "LEARN_GRADED_STATE_FLAG", "to":
  "LEARN_SCORE_AND_RESULT_GATING", "type": "requires",
  "confidence": 0.76 },
      { "from": "LEARN_STORE_RESULT_SCHEMA_BULK", "to":
  "LEARN_LOCALSTORAGE_SAVE_BULK", "type": "requires",
  "confidence": 0.8 },
      { "from": "LEARN_STORE_RESULT_SCHEMA_BULK", "to":
  "LEARN_LOCALSTORAGE_RESTORE_BULK", "type": "requires",
  "confidence": 0.8 },
      { "from": "LEARN_LOCALSTORAGE_VALIDATE_SHAPE", "to":
  "LEARN_LOCALSTORAGE_RESTORE_BULK", "type": "requires",
  "confidence": 0.78 },
      { "from":
  "LEARN_LOCALSTORAGE_MIGRATION_LEGACY_PARTIAL", "to":
  "LEARN_LOCALSTORAGE_RESTORE_BULK", "type": "requires",
  "confidence": 0.74 },
      { "from": "LEARN_LOCALSTORAGE_RESTORE_BULK", "to":
  "LEARN_GRADED_STATE_FLAG", "type": "requires",
  "confidence": 0.7 },
      { "from": "LEARN_LOCALSTORAGE_SAVE_BULK", "to":
  "LEARN_RESET_CLEAR_STORAGE", "type": "requires",
  "confidence": 0.74 },
      { "from": "LEARN_RESET_CLEAR_STORAGE", "to":
  "LEARN_RESET_UI_STATE", "type": "requires", "confidence":
  0.78 },
      { "from": "LEARN_AFTER_GRADE_EDIT_POLICY", "to":
  "LEARN_SCORE_AND_RESULT_GATING", "type": "requires",
  "confidence": 0.7 },
      { "from": "LEARN_BULK_GRADE_ALL_ACTION", "to":
  "LEARN_REMOVE_PER_PROBLEM_SUBMIT", "type": "requires",
  "confidence": 0.72 },
      { "from": "LEARN_STRICT_JSON_OUTPUT_GUARD", "to":
  "LEARN_STORE_RESULT_SCHEMA_BULK", "type": "requires",
  "confidence": 0.74 }
    ],
    "remove_edges": [],
    "notes": [
      { "claim": "현재 LearnPage는 문제별 제출
  (submitProblem)로 단건 채점 후 submissions를 localStorage
  키(curriculum-viewer:learn:lastResult:${nodeId})에 merge
  저장한다.", "reason": "LearnPage.tsx에서
  StoredResult{submissions} 타입 정의와
  setItem(JSON.stringify(payload)) 흐름이 확인된다.",
  "confidence": 0.86 },
      { "claim": "disabled 판정은 normalizeNumericInput과 동
  일 기준으로 정의해야 한다.", "reason":
  "normalizeNumericInput이 공백/콤마 제거를 수행하므로 원문
  기준 disabled는 채점과 불일치해 UX가 붕괴한다.",
  "confidence": 0.82 },
      { "claim": "R3 Transfer 산출물은 본 티켓(UX/FE)에서는
  problem templates/triplets 대신 상태 전이(입력→활성화→채점
  →저장→복원→초기화) 전이 예시로 대체하거나 N/A를 명시하는
  방식이 적합하다.", "reason": "reviewer도 FE/UX 티켓에서
  Transfer 항목을 N/A 처리 또는 도메인 맞춤 예시로 대체하라
  고 권고했다.", "confidence": 0.74 },
      { "claim": "legacy partial(부분 제출) 데이터는 bulk 전
  환 시 필연적으로 존재할 수 있어 복원 단계에서 감지/정책화
  가 필요하다.", "reason": "기존 per-problem 저장은 전체 문
  제 수보다 적은 submissions를 남기는 것이 정상 동작이었
  다.", "confidence": 0.74 },
      { "claim": "Graph Patch JSON은 문자열 내부 줄바꿈이 있
  으면 파서가 실패하므로 strict JSON으로 재출력되어야 한
  다.", "reason": "reviewer 지적처럼 JSON 파싱 실패는 결합
  패치 검증/병합 파이프라인을 중단시킨다.", "confidence":
  0.84 }
    ]
  }

  ## Standards Tags (내부 태그)

  - 추가된 태그: LEARN_MAP_CURRENT_SUBMIT_FLOW,
    LEARN_DOCUMENT_STORED_RESULT_SCHEMA,
    LEARN_REMOVE_PER_PROBLEM_SUBMIT,
    LEARN_ADD_BULK_GRADE_BUTTON,
    LEARN_DISABLED_USES_NORMALIZE_NUMERIC_INPUT,
    LEARN_ALL_ANSWERED_NORMALIZED,
    LEARN_DISABLED_EDGECASES_12,
    LEARN_BULK_GRADE_ALL_ACTION, LEARN_BUILD_RESULT_MAP,
    LEARN_GRADED_STATE_FLAG, LEARN_SCORE_SUMMARY_CALC,
    LEARN_SCORE_AND_RESULT_GATING,
    LEARN_SHOW_PER_PROBLEM_RESULT,
    LEARN_STORE_RESULT_SCHEMA_BULK,
    LEARN_LOCALSTORAGE_VALIDATE_SHAPE,
    LEARN_LOCALSTORAGE_SAVE_BULK,
    LEARN_LOCALSTORAGE_RESTORE_BULK,
    LEARN_LOCALSTORAGE_MIGRATION_LEGACY_PARTIAL,
    LEARN_RESET_CLEAR_STORAGE, LEARN_RESET_UI_STATE,
    LEARN_AFTER_GRADE_EDIT_POLICY,
    LEARN_STRICT_JSON_OUTPUT_GUARD
  - 수정된 태그: (없음)

  [/R1 Coverage Report]

  ###DONE:f0805f8d87###


› -> /mnt/c/Users/irron/Desktop/my/web_service_new/
  calculate_math/.agents/inbox/research_6ca9c9bcbc.md


  37% context left



› Request 6ca9c9bcbc: 아래 파일(티켓 지시)을 읽고 결과를 이
  터미널에 Output Format대로 그대로 출력해줘. 가능하면 repo
  파일을 생성/수정하지 말고, 마지막에 마커를 그대로 출력해.
  -> /mnt/c/Users/irron/Desktop/my/web_service_new/
  calculate_math/.agents/inbox/research_6ca9c9bcbc.md




• Explored
  └ List inbox
    Read research_6ca9c9bcbc.md
    Read T1.md, task.md
    Search Output Format|BEGIN:|DONE: in
r                     

• Ran for id in 059d0e7c0f fcd0127204 565ca07687 a4203a6ab9
  │ f0d1a42bd6 f5780da068 be14a78ffd 2c231c5c59 3c42956bde
                                                          

•         
  └evearcnglastResult|submitProblem|StoredResult|
                                                    
                                             
    Read grading.ts, Le           

─ Worked for 8m 11s ────────────────                        


• ###BEGIN:6ca9c9bcbc###

  ## Coverage Gap Report

  ### 1. 누락된 기초 개념 (최소 10개)

  | # | 개념명 | 누락 이유 | 심각도 |
  |---|--------|----------|--------|
  | 1 | 현재 LearnPage 단건 제출/저장 흐름 기준선 | per-
  problem submitProblem/저장 로직을 알아야 bulk 전환 시 회귀
  를 줄임 | 높음 |
  | 2 | localStorage 키 계약 식별 | 저장/복원/초기화가 동일
  키(curriculum-viewer:learn:lastResult:${nodeId})에 의존 |
  높음 |
  | 3 | StoredResult{submissions} 스키마/partial 의미 | 기존
  은 submissions merge로 부분 데이터가 정상 생성되어 bulk UX
  와 충돌 가능 | 높음 |
  | 4 | 문제 카드별 제출 버튼 제거 범위 | 요구사항 1) 핵심
  변경인데 현재 UI는 per-problem 제출 경로가 존재 | 높음 |
  | 5 | 하단 단일 버튼(채점하기) UX/상태 정의 | bulk UX의 단
  일 진입점이 필요(라벨/disabled/재채점 포함) | 높음 |
  | 6 | 미입력 판정 기준 정합화 | disabled 판정이
  normalizeNumericInput()과 불일치하면 채점과 UX가 엇갈림 |
  높음 |
  | 7 | allAnswered 계산(정규화+problems[] 기준) | “모든 문
  제 답 입력 전까지 disabled”를 로딩/빈 배열 포함 안정적으로
  계산해야 함 | 높음 |
  | 8 | 입력 엣지케이스 테스트 벡터(12종+) | 공백/콤마/0/부
  호/소수점/Infinity 등에서 기대값이 흔들려 회귀가 잦음 | 중
  |
  | 9 | 일괄 채점 gradeAll 동작 정의 | 현재는 단건 채점만 가
  능하므로 문제 전체 순회 채점 액션이 필요 | 높음 |
  |10| resultByProblemId 생성 및 결과 표시 규칙 | 문제별 정
  오/정답 표시와 점수 집계를 problemId 기준으로 정렬해야 함
  | 중 |
  |11| hasGraded 게이팅(채점 후 표시) | 채점 전 0/N 및
  partial 결과 노출 혼선을 막기 위한 표시 시점 규칙 필요 |
  중 |
  |12| 일괄 저장(전체 submissions 1회 저장) | 요구사항 3) 저
  장 시점을 “일괄 채점 후 setItem 1회”로 전환해야 함 | 높음
  |
  |13| 복원 파이프라인(파싱/검증/legacy 정책) | 잘못된/
  legacy 데이터로 인한 런타임 오류 및 UX 꼬임을 방지해야 함
  | 중 |
  |14| 다시 풀기: storage 삭제 + UI state 리셋 | 키 삭제만으
  로는 화면이 즉시 초기화되지 않아 state(answer/result/
  flags) 리셋이 필요 | 높음 |
  |15| 채점 후 답 변경 처리 정책 | 입력 변경 시 결과가 스테
  일해지므로 결과 초기화 또는 재채점 플로우를 고정해야 함 |
  중 |

  ### 2. 과잉 난이도/불필요 선행 (최소 5개)

  | # | 개념명 | 과잉 이유 | 조치 제안 |
  |---|--------|----------|----------|
  | 1 | 서버 연동/DB 저장 | Out of Scope이며 localStorage 요
  구를 흐림 | 금지(후속 티켓 분리) |
  | 2 | 문제 타입 확장(객관식/서술형) | 범위 외이며 UI/채점/
  저장 설계가 폭증 | 금지(후속 티켓) |
  | 3 | grading 로직 확장(허용오차/분수/근사) | bulk 제출 UX
  와 무관하고 회귀 위험 증가 | gradeNumericAnswer 유지 |
  | 4 | 문제은행/커리큘럼 JSON 스키마 변경 | 데이터 구조 변
  경은 범위 밖, 회귀 위험 큼 | 기존 스키마 유지 |
  | 5 | 전역 상태관리 도입(Redux/Zustand) | LearnPage 단일
  화면 상태로 충분 | 도입 금지 |
  | 6 | UI 대규모 리디자인/애니메이션 | 요구사항 충족과 무관
  하고 일정 리스크만 증가 | 최소 UI 변경 |

  ### 3. 학습 순서상 위험한 점프 (최소 5개)

  | # | From → To | 점프 이유 | 브릿지 제안 |
  |---|-----------|----------|------------|
  | 1 | LEARN_REMOVE_PER_PROBLEM_SUBMIT →
  LEARN_BULK_GRADE_ALL_ACTION | 제거가 먼저면 채점/저장 경로
  가 사라져 기능 공백 발생 | bulk 버튼+gradeAll+저장 구현 후
  제거 |
  | 2 | LEARN_ADD_BULK_GRADE_BUTTON →
  LEARN_ALL_ANSWERED_NORMALIZED | disabled 계산이 없으면 버
  튼 활성/비활성 기준이 흔들림 | normalize 기반 allAnswered
  를 먼저 고정 |
  | 3 | 원문 disabled 판정 → gradeNumericAnswer(정규화) |
  " , " 같은 입력에서 활성/채점 결과가 불일치해 UX 붕괴 |
  normalizeNumericInput(answer).length>0로 통일 |
  | 4 | LEARN_LOCALSTORAGE_SAVE_BULK →
  LEARN_LOCALSTORAGE_RESTORE_BULK | 스키마/검증 없이 복원하
  면 파싱 실패·필드 누락이 런타임 문제로 이어짐 | schema 정
  의 + shape validate + 예외 처리 |
  | 5 | LEARN_LOCALSTORAGE_RESTORE_BULK →
  LEARN_SCORE_AND_RESULT_GATING | restored partial에서 점수/
  결과 노출 기준이 불명확 | hasGraded 세팅 규칙(완전 제출만
  true 등) 정의 |
  | 6 | LEARN_RESET_CLEAR_STORAGE → (UI state 유지) |
  storage만 지우면 화면에 남은 answer/result/flags가 그대로
  | 키 삭제 + state 리셋 동시 수행 |
  | 7 | LEARN_AFTER_GRADE_EDIT_POLICY 미정 → 결과 표시 유지
  | 답 변경 후 스테일 결과(입력≠결과) 상태가 발생 | 입력 변
  경 시 결과 초기화 또는 “다시 채점” 플로우 |

  ## Graph Patch JSON

  {
    "researcher": "R1",
    "scope": "curriculum_viewer_learning_bulk_submit_v1",
    "add_nodes": [
      { "id": "LEARN_MAP_CURRENT_SUBMIT_FLOW", "type":
  "micro", "name_ko": "현재 per-problem 제출/저장 흐름 요
  약", "domain": "FE", "rep": "C" },
      { "id": "LEARN_DOCUMENT_STORED_RESULT_SCHEMA", "type":
  "micro", "name_ko": "StoredResult/submissions 스키마 확
  인", "domain": "FE", "rep": "C" },
      { "id": "LEARN_IDENTIFY_STORAGE_KEY", "type": "micro",
  "name_ko": "localStorage 키 포맷 식별", "domain": "FE",
  "rep": "C" },
      { "id": "LEARN_REMOVE_PER_PROBLEM_SUBMIT", "type":
  "micro", "name_ko": "문제 카드별 제출 버튼 제거",
  "domain": "FE", "rep": "P" },
      { "id": "LEARN_ADD_BULK_GRADE_BUTTON", "type":
  "micro", "name_ko": "하단 단일 채점하기 버튼 추가",
  "domain": "FE", "rep": "P" },
      { "id": "LEARN_DISABLED_USES_NORMALIZE_NUMERIC_INPUT",
  "type": "micro", "name_ko": "disabled 판정 기준을
  normalizeNumericInput과 일치", "domain": "FE", "rep":
  "C" },
      { "id": "LEARN_HANDLE_EMPTY_PROBLEMS", "type":
  "micro", "name_ko": "문제 0개/로딩 상태 UI 규칙",
  "domain": "UX", "rep": "C" },
      { "id": "LEARN_ALL_ANSWERED_NORMALIZED", "type":
  "micro", "name_ko": "allAnswered 계산(정규화 기반)",
  "domain": "FE", "rep": "P" },
      { "id": "LEARN_DISABLED_EDGECASES_12", "type":
  "micro", "name_ko": "입력 엣지케이스 12종 테스트 벡터",
  "domain": "QA", "rep": "C" },
      { "id": "LEARN_BULK_GRADE_ALL_ACTION", "type":
  "micro", "name_ko": "일괄 채점 액션(전체 순회)", "domain":
  "FE", "rep": "P" },
      { "id": "LEARN_BUILD_RESULT_MAP", "type": "micro",
  "name_ko": "문제별 결과 맵(resultByProblemId) 생성",
  "domain": "FE", "rep": "P" },
      { "id": "LEARN_SCORE_SUMMARY_CALC", "type": "micro",
  "name_ko": "총점 X/N 집계 로직", "domain": "FE", "rep":
  "P" },
      { "id": "LEARN_GRADED_STATE_FLAG", "type": "micro",
  "name_ko": "채점 전/후 상태 플래그(hasGraded) 정의",
  "domain": "FE", "rep": "C" },
      { "id": "LEARN_SCORE_AND_RESULT_GATING", "type":
  "micro", "name_ko": "채점 후에만 점수/결과 표시(게이팅)",
  "domain": "FE", "rep": "P" },
      { "id": "LEARN_SHOW_PER_PROBLEM_RESULT", "type":
  "micro", "name_ko": "문제별 정오/정답 표시(일괄 채점 후)",
  "domain": "FE", "rep": "P" },
      { "id": "LEARN_STORE_RESULT_SCHEMA_BULK", "type":
  "micro", "name_ko": "bulk 저장 시점/계약 정의(전체
  submissions 저장)", "domain": "FE", "rep": "C" },
      { "id": "LEARN_LOCALSTORAGE_VALIDATE_SHAPE", "type":
  "micro", "name_ko": "복원 데이터 파싱/shape validate",
  "domain": "FE", "rep": "C" },
      { "id": "LEARN_LOCALSTORAGE_SAVE_BULK", "type":
  "micro", "name_ko": "일괄 채점 후 submissions를 1회 저장",
  "domain": "FE", "rep": "P" },
      { "id": "LEARN_LOCALSTORAGE_RESTORE_BULK", "type":
  "micro", "name_ko": "재진입/새로고침 시 답안/결과 복원",
  "domain": "FE", "rep": "P" },
      { "id": "LEARN_LOCALSTORAGE_MIGRATION_LEGACY_PARTIAL",
  "type": "micro", "name_ko": "legacy partial(submissions 일
  부) 처리 정책", "domain": "FE", "rep": "C" },
      { "id": "LEARN_RESET_CLEAR_STORAGE", "type": "micro",
  "name_ko": "다시 풀기: localStorage 키 삭제", "domain":
  "FE", "rep": "P" },
      { "id": "LEARN_RESET_UI_STATE", "type": "micro",
  "name_ko": "다시 풀기: UI state 리셋", "domain": "FE",
  "rep": "P" },
      { "id": "LEARN_AFTER_GRADE_EDIT_POLICY", "type":
  "micro", "name_ko": "채점 후 답 수정 정책(결과 초기화/재채
  점)", "domain": "UX", "rep": "C" }
    ],
    "merge_aliases": [],
    "add_edges": [
      { "from": "LEARN_MAP_CURRENT_SUBMIT_FLOW", "to":
  "LEARN_REMOVE_PER_PROBLEM_SUBMIT", "type": "requires" },
      { "from": "LEARN_DOCUMENT_STORED_RESULT_SCHEMA", "to":
  "LEARN_STORE_RESULT_SCHEMA_BULK", "type": "requires" },
      { "from": "LEARN_IDENTIFY_STORAGE_KEY", "to":
  "LEARN_LOCALSTORAGE_SAVE_BULK", "type": "requires" },
      { "from": "LEARN_IDENTIFY_STORAGE_KEY", "to":
  "LEARN_LOCALSTORAGE_RESTORE_BULK", "type": "requires" },
      { "from": "LEARN_IDENTIFY_STORAGE_KEY", "to":
  "LEARN_RESET_CLEAR_STORAGE", "type": "requires" },
      { "from": "LEARN_HANDLE_EMPTY_PROBLEMS", "to":
  "LEARN_ALL_ANSWERED_NORMALIZED", "type": "requires" },
      { "from":
  "LEARN_DISABLED_USES_NORMALIZE_NUMERIC_INPUT", "to":
  "LEARN_ALL_ANSWERED_NORMALIZED", "type": "requires" },
      { "from": "LEARN_ALL_ANSWERED_NORMALIZED", "to":
  "LEARN_ADD_BULK_GRADE_BUTTON", "type": "requires" },
      { "from": "LEARN_ADD_BULK_GRADE_BUTTON", "to":
  "LEARN_BULK_GRADE_ALL_ACTION", "type": "requires" },
      { "from": "LEARN_BULK_GRADE_ALL_ACTION", "to":
  "LEARN_BUILD_RESULT_MAP", "type": "requires" },
      { "from": "LEARN_BULK_GRADE_ALL_ACTION", "to":
  "LEARN_GRADED_STATE_FLAG", "type": "requires" },
      { "from": "LEARN_BUILD_RESULT_MAP", "to":
  "LEARN_SCORE_SUMMARY_CALC", "type": "requires" },
      { "from": "LEARN_BUILD_RESULT_MAP", "to":
  "LEARN_SHOW_PER_PROBLEM_RESULT", "type": "requires" },
      { "from": "LEARN_GRADED_STATE_FLAG", "to":
  "LEARN_SCORE_AND_RESULT_GATING", "type": "requires" },
      { "from": "LEARN_SCORE_AND_RESULT_GATING", "to":
  "LEARN_SCORE_SUMMARY_CALC", "type": "requires" },
      { "from": "LEARN_SCORE_AND_RESULT_GATING", "to":
  "LEARN_SHOW_PER_PROBLEM_RESULT", "type": "requires" },
      { "from": "LEARN_STORE_RESULT_SCHEMA_BULK", "to":
  "LEARN_LOCALSTORAGE_SAVE_BULK", "type": "requires" },
      { "from": "LEARN_STORE_RESULT_SCHEMA_BULK", "to":
  "LEARN_LOCALSTORAGE_RESTORE_BULK", "type": "requires" },
      { "from": "LEARN_LOCALSTORAGE_VALIDATE_SHAPE", "to":
  "LEARN_LOCALSTORAGE_RESTORE_BULK", "type": "requires" },
      { "from":
  "LEARN_LOCALSTORAGE_MIGRATION_LEGACY_PARTIAL", "to":
  "LEARN_LOCALSTORAGE_RESTORE_BULK", "type": "requires" },
      { "from": "LEARN_LOCALSTORAGE_RESTORE_BULK", "to":
  "LEARN_GRADED_STATE_FLAG", "type": "requires" },
      { "from": "LEARN_RESET_CLEAR_STORAGE", "to":
  "LEARN_RESET_UI_STATE", "type": "requires" },
      { "from": "LEARN_AFTER_GRADE_EDIT_POLICY", "to":
  "LEARN_SCORE_AND_RESULT_GATING", "type": "requires" },
      { "from": "LEARN_BULK_GRADE_ALL_ACTION", "to":
  "LEARN_REMOVE_PER_PROBLEM_SUBMIT", "type": "requires" }
    ],
    "remove_edges": [],
    "notes": [
      { "claim": "LearnPage는 submitProblem으로 문제별 채점
  후 submissions를 localStorage에 merge 저장한다.",
  "reason": "LearnPage.tsx의 submitProblem과
  StoredResult{submissions} setItem 흐름을 확인.",
  "confidence": 0.86 },
      { "claim": "disabled 판정은
  normalizeNumericInput(answer).length>0 기준으로만 '입력
  됨'을 판정해야 한다.", "reason": "grading이
  normalizeNumericInput을 사용하므로 원문 기준 disabled는 활
  성/채점 불일치를 만든다.", "confidence": 0.82 },
      { "claim": "현재 score는 problems가 있으면 채점 전에도
  0/N이 노출될 수 있어 hasGraded 게이팅이 필요하다.",
  "reason": "score 계산은 resultByProblemId가 비어도
  {correct:0,total:N}을 반환한다.", "confidence": 0.74 },
      { "claim": "legacy partial(submissions 일부) 데이터는
  bulk UX에서 복원/점수/표시와 충돌하므로 정책이 필요하다.",
  "reason": "기존 per-problem 저장은 submissions를 merge하여
  부분 데이터가 정상적으로 생성된다.", "confidence": 0.74 },
      { "claim": "다시 풀기는 localStorage 키 삭제만으로는
  충분하지 않고 UI state(answer/result/flags) 리셋이 필요하
  다.", "reason": "LearnPage는 answerByProblemId/
  resultByProblemId를 state로 유지하므로 화면이 남을 수 있
  다.", "confidence": 0.78 },
      { "claim": "일괄 제출은 setItem 1회로 전체 submissions
  를 저장해야 저장/복원/초기화 계약이 단순해진다.",
  "reason": "요구사항은 일괄 채점 후 한 번에 저장이며, merge
  저장은 partial을 필연적으로 만든다.", "confidence": 0.8 }
    ]
  }

  ## Standards Tags (내부 태그)

  - 추가된 태그: LEARN_MAP_CURRENT_SUBMIT_FLOW,
    LEARN_DOCUMENT_STORED_RESULT_SCHEMA,
    LEARN_IDENTIFY_STORAGE_KEY,
    LEARN_REMOVE_PER_PROBLEM_SUBMIT,
    LEARN_ADD_BULK_GRADE_BUTTON,
    LEARN_DISABLED_USES_NORMALIZE_NUMERIC_INPUT,
    LEARN_HANDLE_EMPTY_PROBLEMS,
    LEARN_ALL_ANSWERED_NORMALIZED,
    LEARN_DISABLED_EDGECASES_12,
    LEARN_BULK_GRADE_ALL_ACTION, LEARN_BUILD_RESULT_MAP,
    LEARN_SCORE_SUMMARY_CALC, LEARN_GRADED_STATE_FLAG,
    LEARN_SCORE_AND_RESULT_GATING,
    LEARN_SHOW_PER_PROBLEM_RESULT,
    LEARN_STORE_RESULT_SCHEMA_BULK,
    LEARN_LOCALSTORAGE_VALIDATE_SHAPE,
    LEARN_LOCALSTORAGE_SAVE_BULK,
    LEARN_LOCALSTORAGE_RESTORE_BULK,
    LEARN_LOCALSTORAGE_MIGRATION_LEGACY_PARTIAL,
    LEARN_RESET_CLEAR_STORAGE, LEARN_RESET_UI_STATE,
    LEARN_AFTER_GRADE_EDIT_POLICY
  - 수정된 태그: (없음)

  [/R1 Coverage Report]

  ###DONE:6ca9c9bcbc###




•         
  └ Read research_li2068on1b.md
                                                 
                                 
    Read research_f9206        

─ Worked for 2m 30s ────────────────                        


• ###BEGIN:f92068ab1b###

  ## Coverage Gap Report

  ### 1. 누락된 기초 개념 (최소 10개)

  | # | 개념명 | 누락 이유 | 심각도 |
  |---|--------|----------|--------|
  | 1 | 현재 LearnPage 단건 제출/저장 흐름 기준선 | 기존
  submitProblem/저장 merge 동작을 알아야 bulk 전환 시 기능
  공백/회귀를 줄임 | 높음 |
  | 2 | localStorage 키 계약 식별 | 저장/복원/초기화가 동일
  키(curriculum-viewer:learn:lastResult:${nodeId})에 의존 |
  높음 |
  | 3 | StoredResult{submissions} 스키마 및 partial 의미 |
  기존 per-problem 저장은 submissions 일부만 남기는 데이터가
  정상 생성되어 bulk UX와 충돌 가능 | 높음 |
  | 4 | 문제 카드별 제출 버튼 제거 범위 | 요구사항 1) 핵심
  변경인데 현재 UI는 per-problem 제출 경로가 존재 | 높음 |
  | 5 | 하단 단일 버튼(채점하기) UX/상태 정의 | bulk UX의 단
  일 진입점(라벨/disabled/재채점)을 정의해야 동작/표시가 일
  관됨 | 높음 |
  | 6 | 미입력 판정 기준 정합화(normalize) | disabled 판정이
  normalizeNumericInput과 불일치하면 " , " 등에서 UX가 붕괴
  | 높음 |
  | 7 | allAnswered 계산(정규화+problems[] 기준) | “모든 문
  제 답 입력 전까지 disabled”를 로딩/문제 수 변화 포함 안정
  적으로 계산해야 함 | 높음 |
  | 8 | 입력 엣지케이스 벡터(12종+) | "", " ", ",", " , ",
  "0", "-0", "1,234", "+", ".", "Infinity" 등에서 기대값이
  흔들림 | 중 |
  | 9 | 일괄 채점 gradeAll 동작 정의 | 현재는 단건 채점만 가
  능하므로 problems 전체 순회 채점 액션이 필요 | 높음 |
  |10| resultByProblemId 생성/집계 기준 | 점수/결과 표시/저
  장을 problemId로 정렬하는 중간 표현이 필요 | 중 |
  |11| hasGraded(채점 전/후) 플래그 | 채점 전 0/N 노출 및
  legacy partial 결과 노출 혼선을 막을 표시 기준이 필요 | 중
  |
  |12| 결과/점수 표시 게이팅 규칙 | 채점 후에만 점수/정오/정
  답을 표시해야 UX가 일관되고 partial 혼선을 줄임 | 중 |
  |13| 일괄 저장(채점 후 1회 snapshot) | 요구사항 3) “일괄
  채점 후 한 번에 저장”으로 시점을 전환해야 함 | 높음 |
  |14| 복원 파이프라인(shape validate+정책) | 잘못된/legacy
  데이터로 인한 런타임 오류 및 UX 꼬임을 방지해야 함 | 중 |
  |15| 다시 풀기(키 삭제+UI state 리셋) | storage 삭제만으로
  는 화면이 즉시 초기화되지 않아 answer/result/flags 리셋이
  필요 | 높음 |

  ### 2. 과잉 난이도/불필요 선행 (최소 5개)

  | # | 개념명 | 과잉 이유 | 조치 제안 |
  |---|--------|----------|----------|
  | 1 | 서버 연동/DB 저장 | Out of Scope이며 localStorage 요
  구를 흐림 | 금지(후속 티켓) |
  | 2 | 문제 타입 확장(객관식/서술형) | 범위 외이며 UI/채점/
  저장 설계가 폭증 | 금지(후속 티켓) |
  | 3 | grading 정책 확장(허용오차/분수/근사) | bulk 제출 UX
  와 무관하고 회귀 위험 증가 | 기존 gradeNumericAnswer 유지
  |
  | 4 | 문제은행/커리큘럼 JSON 스키마 변경 | 데이터 구조 변
  경은 범위 밖, 회귀 위험 큼 | 기존 스키마 유지 |
  | 5 | 전역 상태관리 도입(Redux/Zustand) | LearnPage 단일
  화면 상태로 충분 | 도입 금지 |
  | 6 | UI 대규모 리디자인/애니메이션 | 요구사항 충족과 무관
  하고 일정 리스크만 증가 | 최소 UI 변경 |

  ### 3. 학습 순서상 위험한 점프 (최소 5개)

  | # | From → To | 점프 이유 | 브릿지 제안 |
  |---|-----------|----------|------------|
  | 1 | per-problem 제출 제거 → bulk 채점 미구현 | 제거만 하
  면 채점/저장 경로가 사라져 기능 공백 발생 | bulk 버튼
  +gradeAll+저장 구현 후 제거 |
  | 2 | 원문 disabled → 정규화 채점 | " , " 등에서 활성/비활
  성과 채점 기준이 엇갈려 UX 붕괴 | normalizeNumericInput 기
  반으로 미입력 판정 통일 |
  | 3 | bulk 버튼 추가 → allAnswered 부재 | disabled 조건이
  불명확해 조기 활성/비활성이 흔들림 | problems[] 기반
  allAnswered(정규화) 먼저 고정 |
  | 4 | 저장 구현 → 복원/검증 미정 | 파싱 실패/필드 누락 시
  런타임 오류 및 상태 꼬임 | schema+shape validate+예외 처리
  추가 |
  | 5 | legacy partial 복원 → 결과 노출 | 부분 submissions가
  “채점됨”처럼 보이면 오해/혼선 발생 | partial 감지 시
  hasGraded=false 및 재채점 유도 |
  | 6 | 점수 표시 → hasGraded 미도입 | 채점 전 0/N 노출은
  “이미 채점됨” 오해 유발 | hasGraded 게이팅 후 채점 후에만
  노출 |
  | 7 | 초기화(키 삭제만) → UI 잔상 | storage만 지우면
  answer/result/flags가 화면에 남음 | 키 삭제 + UI state 리
  셋 동시 수행 |

  ## Graph Patch JSON

  {
    "researcher": "R1",
    "scope": "curriculum_viewer_learning_bulk_submit_v1",
    "add_nodes": [
      { "id": "LEARN_MAP_CURRENT_SUBMIT_FLOW", "type":
  "micro", "name_ko": "현재 per-problem 제출/저장 흐름 요
  약", "domain": "FE", "rep": "C" },
      { "id": "LEARN_IDENTIFY_STORAGE_KEY", "type": "micro",
  "name_ko": "localStorage 키 포맷 식별", "domain": "FE",
  "rep": "C" },
      { "id": "LEARN_DOCUMENT_STORED_RESULT_SCHEMA", "type":
  "micro", "name_ko": "StoredResult/submissions 스키마 확
  인", "domain": "FE", "rep": "C" },
      { "id": "LEARN_REMOVE_PER_PROBLEM_SUBMIT", "type":
  "micro", "name_ko": "문제 카드별 제출 버튼 제거",
  "domain": "FE", "rep": "P" },
      { "id": "LEARN_ADD_BULK_GRADE_BUTTON", "type":
  "micro", "name_ko": "하단 단일 채점하기 버튼 추가",
  "domain": "FE", "rep": "P" },
      { "id": "LEARN_DISABLED_USES_NORMALIZE_NUMERIC_INPUT",
  "type": "micro", "name_ko": "미입력 판정 기준을
  normalizeNumericInput과 일치", "domain": "FE", "rep":
  "C" },
      { "id": "LEARN_ALL_ANSWERED_NORMALIZED", "type":
  "micro", "name_ko": "allAnswered 계산(정규화 기반)",
  "domain": "FE", "rep": "P" },
      { "id": "LEARN_DISABLED_EDGECASES_12", "type":
  "micro", "name_ko": "입력 엣지케이스 12종 테스트 벡터",
  "domain": "QA", "rep": "C" },
      { "id": "LEARN_BULK_GRADE_ALL_ACTION", "type":
  "micro", "name_ko": "일괄 채점 액션(전체 순회)", "domain":
  "FE", "rep": "P" },
      { "id": "LEARN_BUILD_RESULT_MAP", "type": "micro",
  "name_ko": "문제별 결과 맵(resultByProblemId) 생성",
  "domain": "FE", "rep": "P" },
      { "id": "LEARN_SCORE_SUMMARY_CALC", "type": "micro",
  "name_ko": "총점 X/N 집계 로직", "domain": "FE", "rep":
  "P" },
      { "id": "LEARN_GRADED_STATE_FLAG", "type": "micro",
  "name_ko": "채점 전/후 상태 플래그(hasGraded) 정의",
  "domain": "FE", "rep": "C" },
      { "id": "LEARN_SCORE_AND_RESULT_GATING", "type":
  "micro", "name_ko": "채점 후에만 점수/결과 표시(게이팅)",
  "domain": "FE", "rep": "P" },
      { "id": "LEARN_SHOW_PER_PROBLEM_RESULT", "type":
  "micro", "name_ko": "문제별 정오/정답 표시(일괄 채점 후)",
  "domain": "FE", "rep": "P" },
      { "id": "LEARN_STORE_RESULT_SCHEMA_BULK", "type":
  "micro", "name_ko": "bulk 저장 시점/계약 정의(전체
  submissions 저장)", "domain": "FE", "rep": "C" },
      { "id": "LEARN_LOCALSTORAGE_SAVE_BULK", "type":
  "micro", "name_ko": "일괄 채점 후 submissions를 1회 저장",
  "domain": "FE", "rep": "P" },
      { "id": "LEARN_LOCALSTORAGE_VALIDATE_SHAPE", "type":
  "micro", "name_ko": "복원 데이터 파싱/shape validate",
  "domain": "FE", "rep": "C" },
      { "id": "LEARN_LOCALSTORAGE_RESTORE_BULK", "type":
  "micro", "name_ko": "재진입/새로고침 시 답안/결과 복원",
  "domain": "FE", "rep": "P" },
      { "id": "LEARN_LOCALSTORAGE_MIGRATION_LEGACY_PARTIAL",
  "type": "micro", "name_ko": "legacy partial(submissions 일
  부) 처리 정책", "domain": "FE", "rep": "C" },
      { "id": "LEARN_RESET_CLEAR_STORAGE", "type": "micro",
  "name_ko": "다시 풀기: localStorage 키 삭제", "domain":
  "FE", "rep": "P" },
      { "id": "LEARN_RESET_UI_STATE", "type": "micro",
  "name_ko": "다시 풀기: UI state 리셋", "domain": "FE",
  "rep": "P" },
      { "id": "LEARN_AFTER_GRADE_EDIT_POLICY", "type":
  "micro", "name_ko": "채점 후 답 수정 정책(결과 초기화/재채
  점)", "domain": "UX", "rep": "C" }
    ],
    "merge_aliases": [],
    "add_edges": [
      { "from":
  "LEARN_DISABLED_USES_NORMALIZE_NUMERIC_INPUT", "to":
  "LEARN_ALL_ANSWERED_NORMALIZED", "type": "requires" },
      { "from": "LEARN_ALL_ANSWERED_NORMALIZED", "to":
  "LEARN_ADD_BULK_GRADE_BUTTON", "type": "requires" },
      { "from": "LEARN_ADD_BULK_GRADE_BUTTON", "to":
  "LEARN_BULK_GRADE_ALL_ACTION", "type": "requires" },
      { "from": "LEARN_BULK_GRADE_ALL_ACTION", "to":
  "LEARN_BUILD_RESULT_MAP", "type": "requires" },
      { "from": "LEARN_BULK_GRADE_ALL_ACTION", "to":
  "LEARN_GRADED_STATE_FLAG", "type": "requires" },
      { "from": "LEARN_BUILD_RESULT_MAP", "to":
  "LEARN_SCORE_SUMMARY_CALC", "type": "requires" },
      { "from": "LEARN_BUILD_RESULT_MAP", "to":
  "LEARN_SHOW_PER_PROBLEM_RESULT", "type": "requires" },
      { "from": "LEARN_GRADED_STATE_FLAG", "to":
  "LEARN_SCORE_AND_RESULT_GATING", "type": "requires" },
      { "from": "LEARN_SCORE_AND_RESULT_GATING", "to":
  "LEARN_SCORE_SUMMARY_CALC", "type": "requires" },
      { "from": "LEARN_SCORE_AND_RESULT_GATING", "to":
  "LEARN_SHOW_PER_PROBLEM_RESULT", "type": "requires" },
      { "from": "LEARN_IDENTIFY_STORAGE_KEY", "to":
  "LEARN_LOCALSTORAGE_SAVE_BULK", "type": "requires" },
      { "from": "LEARN_IDENTIFY_STORAGE_KEY", "to":
  "LEARN_LOCALSTORAGE_RESTORE_BULK", "type": "requires" },
      { "from": "LEARN_IDENTIFY_STORAGE_KEY", "to":
  "LEARN_RESET_CLEAR_STORAGE", "type": "requires" },
      { "from": "LEARN_STORE_RESULT_SCHEMA_BULK", "to":
  "LEARN_LOCALSTORAGE_SAVE_BULK", "type": "requires" },
      { "from": "LEARN_STORE_RESULT_SCHEMA_BULK", "to":
  "LEARN_LOCALSTORAGE_RESTORE_BULK", "type": "requires" },
      { "from": "LEARN_LOCALSTORAGE_VALIDATE_SHAPE", "to":
  "LEARN_LOCALSTORAGE_RESTORE_BULK", "type": "requires" },
      { "from": "LEARN_RESET_CLEAR_STORAGE", "to":
  "LEARN_RESET_UI_STATE", "type": "requires" }
    ],
    "remove_edges": [],
    "notes": [
      { "claim": "LearnPage는 submitProblem으로 문제별 채점
  후 submissions를 localStorage에 merge 저장한다.",
  "reason": "LearnPage.tsx에서 submitProblem과
  StoredResult{submissions} setItem 흐름이 확인된다.",
  "confidence": 0.86 },
      { "claim": "disabled의 '입력됨' 판정은
  normalizeNumericInput(answer).length>0 기준으로 통일해야
  한다.", "reason": "grading이 normalizeNumericInput을 사용
  하므로 원문 기준 disabled는 채점과 불일치해 UX를 망친다.",
  "confidence": 0.84 },
      { "claim": "점수/정오/정답 표시는 hasGraded로 게이트해
  야 채점 전 0/N 및 partial 노출 혼선을 줄인다.", "reason":
  "현재 score는 problems가 있으면 result가 비어도 0/N을 표시
  할 수 있어 오해를 유발한다.", "confidence": 0.74 },
      { "claim": "legacy partial(submissions 일부) 처리는 조
  건부 정책이며 restore를 migration에 과잉 잠금(requires)하
  지 않는 편이 안전하다.", "reason": "migration은 legacy가
  존재할 때만 필요하고 reviewer도 requires 과잉 잠금을 지적
  했다.", "confidence": 0.72 },
      { "claim": "per-problem 제출 제거는 권장 순서이며,
  bulk 경로(버튼/gradeAll/저장)가 준비된 뒤 제거해야 기능 공
  백을 피한다.", "reason": "제거가 먼저면 채점/저장 경로가
  사라져 사용자가 진행 불가 상태가 된다.", "confidence":
  0.72 },
      { "claim": "다시 풀기는 localStorage 삭제와 UI
  state(answer/result/flags) 리셋을 함께 수행해야 한다.",
  "reason": "저장소만 지우면 화면에 남은 상태 때문에 초기화
  가 즉시 반영되지 않는다.", "confidence": 0.8 },
      { "claim": "Graph Patch JSON은 strict JSON(json.loads
  통과)으로 문자열 내부 줄바꿈 없이 출력되어야 한다.",
  "reason": "문자열 줄바꿈은 파싱 실패를 유발해 결합 패치 검
  증/병합 파이프라인을 중단시킨다.", "confidence": 0.9 }
    ]
  }

  ## Standards Tags (내부 태그)

  - 추가된 태그: LEARN_MAP_CURRENT_SUBMIT_FLOW,
    LEARN_IDENTIFY_STORAGE_KEY,
    LEARN_DOCUMENT_STORED_RESULT_SCHEMA,
    LEARN_REMOVE_PER_PROBLEM_SUBMIT,
    LEARN_ADD_BULK_GRADE_BUTTON,
    LEARN_DISABLED_USES_NORMALIZE_NUMERIC_INPUT,
    LEARN_ALL_ANSWERED_NORMALIZED,
    LEARN_DISABLED_EDGECASES_12,
    LEARN_BULK_GRADE_ALL_ACTION, LEARN_BUILD_RESULT_MAP,
    LEARN_SCORE_SUMMARY_CALC, LEARN_GRADED_STATE_FLAG,
    LEARN_SCORE_AND_RESULT_GATING,
    LEARN_SHOW_PER_PROBLEM_RESULT,
    LEARN_STORE_RESULT_SCHEMA_BULK,
    LEARN_LOCALSTORAGE_SAVE_BULK,
    LEARN_LOCALSTORAGE_VALIDATE_SHAPE,
    LEARN_LOCALSTORAGE_RESTORE_BULK,
    LEARN_LOCALSTORAGE_MIGRATION_LEGACY_PARTIAL,
    LEARN_RESET_CLEAR_STORAGE, LEARN_RESET_UI_STATE,
    LEARN_AFTER_GRADE_EDIT_POLICY
  - 수정된 태그: (없음)

  [/R1 Coverage Report]

  ###DONE:f92068ab1b###


› -> /mnt/c/Users/irron/Desktop/my/web_service_new/
  calculate_math/.agents/inbox/research_12f4bbe5cf.md


  84% context left



› Request 12f4bbe5cf: 아래 파일(티켓 지시)을 읽고 결과를 이
  터미널에 Output Format대로 그대로 출력해줘. 가능하면 repo
  파일을 생성/수정하지 말고, 마지막에 마커를 그대로 출력해.
  -> /mnt/c/Users/irron/Desktop/my/web_service_new/
  calculate_math/.agents/inbox/research_12f4bbe5cf.md



•         
  └ Read research_12f4bbe5cf.md
                                                 
                                 
    Read research_12f4b        

─ Worked for 1m 41s ────────────────                        


• ###BEGIN:12f4bbe5cf###

  ## Coverage Gap Report

  ### 1. 누락된 기초 개념 (최소 10개)

  | # | 개념명 | 누락 이유 | 심각도 |
  |---|--------|----------|--------|
  | 1 | 현재 LearnPage 단건 제출/저장 흐름 기준선 | per-
  problem submitProblem/저장 merge를 이해해야 bulk 전환 회귀
  를 줄임 | 높음 |
  | 2 | localStorage 키 계약 식별 | 저장/복원/초기화가 동일
  키(curriculum-viewer:learn:lastResult:${nodeId})에 의존 |
  높음 |
  | 3 | StoredResult{submissions} 스키마 및 legacy partial
  의미 | 기존 merge 저장으로 부분 submissions가 정상 생성되
  어 bulk UX와 충돌 가능 | 높음 |
  | 4 | 문제 카드별 제출 버튼 제거 범위 | 요구사항 1) 핵심
  변경인데 현재 per-problem 제출 경로가 존재 | 높음 |
  | 5 | 하단 단일 버튼(채점하기) UX/상태 정의 | bulk UX의 단
  일 진입점(라벨/disabled/재채점)을 정의해야 함 | 높음 |
  | 6 | 미입력 판정 기준 정합화(normalize) | disabled 판정이
  normalizeNumericInput과 불일치하면 UX가 붕괴 | 높음 |
  | 7 | allAnswered 계산(정규화+problems[] 기준) | “모든 문
  제 입력 전까지 disabled”를 로딩/문제 수 변화 포함 안정화
  필요 | 높음 |
  | 8 | 입력 엣지케이스 벡터(12종+) | "", " ", ",", "0",
  "-0", "1,234", "+", ".", "Infinity" 등 기대값을 고정해야
  함 | 중 |
  | 9 | 일괄 채점 gradeAll 동작 정의 | 현재 단건 채점만 가능
  하므로 problems 전체 순회 채점 액션이 필요 | 높음 |
  |10| resultByProblemId 생성/단일 소스화 | 점수 집계/문제별
  결과 표시/저장을 동일 키(problemId)로 정렬해야 함 | 중 |
  |11| hasGraded(채점 전/후) 플래그 | 채점 전 0/N 노출 및
  partial 결과 노출 혼선을 막을 표시 기준이 필요 | 중 |
  |12| 점수/정오/정답 표시 게이팅 | 채점 후에만 결과를 표시
  해야 UX가 일관되고 legacy 혼선을 줄임 | 중 |
  |13| 일괄 저장(채점 후 1회 snapshot) | 요구사항 3) “한 번
  에 저장”으로 시점을 전환해야 함 | 높음 |
  |14| 복원 파이프라인(shape validate+정책) | 잘못된/legacy
  데이터로 인한 런타임 오류 및 상태 꼬임을 방지해야 함 | 중
  |
  |15| 다시 풀기(키 삭제+UI state 리셋) | storage 삭제만으로
  는 화면이 즉시 초기화되지 않아 state 리셋이 필요 | 높음 |

  ### 2. 과잉 난이도/불필요 선행 (최소 5개)

  | # | 개념명 | 과잉 이유 | 조치 제안 |
  |---|--------|----------|----------|
  | 1 | 서버 연동/DB 저장 | Out of Scope이며 localStorage 요
  구를 흐림 | 금지(후속 티켓) |
  | 2 | 문제 타입 확장(객관식/서술형) | 범위 외이며 UI/채점/
  저장 설계가 폭증 | 금지(후속 티켓) |
  | 3 | grading 정책 확장(허용오차/근사/분수) | bulk 제출 UX
  와 무관하고 회귀 위험 증가 | 기존 gradeNumericAnswer 유지
  |
  | 4 | 문제은행/커리큘럼 JSON 스키마 변경 | 데이터 구조 변
  경은 범위 밖, 회귀 위험 큼 | 기존 스키마 유지 |
  | 5 | 전역 상태관리 도입(Redux/Zustand) | LearnPage 단일
  화면 상태로 충분 | 도입 금지 |
  | 6 | UI 대규모 리디자인/애니메이션 | 요구사항 충족과 무관
  하고 일정 리스크만 증가 | 최소 변경 |

  ### 3. 학습 순서상 위험한 점프 (최소 5개)

  | # | From → To | 점프 이유 | 브릿지 제안 |
  |---|-----------|----------|------------|
  | 1 | LEARN_REMOVE_PER_PROBLEM_SUBMIT →
  LEARN_BULK_GRADE_ALL_ACTION | 제거가 먼저면 채점/저장 경로
  가 사라져 기능 공백 발생 | bulk 버튼+gradeAll+저장 준비 후
  제거 |
  | 2 | 원문 disabled 판정 → 정규화 채점 | " , " 등에서 활
  성/비활성과 채점 기준이 엇갈려 UX 붕괴 |
  normalizeNumericInput 기반으로 미입력 판정 통일 |
  | 3 | LEARN_ADD_BULK_GRADE_BUTTON →
  LEARN_ALL_ANSWERED_NORMALIZED | disabled 계산이 불명확하면
  조기 활성/비활성이 흔들림 | problems[] 기준 allAnswered(정
  규화) 먼저 고정 |
  | 4 | LEARN_LOCALSTORAGE_SAVE_BULK →
  LEARN_LOCALSTORAGE_RESTORE_BULK | 검증 없이 복원하면 파싱
  실패/필드 누락으로 런타임 오류 | schema+shape validate+예
  외 처리 추가 |
  | 5 | legacy partial 복원 → 결과/점수 노출 | 부분
  submissions가 “채점됨”처럼 보이면 오해/혼선 발생 | partial
  감지 시 hasGraded=false 및 재채점 유도 |
  | 6 | 점수 표시 → hasGraded 미도입 | 채점 전 0/N 노출은
  “이미 채점됨” 오해 유발 | hasGraded 게이팅 후 채점 후에만
  노출 |
  | 7 | LEARN_RESET_CLEAR_STORAGE → UI 잔상 유지 | storage만
  지우면 answer/result/flags가 화면에 남음 | 키 삭제 + UI
  state 리셋 동시 수행 |

  ## Graph Patch JSON

  {
    "researcher": "R1",
    "scope": "curriculum_viewer_learning_bulk_submit_v1",
    "add_nodes": [
      { "id": "LEARN_MAP_CURRENT_SUBMIT_FLOW", "type":
  "micro", "name_ko": "현재 per-problem 제출/저장 흐름 요
  약", "domain": "FE", "rep": "C", "confidence": 0.86 },
      { "id": "LEARN_IDENTIFY_STORAGE_KEY", "type": "micro",
  "name_ko": "localStorage 키 포맷 식별", "domain": "FE",
  "rep": "C", "confidence": 0.82 },
      { "id": "LEARN_DOCUMENT_STORED_RESULT_SCHEMA", "type":
  "micro", "name_ko": "StoredResult/submissions 스키마 확
  인", "domain": "FE", "rep": "C", "confidence": 0.8 },
      { "id": "LEARN_REMOVE_PER_PROBLEM_SUBMIT", "type":
  "micro", "name_ko": "문제 카드별 제출 버튼 제거",
  "domain": "FE", "rep": "P", "confidence": 0.85 },
      { "id": "LEARN_ADD_BULK_GRADE_BUTTON", "type":
  "micro", "name_ko": "하단 단일 채점하기 버튼 추가",
  "domain": "FE", "rep": "P", "confidence": 0.85 },
      { "id": "LEARN_DISABLED_USES_NORMALIZE_NUMERIC_INPUT",
  "type": "micro", "name_ko": "미입력 판정 기준을
  normalizeNumericInput과 일치", "domain": "FE", "rep": "C",
  "confidence": 0.84 },
      { "id": "LEARN_ALL_ANSWERED_NORMALIZED", "type":
  "micro", "name_ko": "allAnswered 계산(정규화 기반)",
  "domain": "FE", "rep": "P", "confidence": 0.82 },
      { "id": "LEARN_DISABLED_EDGECASES_12", "type":
  "micro", "name_ko": "입력 엣지케이스 12종 테스트 벡터",
  "domain": "QA", "rep": "C", "confidence": 0.78 },
      { "id": "LEARN_BULK_GRADE_ALL_ACTION", "type":
  "micro", "name_ko": "일괄 채점 액션(전체 순회)", "domain":
  "FE", "rep": "P", "confidence": 0.84 },
      { "id": "LEARN_BUILD_RESULT_MAP", "type": "micro",
  "name_ko": "문제별 결과 맵(resultByProblemId) 생성",
  "domain": "FE", "rep": "P", "confidence": 0.78 },
      { "id": "LEARN_GRADED_STATE_FLAG", "type": "micro",
  "name_ko": "채점 전/후 상태 플래그(hasGraded) 정의",
  "domain": "FE", "rep": "C", "confidence": 0.76 },
      { "id": "LEARN_SCORE_SUMMARY_CALC", "type": "micro",
  "name_ko": "총점 X/N 집계 로직", "domain": "FE", "rep":
  "P", "confidence": 0.75 },
      { "id": "LEARN_SCORE_AND_RESULT_GATING", "type":
  "micro", "name_ko": "채점 후에만 점수/결과 표시(게이팅)",
  "domain": "FE", "rep": "P", "confidence": 0.74 },
      { "id": "LEARN_SHOW_PER_PROBLEM_RESULT", "type":
  "micro", "name_ko": "문제별 정오/정답 표시(일괄 채점 후)",
  "domain": "FE", "rep": "P", "confidence": 0.78 },
      { "id": "LEARN_STORE_RESULT_SCHEMA_BULK", "type":
  "micro", "name_ko": "bulk 저장 시점/계약 정의(전체 저장)",
  "domain": "FE", "rep": "C", "confidence": 0.76 },
      { "id": "LEARN_LOCALSTORAGE_SAVE_BULK", "type":
  "micro", "name_ko": "일괄 채점 후 submissions를 1회 저장",
  "domain": "FE", "rep": "P", "confidence": 0.8 },
      { "id": "LEARN_LOCALSTORAGE_VALIDATE_SHAPE", "type":
  "micro", "name_ko": "복원 데이터 파싱/shape validate",
  "domain": "FE", "rep": "C", "confidence": 0.78 },
      { "id": "LEARN_LOCALSTORAGE_RESTORE_BULK", "type":
  "micro", "name_ko": "재진입/새로고침 시 답안/결과 복원",
  "domain": "FE", "rep": "P", "confidence": 0.78 },
      { "id": "LEARN_LOCALSTORAGE_MIGRATION_LEGACY_PARTIAL",
  "type": "micro", "name_ko": "legacy partial(submissions 일
  부) 처리 정책", "domain": "FE", "rep": "C", "confidence":
  0.72 },
      { "id": "LEARN_RESET_CLEAR_STORAGE", "type": "micro",
  "name_ko": "다시 풀기: localStorage 키 삭제", "domain":
  "FE", "rep": "P", "confidence": 0.82 },
      { "id": "LEARN_RESET_UI_STATE", "type": "micro",
  "name_ko": "다시 풀기: UI state 리셋", "domain": "FE",
  "rep": "P", "confidence": 0.78 },
      { "id": "LEARN_AFTER_GRADE_EDIT_POLICY", "type":
  "micro", "name_ko": "채점 후 답 수정 정책(결과 초기화/재채
  점)", "domain": "UX", "rep": "C", "confidence": 0.74 }
    ],
    "merge_aliases": [],
    "add_edges": [
      { "from":
  "LEARN_DISABLED_USES_NORMALIZE_NUMERIC_INPUT", "to":
  "LEARN_ALL_ANSWERED_NORMALIZED", "type": "requires",
  "confidence": 0.84 },
      { "from": "LEARN_ALL_ANSWERED_NORMALIZED", "to":
  "LEARN_ADD_BULK_GRADE_BUTTON", "type": "requires",
  "confidence": 0.7 },
      { "from": "LEARN_ADD_BULK_GRADE_BUTTON", "to":
  "LEARN_BULK_GRADE_ALL_ACTION", "type": "requires",
  "confidence": 0.78 },
      { "from": "LEARN_BULK_GRADE_ALL_ACTION", "to":
  "LEARN_BUILD_RESULT_MAP", "type": "requires",
  "confidence": 0.78 },
      { "from": "LEARN_BULK_GRADE_ALL_ACTION", "to":
  "LEARN_GRADED_STATE_FLAG", "type": "requires",
  "confidence": 0.72 },
      { "from": "LEARN_BUILD_RESULT_MAP", "to":
  "LEARN_SCORE_SUMMARY_CALC", "type": "requires",
  "confidence": 0.75 },
      { "from": "LEARN_BUILD_RESULT_MAP", "to":
  "LEARN_SHOW_PER_PROBLEM_RESULT", "type": "requires",
  "confidence": 0.78 },
      { "from": "LEARN_GRADED_STATE_FLAG", "to":
  "LEARN_SCORE_AND_RESULT_GATING", "type": "requires",
  "confidence": 0.76 },
      { "from": "LEARN_STORE_RESULT_SCHEMA_BULK", "to":
  "LEARN_LOCALSTORAGE_SAVE_BULK", "type": "requires",
  "confidence": 0.8 },
      { "from": "LEARN_STORE_RESULT_SCHEMA_BULK", "to":
  "LEARN_LOCALSTORAGE_RESTORE_BULK", "type": "requires",
  "confidence": 0.8 },
      { "from": "LEARN_IDENTIFY_STORAGE_KEY", "to":
  "LEARN_LOCALSTORAGE_SAVE_BULK", "type": "requires",
  "confidence": 0.82 },
      { "from": "LEARN_IDENTIFY_STORAGE_KEY", "to":
  "LEARN_LOCALSTORAGE_RESTORE_BULK", "type": "requires",
  "confidence": 0.82 },
      { "from": "LEARN_IDENTIFY_STORAGE_KEY", "to":
  "LEARN_RESET_CLEAR_STORAGE", "type": "requires",
  "confidence": 0.82 },
      { "from": "LEARN_LOCALSTORAGE_VALIDATE_SHAPE", "to":
  "LEARN_LOCALSTORAGE_RESTORE_BULK", "type": "requires",
  "confidence": 0.78 },
      { "from": "LEARN_RESET_CLEAR_STORAGE", "to":
  "LEARN_RESET_UI_STATE", "type": "requires", "confidence":
  0.78 }
    ],
    "remove_edges": [],
    "notes": [
      { "claim": "LearnPage는 submitProblem으로 문제별 채점
  후 submissions를 localStorage에 merge 저장한다.",
  "reason": "LearnPage.tsx에서 submissions를 기존 값과 병합
  해 setItem하는 흐름이 확인된다.", "confidence": 0.86 },
      { "claim": "미입력 판정(disabled)은
  normalizeNumericInput(answer).length>0 기준으로 통일해야
  한다.", "reason": "grading.ts가 normalizeNumericInput을 사
  용하므로 원문 기준 판정은 활성/채점 불일치를 만든다.",
  "confidence": 0.84 },
      { "claim": "현재 점수 표시는 채점 전에도 0/N이 노출될
  수 있어 hasGraded 게이팅이 필요하다.", "reason": "score는
  problems가 있으면 result가 비어도 correct=0,total=N을 표시
  할 수 있다.", "confidence": 0.74 },
      { "claim": "legacy partial 처리는 조건부 정책이며
  restore에 과잉 잠금(requires)으로 고정하지 않는 편이 안전
  하다.", "reason": "partial은 legacy 데이터가 존재할 때만
  발생하고 reviewer도 requires 과잉 잠금을 지적했다.",
  "confidence": 0.72 },
      { "claim": "다시 풀기는 localStorage 키 삭제와 UI
  state(answer/result/flags) 리셋을 함께 수행해야 한다.",
  "reason": "저장소만 지우면 화면에 남은 상태로 인해 초기화
  가 즉시 반영되지 않는다.", "confidence": 0.8 },
      { "claim": "Graph Patch JSON은 strict JSON(json.loads
  통과)으로 문자열 내부 줄바꿈 없이 출력되어야 한다.",
  "reason": "문자열 줄바꿈은 파싱 실패를 유발해 결합 검증/병
  합을 중단시킨다.", "confidence": 0.9 }
    ]
  }

  ## Standards Tags (내부 태그)

  - 추가된 태그: LEARN_MAP_CURRENT_SUBMIT_FLOW,
    LEARN_IDENTIFY_STORAGE_KEY,
    LEARN_DOCUMENT_STORED_RESULT_SCHEMA,
    LEARN_REMOVE_PER_PROBLEM_SUBMIT,
    LEARN_ADD_BULK_GRADE_BUTTON,
    LEARN_DISABLED_USES_NORMALIZE_NUMERIC_INPUT,
    LEARN_ALL_ANSWERED_NORMALIZED,
    LEARN_DISABLED_EDGECASES_12,
    LEARN_BULK_GRADE_ALL_ACTION, LEARN_BUILD_RESULT_MAP,
    LEARN_GRADED_STATE_FLAG, LEARN_SCORE_SUMMARY_CALC,
    LEARN_SCORE_AND_RESULT_GATING,
    LEARN_SHOW_PER_PROBLEM_RESULT,
    LEARN_STORE_RESULT_SCHEMA_BULK,
    LEARN_LOCALSTORAGE_SAVE_BULK,
    LEARN_LOCALSTORAGE_VALIDATE_SHAPE,
    LEARN_LOCALSTORAGE_RESTORE_BULK,
    LEARN_LOCALSTORAGE_MIGRATION_LEGACY_PARTIAL,
    LEARN_RESET_CLEAR_STORAGE, LEARN_RESET_UI_STATE,
    LEARN_AFTER_GRADE_EDIT_POLICY
  - 수정된 태그: (없음)

  [/R1 Coverage Report]

  ###DONE:12f4bbe5cf###


› -> /mnt/c/Users/irron/Desktop/my/web_service_new/
  calculate_math/.agents/inbox/research_ff7d0358ad.md


  82% context left



› Request ff7d0358ad: 아래 파일(티켓 지시)을 읽고 결과를 이
  터미널에 Output Format대로 그대로 출력해줘. 가능하면 repo
  파일을 생성/수정하지 말고, 마지막에 마커를 그대로 출력해.
  -> /mnt/c/Users/irron/Desktop/my/web_service_new/
  calculate_math/.agents/inbox/research_ff7d0358ad.md



•         
  └ Reli res Jrch_ff7d0358ad.md
                                                 
                                 
    Read research_ff7d0        

─ Worked for 50s ───────────────────                        


• ###BEGIN:ff7d0358ad###

  ## Coverage Gap Report

  ### 1. 누락된 기초 개념 (최소 10개)

  | # | 개념명 | 누락 이유 | 심각도 |
  |---|--------|----------|--------|
  | 1 | 현재 LearnPage 단건 제출/저장 흐름 기준선 | per-
  problem submitProblem/merge 저장을 알아야 bulk 전환 회귀를
  줄임 | 높음 |
  | 2 | localStorage 키 계약 식별 | 저장/복원/초기화가 동일
  키(curriculum-viewer:learn:lastResult:${nodeId})에 의존 |
  높음 |
  | 3 | StoredResult{submissions} 스키마 및 partial 의미 |
  기존 merge 저장으로 부분 submissions가 정상 생성되어 bulk
  UX와 충돌 가능 | 높음 |
  | 4 | 문제 카드별 제출 버튼 제거 범위 | 요구사항 1) 핵심
  변경인데 현재 per-problem 제출 경로가 존재 | 높음 |
  | 5 | 하단 단일 버튼(채점하기) UX/상태 정의 | bulk UX의 단
  일 진입점(라벨/disabled/재채점)을 정의해야 함 | 높음 |
  | 6 | 미입력 판정 기준 정합화(normalize) | disabled 판정이
  normalizeNumericInput과 불일치하면 UX가 붕괴 | 높음 |
  | 7 | allAnswered 계산(정규화+problems[] 기준) | “모든 문
  제 입력 전까지 disabled”를 로딩/문제 수 변화 포함 안정화
  필요 | 높음 |
  | 8 | 입력 엣지케이스 벡터(12종+) | "", " ", ",", " , ",
  "0", "-0", "1,234", "+", ".", "Infinity" 등 기대값 고정 필
  요 | 중 |
  | 9 | 일괄 채점 gradeAll 동작 정의 | 현재 단건 채점만 가능
  하므로 problems 전체 순회 채점 액션이 필요 | 높음 |
  |10| resultByProblemId 생성/단일 소스화 | 점수 집계/문제별
  표시/저장을 problemId keyed map으로 일관화해야 함 | 중 |
  |11| hasGraded(채점 전/후) 플래그 | 채점 전 0/N 노출 및
  legacy partial 결과 노출 혼선을 막을 표시 기준 필요 | 중 |
  |12| 점수/정오/정답 표시 게이팅 | 채점 후에만 결과를 표시
  해야 UX가 일관되고 partial 혼선을 줄임 | 중 |
  |13| 일괄 저장(채점 후 1회 snapshot) | 요구사항 3) “한 번
  에 저장”으로 시점을 전환해야 함 | 높음 |
  |14| 복원 파이프라인(shape validate+정책) | 잘못된/legacy
  데이터로 인한 런타임 오류 및 상태 꼬임 방지 필요 | 중 |
  |15| 다시 풀기(키 삭제+UI state 리셋) | storage 삭제만으로
  는 화면이 즉시 초기화되지 않아 state 리셋이 필요 | 높음 |

  ### 2. 과잉 난이도/불필요 선행 (최소 5개)

  | # | 개념명 | 과잉 이유 | 조치 제안 |
  |---|--------|----------|----------|
  | 1 | 서버 연동/DB 저장 | Out of Scope이며 localStorage 요
  구를 흐림 | 금지(후속 티켓) |
  | 2 | 문제 타입 확장(객관식/서술형) | 범위 외이며 UI/채점/
  저장 설계가 폭증 | 금지(후속 티켓) |
  | 3 | grading 정책 확장(허용오차/근사/분수) | bulk 제출 UX
  와 무관하고 회귀 위험 증가 | 기존 gradeNumericAnswer 유지
  |
  | 4 | 문제은행/커리큘럼 JSON 스키마 변경 | 데이터 구조 변
  경은 범위 밖, 회귀 위험 큼 | 기존 스키마 유지 |
  | 5 | 전역 상태관리 도입(Redux/Zustand) | LearnPage 단일
  화면 상태로 충분 | 도입 금지 |
  | 6 | UI 대규모 리디자인/애니메이션 | 요구사항 충족과 무관
  하고 일정 리스크만 증가 | 최소 변경 |

  ### 3. 학습 순서상 위험한 점프 (최소 5개)

  | # | From → To | 점프 이유 | 브릿지 제안 |
  |---|-----------|----------|------------|
  | 1 | per-problem 제출 제거 → bulk 채점 미구현 | 제거가 먼
  저면 채점/저장 경로가 사라져 기능 공백 발생 | bulk 버튼
  +gradeAll+저장 준비 후 제거 |
  | 2 | 원문 disabled 판정 → 정규화 채점 | " , " 등에서 활
  성/비활성과 채점 기준이 엇갈려 UX 붕괴 |
  normalizeNumericInput 기반으로 미입력 판정 통일 |
  | 3 | bulk 버튼 추가 → allAnswered 부재 | disabled 조건이
  불명확하면 조기 활성/비활성이 흔들림 | problems[] 기준
  allAnswered(정규화) 먼저 고정 |
  | 4 | 저장 구현 → 복원/검증 미정 | 파싱 실패/필드 누락으로
  런타임 오류 및 상태 꼬임 발생 | schema+shape validate+예외
  처리 추가 |
  | 5 | legacy partial 복원 → 결과/점수 노출 | 부분
  submissions가 “채점됨”처럼 보이면 오해/혼선 발생 | partial
  감지 시 hasGraded=false 및 재채점 유도 |
  | 6 | 점수 표시 → hasGraded 미도입 | 채점 전 0/N 노출은
  “이미 채점됨” 오해 유발 | hasGraded 게이팅 후 채점 후에만
  노출 |
  | 7 | 초기화(키 삭제만) → UI 잔상 | storage만 지우면
  answer/result/flags가 화면에 남음 | 키 삭제 + UI state 리
  셋 동시 수행 |

  ## Graph Patch JSON

  {
    "researcher": "R1",
    "scope": "curriculum_viewer_learning_bulk_submit_v1",
    "add_nodes": [
      { "id": "LEARN_MAP_CURRENT_SUBMIT_FLOW", "type":
  "micro", "name_ko": "현재 per-problem 제출/저장 흐름 요
  약", "domain": "FE", "rep": "C", "confidence": 0.86 },
      { "id": "LEARN_IDENTIFY_STORAGE_KEY", "type": "micro",
  "name_ko": "localStorage 키 포맷 식별", "domain": "FE",
  "rep": "C", "confidence": 0.82 },
      { "id": "LEARN_DOCUMENT_STORED_RESULT_SCHEMA", "type":
  "micro", "name_ko": "StoredResult/submissions 스키마 확
  인", "domain": "FE", "rep": "C", "confidence": 0.8 },
      { "id": "LEARN_REMOVE_PER_PROBLEM_SUBMIT", "type":
  "micro", "name_ko": "문제 카드별 제출 버튼 제거",
  "domain": "FE", "rep": "P", "confidence": 0.85 },
      { "id": "LEARN_ADD_BULK_GRADE_BUTTON", "type":
  "micro", "name_ko": "하단 단일 채점하기 버튼 추가",
  "domain": "FE", "rep": "P", "confidence": 0.85 },
      { "id": "LEARN_DISABLED_USES_NORMALIZE_NUMERIC_INPUT",
  "type": "micro", "name_ko": "미입력 판정 기준을
  normalizeNumericInput과 일치", "domain": "FE", "rep": "C",
  "confidence": 0.84 },
      { "id": "LEARN_ALL_ANSWERED_NORMALIZED", "type":
  "micro", "name_ko": "allAnswered 계산(정규화 기반)",
  "domain": "FE", "rep": "P", "confidence": 0.82 },
      { "id": "LEARN_DISABLED_EDGECASES_12", "type":
  "micro", "name_ko": "입력 엣지케이스 12종 테스트 벡터",
  "domain": "QA", "rep": "C", "confidence": 0.78 },
      { "id": "LEARN_BULK_GRADE_ALL_ACTION", "type":
  "micro", "name_ko": "일괄 채점 액션(전체 순회)", "domain":
  "FE", "rep": "P", "confidence": 0.84 },
      { "id": "LEARN_BUILD_RESULT_MAP", "type": "micro",
  "name_ko": "문제별 결과 맵(resultByProblemId) 생성",
  "domain": "FE", "rep": "P", "confidence": 0.78 },
      { "id": "LEARN_GRADED_STATE_FLAG", "type": "micro",
  "name_ko": "채점 전/후 상태 플래그(hasGraded) 정의",
  "domain": "FE", "rep": "C", "confidence": 0.76 },
      { "id": "LEARN_SCORE_SUMMARY_CALC", "type": "micro",
  "name_ko": "총점 X/N 집계 로직", "domain": "FE", "rep":
  "P", "confidence": 0.75 },
      { "id": "LEARN_SCORE_AND_RESULT_GATING", "type":
  "micro", "name_ko": "채점 후에만 점수/결과 표시(게이팅)",
  "domain": "FE", "rep": "P", "confidence": 0.74 },
      { "id": "LEARN_SHOW_PER_PROBLEM_RESULT", "type":
  "micro", "name_ko": "문제별 정오/정답 표시(일괄 채점 후)",
  "domain": "FE", "rep": "P", "confidence": 0.78 },
      { "id": "LEARN_STORE_RESULT_SCHEMA_BULK", "type":
  "micro", "name_ko": "bulk 저장 시점/계약 정의(전체 저장)",
  "domain": "FE", "rep": "C", "confidence": 0.76 },
      { "id": "LEARN_LOCALSTORAGE_SAVE_BULK", "type":
  "micro", "name_ko": "일괄 채점 후 submissions를 1회 저장",
  "domain": "FE", "rep": "P", "confidence": 0.8 },
      { "id": "LEARN_LOCALSTORAGE_VALIDATE_SHAPE", "type":
  "micro", "name_ko": "복원 데이터 파싱/shape validate",
  "domain": "FE", "rep": "C", "confidence": 0.78 },
      { "id": "LEARN_LOCALSTORAGE_RESTORE_BULK", "type":
  "micro", "name_ko": "재진입/새로고침 시 답안/결과 복원",
  "domain": "FE", "rep": "P", "confidence": 0.78 },
      { "id": "LEARN_LOCALSTORAGE_MIGRATION_LEGACY_PARTIAL",
  "type": "micro", "name_ko": "legacy partial(submissions 일
  부) 처리 정책", "domain": "FE", "rep": "C", "confidence":
  0.72 },
      { "id": "LEARN_RESET_CLEAR_STORAGE", "type": "micro",
  "name_ko": "다시 풀기: localStorage 키 삭제", "domain":
  "FE", "rep": "P", "confidence": 0.82 },
      { "id": "LEARN_RESET_UI_STATE", "type": "micro",
  "name_ko": "다시 풀기: UI state 리셋", "domain": "FE",
  "rep": "P", "confidence": 0.78 },
      { "id": "LEARN_AFTER_GRADE_EDIT_POLICY", "type":
  "micro", "name_ko": "채점 후 답 수정 정책(결과 초기화/재채
  점)", "domain": "UX", "rep": "C", "confidence": 0.74 }
    ],
    "merge_aliases": [],
    "add_edges": [
      { "from":
  "LEARN_DISABLED_USES_NORMALIZE_NUMERIC_INPUT", "to":
  "LEARN_ALL_ANSWERED_NORMALIZED", "type": "requires",
  "confidence": 0.84 },
      { "from": "LEARN_ALL_ANSWERED_NORMALIZED", "to":
  "LEARN_ADD_BULK_GRADE_BUTTON", "type": "requires",
  "confidence": 0.7 },
      { "from": "LEARN_ADD_BULK_GRADE_BUTTON", "to":
  "LEARN_BULK_GRADE_ALL_ACTION", "type": "requires",
  "confidence": 0.78 },
      { "from": "LEARN_BULK_GRADE_ALL_ACTION", "to":
  "LEARN_BUILD_RESULT_MAP", "type": "requires",
  "confidence": 0.78 },
      { "from": "LEARN_BULK_GRADE_ALL_ACTION", "to":
  "LEARN_GRADED_STATE_FLAG", "type": "requires",
  "confidence": 0.72 },
      { "from": "LEARN_BUILD_RESULT_MAP", "to":
  "LEARN_SCORE_SUMMARY_CALC", "type": "requires",
  "confidence": 0.75 },
      { "from": "LEARN_BUILD_RESULT_MAP", "to":
  "LEARN_SHOW_PER_PROBLEM_RESULT", "type": "requires",
  "confidence": 0.78 },
      { "from": "LEARN_GRADED_STATE_FLAG", "to":
  "LEARN_SCORE_AND_RESULT_GATING", "type": "requires",
  "confidence": 0.76 },
      { "from": "LEARN_STORE_RESULT_SCHEMA_BULK", "to":
  "LEARN_LOCALSTORAGE_SAVE_BULK", "type": "requires",
  "confidence": 0.8 },
      { "from": "LEARN_STORE_RESULT_SCHEMA_BULK", "to":
  "LEARN_LOCALSTORAGE_RESTORE_BULK", "type": "requires",
  "confidence": 0.8 },
      { "from": "LEARN_IDENTIFY_STORAGE_KEY", "to":
  "LEARN_LOCALSTORAGE_SAVE_BULK", "type": "requires",
  "confidence": 0.82 },
      { "from": "LEARN_IDENTIFY_STORAGE_KEY", "to":
  "LEARN_LOCALSTORAGE_RESTORE_BULK", "type": "requires",
  "confidence": 0.82 },
      { "from": "LEARN_IDENTIFY_STORAGE_KEY", "to":
  "LEARN_RESET_CLEAR_STORAGE", "type": "requires",
  "confidence": 0.82 },
      { "from": "LEARN_LOCALSTORAGE_VALIDATE_SHAPE", "to":
  "LEARN_LOCALSTORAGE_RESTORE_BULK", "type": "requires",
  "confidence": 0.78 },
      { "from": "LEARN_RESET_CLEAR_STORAGE", "to":
  "LEARN_RESET_UI_STATE", "type": "requires", "confidence":
  0.78 }
    ],
    "remove_edges": [],
    "notes": [
      { "claim": "LearnPage는 submitProblem으로 문제별 채점
  후 submissions를 localStorage에 merge 저장한다.",
  "reason": "LearnPage.tsx에서 기존 submissions와 병합해
  setItem하는 흐름이 확인된다.", "confidence": 0.86 },
      { "claim": "미입력 판정(disabled)은
  normalizeNumericInput(answer).length>0 기준으로 통일해야
  한다.", "reason": "grading.ts가 normalizeNumericInput을 사
  용하므로 원문 기준 판정은 불일치를 만든다.", "confidence":
  0.84 },
      { "claim": "점수/정답 노출은 hasGraded로 게이트해야 채
  점 전 0/N 및 partial 노출 혼선을 줄인다.", "reason": "현재
  score는 problems가 있으면 채점 전에도 0/N이 표시될 수 있
  다.", "confidence": 0.74 },
      { "claim": "legacy partial 처리는 조건부 정책이며
  restore에 과잉 잠금(requires)으로 고정하지 않는 편이 안전
  하다.", "reason": "partial은 legacy 데이터가 존재할 때만
  필요하고 reviewer도 requires 과잉 잠금을 지적했다.",
  "confidence": 0.72 },
      { "claim": "per-problem 제출 제거는 bulk 경로(버튼/
  gradeAll/저장)가 준비된 뒤 수행해야 한다.", "reason": "제
  거가 먼저면 사용자가 채점/저장할 경로가 사라져 기능 공백이
  생긴다.", "confidence": 0.72 },
      { "claim": "Graph Patch JSON은 strict JSON(json.loads
  통과)으로 문자열 내부 줄바꿈 없이 출력되어야 한다.",
  "reason": "문자열 줄바꿈은 파싱 실패를 유발해 결합 패치 검
  증/병합을 중단시킨다.", "confidence": 0.9 }
    ]
  }

  ## Standards Tags (내부 태그)

  - 추가된 태그: LEARN_MAP_CURRENT_SUBMIT_FLOW,
    LEARN_IDENTIFY_STORAGE_KEY,
    LEARN_DOCUMENT_STORED_RESULT_SCHEMA,
    LEARN_REMOVE_PER_PROBLEM_SUBMIT,
    LEARN_ADD_BULK_GRADE_BUTTON,
    LEARN_DISABLED_USES_NORMALIZE_NUMERIC_INPUT,
    LEARN_ALL_ANSWERED_NORMALIZED,
    LEARN_DISABLED_EDGECASES_12,
    LEARN_BULK_GRADE_ALL_ACTION, LEARN_BUILD_RESULT_MAP,
    LEARN_GRADED_STATE_FLAG, LEARN_SCORE_SUMMARY_CALC,
    LEARN_SCORE_AND_RESULT_GATING,
    LEARN_SHOW_PER_PROBLEM_RESULT,
    LEARN_STORE_RESULT_SCHEMA_BULK,
    LEARN_LOCALSTORAGE_SAVE_BULK,
    LEARN_LOCALSTORAGE_VALIDATE_SHAPE,
    LEARN_LOCALSTORAGE_RESTORE_BULK,
    LEARN_LOCALSTORAGE_MIGRATION_LEGACY_PARTIAL,
    LEARN_RESET_CLEAR_STORAGE, LEARN_RESET_UI_STATE,
    LEARN_AFTER_GRADE_EDIT_POLICY
  - 수정된 태그: (없음)

  [/R1 Coverage Report]

  ###DONE:ff7d0358ad###


› Explain this codebase

  80% context left · ? for shortcuts

