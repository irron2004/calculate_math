# Problem Explanation Spec v1 — `problems_v1.json`의 `explanation`

이 문서는 `curriculum-viewer/public/data/problems_v1.json`에 `explanation` 필드를 도입하기 위한 **포맷/렌더링 정책/MVP 범위**를 고정한다.

## 1) 필드 타입/형식 (AC)

### 1.1 스키마

- `explanation`은 **optional** 필드다.
- 타입: `string` (UTF-8)
- 포맷: **plain text**(Markdown 미사용)
  - 줄바꿈은 `\n`로 표현한다.
  - UI는 줄바꿈을 보존하여 렌더링한다(예: `white-space: pre-wrap` 또는 `\n` split 렌더).

문제 객체 예시:
```json
{
  "id": "g1-na-001-1",
  "type": "numeric",
  "prompt": "...",
  "answer": "10",
  "explanation": "풀이:\n9 + 1 = 10\n따라서 정답은 10입니다."
}
```

### 1.2 누락/빈 값 UI 정책 (AC)

`explanation`이 없거나, `""`이거나, 공백만 있는 경우:
- 기본: **해설 UI(버튼/섹션)를 노출하지 않는다**.
- 채점 결과 영역에는 별도 에러/경고를 표시하지 않는다(학습 흐름 방해 금지).

## 2) MVP 적용 범위 (AC)

MVP는 다음을 최소 범위로 한다.

- 적용 단위: `problems_v1.json` 내 문제 객체 단위
- 최소 적용 수: **5문항 이상**
- 샘플(현재 v1에 포함된 해설 샘플):
  - `g1-na-001-1` (MATH-2022-G-1-NA-001)
  - `g1-na-001-2` (MATH-2022-G-1-NA-001)
  - `g1-na-002-1` (MATH-2022-G-1-NA-002)
  - `na-2-001-1` (MATH-2022-G-2-NA-001)
  - `g4-na-002-1` (MATH-2022-G-4-NA-002)

## 3) 수식/특수문자 표현 가이드 (AC)

### 3.1 기본 원칙

- HTML을 사용하지 않는다(plain text만).
- 특수문자는 **유니코드 문자 그대로**를 사용한다(예: `×`, `÷`, `≤`, `≥`, `≠`, `□`).
- 길이는 1문항당 **800자 이내**를 권장한다(모바일/카드 UI 고려).

### 3.2 숫자/기호 표기

- 곱셈/나눗셈: `×`, `÷` 사용(예: `7 × 8 = 56`)
- 뺄셈/음수: `-` 또는 `−` 중 1개로 통일(권장: `-`)
- 분수: `a/b` 형태(예: `3/7`) 또는 “분자/분모” 용어를 함께 표기
- 소수: `.` 사용(예: `0.25`)
- 천 단위 구분: 입력/표시에는 `1,234`처럼 쉼표 사용 가능(채점 입력은 정규화로 처리됨)

### 3.3 줄바꿈/단계 표시

권장 템플릿:
```
풀이:
1) ...
2) ...
따라서 정답은 ...입니다.
```

## 4) 검증 규칙(체크리스트)

- `explanation`은 string이어야 하며, object/array/null이면 무시한다.
- `explanation.trim().length > 0`인 경우에만 UI를 노출한다.
- JSON escape 준수: 줄바꿈은 `\n`(실제 파일에서는 `\\n`로 저장됨).
