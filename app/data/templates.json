[
  {
    "id": "ALG-AP-S1-TRIPLET",
    "concept": "ALG-AP",
    "step": "S1",
    "lens": ["difference"],
    "representation": "C",
    "context_pack": ["life", "table", "geometry"],
    "parameters": {
      "start": {"type": "int", "min": 2, "max": 6},
      "jump": {"type": "int", "min": 1, "max": 4},
      "steps": {"type": "int", "min": 2, "max": 4}
    },
    "computed_values": {
      "last_value": "start + jump * steps",
      "steps_between": "steps"
    },
    "prompt": {
      "life": "민지는 {start}에서 시작해 {jump}칸씩 {steps}번 앞으로 이동합니다. 마지막에 도착하는 숫자는 얼마인가요?",
      "table": "등차 수열 표에서 시작값 {start}에 {jump}씩 {steps}번 더하면 마지막 칸의 수는 얼마인가요?",
      "geometry": "수직선 위 {start}에서 오른쪽으로 {jump}칸씩 {steps}번 점프하면 어느 위치에 도착하나요?"
    },
    "explanation": {
      "life": "시작값 {start}에 {jump}를 {steps}번 더해 {last_value}에 도착합니다.",
      "table": "표의 각 줄마다 {jump}씩 늘어나므로 {start} + {jump}×{steps} = {last_value}입니다.",
      "geometry": "같은 크기의 점프를 {steps}번 반복하므로 {start} + {jump}×{steps} = {last_value}입니다."
    },
    "answer_expression": "start + jump * steps",
    "distractor_expressions": [
      "start + jump * (steps - 1)",
      "start + jump * (steps + 1)",
      "start + jump"
    ],
    "option_offsets": [],
    "rubric_keywords": ["시작값", "차이", "반복"],
    "difficulty_est": 0.32,
    "tags": {
      "micro_skills": ["수직선 점프", "차이 읽기"],
      "misconceptions": ["마지막 증가를 빼먹음", "배수로 계산함"],
      "time_s": 25
    }
  },
  {
    "id": "ALG-AP-S2-COORD",
    "concept": "ALG-AP",
    "step": "S2",
    "lens": ["difference"],
    "representation": "P",
    "context_pack": ["life", "table", "geometry"],
    "parameters": {
      "a1": {"type": "int", "min": 3, "max": 7},
      "d": {"type": "int", "min": 2, "max": 5},
      "n": {"type": "int", "min": 4, "max": 6}
    },
    "computed_values": {
      "steps_between": "n - 1",
      "nth_value": "a1 + d * (n - 1)",
      "previous_value": "a1 + d * (n - 2)"
    },
    "prompt": {
      "life": "동아리 간식은 첫 번째 모둠에 {a1}개를 두고, 모둠이 늘어날 때마다 {d}개씩 더 놓습니다. {n}번째 모둠의 간식은 몇 개인가요?",
      "table": "등차수열 표에서 첫째항 {a1}, 공차 {d}입니다. {n}번째 항의 값을 구하세요.",
      "geometry": "좌표평면에서 (1, {a1})에서 시작해 기울기 {d}인 점들을 찍습니다. {n}번째 점의 y좌표는 얼마인가요?"
    },
    "explanation": {
      "life": "공차 {d}를 {steps_between}번 더해 {nth_value}개가 됩니다.",
      "table": "{n}번째 항은 a₁ + d(n-1) 이므로 {a1} + {d}×{steps_between} = {nth_value}입니다.",
      "geometry": "기울기가 {d}이므로 x가 {steps_between}만큼 늘면 y도 {d}×{steps_between}만큼 증가하여 {nth_value}가 됩니다."
    },
    "answer_expression": "a1 + d * (n - 1)",
    "distractor_expressions": [
      "a1 + d * n",
      "a1 + d",
      "a1 * d * (n - 1)"
    ],
    "option_offsets": [],
    "rubric_keywords": ["첫째항", "공차", "n-1"],
    "difficulty_est": 0.52,
    "tags": {
      "micro_skills": ["표→식 번역", "기울기 연결"],
      "misconceptions": ["n 대신 n-1을 놓침", "공차를 곱셈으로 처리"],
      "time_s": 35
    }
  },
  {
    "id": "ALG-AP-S3-SUM",
    "concept": "ALG-AP",
    "step": "S3",
    "lens": ["difference"],
    "representation": "A",
    "context_pack": ["life", "table", "geometry"],
    "parameters": {
      "a1": {"type": "int", "min": 3, "max": 6},
      "d": {"type": "int", "min": 1, "max": 4},
      "n": {"type": "int", "min": 4, "max": 6}
    },
    "computed_values": {
      "last_term": "a1 + d * (n - 1)",
      "series_sum": "int(n * (2 * a1 + (n - 1) * d) / 2)",
      "average_term": "(a1 + (a1 + d * (n - 1))) / 2"
    },
    "prompt": {
      "life": "블록을 첫 줄 {a1}개로 시작해 줄마다 {d}개씩 더 놓아 {n}줄을 쌓습니다. 사용한 블록의 총 개수는 얼마인가요?",
      "table": "등차수열 합 Sₙ을 계산하려고 합니다. a₁={a1}, 공차 {d}, 항의 개수 {n}일 때 Sₙ은 얼마인가요?",
      "geometry": "사다리꼴 모델에서 윗변 {a1}, 아랫변 {last_term}, 높이 {n}인 도형의 넓이는 얼마인가요?"
    },
    "explanation": {
      "life": "첫째항과 마지막항의 평균에 항의 개수 {n}을 곱하면 {series_sum}개입니다.",
      "table": "Sₙ = n(2a₁ + (n-1)d)/2 공식을 적용하면 {series_sum}이 됩니다.",
      "geometry": "사다리꼴 넓이는 (윗변+아랫변)/2 × 높이이므로 ({a1}+{last_term})/2 × {n} = {series_sum}입니다."
    },
    "answer_expression": "int(n * (2 * a1 + (n - 1) * d) / 2)",
    "distractor_expressions": [
      "n * (a1 + d * (n - 1))",
      "n * a1",
      "int(n * (a1 + (a1 + d * (n - 2))) / 2)"
    ],
    "option_offsets": [],
    "rubric_keywords": ["합", "공차", "평균"],
    "difficulty_est": 0.7,
    "tags": {
      "micro_skills": ["공식 적용", "사다리꼴 넓이"],
      "misconceptions": ["평균 대신 마지막 항만 사용", "분모 2를 생략"],
      "time_s": 45
    }
  },
  {
    "id": "RAT-PRO-S1-UNIT",
    "concept": "RAT-PRO",
    "step": "S1",
    "lens": ["ratio"],
    "representation": "C",
    "context_pack": ["life", "table", "geometry"],
    "parameters": {
      "unit_ratio": {"type": "choice", "choices": [2, 3, 4, 5]},
      "juice_cups": {"type": "int", "min": 2, "max": 4}
    },
    "computed_values": {
      "water_needed": "unit_ratio * juice_cups"
    },
    "prompt": {
      "life": "레몬청 1컵에 물 {unit_ratio}컵 비율로 음료를 만듭니다. 레몬청 {juice_cups}컵이면 물은 몇 컵 필요할까요?",
      "table": "비율표에 레몬청 1컵 → 물 {unit_ratio}컵이 기록되어 있습니다. 같은 비율로 레몬청 {juice_cups}컵일 때 물의 양은 얼마인가요?",
      "geometry": "좌표평면에서 (레몬청, 물) 점들이 원점을 지나는 직선 위에 있습니다. 레몬청 {juice_cups}컵일 때 물의 양 y는 얼마인가요?"
    },
    "explanation": {
      "life": "레몬청 한 컵마다 물 {unit_ratio}컵이므로 {juice_cups}×{unit_ratio} = {water_needed}입니다.",
      "table": "표의 단위율 {unit_ratio}를 활용해 열을 곱하면 물은 {water_needed}컵입니다.",
      "geometry": "y = {unit_ratio}x 직선에서 x={juice_cups}이면 y={water_needed}입니다."
    },
    "answer_expression": "unit_ratio * juice_cups",
    "distractor_expressions": [
      "unit_ratio + juice_cups",
      "unit_ratio * (juice_cups - 1)",
      "juice_cups"
    ],
    "option_offsets": [],
    "rubric_keywords": ["단위율", "비율", "곱셈"],
    "difficulty_est": 0.35,
    "tags": {
      "micro_skills": ["단위율 계산", "비례식 완성"],
      "misconceptions": ["덧셈으로 비율 처리", "1컵당 양을 잊음"],
      "time_s": 25
    }
  },
  {
    "id": "RAT-PRO-S2-SLOPE",
    "concept": "RAT-PRO",
    "step": "S2",
    "lens": ["ratio"],
    "representation": "P",
    "context_pack": ["life", "table", "geometry"],
    "parameters": {
      "k": {"type": "choice", "choices": [2, 3, 4, 5, 6]},
      "x_value": {"type": "int", "min": 3, "max": 6}
    },
    "computed_values": {
      "y_value": "k * x_value"
    },
    "prompt": {
      "life": "과일청 x컵을 섞었더니 총 양이 {y_value}컵이 되었습니다. 과일청과 총 양은 항상 같은 비율로 섞입니다. 1컵당 비율 k는 얼마인가요?",
      "table": "비율표에 (x, y) = ({x_value}, {y_value})가 기록되어 있습니다. y = kx로 식을 나타낼 때 k 값은 얼마인가요?",
      "geometry": "좌표 ({x_value}, {y_value})가 원점을 지나는 직선 y = kx 위에 있습니다. 기울기 k는 얼마인가요?"
    },
    "explanation": {
      "life": "총 양 {y_value}를 과일청 {x_value}컵으로 나누면 1컵당 {k}컵이 필요합니다.",
      "table": "y = kx에서 k = y/x 이므로 {y_value}/{x_value} = {k}입니다.",
      "geometry": "기울기는 (Δy)/(Δx) 이므로 {y_value}/{x_value} = {k}입니다."
    },
    "answer_expression": "int(y_value / x_value)",
    "distractor_expressions": [
      "y_value / (x_value - 1)",
      "y_value - x_value",
      "x_value / y_value"
    ],
    "option_offsets": [],
    "rubric_keywords": ["기울기", "단위율", "y=kx"],
    "difficulty_est": 0.55,
    "tags": {
      "micro_skills": ["비율식을 식으로 옮기기", "기울기 계산"],
      "misconceptions": ["분모에 x-1 사용", "차이 대신 비율 뺄셈"],
      "time_s": 35
    }
  },
  {
    "id": "RAT-PRO-S3-INVERSE",
    "concept": "RAT-PRO",
    "step": "S3",
    "lens": ["ratio"],
    "representation": "A",
    "context_pack": ["life", "table", "geometry"],
    "parameters": {
      "x1": {"type": "choice", "choices": [2, 3, 4]},
      "y1": {"type": "choice", "choices": [6, 12, 18]},
      "factor": {"type": "choice", "choices": [2, 3]}
    },
    "computed_values": {
      "x2": "x1 * factor",
      "constant": "x1 * y1",
      "result_time": "int(y1 / factor)"
    },
    "prompt": {
      "life": "속력 {x1}km/h로 {y1}시간 이동하면 같은 거리를 갑니다. 같은 거리를 유지하면서 속력을 {x2}km/h로 올리면 시간은 몇 시간이 될까요?",
      "table": "반비례 표에서 x·y = {constant}가 항상 일정합니다. x = {x2}일 때 y 값은 얼마인가요?",
      "geometry": "xy = {constant}인 곡선 위에서 (x₁, y₁) = ({x1}, {y1})를 지납니다. x가 {x2}일 때 y 값은 얼마인가요?"
    },
    "explanation": {
      "life": "거리 {constant}km가 일정하므로 속도가 {factor}배가 되면 시간은 {factor}분의 1이 되어 {result_time}시간입니다.",
      "table": "x·y={constant} 관계에서 y={constant}/{x2} = {result_time}입니다.",
      "geometry": "xy={constant} 곡선에서 x={x2}이면 y={result_time}이 되어 곱이 일정합니다."
    },
    "answer_expression": "int(y1 / factor)",
    "distractor_expressions": [
      "y1 * factor",
      "y1 - factor",
      "int(y1 / (factor + 1))"
    ],
    "option_offsets": [],
    "rubric_keywords": ["반비례", "곱 일정", "역수"],
    "difficulty_est": 0.72,
    "tags": {
      "micro_skills": ["반비례 식 활용", "상수 추적"],
      "misconceptions": ["속력 증가만 곱함", "곱이 일정함을 잊음"],
      "time_s": 40
    }
  },
  {
    "id": "GEO-LIN-S1-GROWTH",
    "concept": "GEO-LIN",
    "step": "S1",
    "lens": ["scale", "difference"],
    "representation": "C",
    "context_pack": ["life", "table", "geometry"],
    "parameters": {
      "start_y": {"type": "int", "min": 2, "max": 5},
      "slope": {"type": "choice", "choices": [1, 2, 3]},
      "step_x": {"type": "int", "min": 2, "max": 4}
    },
    "computed_values": {
      "target_x": "step_x + 1",
      "target_y": "start_y + slope * step_x"
    },
    "prompt": {
      "life": "독서 기록장을 보면 첫날 {start_y}쪽을 읽고, 하루에 {slope}쪽씩 더 읽습니다. {target_x}일째 읽은 쪽수는 몇 쪽인가요?",
      "table": "표에서 x가 1일 때 y={start_y}이고, x가 1씩 늘 때마다 y가 {slope}씩 증가합니다. x={target_x}일 때 y 값은 얼마인가요?",
      "geometry": "좌표 (1, {start_y})를 지나고 기울기 {slope}인 직선 위에서 x={target_x}일 때 y좌표는 얼마인가요?"
    },
    "explanation": {
      "life": "날짜가 {step_x}일 늘어났으니 {slope}×{step_x}만큼 늘어나 {target_y}쪽이 됩니다.",
      "table": "y는 공차 {slope}로 증가하므로 {start_y} + {slope}×{step_x} = {target_y}입니다.",
      "geometry": "기울기 {slope}의 직선에서 x가 {step_x}만큼 증가하면 y도 {slope}×{step_x}만큼 증가해 {target_y}가 됩니다."
    },
    "answer_expression": "start_y + slope * step_x",
    "distractor_expressions": [
      "start_y + slope * (step_x - 1)",
      "slope * target_x",
      "start_y + step_x"
    ],
    "option_offsets": [],
    "rubric_keywords": ["기울기", "증가량", "좌표"],
    "difficulty_est": 0.42,
    "tags": {
      "micro_skills": ["1단위 증가 추적", "좌표 해석"],
      "misconceptions": ["첫 증가량을 빼먹음", "기울기를 y값으로 착각"],
      "time_s": 30
    }
  },
  {
    "id": "GEO-LIN-S2-INTERCEPT",
    "concept": "GEO-LIN",
    "step": "S2",
    "lens": ["scale", "difference"],
    "representation": "P",
    "context_pack": ["life", "table", "geometry"],
    "parameters": {
      "slope": {"type": "choice", "choices": [1, 2, 3, 4]},
      "x_point": {"type": "int", "min": 2, "max": 5},
      "intercept": {"type": "choice", "choices": [-2, -1, 0, 1, 2]}
    },
    "computed_values": {
      "y_point": "slope * x_point + intercept"
    },
    "prompt": {
      "life": "적금 그래프에서 하루당 {slope}천원씩 늘어나고, ( {x_point}, {y_point}) 점이 그래프 위에 있습니다. 이 그래프의 시작 금액(절편)은 얼마인가요?",
      "table": "표에 (x, y) = ({x_point}, {y_point})가 있고 직선의 기울기가 {slope}입니다. y = kx + b에서 b 값은 얼마인가요?",
      "geometry": "좌표 ({x_point}, {y_point})와 기울기 {slope}를 가진 직선의 y절편은 얼마인가요?"
    },
    "explanation": {
      "life": "y = kx + b에서 b = y - kx이므로 {y_point} - {slope}×{x_point} = {intercept}입니다.",
      "table": "기울기 {slope}와 점 ({x_point}, {y_point})를 이용해 y - kx = b를 계산하면 {intercept}입니다.",
      "geometry": "점-기울기 공식을 통해 절편 b = {y_point} - {slope}×{x_point} = {intercept}입니다."
    },
    "answer_expression": "int(y_point - slope * x_point)",
    "distractor_expressions": [
      "slope * x_point - y_point",
      "y_point + slope",
      "slope"
    ],
    "option_offsets": [],
    "rubric_keywords": ["절편", "y = kx + b", "기울기"],
    "difficulty_est": 0.58,
    "tags": {
      "micro_skills": ["점-기울기 변환", "절편 계산"],
      "misconceptions": ["절편을 기울기로 착각", "yx 순서를 뒤바꿈"],
      "time_s": 40
    }
  },
  {
    "id": "GEO-LIN-S3-DRAIN",
    "concept": "GEO-LIN",
    "step": "S3",
    "lens": ["scale", "difference"],
    "representation": "A",
    "context_pack": ["life", "table", "geometry"],
    "parameters": {
      "drain_rate": {"type": "choice", "choices": [3, 4, 5]},
      "intercept_factor": {"type": "choice", "choices": [2, 3, 4]}
    },
    "computed_values": {
      "start_volume": "drain_rate * intercept_factor",
      "time_zero": "intercept_factor"
    },
    "prompt": {
      "life": "물탱크에 {start_volume}L가 있고 매시간 {drain_rate}L씩 빠집니다. 몇 시간 뒤에 물이 모두 비나요?",
      "table": "직선 모델 y = -{drain_rate}x + {start_volume}가 물의 양을 나타냅니다. 물의 양이 0이 되는 x값은 얼마인가요?",
      "geometry": "기울기 -{drain_rate}, 절편 {start_volume}인 직선이 x축과 만나는 점의 x좌표는 얼마인가요?"
    },
    "explanation": {
      "life": "총 양 {start_volume}를 시간당 {drain_rate}씩 빼면 {start_volume}/{drain_rate} = {time_zero}시간 뒤에 0이 됩니다.",
      "table": "0 = -{drain_rate}x + {start_volume}식을 풀면 x = {time_zero}입니다.",
      "geometry": "x축과의 교점은 y=0을 대입해 -{drain_rate}x + {start_volume} = 0을 풀면 x={time_zero}입니다."
    },
    "answer_expression": "intercept_factor",
    "distractor_expressions": [
      "intercept_factor + 1",
      "intercept_factor - 1",
      "drain_rate"
    ],
    "option_offsets": [],
    "rubric_keywords": ["x절편", "선형 모델", "기울기"],
    "difficulty_est": 0.75,
    "tags": {
      "micro_skills": ["x절편 해석", "선형 방정식 풀기"],
      "misconceptions": ["기울기를 답으로 착각", "시간과 양을 뒤바꿈"],
      "time_s": 45
    }
  }
]
