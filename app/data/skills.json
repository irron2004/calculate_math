{
  "version": "2025-10-11",
  "palette": {
    "difference": "#E4572E",
    "accumulation": "#17BEBB",
    "ratio": "#8D99AE",
    "scale": "#2E86AB",
    "random": "#F29E4C",
    "transform": "#6C5CE7",
    "vector": "#2D6A4F"
  },
  "nodes": [
    {
      "id": "num_pv_s1",
      "label": "자리가치·S1",
      "tier": 1,
      "kind": "core",
      "requires": null,
      "xp_per_try": 4,
      "xp_per_correct": 8,
      "xp_to_level": [0, 40, 120, 240],
      "lens": ["transform"],
      "keywords": ["자릿값", "분해", "교환"],
      "micro_skills": ["자릿값읽기"],
      "misconceptions": ["0은 빈칸"]
    },
    {
      "id": "num_pv_s2",
      "label": "자리가치·S2",
      "tier": 1,
      "kind": "core",
      "requires": { "all_of": ["num_pv_s1"], "any_of": [], "min_level": 1 },
      "xp_per_try": 4,
      "xp_per_correct": 8,
      "xp_to_level": [0, 40, 120, 240],
      "lens": ["transform", "accumulation"],
      "keywords": ["친한 수", "표↔말"],
      "micro_skills": ["표전환"],
      "misconceptions": ["보정하면 값 변화"]
    },
    {
      "id": "num_pv_s3",
      "label": "자리가치·S3",
      "tier": 1,
      "kind": "core",
      "requires": { "all_of": ["num_pv_s2"], "any_of": [], "min_level": 1 },
      "xp_per_try": 5,
      "xp_per_correct": 9,
      "xp_to_level": [0, 50, 150, 300],
      "lens": ["transform", "accumulation"],
      "keywords": ["짝보정"],
      "micro_skills": ["짝보정"],
      "misconceptions": ["보정량 상쇄 불가"]
    },
    {
      "id": "add_1d",
      "label": "덧셈(한 자리)",
      "tier": 1,
      "kind": "core",
      "requires": { "all_of": ["num_pv_s2"], "any_of": [], "min_level": 1 },
      "xp_per_try": 4,
      "xp_per_correct": 8,
      "xp_to_level": [0, 40, 120, 240],
      "lens": ["accumulation"],
      "keywords": ["합", "보정"],
      "micro_skills": ["세로셈"],
      "misconceptions": ["이월 누락"]
    },
    {
      "id": "sub_1d",
      "label": "뺄셈(한 자리)",
      "tier": 1,
      "kind": "core",
      "requires": { "all_of": ["num_pv_s2"], "any_of": [], "min_level": 1 },
      "xp_per_try": 4,
      "xp_per_correct": 8,
      "xp_to_level": [0, 40, 120, 240],
      "lens": ["difference"],
      "keywords": ["차"],
      "micro_skills": ["받아내림"],
      "misconceptions": ["자릿수 혼동"]
    },
    {
      "id": "tier1_exam",
      "label": "보스전: 티어1",
      "tier": 1,
      "kind": "boss",
      "requires": { "all_of": ["add_1d", "sub_1d"], "any_of": [], "min_level": 1 },
      "xp_per_try": 0,
      "xp_per_correct": 0,
      "xp_to_level": [0],
      "lens": [],
      "keywords": [],
      "micro_skills": [],
      "misconceptions": []
    },
    {
      "id": "add_2d_nc",
      "label": "덧셈(두 자리·받아올림X)",
      "tier": 2,
      "kind": "core",
      "requires": { "all_of": ["add_1d"], "any_of": [], "min_level": 1 },
      "xp_per_try": 5,
      "xp_per_correct": 10,
      "xp_to_level": [0, 50, 150, 300],
      "lens": ["accumulation"],
      "keywords": ["정렬"],
      "micro_skills": ["부분합"],
      "misconceptions": ["열정렬 오류"]
    },
    {
      "id": "add_2d_c",
      "label": "덧셈(두 자리·받아올림)",
      "tier": 2,
      "kind": "core",
      "requires": { "all_of": ["add_2d_nc"], "any_of": [], "min_level": 1 },
      "xp_per_try": 6,
      "xp_per_correct": 12,
      "xp_to_level": [0, 60, 180, 360],
      "lens": ["accumulation"],
      "keywords": ["이월"],
      "micro_skills": ["받아올림"],
      "misconceptions": ["이월 누락"]
    },
    {
      "id": "mul_table",
      "label": "구구단",
      "tier": 2,
      "kind": "core",
      "requires": { "all_of": ["add_2d_nc"], "any_of": [], "min_level": 1 },
      "xp_per_try": 5,
      "xp_per_correct": 12,
      "xp_to_level": [0, 60, 180, 360],
      "lens": ["scale"],
      "keywords": ["반복덧셈"],
      "micro_skills": ["단위묶음"],
      "misconceptions": ["순서 착각"]
    },
    {
      "id": "div_table",
      "label": "나눗셈 표",
      "tier": 2,
      "kind": "core",
      "requires": { "all_of": ["mul_table"], "any_of": [], "min_level": 1 },
      "xp_per_try": 5,
      "xp_per_correct": 12,
      "xp_to_level": [0, 60, 180, 360],
      "lens": ["ratio"],
      "keywords": ["역연산"],
      "micro_skills": ["몫계산"],
      "misconceptions": ["역연산 인지 부족"]
    },
    {
      "id": "ratio_s1",
      "label": "비율·S1",
      "tier": 3,
      "kind": "core",
      "requires": { "all_of": ["mul_table", "div_table"], "any_of": [], "min_level": 1 },
      "xp_per_try": 6,
      "xp_per_correct": 12,
      "xp_to_level": [0, 60, 180, 360],
      "lens": ["ratio"],
      "keywords": ["단위율"],
      "micro_skills": ["비례식"],
      "misconceptions": ["짝비례 혼동"]
    },
    {
      "id": "ap_s1",
      "label": "등차 수열·S1",
      "tier": 3,
      "kind": "core",
      "requires": { "all_of": ["add_2d_c"], "any_of": [], "min_level": 1 },
      "xp_per_try": 6,
      "xp_per_correct": 12,
      "xp_to_level": [0, 60, 180, 360],
      "lens": ["difference"],
      "keywords": ["공차"],
      "micro_skills": ["다음항"],
      "misconceptions": ["공차 일정성 미이해"]
    },
    {
      "id": "ap_s2",
      "label": "등차 수열·S2",
      "tier": 3,
      "kind": "core",
      "requires": { "all_of": ["ap_s1"], "any_of": [], "min_level": 1 },
      "xp_per_try": 6,
      "xp_per_correct": 12,
      "xp_to_level": [0, 60, 180, 360],
      "lens": ["difference"],
      "keywords": ["일반항"],
      "micro_skills": ["일반항도출"],
      "misconceptions": ["n-1 곱 누락"]
    },
    {
      "id": "linear_s1",
      "label": "1차함수·S1",
      "tier": 3,
      "kind": "core",
      "requires": { "all_of": ["ratio_s1"], "any_of": [], "min_level": 1 },
      "xp_per_try": 6,
      "xp_per_correct": 12,
      "xp_to_level": [0, 60, 180, 360],
      "lens": ["difference"],
      "keywords": ["기울기", "절편"],
      "micro_skills": ["기울기계산"],
      "misconceptions": ["기울기/절편 혼동"]
    },
    {
      "id": "linear_s2",
      "label": "1차함수·S2",
      "tier": 3,
      "kind": "core",
      "requires": { "all_of": ["linear_s1"], "any_of": [], "min_level": 1 },
      "xp_per_try": 6,
      "xp_per_correct": 12,
      "xp_to_level": [0, 60, 180, 360],
      "lens": ["difference"],
      "keywords": ["평행/수직"],
      "micro_skills": ["좌표해석"],
      "misconceptions": ["기울기 부호 혼동"]
    },
    {
      "id": "avg_rate_s1",
      "label": "평균변화율·S1",
      "tier": 4,
      "kind": "core",
      "requires": { "all_of": ["linear_s2"], "any_of": [], "min_level": 1 },
      "xp_per_try": 7,
      "xp_per_correct": 14,
      "xp_to_level": [0, 70, 210, 420],
      "lens": ["difference"],
      "keywords": ["Δy/Δx"],
      "micro_skills": ["구간기울기"],
      "misconceptions": ["y값=속도 착각"]
    },
    {
      "id": "accum_s1",
      "label": "누적합·S1",
      "tier": 4,
      "kind": "core",
      "requires": { "all_of": ["add_2d_c"], "any_of": [], "min_level": 1 },
      "xp_per_try": 7,
      "xp_per_correct": 14,
      "xp_to_level": [0, 70, 210, 420],
      "lens": ["accumulation"],
      "keywords": ["면적", "Σ"],
      "micro_skills": ["막대합"],
      "misconceptions": ["높이합=면적"]
    },
    {
      "id": "int_intro_s1",
      "label": "근사적분·S1",
      "tier": 4,
      "kind": "core",
      "requires": { "all_of": ["avg_rate_s1", "accum_s1"], "any_of": [], "min_level": 1 },
      "xp_per_try": 8,
      "xp_per_correct": 16,
      "xp_to_level": [0, 80, 240, 480],
      "lens": ["accumulation"],
      "keywords": ["사다리꼴근사"],
      "micro_skills": ["근사합"],
      "misconceptions": ["축 단위 무시"]
    }
  ],
  "edges": [
    { "from": "num_pv_s1", "to": "num_pv_s2", "type": "requires", "lens": "transform" },
    { "from": "num_pv_s2", "to": "num_pv_s3", "type": "requires", "lens": "transform" },
    { "from": "num_pv_s2", "to": "add_1d", "type": "requires", "lens": "accumulation" },
    { "from": "num_pv_s2", "to": "sub_1d", "type": "requires", "lens": "difference" },
    { "from": "add_1d", "to": "add_2d_nc", "type": "requires", "lens": "accumulation" },
    { "from": "add_2d_nc", "to": "add_2d_c", "type": "requires", "lens": "accumulation" },
    { "from": "add_2d_nc", "to": "mul_table", "type": "requires", "lens": "scale" },
    { "from": "mul_table", "to": "div_table", "type": "requires", "lens": "ratio" },
    { "from": "mul_table", "to": "ratio_s1", "type": "requires", "lens": "ratio" },
    { "from": "add_2d_c", "to": "ap_s1", "type": "requires", "lens": "difference" },
    { "from": "ap_s1", "to": "ap_s2", "type": "requires", "lens": "difference" },
    { "from": "ratio_s1", "to": "linear_s1", "type": "requires", "lens": "difference" },
    { "from": "linear_s1", "to": "linear_s2", "type": "requires", "lens": "difference" },
    { "from": "linear_s2", "to": "avg_rate_s1", "type": "requires", "lens": "difference" },
    { "from": "add_2d_c", "to": "accum_s1", "type": "requires", "lens": "accumulation" },
    { "from": "avg_rate_s1", "to": "int_intro_s1", "type": "requires", "lens": "difference" },
    { "from": "accum_s1", "to": "int_intro_s1", "type": "requires", "lens": "accumulation" },
    { "from": "add_1d", "to": "tier1_exam", "type": "requires", "lens": "difference" },
    { "from": "sub_1d", "to": "tier1_exam", "type": "requires", "lens": "difference" },
    { "from": "tier1_exam", "to": "add_2d_nc", "type": "enables", "lens": "accumulation" }
  ]
}
