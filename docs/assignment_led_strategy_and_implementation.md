# 초등 온라인 수학 학습 서비스 — 숙제 기반 오픈 전략 & 진단(설문+플레이스먼트) 설계 / 구현 내역

## 0. 문서 목적
이 문서는 다음을 한 번에 정리한다.
- (PO 관점) 커리큘럼이 미완성인 상태에서 “숙제 루프”로 먼저 오픈하는 단계별 전략
- “학생 개별 숙제(맞춤 숙제)”를 위한 **설문(1분) + 진단(3~5분)** 설계안
- 현재 레포(`calculate_math`)에서 반영된 **구현 내역(백엔드/프론트엔드)** 요약

---

## 1. 제품 전략 요약 (사용자 제공 자료 정리)

### 1.1 제품의 핵심 가치(강점)
- **개인화 학습**: AI/데이터 기반으로 약점 진단 → 최적 문제 추천/학습 경로 제안
- **범용 커리큘럼 커버리지**: 학년 경계를 넘어 선행/복습 모두 수용(완성 시 성장 엔진)
- **학습 과정 시각화**: 대시보드/그래프/성취도 등으로 이해도·부모 신뢰 강화
- **게이미피케이션**: 미션/보상/레벨업/뱃지 등으로 학습 동기 부여
- **온라인 접근성**: 시간·장소 제약 없이 이용 가능

### 1.2 잠재 리스크(약점/보완점)
- **교육과정 정합성**(콘텐츠 품질): 학교 학습과 어긋나면 혼란/효과 하락
- **장기 유지율(Retention)**: 아이는 자기관리 한계가 있어 꾸준함이 핵심 리스크
- **효과 입증**: 성적 향상/시험 대비 등 객관 지표로 신뢰를 얻기 어렵다면 전환 저하
- **윤리/컴플라이언스**: 스크린타임, 개인정보/보호자 동의 등 아동 서비스 고려 필요
- **경쟁 심화**: 유사 서비스 대비 지속 차별화 부담

### 1.3 수익화 전략 요약
사용자 제공 보고서 기준 권장 방향은 다음의 “복합 모델”이다.
- **Freemium(B2C 구독) 중심**: 기본은 무료로 유입을 넓히고, 유료에 “명확한 가치”를 둔다.
  - 유료 후보: 무제한/심화, 상세 해설/풀이, 부모 리포트/대시보드, 광고 제거, 패밀리 플랜 등
- **B2B(학원/학교) 병행**: 교사용 대시보드/숙제 배정/성과 리포트로 기관 단위 매출원 확보
- **광고는 보조적·제한적**: 아동 서비스 특성상 몰입 저해/보호 이슈/규제 가능성이 있어 신중하게 운영

### 1.4 유지율/학습효과 관점의 핵심 기능·지표 요약
Stage 0~1에서 특히 중요한 “숙제 루프” 관점의 지표/기능은 아래다.
- 학생 참여 지표: 숙제 수행률(24h), 7일 유지율, DAU/WAU, 스트릭
- 학습효과 지표: 재도전 정답률(오답→정답 개선), 태그별 정확도, 전후 진단 점수 변화
- 부모/교사 지표: 결과 확인률, 주간 리포트 열람률, 피드백 실행률(반려/재배정 등)

### 1.5 출시(Go-to-market) 요약
알파→베타→정식의 구조를 유지하되, 베타부터는 유입 채널을 점진적으로 확장한다.
- 채널: SEO/SEM, SNS/맘카페 체험단, 유튜브/크리에이터, 교사 커뮤니티, 웨비나
- 신뢰 제휴: EBS/출판사/교육기업 등과의 파트너십은 “신뢰 확보”에 기여(시점은 PMF 이후가 현실적)

---

## 2. “커리큘럼 미완성” 상태에서의 최적 오픈 전략(핵심: 숙제 루프)

### 2.1 결론
커리큘럼 완성은 “출시 전제조건”이 아니라 **성장 기능**으로 둔다.  
1차 오픈은 **숙제 기반 개인화 학습(assignment-led learning)**으로 가치를 정의한다.

> 제품 가치를 “완벽한 커리큘럼 지도”가 아니라  
> **‘숙제 → 풀이 → 결과 확인 → 다음 숙제’**가 끊기지 않는 경험으로 고정한다.

### 2.2 단계별 오픈 로드맵(4단계)

#### Stage 0 — 내부 알파: “숙제 루프”만 검증
**목표:** 숙제가 학습 경험으로 성립하는지 확인
- 학생: 숙제 목록 → 풀이 → 제출/채점/오답 확인
- 부모/교사: 결과 확인(누가 했는지/점수/소요시간)
- 최소 기록: 완료 개수/제출 여부

**성공 기준(예시)**
- 10명 기준: 배정 → 24시간 내 수행률 60%+
- 7일 내 재방문 30%+
- 부모/교사 결과 확인 사용률 50%+

#### Stage 1 — 초대형 클로즈드 베타: 동기 장치 추가
**목표:** 꾸준히 풀도록 Retention 장치 부착
- 학생 홈을 “오늘의 숙제” 중심으로
- 스트릭/포인트/뱃지(단순)
- 숙제 완료 칭찬 UX(과하지 않게)
- (가능) 부모/교사용 주간 요약 1페이지

**성공 기준(예시)**
- 숙제 수행률 70%+
- 7일 유지율 35~40%+

#### Stage 2 — 퍼블릭 베타: 커리큘럼 지도는 “부분 공개(Beta)”
**목표:** 유입을 받되, 지도는 1개 트랙만 먼저 공개
- 지도에 “Beta/확장 중” 명시
- 학생은 기본적으로 숙제에서 시작, 지도는 “현 위치 보기” 수준

#### Stage 3 — 정식 런칭: 커리큘럼을 추천 엔진으로 승격
**목표:** 숙제 기반 → 자동 추천/약점 루트/드릴다운으로 진화

---

## 3. 맞춤 숙제를 위한 “시작점 파악” 설계 (설문 + 진단)

### 3.1 PO 원칙
- 설문만으로 레벨을 맞추는 것은 정확도 리스크가 크다(과대/과소평가, 성적 기억 편향).
- MVP는 **설문(1분) + 매우 짧은 진단(3~5분)** 조합이 가장 현실적이다.

### 3.2 1단계: 초간단 설문(1분)
**목표:** 대략적 시작 범위/톤앤매너 설정(민감도 낮은 질문 위주)
- 학년(필수)
- 수학 자신감(이모지 5단계, 선택)
- 최근 어려웠던 것(연산/문장제/도형/분수… 선택)
- 공부 성향(짧게 자주 vs 길게 한번, 선택)

> 성적(점수) 질문은 MVP에서는 제외 또는 옵션으로만.

### 3.3 2단계: 플레이스먼트 테스트(3~5분, 10~15문항)
**목표:** 짧은 시간으로도 “난이도/약점 태그/다음 숙제 템플릿”을 만들 수 있는 데이터 확보
- 형식: 주관식+객관식 혼합, 마지막에 제출(일괄 채점)
- 구성: 단원 몰빵이 아니라 **핵심 스킬 샘플링**

### 3.4 최소 데이터(문제 메타) 권장
맞춤 추천/자동 숙제 생성을 위해 문제에 최소 다음 메타가 필요하다.
- `skillId/nodeId`(스킬 연결)
- `difficulty`(1~5)
- `gradeHint`(대략 학년)
- `subskillTags`(예: `add_carry`, `place_value`, `word_problem`)
- `estimatedTimeSec`(대략)

### 3.5 MVP용 레벨/약점 산출 규칙(단순)
- 전체 정답률로 1차 레벨 상/중/하(또는 상향/하향) 결정
- 태그별 연속 오답/오답 누적으로 `weakTagsTop3` 산출
- 시간(예: 60초 이상) 과다 시 “불안정” 신호로 보조 점수 부여

**저장 출력(학생 프로필)**
- `estimatedLevel` (예: `E3-2`)
- `weakTagsTop3`
- (선택) `recommendedAssignmentTemplate`

---

## 4. 현재 레포 구현 내역 (Assistant 작업 요약)

### 4.1 학생 UX (Stage 0 중심)
- 상단 네비를 학생 관점으로 단순화: **홈 / 숙제 / 지도(Beta)**  
  (`curriculum-viewer/src/components/AppLayout.tsx#L1`)
- 홈(`/dashboard`)을 “오늘의 숙제” 미션 중심으로 개편(메인 CTA: “지금 숙제 풀기”)  
  (`curriculum-viewer/src/pages/DashboardPage.tsx#L1`)
- 숙제함(`/mypage`)을 학생 “숙제함”으로 정리(계정 섹션은 아래로 이동)  
  (`curriculum-viewer/src/pages/MyPage.tsx#L1`)
- 숙제 제출 화면을 “학습 플레이어”로 개편: 한 문제씩 + 진행바 + 메모장 + 첨부 접기  
  (`curriculum-viewer/src/pages/HomeworkSubmitPage.tsx#L1`)

### 4.2 “설문 + 플레이스먼트(3~5분)” 온보딩
- 라우트 추가: `/onboarding`, `/onboarding/placement`, `/onboarding/result`  
  (`curriculum-viewer/src/routes.ts#L1`)
- 설문 페이지(1분): 학년/자신감/어려운 영역/공부 성향  
  (`curriculum-viewer/src/pages/OnboardingSurveyPage.tsx#L1`)
- 진단 페이지(12문항 V1): 태그/난이도 포함, 제출 시 자동 채점 및 레벨/약점 산출 후 서버 저장  
  (`curriculum-viewer/src/pages/PlacementTestPage.tsx#L1`)
- 결과 페이지: 레벨/약점 태그 표시 + “오늘 숙제 시작” CTA  
  (`curriculum-viewer/src/pages/PlacementResultPage.tsx#L1`)

### 4.3 학생 프로필 저장(백엔드)
- DB 테이블 추가: `student_profiles`  
  (`backend/app/db.py#L198`)
- API 추가:
  - 학생 본인 프로필: `GET/POST /api/student/profile`
  - 관리자 학생 목록(프로필 요약 포함): `GET /api/admin/students`  
  (`backend/app/api.py#L380`)

### 4.4 관리자(숙제 배정자) 지원
- 학생 리스트에 **레벨/약점 배지 표시**
- 학생 1명 선택 시 **“추천 숙제 만들기”** 버튼으로 자동 문제 세트 채우기(10문항, V1 라이브러리 기반)  
  (`curriculum-viewer/src/pages/AuthorHomeworkPage.tsx#L1`)

### 4.5 추천/태그 라이브러리(V1, 프론트 단)
- 태그 라벨(한국어): `curriculum-viewer/src/lib/diagnostic/tags.ts#L1`
- 진단 문제 세트(V1): `curriculum-viewer/src/lib/diagnostic/placementQuestions.ts#L1`
- 추천 숙제 생성기(V1): `curriculum-viewer/src/lib/homework/recommendation.ts#L166`

### 4.6 테스트/품질
- 프론트: `curriculum-viewer` 테스트 통과 및 빌드 통과
- 백엔드: 학생 프로필 API 테스트 추가 및 통과  
  (`backend/tests/test_student_profile_api.py#L1`)
- 테스트 환경에서 레이트리밋 비활성화 플래그 추가(`DISABLE_RATE_LIMITS=1`)  
  (`backend/app/main.py#L1`, `backend/tests/conftest.py#L1`)

---

## 5. 현재 범위의 한계(의도적으로 남긴 것)
- 추천 숙제는 **V1 라이브러리(프론트 하드코딩)** 기반(추후 DB/문제은행 연동 필요)
- 온보딩 진단은 **고정 12문항**(추후 난이도 적응형/학년별 세트 분리 가능)
- “숙제 결과의 자동 점수/오답 분석”은 현재 운영 정책(검토/반려)에 맞춰 최소 형태 유지(확장 여지)

---

## 6. 다음 PO/개발 액션 제안(우선순위)
1) (Stage 1) 스트릭/포인트/뱃지 최소 도입 + 제출 성공 축하 UX  
2) 추천 숙제 품질 개선: 학년별 진단 세트/난이도 적응형, 문제 라이브러리 확장  
3) 관리자 화면: 학생 프로필(레벨/약점)으로 필터/정렬 + “추천 숙제 자동 배정” 배치 기능  
4) 커리큘럼은 1개 트랙부터 Beta로 연결(“숙제→데이터→지도 확장” 순서)
