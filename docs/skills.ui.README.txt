skills.ui.json â€” UI projection spec
===================================

This JSON bundles the UI-friendly layout used by `/api/v1/skills/tree`.

Structure
---------
- `version`: inherited from `graph.bipartite.json` with `.ui.v1` suffix.
- `trees`: ordered course groups and metadata used for tabs/filters.
- `nodes`: tiered course-step entries including XP, boss flags, and prerequisites.
- `edges`: simplified ENABLES connections for visual transitions.
- `meta`: provenance (source graph, generation timestamp, fallback reason, etc.).

Generating / refreshing
-----------------------
- Run `python scripts/generate_skill_ui_layout.py --force` after updating `graph.bipartite.json` to rebuild `app/data/skills.ui.json`.
- The script validates the bipartite graph, projects it via `build_skill_tree_projection`, and emits a coarse UI layout (trees/nodes/edges/grid) with metadata describing the source graph and timestamp.
- CI/deploys should invoke the script (without `--force`) to keep packaged assets aligned with the latest graph. The generator refuses to overwrite unless `--force` is provided.

Runtime fallback
----------------
- If `skills.ui.json` is missing or invalid in a deployed environment, the backend derives a temporary layout directly from the bipartite projection so `/api/v1/skills/tree` continues to respond with `graph.meta.fallback_reason` set to `missing_ui_spec` or `invalid_ui_spec`.
- Logs (`calculate_service.api.skills`) surface warning entries whenever the fallback activates so build pipelines can catch packaging regressions early.
