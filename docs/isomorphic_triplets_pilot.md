# 동형 3형제 파일럿 스펙

동일한 수학 구조를 **생활**, **데이터**, **도형** 세 가지 맥락으로 전환하는 파일럿 규칙입니다. 2주 퀵윈 단계에서는 한 구조(등차 수열)를 대상으로 자동 파생을 검증합니다.

## 1. 기본 구조
- 핵심 파라미터: `a1`, `d`, `n`, `context`
- 공통 문항 ID 패턴: `ALG-AP-S1-triplet-{context}`
- 렌즈: 🔺 차분 / 표현: C→P 전환

## 2. 맥락별 변환 규칙
| 맥락 | 시나리오 | 표상 요소 | 반례 카드 포인트 |
|------|----------|------------|-------------------|
| 생활 | 계단 오르기, 간식 나누기 | 일상 텍스트, 수직선 | 공차=첫항 오해 |
| 데이터 | 표 & 그래프 | 표 데이터, 막대그래프 | 불규칙 착각 |
| 도형 | 타일 패턴 | 격자 그림, 면적 | 높이합=면적 오개념 |

## 3. 샘플 JSON
```json
{
  "base_template": "ALG-AP-S1-001",
  "variants": [
    {
      "id": "ALG-AP-S1-triplet-life",
      "ctx": "life",
      "prompt": "지민이는 매일 계단을 오를 때 첫 날 {a1}계단에서 시작해 하루에 {d}계단씩 더 오릅니다. {n}일째에는 몇 계단을 오를까요?",
      "lens": "🔺",
      "rep": "C"
    },
    {
      "id": "ALG-AP-S1-triplet-data",
      "ctx": "data",
      "prompt": "아래 표는 하루 운동량(분)을 나타냅니다. 공백을 채우고 규칙을 설명해 보세요.",
      "table": [[1, "{a1}"], [2, "{a1 + d}"], [3, "?"], [4, "?"]],
      "lens": "🔺",
      "rep": "P"
    },
    {
      "id": "ALG-AP-S1-triplet-geometry",
      "ctx": "geometry",
      "prompt": "정사각형 타일을 한 줄씩 늘어놓을 때, 첫 줄은 {a1}장입니다. 매 줄마다 {d}장씩 늘린다면 {n}번째 줄은 몇 장일까요?",
      "lens": "🔺",
      "rep": "C"
    }
  ]
}
```

## 4. 구현 체크리스트
- [ ] 템플릿 메타(`lens`, `rep`, `ctx`) 반영
- [ ] `scripts/generate_triplets.py`로 NDJSON 입력 → 변환 (`python scripts/generate_triplets.py docs/content_templates.ndjson > triplets.ndjson`)
- [ ] `make_stimulus()`에서 파라미터 바인딩
- [ ] 문제 플레이어에 맥락 표시(이미지/아이콘) 추가
- [ ] 정답/오개념 메시지에 맥락별 힌트 제공

## 5. 향후 확장
- 비율(➗) 및 좌표(🔄) 스레드로 확대
- 자동 반례 카드 생성(오개념 태그 기반)
- 생생한 컨텍스트를 위한 음성/이미지 에셋 연결
