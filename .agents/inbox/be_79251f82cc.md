# Backend Dev Request 79251f82cc

너는 Backend Dev다. 이 리포의 `backend/` 영역(FastAPI/DB)을 중심으로 작업한다.
원칙: **TDD(Red → Green → Refactor)**, 명확한 API 계약, 회귀 방지 테스트.

[티켓 파일]
/mnt/c/Users/irron/Desktop/my/english_egg/tasks/task1/tickets/BE-1.md

위 파일을 직접 읽고, 티켓의 AC/TDD 계획을 따라 구현해라.

[이전 QA 피드백]
- 테스트 실행: cd backend && .venv/bin/python -m pytest -q → 15 passed,
    25 warnings in 8.44s
  - 로그 요약(실패 아님): Pydantic v2 deprecated 경고, httpx app shortcut
    deprecated 경고, datetime.utcnow() deprecated 경고
  - AC1 /health: backend/src/main.py에서 SELECT 1로 DB 체크 후
    {"version", "db_status"} 반환, backend/tests/test_health.py로 200 +
    필드 검증 통과
  - AC2 DATABASE_URL fail-fast/정규화: backend/src/config.py에서 누락 시
    즉시 실패(RuntimeError) + URL 파싱/검증 강화 및 postgresql:///
    sqlite://를 async 드라이버(postgresql+asyncpg://,
    sqlite+aiosqlite://)로 정규화, backend/tests/test_config.py 통과
  - AC3 마이그레이션 CLI: backend/src/cli.py에서 baseline 생성/적용/롤백
    + --env staging 시 STAGING_DATABASE_URL 선택, backend/tests/
    test_migrations_cli.py에서 create/apply/rollback 및 staging 케이스 통
    과
  - AC4 패키지 shim: backend/backend/__init__.py로 cd backend 상태에서
    backend.src.* import 가능, backend/tests/test_package_layout.py 통과
  - 기타: backend/.env.example에 DB 설정 예시 추가, startup 자동 테이블
    생성은 제거된 상태로 보이며(health는 DB 예외에도 200 유지) 운영을 마
    이그레이션 기반으로 유도하는 Dev 요약과 일치

[이전 Reviewer 피드백]
(없음)

해야 할 일:
1) 티켓 AC를 기준으로 “실패하는 테스트(Red)”부터 작성한다.
   - FastAPI라면 `pytest` + `fastapi.testclient`(또는 `httpx`) 기반 테스트를 우선 고려.
2) 최소 구현(Green)으로 통과시킨다.
3) 리팩터(Refactor)로 구조/가독성/에러처리 개선.
4) DB/환경변수/외부 API(OpenAI 등) 의존이 있으면:
   - 테스트 더블/fixture로 격리하거나,
   - 최소한의 통합 테스트 전략을 제시한다.
5) 실행/테스트 방법을 항상 명시한다.

출력 규칙:
- 마지막 출력은 반드시 아래 마커 블록을 포함한다.
- `변경 파일`에는 실제 수정/추가한 파일 경로를 모두 적는다.

###BEGIN:79251f82cc###
[QA 전달]
- 변경 요약:
- 변경 파일:
- 실행 방법:
- 테스트 방법:
- 확인 포인트(AC 매핑):
[/QA 전달]
###DONE:79251f82cc###
